
<!--
title: 终结跨数据中心复制的合规噩梦
cover: https://cdn.thenewstack.io/media/2024/10/acb84668-privacy.jpg
-->

结合过滤功能，跨数据中心复制可以帮助共享数据，同时遵守区域数据本地化法规。

> 译自 [End Compliance Nightmares With Cross Data Center Replication](https://thenewstack.io/end-compliance-nightmares-with-cross-data-center-replication/)，作者 Srinivasan Seshadri。

在确保遵守[数据保护法规](https://thenewstack.io/the-cloud-makes-privacy-and-gdpr-easier-not-harder/)（如 GDPR（通用数据保护条例）和 DPDPA（数字个人数据保护法））的同时，管理跨全球分布式数据中心的数据的复杂性可能令人生畏。这些法规强调数据主权、隐私和本地化，迫使全球企业注意其数据跨境移动的位置和方式。

全球组织需要将数据分布在不同地理位置和可用区，以实现冗余和性能，并在硬件故障或灾难发生时保持业务连续性。最佳实践是应用跨数据中心复制 (XDCR) 功能来同步跨不同位置的分布式数据库。

许多组织通常将数据库复制与安全网关/代理一起使用，该网关/代理会拦截流量并应用符合数据法规的安全控制。虽然直接控制网络流量听起来像个好主意，但网关架构不仅会增加跳数，而且还会很快变成策略配置的噩梦。此外，如果流量出现任何问题，此架构可能还需要额外存储一些内容，并增加存储和延迟开销。

更简化、更低延迟和更高吞吐量的解决方案是选择一个[全球数据库](https://aerospike.com/blog/aerospike-database-7-2/?utm_source=byline&utm_medium=pr&utm_campaign=the%20new%20stack)，该数据库首先过滤数据，然后复制数据。这消除了代理安全网关架构对复制带来的延迟和复杂性。

下面我们将探讨 XDCR 如何利用过滤功能帮助共享数据，同时遵守区域数据本地化法规。

## 为什么数据本地化很重要？

在当今互联互通的世界中，企业通常在多个国家/地区拥有用户和运营。但是，不同的司法管辖区有独特的数据保护要求。两个最重要的法规是 GDPR，它要求欧盟公民的个人数据必须保留在欧盟境内，除非满足跨境数据传输的特定条件，以及 DPDPA，印度新的数据保护法，它对保护印度公民数据施加了类似的数据本地化要求。中国、菲律宾、墨西哥、英国等国家/地区也存在类似的法规。

这些法规旨在通过控制数据流向和流向来确保数据主权，防止滥用或未经授权的访问。对于在多个国家/地区拥有数据中心的公司来说，这在平衡全球数据处理需求（如高可用性和低延迟查询响应）与区域合规要求方面带来了重大挑战。

解决方案在于智能数据复制策略，其中只共享符合要求的数据，而敏感数据保留在收集数据的司法管辖区内。没有强大过滤功能的 XDCR 会导致违反合规性，因此在复制过程中应用过滤器对于实现合规性至关重要。

## 使用 XDCR 和过滤器实现数据本地化合规性

XDCR 与强大的过滤和数据转换方法相结合，可以促进合规性。让我们深入了解如何配置 XDCR 以保持与数据驻留要求的合规性。

XDCR 通常允许在数据库、命名空间或表级别进行数据复制，并且将过滤器纳入其中对于确保数据驻留合规性至关重要。XDCR 过滤器确保只有非敏感数据或允许的[数据在区域之间复制，而受保护的数据](https://thenewstack.io/the-data-protection-challenges-of-kubernetes/)则存储在本地。例如，如果来自欧盟区域的数据包含个人身份信息 (PII)，XDCR 可以过滤掉复制到非欧盟数据中心的敏感字段，从而确保遵守 GDPR。

[支持 XDCR 的数据库](https://aerospike.com/products/database/?utm_source=byline&utm_medium=pr&utm_campaign=the%20new%20stack)支持记录级（行或元组）和属性级（列或字段）过滤，能够选择应复制到其他集群的数据，并将其他数据保留在本地。这对于在复制数据时排除敏感记录和字段（如用户名、地址或付款信息）特别有用。
对复制数据应用的过滤进行强大、精确的配置是与复制相关的关键安全控制。更大的灵活性和配置选项提高了过滤执行数据本地化法规的能力。数据库允许表达复杂的谓词，当用于表达 XDCR 过滤规则时，允许执行各种[策略](https://thenewstack.io/real-time-policy-enforcement-with-governance-as-code/)。强大的解决方案可以根据源集群和目标集群以线速对记录和字段进行切片和切块。访问控制保护源集群和目标集群上的数据，而传输中的数据则被加密。

数据分类是法规遵从的关键机制。在数据库中，基于元数据的标签，例如“公共”、“机密”或“受限”，可用于对每条记录进行分类。这些标签无需在每次写入记录时显式地具体化。相反，这些标签被表达为过滤器，然后 XDCR 实时应用这些过滤器，以确保只有适当的数据类型被复制到某些区域。例如，标记为“公共”的记录可以在所有数据中心之间自由复制，标记为“机密”的记录只能复制到授权的数据中心，而标记为“受限”的记录则完全禁止跨境复制。

使用 XDCR 过滤器的元数据标记是一种强大的组合，使组织能够在保持数据主权控制的同时，仍然允许非敏感数据的移动。

![](https://cdn.thenewstack.io/media/2024/10/5f4d903f-image1-1024x494.png)

考虑一个涉及在欧盟、美国和印度设有数据中心的全球电子商务平台的现实场景：

- **欧盟客户数据**：该平台从欧盟客户收集个人身份信息，例如姓名和地址。为了遵守 GDPR，这些记录仅存储在欧盟数据中心。XDCR 过滤器将任何敏感字段排除在欧盟以外的复制之外，确保遵守 GDPR 数据驻留要求。
- **印度客户数据**：对于印度的客户，敏感数据存储在印度数据中心，符合 DPDPA 的规定。XDCR 配置确保所有敏感字段保持本地化，而非敏感记录则在全球范围内复制，以增强服务。
- **用于分析的汇总数据**：为了支持全球分析，汇总的非敏感数据（例如按区域划分的总销售额）被复制到核心数据中心。这使公司能够在不损害用户隐私的情况下获得洞察力。这些数据可以进一步复制到其他数据中心，用于特定任务，例如查询/报告以及在核心数据中心出现故障时保留副本以进行灾难恢复。

## 结论

跨境运营的组织需要有效的机制来管理全球数据，同时确保遵守 GDPR 和 DPDPA 等区域法规。

具有强大而精确的过滤功能的 XDCR 为这些挑战提供了一种有效的解决方案。通过在复制过程中实施选择性过滤，组织可以确保敏感数据保持本地化，同时仍然在全球范围内共享相关的非敏感信息以进行分析。

通过精心设计的 XDCR 策略，组织可以应对全球数据本地化的复杂性，同时确保数据隐私和法规遵从，从而保持客户信任和运营效率。

*了解 **Aerospike 的跨数据中心复制** (XDR) 如何提供超低延迟、精确控制和高效的数据传输，以增强全球数据性能。*
