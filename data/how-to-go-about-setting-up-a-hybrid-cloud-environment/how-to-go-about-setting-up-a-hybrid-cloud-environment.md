
<!--
title: 如何设置混合云环境
cover: https://cdn.thenewstack.io/media/2024/06/0e0191f8-hybrid-cloud2.jpg
-->

评估组织需求，选择统一控制平面并解决合规性问题，以便做出明智的决策并实施最佳实践。

> 译自 [How to Set Up a Hybrid Cloud Environment](https://thenewstack.io/how-to-go-about-setting-up-a-hybrid-cloud-environment/)，作者 Sooter Saalu。

混合云方法整合了私有云系统、公有云系统甚至内部部署基础设施中的多项服务和架构，使组织能够利用每种解决方案的优势，同时保持对敏感数据和应用程序的控制。然而，虽然这种方法提供了显著的优势，包括提高性能、可扩展性、[安全性](https://thenewstack.io/security/) 和灵活性，但实施起来可能具有挑战性。

混合云方法的成功依赖于定制实施，利用每个系统的优势，同时有效地解决其各自的局限性。每个实施都应针对您组织的目标、现有基础设施和环境的预计工作负载或劳动力需求而独一无二。忽视您业务的独特需求和基础设施会导致不必要的成本和降低效率。

如果您正在考虑设置[混合云环境](https://thenewstack.io/survey-results-show-how-the-hybrid-cloud-is-happening/)，这里有几个因素需要考虑，包括评估组织需求、选择统一控制平面和解决合规性问题，以便做出明智的决策并实施最佳实践。

## 了解您组织的需求

混合云环境为您提供了很大的灵活性，可以根据您的业务和基础设施定制解决方案。但在设置环境之前，您需要评估组织的需求和要求。

### 您的资源需求是什么？

您的计算基础设施需求将决定您需要哪种类型的资源以及您的环境将如何构建。对您的工作负载进行彻底分析，以了解其性能、存储和网络需求。确定哪些工作负载对延迟敏感、需要高吞吐量或需要大量的计算能力。

你的计算基础设施需求将决定你需要的资源类型和你环境的结构。全面分析你的工作负载，理解它们的表现，存储和网络需求。识别哪些工作负载对延迟敏感，需要高吞吐量或需要重大的运算能力。例如，视频流服务所需的计算和存储资源与消息应用程序不同，主要是因为存储和流式传输视频文件需要大量数据。您公司中心位置的内部解决方案需要的网络能力低于应在全球范围内执行的社交媒体平台。

流媒体服务和平台为全球提供内容，是混合云环境的理想用例，因为它们提供了简单的可扩展性和网络交付。例如，TELUS Stream+ 同时使用 Google Cloud 服务和本地技术来提高流媒体性能，降低交付成本并提高扩展灵活性。可以构建和定位新的云资源来满足不断增长的实时需求，从而增强本地基础设施。

### 适用哪些标准和法规？

您的混合云设置需要符合安全、隐私和数据标准。例如，有通用法规，如 GDPR，以及通常处理敏感数据的行业特定法规，如 HIPAA、PCI DSS 和 FERPA。这些合规性要求要求采取严格措施来确保敏感数据受到保护，并且在数据驻留法的情况下，不会跨国界传输。

在设置混合云环境之前，您需要熟悉必须遵守的所有法规，以便您可以有效地将它们纳入您的设置中。除了确定与您的行业相关的法规外，还要确保咨询法律和合规专家并监控法规变更。

敏感数据应被筛选出来并保存在内部部署或私有云平台上。在处理数据时，您还应注意维护隐私和数据主权。维护私有云、公有云和内部部署资源相结合的能力使医疗保健组织和金融公司能够按需获得云可扩展性，同时保持基础设施标准。

### 哪些类型的工作负载将包含在您的混合云设置中？

您组织中的某些操作和工作负载，例如关键或敏感的数据处理任务，需要内部部署或私有云基础设施提供的增强安全性和合规性。然而，其他工作负载，例如需要全球可用性的 Web 应用程序和服务，则受益于公有云部署提供的轻松连接和可访问性。

为了使您的混合环境尽可能高效，您需要确定混合云环境需要支持的不同操作和用例，然后根据需要分配您的云和内部部署资源。根据其重要性对您的工作负载进行分类。例如，具有高可用性、可靠性和性能应优先考虑。评估在每个平台上执行的成本，并探索性能和效率的优势或劣势。

使用混合云环境，您无需将数据工作负载限制在单一数据仓库或将整个操作转移到云中。数据分析公司和以数据为重点的组织利用这种灵活性在云和本地之间移动工作负载，以实现性能、成本和效率。

## 为混合云环境选择云提供商

您选择的云提供商对塑造您的混合环境至关重要。每个提供商都提供不同的功能和集成，这些功能和集成会影响您的环境。如果您正在为混合云设置选择云提供商，则需要考虑几个因素。

### 数据中心位置

虽然许多主要的云提供商在全球多个地区分布有数据中心，但其全球基础设施的范围和覆盖范围各不相同。确保您探索云提供商对您感兴趣的区域的覆盖范围。

您的用户、组织数据和云数据中心之间的距离会导致延迟增加、性能降低和数据传输成本更高，这些成本在高峰流量期间会加剧。您的数据中心位置还会影响数据主权标准和合规性要求，因为某些司法管辖区要求公司在该国境内存储和处理数据。

### 服务兼容性

在选择云提供商之前，您需要考虑现有基础设施及其与任何潜在云提供商的兼容性。选择与您现有服务架构匹配的云提供商可以简化集成、管理和资源使用，同时保持基础设施内的互操作性。

如果某个特定的云平台与您的工具和服务有效集成，或者您的应用程序已经在特定提供商的云资源上运行，那么理想的情况是使用该云提供商。使用本地 Oracle 数据库的组织可能更倾向于 Oracle 云基础设施 (OCI)。

### 供应商锁定

云资源旨在提供灵活性，但混合云环境理想情况下应提供更多选项。不幸的是，随着您的基础设施扩展，您在尝试重构或迁移服务时可能会遇到成本和复杂性方面的挑战，从而可能导致供应商锁定。

在选择云提供商之前，您需要探索可能的退出策略，并仔细查看产品中的细则，例如 [AWS](https://aws.amazon.com/blogs/aws/free-data-transfer-out-to-internet-when-moving-out-of-aws/) 或 [Google Cloud](https://cloud.google.com/exit-cloud) 在离开其云平台时免费出口，探索其合同和法律条款、与其他云提供商的互操作性和兼容性以及技术支持。确保您可以在业务和组织需求发生变化时迁移您的扩展基础设施。

### 业务和竞争格局

鉴于科技公司和云提供商的相互关联性，微软、亚马逊和谷歌等主要云厂商提供并投资于各种领域的广泛产品，这些产品可能是您业务的直接竞争对手。如果您的软件产品将来可能被 [打包为超大规模云服务](https://thenewstack.io/are-cloud-services-the-future-of-open-source/)，那么您的小型企业可能会遇到问题。因此，使用哪个云提供商的决定可能会受到所附加的领域和产品的影响。您可能希望避免向竞争对手（当前或潜在）支付费用，以托管您的软件基础设施的大部分。

大型企业界的例子包括沃尔玛，它已采取措施避免使用其零售竞争对手亚马逊的云服务。这些步骤包括构建 [内部云解决方案](https://www.investopedia.com/news/walmarts-new-weapon-against-amazon-cloud/)，以减少对外部公司的依赖，并在必要时使用 [混合云部署](https://www.bloomberg.com/news/newsletters/2022-07-12/walmart-cloud-weans-itself-off-of-microsoft-azure-google-cloud) 与其他云提供商（包括 Microsoft 和 Google）的服务。另一个亚马逊的巨大竞争对手 Target 采取了 [类似的方法](https://tech.target.com/blog/journey-to-a-hybrid-multi-cloud)。

### 云资源和服务成本

成本始终是选择任何服务或工具的关键因素，但在选择云提供商时尤其相关，因为云服务提供不同的定价模式和数据传输、支持和服务位置的隐藏成本。

[成本优化策略](https://deploy.equinix.com/blog/ways-to-reduce-cloud-hosting-costs-and-their-limits/)用于设置和管理您的混合云环境。一种常见且有效的方法涉及采用以工作负载为中心的方法。对于此方法，您评估您的个人工作负载需求，并探索每个云提供商最经济的部署选择。您可以调查您的公有云、私有云或本地选项中哪些选项在成本、可扩展性和性能等变量方面更有效。

一旦您实施了您首选的成本优化策略，您就可以应用工作负载优化来帮助削减额外成本，同时保持最佳性能。

### 可用存储选项

云提供商的存储包是您应该考虑的另一个因素，因为它们有助于管理您组织在混合环境中的数据。您可以考虑三种不同的存储选项，每种选项都有其自身的优点和缺点。

**公有云存储**提供直接的可扩展性、管理和网络流程，这使其非常适合动态工作负载。但是，在公有云中存储和传输数据时，必须格外小心以确保安全性。您还需要考虑产生的[出口成本](https://thenewstack.io/why-cloud-data-egress-is-expensive/)，即使采用按需付费定价模式也是如此。公有云存储是一种灵活且可扩展的存储选项，提供广泛的可访问性，这对您的工作负载有益。

**私有云存储**为敏感数据提供了更受限制和控制的选项，并增强了对访问权限和安全措施的控制。但是，相对于公有云选项，它需要更多的专业知识来管理，并且前期成本更高。私有云存储非常适合需要云的更大规模但需要针对任何敏感数据增强安全性和合规性的工作负载。

**本地存储**通常是最昂贵的选项（取决于您的需求和设置），因为需要预付物理空间和硬件的成本，以及持续的维护成本。这些成本可能会随着您的扩展工作而增加。但是，对于受高度监管的行业，您的本地存储可以确保更高的性能和有保证的数据主权合规性，具体取决于您的数据驻留要求。本地存储最适合最大程度的控制和性能，尤其是在监管或延迟考虑至关重要的情况下。

除了这三个主要选项之外，您还可以考虑云邻接存储、多云存储和混合云存储服务，这些服务可以增强和扩展混合云环境中的存储。云邻接存储是作为服务在并置数据中心中提供的托管存储，它可以[直接且私密地连接到公有云平台](https://deploy.equinix.com/locations/)。此选项比传统云存储提供更低的延迟、更高的安全性以及更低的出口成本。多云存储提供了更大的灵活性并减少了供应商锁定，但您在集成和管理多个云提供商资源时会面临更大的复杂性。混合云存储可以帮助您平衡本地存储的性能优势和云存储的可扩展性优势。

### 网络性能

通信在您的混合云环境中至关重要，因为云和本地基础设施中的每个组件都需要接收和发送数据消息以进行有效操作。停机或网络中断可能会延迟环境中的同步并导致数据丢失。

确保您优先考虑在您的运营区域内且针对您的给定工作负载具有网络可靠性记录的云提供商。探索带宽和[延迟](https://deploy.equinix.com/blog/explaining-key-network-performance-metrics-latency-vs-throughput/)指标，了解您的云提供商选项，了解它们大规模提供高带宽和低延迟数据传输的能力。您的网络性能将影响混合云环境中的数据传输。高效的网络确保跨云的快速数据同步。

## 使用统一控制平面

一旦您了解了您的组织需求并确定了可以帮助您实现目标的云提供商，您接下来应该考虑管理和维护。拥有一个管理和编排混合云环境中资源的总体框架非常重要，而使用[统一控制平面](https://thenewstack.io/how-kubernetes-is-becoming-the-universal-control-plane-for-distributed-applications/)是实现此目标的最佳方式之一。

统一控制平面可以根据基础设施和混合云环境以不同的方式实现。然而，统一控制平面的主要功能是探索、部署和维护混合云环境组件中的资源。这涉及连接每个组件，收集信息以构建一个整体视角，并获得跨组件执行自动化操作的访问权限。

在混合云环境中，自动化是必要的，因为在每个包含的组件中进行手动干预对于维护操作效率低下。通过自动化，您可以根据工作负载需求动态分配计算、存储和网络资源。您可以自动化安全和合规措施的应用，以及从控制平面执行数据质量和同步流程，最大程度地降低环境中不一致的风险并增强数据完整性。

跨混合环境访问和执行操作的能力使您能够有效地处理混合云设置的复杂性，例如管理和编排任务以及部署和观察软件资源。有云提供商平台（例如 [Microsoft](https://news.microsoft.com/?utm_content=inline+mention) Azure Arc 和 Anthos Multi-Cloud API），它们连接跨云供应商资源和以混合云为重点的管理平台（例如 [VMware](https://tanzu.vmware.com?utm_content=inline+mention) Cloud Foundation），它们可以跨公共和私有云环境自动化和管理资源。这两个选项都提供了一个简化的界面来创建和管理您的资源。

除了这些选项之外，您还可以使用 [Crossplane](https://deploy.equinix.com/blog/crossplane-and-terraform-how-they-differ-and-how-they-can-play-together/) 等工具，它提供了一个集中式控制平面，用于编排混合环境中的应用程序和基础设施。它是为 Kubernetes 编排而构建的，您可以使用 Crossplane 扩展您创建的组件以连接到不同的云并管理您的云和计算资源。Crossplane 能够实现作业和任务的自动化，允许您根据需要使用模板跨平台配置资源。通过更好地了解跨云提供商和环境的资源，您可以集成服务、维护数据同步并抽象工作负载管理和安全强制，从而降低监控多个服务和平台的复杂性。

您还可以使用 API 构建自己的自定义抽象层，以创建针对组织需求构建的统一控制平面。但是，除非您的云需求非常简单，否则构建自己的控制平面将非常困难，并且需要大量的专业知识。

您可以创建自定义自动化脚本或使用基础设施即代码工具，例如 [Red Hat](https://www.openshift.com/try?utm_content=inline+mention) Ansible 和 Terraform，以配置和管理跨混合云环境的资源。

## 结论

混合云环境提供了许多好处，包括根据您的需要扩展和迁移资源的灵活性，同时维护敏感数据和应用程序的安全性，并遵守合规性和监管要求。

在设置混合云环境的过程中，您将面临新的挑战，包括在您可能部署到的区域中不同的法规，例如数据隐私和数据主权法。此外，在没有大量云蔓延和影子 IT 的情况下集成和管理您的广泛云服务和平台至关重要。同样重要的是避免供应商锁定，并确保您可以在没有冲突技术的情况下在云之间自由迁移服务。值得庆幸的是，有一些工具可以帮助您应对这些挑战并有效地管理您的混合云设置。

[Equunix 的专用云](https://deploy.equinix.com/) 服务将按需、API 驱动的云体验带到部署和管理全球混合云环境中。它使您能够连接直接配置到所有主要公共云、回程网络、ISP 和企业客户的完全托管的专用计算和存储基础设施。它使您可以完全控制混合云架构以及数据包在网络上的传输方式。
