<!doctype html><html lang="en"><head><title data-rh="true">The Developer’s Guide to Database Proxies: When to Use Them and How to Create One | by Alex Pliutau | Jul, 2024 | ITNEXT</title><meta data-rh="true" charset="utf-8"/><meta data-rh="true" name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,maximum-scale=1"/><meta data-rh="true" name="theme-color" content="#000000"/><meta data-rh="true" name="twitter:app:name:iphone" content="Medium"/><meta data-rh="true" name="twitter:app:id:iphone" content="828256236"/><meta data-rh="true" property="al:ios:app_name" content="Medium"/><meta data-rh="true" property="al:ios:app_store_id" content="828256236"/><meta data-rh="true" property="al:android:package" content="com.medium.reader"/><meta data-rh="true" property="fb:app_id" content="542599432471018"/><meta data-rh="true" property="og:site_name" content="Medium"/><meta data-rh="true" property="og:type" content="article"/><meta data-rh="true" property="article:published_time" content="2024-07-30T09:05:52.716Z"/><meta data-rh="true" name="title" content="The Developer’s Guide to Database Proxies: When to Use Them and How to Create One | by Alex Pliutau | Jul, 2024 | ITNEXT"/><meta data-rh="true" property="og:title" content="The Developer’s Guide to Database Proxies: When to Use Them and How to Create One"/><meta data-rh="true" property="al:android:url" content="medium://p/5b7d5d55d7dd"/><meta data-rh="true" property="al:ios:url" content="medium://p/5b7d5d55d7dd"/><meta data-rh="true" property="al:android:app_name" content="Medium"/><meta data-rh="true" name="description" content="Imagine a complex distributed system that relies heavily on data, where each microservice or a team connects to a database individually (it can be a shared database or specific/isolated ones). Such a…"/><meta data-rh="true" property="og:description" content="Read the original article on packagemain.tech"/><meta data-rh="true" property="og:url" content="https://itnext.io/the-developers-guide-to-database-proxies-when-to-use-them-and-how-to-create-one-5b7d5d55d7dd"/><meta data-rh="true" property="al:web:url" content="https://itnext.io/the-developers-guide-to-database-proxies-when-to-use-them-and-how-to-create-one-5b7d5d55d7dd"/><meta data-rh="true" property="og:image" content="https://miro.medium.com/v2/resize:fit:1200/0*LX3rIy93k4PzA0T_.jpeg"/><meta data-rh="true" property="article:author" content="https://medium.com/@pliutau"/><meta data-rh="true" name="author" content="Alex Pliutau"/><meta data-rh="true" name="robots" content="index,follow,max-image-preview:large"/><meta data-rh="true" name="referrer" content="unsafe-url"/><meta data-rh="true" property="twitter:title" content="The Developer’s Guide to Database Proxies: When to Use Them and How to Create One"/><meta data-rh="true" name="twitter:site" content="@itnext_io"/><meta data-rh="true" name="twitter:app:url:iphone" content="medium://p/5b7d5d55d7dd"/><meta data-rh="true" property="twitter:description" content="Read the original article on packagemain.tech"/><meta data-rh="true" name="twitter:image:src" content="https://miro.medium.com/v2/resize:fit:1200/0*LX3rIy93k4PzA0T_.jpeg"/><meta data-rh="true" name="twitter:card" content="summary_large_image"/><meta data-rh="true" name="twitter:creator" content="@pliutau"/><meta data-rh="true" name="twitter:label1" content="Reading time"/><meta data-rh="true" name="twitter:data1" content="6 min read"/><link data-rh="true" rel="icon" href="https://miro.medium.com/v2/resize:fill:256:256/1*SiXeRxgOt0pAYlYhwZIu3g.png"/><link data-rh="true" rel="search" type="application/opensearchdescription+xml" title="Medium" href="/osd.xml"/><link data-rh="true" rel="apple-touch-icon" sizes="152x152" href="https://miro.medium.com/v2/resize:fill:152:152/1*sHhtYhaCe2Uc3IU0IgKwIQ.png"/><link data-rh="true" rel="apple-touch-icon" sizes="120x120" href="https://miro.medium.com/v2/resize:fill:120:120/1*sHhtYhaCe2Uc3IU0IgKwIQ.png"/><link data-rh="true" rel="apple-touch-icon" sizes="76x76" href="https://miro.medium.com/v2/resize:fill:76:76/1*sHhtYhaCe2Uc3IU0IgKwIQ.png"/><link data-rh="true" rel="apple-touch-icon" sizes="60x60" href="https://miro.medium.com/v2/resize:fill:60:60/1*sHhtYhaCe2Uc3IU0IgKwIQ.png"/><link data-rh="true" rel="mask-icon" href="https://cdn-static-1.medium.com/_/fp/icons/Medium-Avatar-500x500.svg" color="#171717"/><link data-rh="true" id="glyph_preload_link" rel="preload" as="style" type="text/css" href="https://glyph.medium.com/css/unbound.css"/><link data-rh="true" id="glyph_link" rel="stylesheet" type="text/css" href="https://glyph.medium.com/css/unbound.css"/><link data-rh="true" rel="author" href="https://medium.com/@pliutau"/><link data-rh="true" rel="canonical" href="https://itnext.io/the-developers-guide-to-database-proxies-when-to-use-them-and-how-to-create-one-5b7d5d55d7dd"/><link data-rh="true" rel="alternate" href="android-app://com.medium.reader/https/medium.com/p/5b7d5d55d7dd"/><script data-rh="true" type="application/ld+json">{"@context":"http:\u002F\u002Fschema.org","@type":"NewsArticle","image":["https:\u002F\u002Fmiro.medium.com\u002Fv2\u002Fresize:fit:1200\u002F0*LX3rIy93k4PzA0T_.jpeg"],"url":"https:\u002F\u002Fitnext.io\u002Fthe-developers-guide-to-database-proxies-when-to-use-them-and-how-to-create-one-5b7d5d55d7dd","dateCreated":"2024-07-30T08:50:04.855Z","datePublished":"2024-07-30T08:50:04.855Z","dateModified":"2024-07-31T05:20:18.255Z","headline":"The Developer’s Guide to Database Proxies: When to Use Them and How to Create One","name":"The Developer’s Guide to Database Proxies: When to Use Them and How to Create One","description":"Imagine a complex distributed system that relies heavily on data, where each microservice or a team connects to a database individually (it can be a shared database or specific\u002Fisolated ones). Such a…","identifier":"5b7d5d55d7dd","author":{"@type":"Person","name":"Alex Pliutau","url":"https:\u002F\u002Fitnext.io\u002F@pliutau"},"creator":["Alex Pliutau"],"publisher":{"@type":"Organization","name":"ITNEXT","url":"itnext.io","logo":{"@type":"ImageObject","width":315,"height":60,"url":"https:\u002F\u002Fmiro.medium.com\u002Fv2\u002Fresize:fit:630\u002F1*jWhTrIoYwTUdKuVXycqAaw.png"}},"mainEntityOfPage":"https:\u002F\u002Fitnext.io\u002Fthe-developers-guide-to-database-proxies-when-to-use-them-and-how-to-create-one-5b7d5d55d7dd"}</script><style type="text/css" data-fela-rehydration="516" data-fela-type="STATIC">html{box-sizing:border-box;-webkit-text-size-adjust:100%}*, *:before, *:after{box-sizing:inherit}body{margin:0;padding:0;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;color:rgba(0,0,0,0.8);position:relative;min-height:100vh}h1, h2, h3, h4, h5, h6, dl, dd, ol, ul, menu, figure, blockquote, p, pre, form{margin:0}menu, ol, ul{padding:0;list-style:none;list-style-image:none}main{display:block}a{color:inherit;text-decoration:none}a, button, input{-webkit-tap-highlight-color:transparent}img, svg{vertical-align:middle}button{background:transparent;overflow:visible}button, input, optgroup, select, textarea{margin:0}:root{--reach-tabs:1;--reach-menu-button:1}#speechify-root{font-family:Sohne, sans-serif}div[data-popper-reference-hidden="true"]{visibility:hidden;pointer-events:none}.grecaptcha-badge{visibility:hidden}
/*XCode style (c) Angel Garcia <angelgarcia.mail@gmail.com>*/.hljs {background: #fff;color: black;
}/* Gray DOCTYPE selectors like WebKit */
.xml .hljs-meta {color: #c0c0c0;
}.hljs-comment,
.hljs-quote {color: #007400;
}.hljs-tag,
.hljs-attribute,
.hljs-keyword,
.hljs-selector-tag,
.hljs-literal,
.hljs-name {color: #aa0d91;
}.hljs-variable,
.hljs-template-variable {color: #3F6E74;
}.hljs-code,
.hljs-string,
.hljs-meta .hljs-string {color: #c41a16;
}.hljs-regexp,
.hljs-link {color: #0E0EFF;
}.hljs-title,
.hljs-symbol,
.hljs-bullet,
.hljs-number {color: #1c00cf;
}.hljs-section,
.hljs-meta {color: #643820;
}.hljs-title.class_,
.hljs-class .hljs-title,
.hljs-type,
.hljs-built_in,
.hljs-params {color: #5c2699;
}.hljs-attr {color: #836C28;
}.hljs-subst {color: #000;
}.hljs-formula {background-color: #eee;font-style: italic;
}.hljs-addition {background-color: #baeeba;
}.hljs-deletion {background-color: #ffc8bd;
}.hljs-selector-id,
.hljs-selector-class {color: #9b703f;
}.hljs-doctag,
.hljs-strong {font-weight: bold;
}.hljs-emphasis {font-style: italic;
}
</style><style type="text/css" data-fela-rehydration="516" data-fela-type="KEYFRAME">@-webkit-keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}@-moz-keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}@keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}</style><style type="text/css" data-fela-rehydration="516" data-fela-type="RULE">.a{font-family:medium-content-sans-serif-font, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif}.b{font-weight:400}.c{background-color:rgba(255, 255, 255, 1)}.l{display:block}.m{position:sticky}.n{top:0}.o{z-index:500}.p{padding:0 24px}.q{align-items:center}.r{border-bottom:solid 1px #F2F2F2}.y{height:41px}.z{line-height:20px}.ab{display:flex}.ac{height:57px}.ae{flex:1 0 auto}.af{color:inherit}.ag{fill:inherit}.ah{font-size:inherit}.ai{border:inherit}.aj{font-family:inherit}.ak{letter-spacing:inherit}.al{font-weight:inherit}.am{padding:0}.an{margin:0}.ao{cursor:pointer}.ap:disabled{cursor:not-allowed}.aq:disabled{color:#6B6B6B}.ar:disabled{fill:#6B6B6B}.au path{fill:#242424}.av{height:27px}.aw{margin-left:16px}.ax{border:none}.ay{border-radius:20px}.az{width:240px}.ba{background:#F9F9F9}.bb path{fill:#6B6B6B}.bd{outline:none}.be{font-family:sohne, "Helvetica Neue", Helvetica, Arial, sans-serif}.bf{font-size:14px}.bg{width:100%}.bh{padding:10px 20px 10px 0}.bi{background-color:transparent}.bj{color:#242424}.bk::placeholder{color:#6B6B6B}.bl{display:inline-block}.bm{margin-left:12px}.bn{margin-right:12px}.bo{border-radius:4px}.bp{margin-left:24px}.bq{height:24px}.bw{background-color:#F9F9F9}.bx{border-radius:50%}.by{height:32px}.bz{width:32px}.ca{justify-content:center}.cg{max-width:680px}.ch{min-width:0}.ci{animation:k1 1.2s ease-in-out infinite}.cj{height:100vh}.ck{margin-bottom:16px}.cl{margin-top:48px}.cm{align-items:flex-start}.cn{flex-direction:column}.co{justify-content:space-between}.cp{margin-bottom:24px}.cv{width:80%}.cw{background-color:#F2F2F2}.dc{height:44px}.dd{width:44px}.de{margin:auto 0}.df{margin-bottom:4px}.dg{height:16px}.dh{width:120px}.di{width:80px}.do{margin-bottom:8px}.dp{width:96%}.dq{width:98%}.dr{width:81%}.ds{margin-left:8px}.dt{color:#6B6B6B}.du{font-size:13px}.dv{height:100%}.eo{color:#FFFFFF}.ep{fill:#FFFFFF}.eq{background:rgba(63, 141, 206, 1)}.er{border-color:rgba(63, 141, 206, 1)}.ev:disabled{cursor:inherit !important}.ew:disabled{opacity:0.3}.ex:disabled:hover{background:rgba(63, 141, 206, 1)}.ey:disabled:hover{border-color:rgba(63, 141, 206, 1)}.ez{border-radius:99em}.fa{border-width:1px}.fb{border-style:solid}.fc{box-sizing:border-box}.fd{text-decoration:none}.fe{text-align:center}.fh{margin-right:32px}.fi{position:relative}.fj{fill:#6B6B6B}.fm{background:transparent}.fn svg{margin-left:4px}.fo svg{fill:#6B6B6B}.fq{box-shadow:inset 0 0 0 1px rgba(0, 0, 0, 0.05)}.fr{position:absolute}.fy{margin:0 24px}.gc{background:rgba(255, 255, 255, 1)}.gd{border:1px solid #F2F2F2}.ge{box-shadow:0 1px 4px #F2F2F2}.gf{max-height:100vh}.gg{overflow-y:auto}.gh{left:0}.gi{top:calc(100vh + 100px)}.gj{bottom:calc(100vh + 100px)}.gk{width:10px}.gl{pointer-events:none}.gm{word-break:break-word}.gn{word-wrap:break-word}.go:after{display:block}.gp:after{content:""}.gq:after{clear:both}.gr{line-height:1.23}.gs{letter-spacing:0}.gt{font-style:normal}.gu{font-weight:700}.hz{align-items:baseline}.ia{width:48px}.ib{height:48px}.ic{border:2px solid rgba(255, 255, 255, 1)}.id{z-index:0}.ie{box-shadow:none}.if{border:1px solid rgba(0, 0, 0, 0.05)}.ig{margin-left:-12px}.ih{width:28px}.ii{height:28px}.ij{z-index:1}.ik{width:24px}.il{margin-bottom:2px}.im{flex-wrap:nowrap}.in{font-size:16px}.io{line-height:24px}.iq{margin:0 8px}.ir{display:inline}.is{color:rgba(63, 141, 206, 1)}.it{fill:rgba(63, 141, 206, 1)}.iw{flex:0 0 auto}.iz{flex-wrap:wrap}.jc{white-space:pre-wrap}.jd{margin-right:4px}.je{overflow:hidden}.jf{max-height:20px}.jg{text-overflow:ellipsis}.jh{display:-webkit-box}.ji{-webkit-line-clamp:1}.jj{-webkit-box-orient:vertical}.jk{word-break:break-all}.jm{padding-left:8px}.jn{padding-right:8px}.ko> *{flex-shrink:0}.kp{overflow-x:scroll}.kq::-webkit-scrollbar{display:none}.kr{scrollbar-width:none}.ks{-ms-overflow-style:none}.kt{width:74px}.ku{flex-direction:row}.kv{z-index:2}.ky{-webkit-user-select:none}.kz{border:0}.la{fill:rgba(117, 117, 117, 1)}.ld{outline:0}.le{user-select:none}.lf> svg{pointer-events:none}.lo{cursor:progress}.lp{opacity:1}.lq{padding:4px 0}.lt{margin-top:0px}.lu{width:16px}.lw{display:inline-flex}.mc{max-width:100%}.md{padding:8px 2px}.me svg{color:#6B6B6B}.mv{margin-left:auto}.mw{margin-right:auto}.mx{max-width:1456px}.nd{clear:both}.nf{cursor:zoom-in}.ng{z-index:auto}.ni{height:auto}.nj{line-height:1.58}.nk{letter-spacing:-0.004em}.nl{font-family:source-serif-pro, Georgia, Cambria, "Times New Roman", Times, serif}.og{margin-bottom:-0.46em}.oh{text-decoration:underline}.oi{line-height:1.12}.oj{letter-spacing:-0.022em}.ok{font-weight:600}.pf{margin-bottom:-0.28em}.pl{list-style-type:disc}.pm{margin-left:30px}.pn{padding-left:0px}.py{overflow-x:auto}.pz{font-family:source-code-pro, Menlo, Monaco, "Courier New", Courier, monospace}.qa{padding:32px}.qb{border:1px solid #E5E5E5}.qc{line-height:1.4}.qd{margin-top:-0.2em}.qe{margin-bottom:-0.2em}.qf{white-space:pre}.qg{min-width:fit-content}.qh{list-style-type:decimal}.qi{box-shadow:inset 3px 0 0 0 #242424}.qj{padding-left:23px}.qk{margin-left:-20px}.ql{font-style:italic}.qm{margin-bottom:26px}.qn{margin-top:6px}.qo{margin-top:8px}.qp{margin-right:8px}.qq{padding:8px 16px}.qr{border-radius:100px}.qs{transition:background 300ms ease}.qu{white-space:nowrap}.qv{border-top:none}.rb{height:52px}.rc{max-height:52px}.rd{box-sizing:content-box}.re{position:static}.rg{max-width:155px}.rm{margin-right:20px}.rs{align-items:flex-end}.rt{width:76px}.ru{height:76px}.rv{border:2px solid #F9F9F9}.rw{height:72px}.rx{width:72px}.ry{margin-left:-16px}.rz{width:36px}.sa{height:36px}.sb{width:auto}.sc{stroke:#F2F2F2}.sd{color:#F2F2F2}.se{fill:#F2F2F2}.sf{background:#F2F2F2}.sg{border-color:#F2F2F2}.sm{font-weight:500}.sn{font-size:24px}.so{line-height:30px}.sp{letter-spacing:-0.016em}.sq{margin-top:16px}.sr{height:0px}.ss{border-bottom:solid 1px #E5E5E5}.st{margin-top:72px}.su{padding:24px 0}.sv{margin-bottom:0px}.sw{margin-right:16px}.as:hover:not(:disabled){color:rgba(25, 25, 25, 1)}.at:hover:not(:disabled){fill:rgba(25, 25, 25, 1)}.es:hover{background:rgba(61, 121, 173, 1)}.et:hover{border-color:rgba(61, 121, 173, 1)}.eu:hover{cursor:pointer}.fk:hover{color:#242424}.fl:hover{fill:#242424}.fp:hover svg{fill:#242424}.fs:hover{background-color:rgba(0, 0, 0, 0.1)}.ip:hover{text-decoration:underline}.iu:hover:not(:disabled){color:rgba(61, 121, 173, 1)}.iv:hover:not(:disabled){fill:rgba(61, 121, 173, 1)}.lc:hover{fill:rgba(8, 8, 8, 1)}.lr:hover{fill:#000000}.ls:hover p{color:#000000}.lv:hover{color:#000000}.mf:hover svg{color:#000000}.qt:hover{background-color:#F2F2F2}.sh:hover{background:#F2F2F2}.si:hover{border-color:#F2F2F2}.sj:hover{cursor:wait}.sk:hover{color:#F2F2F2}.sl:hover{fill:#F2F2F2}.bc:focus-within path{fill:#242424}.lb:focus{fill:rgba(8, 8, 8, 1)}.mg:focus svg{color:#000000}.nh:focus{transform:scale(1.01)}.lg:active{border-style:none}</style><style type="text/css" data-fela-rehydration="516" data-fela-type="RULE" media="all and (min-width: 1080px)">.d{display:none}.bv{width:64px}.cf{margin:0 64px}.cu{height:48px}.db{margin-bottom:52px}.dn{margin-bottom:48px}.ee{font-size:14px}.ef{line-height:20px}.el{font-size:13px}.em{padding:5px 12px}.fg{display:flex}.fx{margin-bottom:68px}.gb{max-width:680px}.hp{font-size:42px}.hq{margin-top:1.19em}.hr{margin-bottom:32px}.hs{line-height:52px}.ht{letter-spacing:-0.011em}.hy{align-items:center}.ka{border-top:solid 1px #F2F2F2}.kb{border-bottom:solid 1px #F2F2F2}.kc{margin:32px 0 0}.kd{padding:3px 8px}.km> *{margin-right:24px}.kn> :last-child{margin-right:0}.ln{margin-top:0px}.mb{margin:0}.nc{margin-top:40px}.oc{font-size:20px}.od{margin-top:2.14em}.oe{line-height:32px}.of{letter-spacing:-0.003em}.pb{font-size:24px}.pc{margin-top:1.95em}.pd{line-height:30px}.pe{letter-spacing:-0.016em}.pk{margin-top:0.94em}.ps{margin-top:1.14em}.px{margin-top:56px}.ra{margin-bottom:88px}.rl{display:inline-block}.rr{padding-top:72px}</style><style type="text/css" data-fela-rehydration="516" data-fela-type="RULE" media="all and (max-width: 1079.98px)">.e{display:none}.lm{margin-top:0px}.rk{display:inline-block}</style><style type="text/css" data-fela-rehydration="516" data-fela-type="RULE" media="all and (max-width: 903.98px)">.f{display:none}.ll{margin-top:0px}.rj{display:inline-block}</style><style type="text/css" data-fela-rehydration="516" data-fela-type="RULE" media="all and (max-width: 727.98px)">.g{display:none}.lj{margin-top:0px}.lk{margin-right:0px}.ri{display:inline-block}</style><style type="text/css" data-fela-rehydration="516" data-fela-type="RULE" media="all and (max-width: 551.98px)">.h{display:none}.s{display:flex}.t{justify-content:space-between}.br{width:24px}.cb{margin:0 24px}.cq{height:40px}.cx{margin-bottom:44px}.dj{margin-bottom:32px}.dw{font-size:13px}.dx{line-height:20px}.eg{padding:0px 8px 1px}.ft{margin-bottom:4px}.gv{font-size:32px}.gw{margin-top:1.01em}.gx{margin-bottom:24px}.gy{line-height:38px}.gz{letter-spacing:-0.014em}.hu{align-items:flex-start}.ix{flex-direction:column}.ja{margin-bottom:2px}.jo{margin:24px -24px 0}.jp{padding:0}.ke> *{margin-right:8px}.kf> :last-child{margin-right:24px}.kw{margin-left:0px}.lh{margin-top:0px}.li{margin-right:0px}.lx{margin:0}.mh{border:1px solid #F2F2F2}.mi{border-radius:99em}.mj{padding:0px 16px 0px 12px}.mk{height:38px}.ml{align-items:center}.mn svg{margin-right:8px}.my{margin-top:32px}.nm{font-size:18px}.nn{margin-top:1.56em}.no{line-height:28px}.np{letter-spacing:-0.003em}.ol{font-size:20px}.om{margin-top:1.2em}.on{line-height:24px}.oo{letter-spacing:0}.pg{margin-top:0.67em}.po{margin-top:1.34em}.pt{margin-top:40px}.qw{margin-bottom:80px}.rh{display:inline-block}.rn{padding-top:48px}.mm:hover{border-color:#E5E5E5}</style><style type="text/css" data-fela-rehydration="516" data-fela-type="RULE" media="all and (min-width: 904px) and (max-width: 1079.98px)">.i{display:none}.bu{width:64px}.ce{margin:0 64px}.ct{height:48px}.da{margin-bottom:52px}.dm{margin-bottom:48px}.ec{font-size:14px}.ed{line-height:20px}.ej{font-size:13px}.ek{padding:5px 12px}.ff{display:flex}.fw{margin-bottom:68px}.ga{max-width:680px}.hk{font-size:42px}.hl{margin-top:1.19em}.hm{margin-bottom:32px}.hn{line-height:52px}.ho{letter-spacing:-0.011em}.hx{align-items:center}.jw{border-top:solid 1px #F2F2F2}.jx{border-bottom:solid 1px #F2F2F2}.jy{margin:32px 0 0}.jz{padding:3px 8px}.kk> *{margin-right:24px}.kl> :last-child{margin-right:0}.ma{margin:0}.nb{margin-top:40px}.ny{font-size:20px}.nz{margin-top:2.14em}.oa{line-height:32px}.ob{letter-spacing:-0.003em}.ox{font-size:24px}.oy{margin-top:1.95em}.oz{line-height:30px}.pa{letter-spacing:-0.016em}.pj{margin-top:0.94em}.pr{margin-top:1.14em}.pw{margin-top:56px}.qz{margin-bottom:88px}.rq{padding-top:72px}</style><style type="text/css" data-fela-rehydration="516" data-fela-type="RULE" media="all and (min-width: 728px) and (max-width: 903.98px)">.j{display:none}.w{display:flex}.x{justify-content:space-between}.bt{width:64px}.cd{margin:0 48px}.cs{height:48px}.cz{margin-bottom:52px}.dl{margin-bottom:48px}.ea{font-size:13px}.eb{line-height:20px}.ei{padding:0px 8px 1px}.fv{margin-bottom:68px}.fz{max-width:680px}.hf{font-size:42px}.hg{margin-top:1.19em}.hh{margin-bottom:32px}.hi{line-height:52px}.hj{letter-spacing:-0.011em}.hw{align-items:center}.js{border-top:solid 1px #F2F2F2}.jt{border-bottom:solid 1px #F2F2F2}.ju{margin:32px 0 0}.jv{padding:3px 8px}.ki> *{margin-right:24px}.kj> :last-child{margin-right:0}.lz{margin:0}.na{margin-top:40px}.nu{font-size:20px}.nv{margin-top:2.14em}.nw{line-height:32px}.nx{letter-spacing:-0.003em}.ot{font-size:24px}.ou{margin-top:1.95em}.ov{line-height:30px}.ow{letter-spacing:-0.016em}.pi{margin-top:0.94em}.pq{margin-top:1.14em}.pv{margin-top:56px}.qy{margin-bottom:88px}.rp{padding-top:72px}</style><style type="text/css" data-fela-rehydration="516" data-fela-type="RULE" media="all and (min-width: 552px) and (max-width: 727.98px)">.k{display:none}.u{display:flex}.v{justify-content:space-between}.bs{width:24px}.cc{margin:0 24px}.cr{height:40px}.cy{margin-bottom:44px}.dk{margin-bottom:32px}.dy{font-size:13px}.dz{line-height:20px}.eh{padding:0px 8px 1px}.fu{margin-bottom:4px}.ha{font-size:32px}.hb{margin-top:1.01em}.hc{margin-bottom:24px}.hd{line-height:38px}.he{letter-spacing:-0.014em}.hv{align-items:flex-start}.iy{flex-direction:column}.jb{margin-bottom:2px}.jq{margin:24px 0 0}.jr{padding:0}.kg> *{margin-right:8px}.kh> :last-child{margin-right:8px}.kx{margin-left:0px}.ly{margin:0}.mo{border:1px solid #F2F2F2}.mp{border-radius:99em}.mq{padding:0px 16px 0px 12px}.mr{height:38px}.ms{align-items:center}.mu svg{margin-right:8px}.mz{margin-top:32px}.nq{font-size:18px}.nr{margin-top:1.56em}.ns{line-height:28px}.nt{letter-spacing:-0.003em}.op{font-size:20px}.oq{margin-top:1.2em}.or{line-height:24px}.os{letter-spacing:0}.ph{margin-top:0.67em}.pp{margin-top:1.34em}.pu{margin-top:40px}.qx{margin-bottom:80px}.ro{padding-top:48px}.mt:hover{border-color:#E5E5E5}</style><style type="text/css" data-fela-rehydration="516" data-fela-type="RULE" media="print">.rf{display:none}</style><style type="text/css" data-fela-rehydration="516" data-fela-type="RULE" media="(orientation: landscape) and (max-width: 903.98px)">.jl{max-height:none}</style><style type="text/css" data-fela-rehydration="516" data-fela-type="RULE" media="(prefers-reduced-motion: no-preference)">.ne{transition:transform 300ms cubic-bezier(0.2, 0, 0.2, 1)}</style></head><body><div id="root"><div class="a b c"><div class="d e f g h i j k"></div><script>document.domain = document.domain;</script><div class="l c"><div class="l m n o c"><div class="p q r s t u v w x i d y z"><a class="dt ag du be ak b am an ao ap aq ar as at s u w i d q dv z" href="https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F5b7d5d55d7dd&amp;%7Efeature=LoOpenInAppButton&amp;%7Echannel=ShowPostUnderCollection&amp;source=---two_column_layout_nav----------------------------------" rel="noopener follow">Open in app<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="none" viewBox="0 0 10 10" class="ds"><path fill="currentColor" d="M.985 8.485a.375.375 0 1 0 .53.53zM8.75 1.25h.375A.375.375 0 0 0 8.75.875zM8.375 6.5a.375.375 0 1 0 .75 0zM3.5.875a.375.375 0 1 0 0 .75zm-1.985 8.14 7.5-7.5-.53-.53-7.5 7.5zm6.86-7.765V6.5h.75V1.25zM3.5 1.625h5.25v-.75H3.5z"></path></svg></a><div class="ab q"><p class="be b dw dx dy dz ea eb ec ed ee ef dt"><span><a class="be b dw dx eg dy dz eh ea eb ei ej ed ek el ef em eo ep eq er es et eu ev ew ex ey ez fa fb fc bl fd fe" data-testid="headerSignUpButton" href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fthe-developers-guide-to-database-proxies-when-to-use-them-and-how-to-create-one-5b7d5d55d7dd&amp;source=post_page---two_column_layout_nav-----------------------global_nav-----------" rel="noopener follow">Sign up</a></span></p><div class="aw l"><p class="be b dw dx dy dz ea eb ec ed ee ef dt"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSignInButton" href="https://medium.com/m/signin?operation=login&amp;redirect=https%3A%2F%2Fitnext.io%2Fthe-developers-guide-to-database-proxies-when-to-use-them-and-how-to-create-one-5b7d5d55d7dd&amp;source=post_page---two_column_layout_nav-----------------------global_nav-----------" rel="noopener follow">Sign in</a></span></p></div></div></div><div class="p q r ab ac"><div class="ab q ae"><a class="af ag ah ai aj ak al am an ao ap aq ar as at ab" aria-label="Homepage" data-testid="headerMediumLogo" href="https://medium.com/?source=---two_column_layout_nav----------------------------------" rel="noopener follow"><svg xmlns="http://www.w3.org/2000/svg" width="120" height="26" fill="none" viewBox="0 0 120 26" class="au av"><path fill="#000" d="m29.57 1.404.036-.008V1.12h-7.27l-6.75 15.979-6.75-15.98H1.003v.278l.035.008c1.327.302 2 .752 2 2.374v18.993c0 1.623-.676 2.073-2.003 2.374L1 25.153v.279h5.315v-.278l-.035-.008c-1.327-.302-2-.751-2-2.374V4.88l8.67 20.552h.492l8.924-21.125V23.24c-.114 1.282-.782 1.677-1.983 1.95l-.036.009v.275h9.259V25.2l-.036-.008c-1.203-.274-1.886-.67-2-1.95l-.006-19.464h.006c0-1.622.674-2.072 2-2.374m4.23 12.582c.15-3.412 1.367-5.875 3.41-5.918.629.01 1.157.219 1.568.62.872.852 1.282 2.634 1.219 5.298zm-.092.962h10.85v-.046c-.03-2.61-.78-4.64-2.228-6.033-1.25-1.204-3.103-1.867-5.048-1.867h-.043c-1.01 0-2.248.246-3.13.693a7.3 7.3 0 0 0-2.623 2.086c-1.185 1.479-1.903 3.477-2.078 5.724a14 14 0 0 0-.04.755q-.007.292-.001.587C29.484 21.934 32.213 26 37.059 26c4.254 0 6.73-3.132 7.348-7.336l-.312-.11c-1.085 2.259-3.034 3.628-5.252 3.461-3.028-.228-5.347-3.32-5.137-7.066m23.122 6.893c-.356.85-1.099 1.319-2.094 1.319s-1.905-.689-2.552-1.939c-.694-1.342-1.06-3.24-1.06-5.487 0-4.678 1.445-7.704 3.68-7.704.937 0 1.674.468 2.026 1.284zm7.198 3.335c-1.327-.316-2-.787-2-2.492V0l-8.062 2.392v.293l.05-.004c1.111-.09 1.866.064 2.304.472.343.32.51.809.51 1.498v3.11C56.033 7.25 55.088 7 53.94 7c-2.326 0-4.453.987-5.986 2.779-1.599 1.867-2.444 4.42-2.444 7.38 0 5.287 2.584 8.84 6.43 8.84 2.25 0 4.06-1.242 4.888-3.336v2.811h7.233v-.29zM70.94 3.085c0-1.65-1.236-2.896-2.875-2.896-1.632 0-2.908 1.272-2.908 2.896s1.278 2.896 2.908 2.896c1.64 0 2.875-1.245 2.875-2.896m1.903 22.092c-1.327-.316-2-.787-2-2.492h-.006V7.055l-7.234 2.092v.284l.043.004c1.566.14 1.994.683 1.994 2.525v13.515h7.24v-.29zm18.536 0c-1.327-.316-2-.787-2-2.492V7.055L82.49 9.078v.285l.04.004c1.28.136 1.65.71 1.65 2.56v9.88c-.426.85-1.227 1.356-2.196 1.39-1.573 0-2.439-1.07-2.439-3.012V7.055l-7.234 2.092v.284l.044.004c1.565.14 1.994.683 1.994 2.525v8.362a9.4 9.4 0 0 0 .15 1.741l.13.57C75.243 24.845 76.848 26 79.362 26c2.129 0 3.996-1.328 4.818-3.405v2.885h7.233v-.291zm28.102.298v-.291l-.035-.009c-1.44-.334-2.001-.964-2.001-2.248V12.295C117.445 8.98 115.597 7 112.5 7c-2.257 0-4.16 1.314-4.893 3.36-.582-2.168-2.257-3.36-4.734-3.36-2.175 0-3.88 1.156-4.612 3.11V7.056l-7.233 2.006v.286l.043.004c1.547.138 1.994.697 1.994 2.492v13.631h6.75v-.29l-.037-.01c-1.148-.271-1.519-.767-1.519-2.04V10.95c.304-.715.917-1.562 2.127-1.562 1.504 0 2.266 1.05 2.266 3.116v12.972h6.751v-.29l-.035-.01c-1.149-.271-1.52-.767-1.52-2.04V12.294a7 7 0 0 0-.095-1.21c.322-.777.97-1.696 2.23-1.696 1.524 0 2.265 1.02 2.265 3.116v12.972z"></path></svg></a><div class="aw h"><div class="ab ax ay az ba q bb bc"><div class="bl" aria-hidden="false" aria-describedby="searchResults" aria-labelledby="searchResults"></div><div class="bm bn ab"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.092 11.06a6.95 6.95 0 1 1 13.9 0 6.95 6.95 0 0 1-13.9 0m6.95-8.05a8.05 8.05 0 1 0 5.13 14.26l3.75 3.75a.56.56 0 1 0 .79-.79l-3.73-3.73A8.05 8.05 0 0 0 11.042 3z" clip-rule="evenodd"></path></svg></div><input role="combobox" aria-controls="searchResults" aria-expanded="false" aria-label="search" data-testid="headerSearchInput" tabindex="0" class="ax bd be bf z bg bh bi bj bk" placeholder="Search" value=""/></div></div></div><div class="h k w ff fg"><div class="fh ab"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerWriteButton" href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fnew-story&amp;source=---two_column_layout_nav-----------------------new_post_topnav-----------" rel="noopener follow"><div class="be b bf z dt fi fj ab q fk fl"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-label="Write"><path fill="currentColor" d="M14 4a.5.5 0 0 0 0-1zm7 6a.5.5 0 0 0-1 0zm-7-7H4v1h10zM3 4v16h1V4zm1 17h16v-1H4zm17-1V10h-1v10zm-1 1a1 1 0 0 0 1-1h-1zM3 20a1 1 0 0 0 1 1v-1zM4 3a1 1 0 0 0-1 1h1z"></path><path stroke="currentColor" d="m17.5 4.5-8.458 8.458a.25.25 0 0 0-.06.098l-.824 2.47a.25.25 0 0 0 .316.316l2.47-.823a.25.25 0 0 0 .098-.06L19.5 6.5m-2-2 2.323-2.323a.25.25 0 0 1 .354 0l1.646 1.646a.25.25 0 0 1 0 .354L19.5 6.5m-2-2 2 2"></path></svg><div class="ds l">Write</div></div></a></span></div></div><div class="k j i d"><div class="fh ab"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSearchButton" href="https://medium.com/search?source=---two_column_layout_nav----------------------------------" rel="noopener follow"><div class="be b bf z dt fi fj ab q fk fl"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-label="Search"><path fill="currentColor" fill-rule="evenodd" d="M4.092 11.06a6.95 6.95 0 1 1 13.9 0 6.95 6.95 0 0 1-13.9 0m6.95-8.05a8.05 8.05 0 1 0 5.13 14.26l3.75 3.75a.56.56 0 1 0 .79-.79l-3.73-3.73A8.05 8.05 0 0 0 11.042 3z" clip-rule="evenodd"></path></svg></div></a></div></div><div class="fh h k j"><div class="ab q"><p class="be b dw dx dy dz ea eb ec ed ee ef dt"><span><a class="be b dw dx eg dy dz eh ea eb ei ej ed ek el ef em eo ep eq er es et eu ev ew ex ey ez fa fb fc bl fd fe" data-testid="headerSignUpButton" href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fthe-developers-guide-to-database-proxies-when-to-use-them-and-how-to-create-one-5b7d5d55d7dd&amp;source=post_page---two_column_layout_nav-----------------------global_nav-----------" rel="noopener follow">Sign up</a></span></p><div class="aw l"><p class="be b dw dx dy dz ea eb ec ed ee ef dt"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSignInButton" href="https://medium.com/m/signin?operation=login&amp;redirect=https%3A%2F%2Fitnext.io%2Fthe-developers-guide-to-database-proxies-when-to-use-them-and-how-to-create-one-5b7d5d55d7dd&amp;source=post_page---two_column_layout_nav-----------------------global_nav-----------" rel="noopener follow">Sign in</a></span></p></div></div></div><div class="l" aria-hidden="false"><button class="ax fm am ab q ao fn fo fp" aria-label="user options menu" data-testid="headerUserIcon"><div class="l fi"><img alt="" class="l fc bx by bz cw" src="https://miro.medium.com/v2/resize:fill:64:64/1*dmbNkD5D-u45r44go_cf0g.png" width="32" height="32" loading="lazy" role="presentation"/><div class="fq bx l by bz fr n ax fs"></div></div></button></div></div></div><div class="l"><div class="ft fu fv fw fx l"><div class="ab ca"><div class="ch bg fy fz ga gb"></div></div><article><div class="l"><div class="l"><span class="l"></span><section><div><div class="fr gh gi gj gk gl"></div><div class="gm gn go gp gq"><div class="ab ca"><div class="ch bg fy fz ga gb"><div><h1 id="5777" class="pw-post-title gr gs gt be gu gv gw gx gy gz ha hb hc hd he hf hg hh hi hj hk hl hm hn ho hp hq hr hs ht bj" data-testid="storyTitle">The Developer’s Guide to Database Proxies: When to Use Them and How to Create One</h1><div><div class="speechify-ignore ab co"><div class="speechify-ignore bg l"><div class="hu hv hw hx hy ab"><div><div class="ab hz"><a href="https://medium.com/@pliutau?source=post_page-----5b7d5d55d7dd--------------------------------" rel="noopener follow"><div><div class="bl" aria-hidden="false"><div class="l ia ib bx ic id"><div class="l fi"><img alt="Alex Pliutau" class="l fc bx dc dd cw" src="https://miro.medium.com/v2/resize:fill:88:88/1*0GZGQK6ulOCFFdWNdu_sPQ.png" width="44" height="44" loading="lazy" data-testid="authorPhoto"/><div class="ie bx l dc dd fr n if fs"></div></div></div></div></div></a><a href="https://itnext.io/?source=post_page-----5b7d5d55d7dd--------------------------------" rel="noopener  ugc nofollow"><div class="ig ab fi"><div><div class="bl" aria-hidden="false"><div class="l ih ii bx ic ij"><div class="l fi"><img alt="ITNEXT" class="l fc bx bq ik cw" src="https://miro.medium.com/v2/resize:fill:48:48/1*yAqDFIFA5F_NXalOJKz4TA.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto"/><div class="ie bx l bq ik fr n if fs"></div></div></div></div></div></div></a></div></div><div class="bm bg l"><div class="ab"><div style="flex:1"><span class="be b bf z bj"><div class="il ab q"><div class="ab q im"><div class="ab q"><div><div class="bl" aria-hidden="false"><p class="be b in io bj"><a class="af ag ah ai aj ak al am an ao ap aq ar ip" data-testid="authorName" href="https://medium.com/@pliutau?source=post_page-----5b7d5d55d7dd--------------------------------" rel="noopener follow">Alex Pliutau</a></p></div></div></div><span class="iq ir" aria-hidden="true"><span class="be b bf z dt">·</span></span><p class="be b in io dt"><span><a class="is it ah ai aj ak al am an ao ap aq ar ew iu iv" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F83ef5b231666&amp;operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fthe-developers-guide-to-database-proxies-when-to-use-them-and-how-to-create-one-5b7d5d55d7dd&amp;user=Alex+Pliutau&amp;userId=83ef5b231666&amp;source=post_page-83ef5b231666----5b7d5d55d7dd---------------------post_header-----------" rel="noopener follow">Follow</a></span></p></div></div></span></div></div><div class="l iw"><span class="be b bf z dt"><div class="ab cm ix iy iz"><div class="ja jb ab"><div class="be b bf z dt ab jc"><span class="jd l iw">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar ip ab q" data-testid="publicationName" href="https://itnext.io/?source=post_page-----5b7d5d55d7dd--------------------------------" rel="noopener  ugc nofollow"><p class="be b bf z je jf jg jh ji jj jk jl bj">ITNEXT</p></a></div></div></div><div class="h k"><span class="iq ir" aria-hidden="true"><span class="be b bf z dt">·</span></span></div></div><span class="be b bf z dt"><div class="ab ae"><span data-testid="storyReadTime">6 min read</span><div class="jm jn l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="be b bf z dt">·</span></span></div>21 hours ago</div></span></div></span></div></div></div><div class="ab co jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd"><div class="h k w ff fg q"><div class="kt l"><div class="ab q ku kv"><div class="pw-multi-vote-icon fi jd kw kx ky"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerClapButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fitnext%2F5b7d5d55d7dd&amp;operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fthe-developers-guide-to-database-proxies-when-to-use-them-and-how-to-create-one-5b7d5d55d7dd&amp;user=Alex+Pliutau&amp;userId=83ef5b231666&amp;source=-----5b7d5d55d7dd---------------------clap_footer-----------" rel="noopener follow"><div><div class="bl" aria-hidden="false"><div class="kz ao la lb lc ld am le lf lg ky"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM13.916 3.953l1.523-2.112-1.184-.39zM8.589 1.84l1.522 2.112-.337-2.501zM18.523 18.92c-.86.86-1.75 1.246-2.62 1.33a6 6 0 0 0 .407-.372c2.388-2.389 2.86-4.951 1.399-7.623l-.912-1.603-.79-1.672c-.26-.56-.194-.98.203-1.288a.7.7 0 0 1 .546-.132c.283.046.546.231.728.5l2.363 4.157c.976 1.624 1.141 4.237-1.324 6.702m-10.999-.438L3.37 14.328a.828.828 0 0 1 .585-1.408.83.83 0 0 1 .585.242l2.158 2.157a.365.365 0 0 0 .516-.516l-2.157-2.158-1.449-1.449a.826.826 0 0 1 1.167-1.17l3.438 3.44a.363.363 0 0 0 .516 0 .364.364 0 0 0 0-.516L5.293 9.513l-.97-.97a.826.826 0 0 1 0-1.166.84.84 0 0 1 1.167 0l.97.968 3.437 3.436a.36.36 0 0 0 .517 0 .366.366 0 0 0 0-.516L6.977 7.83a.82.82 0 0 1-.241-.584.82.82 0 0 1 .824-.826c.219 0 .43.087.584.242l5.787 5.787a.366.366 0 0 0 .587-.415l-1.117-2.363c-.26-.56-.194-.98.204-1.289a.7.7 0 0 1 .546-.132c.283.046.545.232.727.501l2.193 3.86c1.302 2.38.883 4.59-1.277 6.75-1.156 1.156-2.602 1.627-4.19 1.367-1.418-.236-2.866-1.033-4.079-2.246M10.75 5.971l2.12 2.12c-.41.502-.465 1.17-.128 1.89l.22.465-3.523-3.523a.8.8 0 0 1-.097-.368c0-.22.086-.428.241-.584a.847.847 0 0 1 1.167 0m7.355 1.705c-.31-.461-.746-.758-1.23-.837a1.44 1.44 0 0 0-1.11.275c-.312.24-.505.543-.59.881a1.74 1.74 0 0 0-.906-.465 1.47 1.47 0 0 0-.82.106l-2.182-2.182a1.56 1.56 0 0 0-2.2 0 1.54 1.54 0 0 0-.396.701 1.56 1.56 0 0 0-2.21-.01 1.55 1.55 0 0 0-.416.753c-.624-.624-1.649-.624-2.237-.037a1.557 1.557 0 0 0 0 2.2c-.239.1-.501.238-.715.453a1.56 1.56 0 0 0 0 2.2l.516.515a1.556 1.556 0 0 0-.753 2.615L7.01 19c1.32 1.319 2.909 2.189 4.475 2.449q.482.08.971.08c.85 0 1.653-.198 2.393-.579.231.033.46.054.686.054 1.266 0 2.457-.52 3.505-1.567 2.763-2.763 2.552-5.734 1.439-7.586z" clip-rule="evenodd"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l lh li lj lk ll lm ln"><p class="be b du z dt"><span class="lo">--</span></p></div></div></div><div><div class="bl" aria-hidden="false"><button class="ao kz lp lq ab q fj lr ls" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="lt"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"></path></svg></button></div></div></div><div class="ab q ke kf kg kh ki kj kk kl km kn ko kp kq kr ks"><div class="lu k j i d"></div><div class="h k"><div><div class="bl" aria-hidden="false"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerBookmarkButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F5b7d5d55d7dd&amp;operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fthe-developers-guide-to-database-proxies-when-to-use-them-and-how-to-create-one-5b7d5d55d7dd&amp;source=-----5b7d5d55d7dd---------------------bookmark_footer-----------" rel="noopener follow"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none" viewBox="0 0 25 25" class="dt lv" aria-label="Add to list bookmark button"><path fill="currentColor" d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .805.396L12.5 17l5.695 4.396A.5.5 0 0 0 19 21v-8.5a.5.5 0 0 0-1 0v7.485l-5.195-4.012a.5.5 0 0 0-.61 0L7 19.985z"></path></svg></a></span></div></div></div><div class="fc lw cm"><div class="l ae"><div class="ab ca"><div class="lx ly lz ma mb mc ch bg"><div class="ab"><div class="bl bg" aria-hidden="false"><div><div class="bl" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af fj ah ai aj ak al md an ao ap ew me mf ls mg mh mi mj mk s ml mm mn mo mp mq mr u ms mt mu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"></path></svg><div class="j i d"><p class="be b bf z dt">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bl" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bl" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af fj ah ai aj ak al md an ao ap ew me mf ls mg mh mi mj mk s ml mm mn mo mp mq mr u ms mt mu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"></path></svg><div class="j i d"><p class="be b bf z dt">Share</p></div></button></div></div></div></div></div></div></div></div></div><figure class="my mz na nb nc nd mv mw paragraph-image"><div role="button" tabindex="0" class="ne nf fi ng bg nh"><div class="mv mw mx"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/0*LX3rIy93k4PzA0T_.jpeg 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/0*LX3rIy93k4PzA0T_.jpeg 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/0*LX3rIy93k4PzA0T_.jpeg 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/0*LX3rIy93k4PzA0T_.jpeg 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/0*LX3rIy93k4PzA0T_.jpeg 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/0*LX3rIy93k4PzA0T_.jpeg 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/0*LX3rIy93k4PzA0T_.jpeg 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/0*LX3rIy93k4PzA0T_.jpeg 640w, https://miro.medium.com/v2/resize:fit:720/0*LX3rIy93k4PzA0T_.jpeg 720w, https://miro.medium.com/v2/resize:fit:750/0*LX3rIy93k4PzA0T_.jpeg 750w, https://miro.medium.com/v2/resize:fit:786/0*LX3rIy93k4PzA0T_.jpeg 786w, https://miro.medium.com/v2/resize:fit:828/0*LX3rIy93k4PzA0T_.jpeg 828w, https://miro.medium.com/v2/resize:fit:1100/0*LX3rIy93k4PzA0T_.jpeg 1100w, https://miro.medium.com/v2/resize:fit:1400/0*LX3rIy93k4PzA0T_.jpeg 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bg mc ni c" width="700" height="425" loading="eager" role="presentation"/></picture></div></div></figure><p id="9448" class="pw-post-body-paragraph nj nk gt nl b nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og gm bj"><a class="af oh" href="https://packagemain.tech/p/the-developers-guide-to-database" rel="noopener ugc nofollow" target="_blank">Read the original article on packagemain.tech</a></p><p id="9c6d" class="pw-post-body-paragraph nj nk gt nl b nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og gm bj">Database Proxy is a layer of abstraction between your applications and the underlying database(s).</p><p id="6292" class="pw-post-body-paragraph nj nk gt nl b nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og gm bj">Imagine a complex distributed system that relies heavily on data, where each microservice or a team connects to a database individually (it can be a shared database or specific/isolated ones). Such a complex platform requires things like centralized monitoring, query validations, alerting, custom sharding, and better security, you name it. While you can get a lot of that from your database server, implementing a database proxy may be a better approach (if you’re ready to invest in it).</p><p id="d078" class="pw-post-body-paragraph nj nk gt nl b nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og gm bj">The main advantage of using a database proxy is that it isolates the database topology from the application layer, so that developers don’t need to know about clusters, nodes and internals of the Data layer (to some extent obviously).</p><h1 id="9c6a" class="oi oj gt be ok ol om on oo op oq or os ot ou ov ow ox oy oz pa pb pc pd pe pf bj">Database Proxy Use Cases</h1><p id="0b0c" class="pw-post-body-paragraph nj nk gt nl b nm pg no np nq ph ns nt nu pi nw nx ny pj oa ob oc pk oe of og gm bj">Let’s dive into the various ways database proxies can empower your development teams, enhance security, and optimize database performance.</p><ul class=""><li id="39f5" class="nj nk gt nl b nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og pl pm pn bj"><strong class="nl gu">Intercept SQL queries</strong> from applications and dynamically route them to the correct database/table (for example custom sharding). Figma is <a class="af oh" href="https://www.figma.com/blog/how-figmas-databases-team-lived-to-tell-the-scale/" rel="noopener ugc nofollow" target="_blank">doing exactly that</a> with their internal Postgres proxy.</li><li id="548a" class="nj nk gt nl b nm po no np nq pp ns nt nu pq nw nx ny pr oa ob oc ps oe of og pl pm pn bj"><strong class="nl gu">Parse/Analyze/Validate SQL queries</strong> from developers and enrich the response with additional information. Could be useful to tell applications which tables are going to be deprecated.</li><li id="7660" class="nj nk gt nl b nm po no np nq pp ns nt nu pq nw nx ny pr oa ob oc ps oe of og pl pm pn bj"><strong class="nl gu">Scalability and schema changes without impacting applications.</strong> Platform/Database teams can independently change the schema without rewriting hundreds of microservices. The ability to transparently add or remove nodes in the database cluster without having to reconfigure or restart an application.</li><li id="ce77" class="nj nk gt nl b nm po no np nq pp ns nt nu pq nw nx ny pr oa ob oc ps oe of og pl pm pn bj"><strong class="nl gu">Enforce security policies</strong> and perform authentication and authorization checks to ensure that only authorized clients can access the database. Direct access to a database can be also forbidden.</li><li id="16fa" class="nj nk gt nl b nm po no np nq pp ns nt nu pq nw nx ny pr oa ob oc ps oe of og pl pm pn bj"><strong class="nl gu">Improve the performance</strong> of database communication by centrally managing the pool of connections, utilizing cache technics, etc.</li><li id="456a" class="nj nk gt nl b nm po no np nq pp ns nt nu pq nw nx ny pr oa ob oc ps oe of og pl pm pn bj"><strong class="nl gu">Centralized observability.</strong> Get notified when an application is using a deprecated table, and much more.</li></ul><h1 id="17e3" class="oi oj gt be ok ol om on oo op oq or os ot ou ov ow ox oy oz pa pb pc pd pe pf bj">When to use a Database Proxy</h1><p id="54cc" class="pw-post-body-paragraph nj nk gt nl b nm pg no np nq ph ns nt nu pi nw nx ny pj oa ob oc pk oe of og gm bj">Not all systems need a database proxy, especially early on. Here is the general guideline for when it might become necessary:</p><ul class=""><li id="dc4a" class="nj nk gt nl b nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og pl pm pn bj">You have multiple development teams split by different disciplines: for example multiple Backend Teams, Data Engineering team.</li><li id="bb89" class="nj nk gt nl b nm po no np nq pp ns nt nu pq nw nx ny pr oa ob oc ps oe of og pl pm pn bj">You have a Platform/Database team to be an owner of that. Though other teams can own it as well.</li><li id="c520" class="nj nk gt nl b nm po no np nq pp ns nt nu pq nw nx ny pr oa ob oc ps oe of og pl pm pn bj">Your system is distributed, and you maintain many microservices and many databases.</li><li id="cea8" class="nj nk gt nl b nm po no np nq pp ns nt nu pq nw nx ny pr oa ob oc ps oe of og pl pm pn bj">Your system is data-heavy.</li><li id="0d8c" class="nj nk gt nl b nm po no np nq pp ns nt nu pq nw nx ny pr oa ob oc ps oe of og pl pm pn bj">You need better Security and Observability.</li></ul><h1 id="fb56" class="oi oj gt be ok ol om on oo op oq or os ot ou ov ow ox oy oz pa pb pc pd pe pf bj">Cost of having a Database Proxy</h1><p id="27a4" class="pw-post-body-paragraph nj nk gt nl b nm pg no np nq ph ns nt nu pi nw nx ny pj oa ob oc pk oe of og gm bj">Using a Database Proxy does come at a cost:</p><ul class=""><li id="24bc" class="nj nk gt nl b nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og pl pm pn bj">A database proxy is a new element in the infrastructure with its own complexity.</li><li id="c54b" class="nj nk gt nl b nm po no np nq pp ns nt nu pq nw nx ny pr oa ob oc ps oe of og pl pm pn bj">Could be a single point of failure, so has to be very stable and battle-tested.</li><li id="a61e" class="nj nk gt nl b nm po no np nq pp ns nt nu pq nw nx ny pr oa ob oc ps oe of og pl pm pn bj">Additional network latency.</li></ul><h1 id="69a7" class="oi oj gt be ok ol om on oo op oq or os ot ou ov ow ox oy oz pa pb pc pd pe pf bj">Types of Database Proxies</h1><p id="07f1" class="pw-post-body-paragraph nj nk gt nl b nm pg no np nq ph ns nt nu pi nw nx ny pj oa ob oc pk oe of og gm bj">There are a few ways how you can deploy a database proxy:</p><ul class=""><li id="686c" class="nj nk gt nl b nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og pl pm pn bj">Custom proxy service (below I’ll provide a simple example in Go)</li><li id="cc8c" class="nj nk gt nl b nm po no np nq pp ns nt nu pq nw nx ny pr oa ob oc ps oe of og pl pm pn bj">Managed Cloud solutions like <a class="af oh" href="https://aws.amazon.com/rds/proxy/" rel="noopener ugc nofollow" target="_blank">Amazon RDS Proxy</a></li><li id="ddd4" class="nj nk gt nl b nm po no np nq pp ns nt nu pq nw nx ny pr oa ob oc ps oe of og pl pm pn bj">Sidecars like <a class="af oh" href="https://cyral.com/" rel="noopener ugc nofollow" target="_blank">Cyral</a></li><li id="3546" class="nj nk gt nl b nm po no np nq pp ns nt nu pq nw nx ny pr oa ob oc ps oe of og pl pm pn bj">Commercial and open-source products like <a class="af oh" href="https://proxysql.com/" rel="noopener ugc nofollow" target="_blank">ProxySQL</a>, or <a class="af oh" href="https://github.com/cectc/dbpack" rel="noopener ugc nofollow" target="_blank">dbpack</a></li></ul><h1 id="2619" class="oi oj gt be ok ol om on oo op oq or os ot ou ov ow ox oy oz pa pb pc pd pe pf bj">Writing a custom Database Proxy Service in Go</h1><p id="e41a" class="pw-post-body-paragraph nj nk gt nl b nm pg no np nq ph ns nt nu pi nw nx ny pj oa ob oc pk oe of og gm bj">Now, we are going to implement our own MySQL proxy using Go. Keep in mind that this is only an experiment to explain the idea.</p><p id="96e5" class="pw-post-body-paragraph nj nk gt nl b nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og gm bj">Our proxy will solve a very simple use case: intercept SQL query and rewrite table name if it matches a pattern.</p><pre class="pt pu pv pw px py pz qa bo qb ba bj"><span id="f16e" class="qc oj gt pz b bf qd qe l qf qg">-- Application-generated query<br/>SELECT * FROM orders_v1;<br/><br/>-- Rewritten query<br/>SELECT * FROM orders_v2;</span></pre><p id="2eac" class="pw-post-body-paragraph nj nk gt nl b nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og gm bj">The implementation is divided into two parts:</p><ol class=""><li id="da11" class="nj nk gt nl b nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og qh pm pn bj">Basic proxy to route queries from client to MySQL server.</li><li id="bbf2" class="nj nk gt nl b nm po no np nq pp ns nt nu pq nw nx ny pr oa ob oc ps oe of og qh pm pn bj">SQL parser with some logic to manipulate the query before it’s sent.</li></ol><p id="a4c9" class="pw-post-body-paragraph nj nk gt nl b nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og gm bj">You can see the full source in <a class="af oh" href="https://github.com/plutov/packagemain/tree/master/database-proxy" rel="noopener ugc nofollow" target="_blank">this Github repository</a>.</p><h1 id="2296" class="oi oj gt be ok ol om on oo op oq or os ot ou ov ow ox oy oz pa pb pc pd pe pf bj">TCP proxy from client to MySQL server</h1><p id="5e92" class="pw-post-body-paragraph nj nk gt nl b nm pg no np nq ph ns nt nu pi nw nx ny pj oa ob oc pk oe of og gm bj">Our TCP Proxy is implemented in a very naive approach, and is definitely not production-ready, but is enough to demonstrate how TCP transport works:</p><ul class=""><li id="1dbd" class="nj nk gt nl b nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og pl pm pn bj">Create a proxy TCP server</li><li id="c0b9" class="nj nk gt nl b nm po no np nq pp ns nt nu pq nw nx ny pr oa ob oc ps oe of og pl pm pn bj">Accept the connection</li><li id="60f6" class="nj nk gt nl b nm po no np nq pp ns nt nu pq nw nx ny pr oa ob oc ps oe of og pl pm pn bj">Create TCP connection to MySQL</li><li id="9921" class="nj nk gt nl b nm po no np nq pp ns nt nu pq nw nx ny pr oa ob oc ps oe of og pl pm pn bj">Proxy byte stream from the client to the MySQL Server, and back by using pipes</li></ul><blockquote class="qi qj qk"><p id="f1e4" class="nj nk ql nl b nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og gm bj"><strong class="nl gu">main.go</strong></p></blockquote><pre class="pt pu pv pw px py pz qa bo qb ba bj"><span id="b568" class="qc oj gt pz b bf qd qe l qf qg">package main<br/><br/>import (<br/>  &quot;fmt&quot;<br/>  &quot;io&quot;<br/>  &quot;log&quot;<br/>  &quot;net&quot;<br/>  &quot;os&quot;<br/>)<br/>func main() {<br/>  // proxy listens on port 3307<br/>  proxy, err := net.Listen(&quot;tcp&quot;, &quot;:3307&quot;)<br/>  if err != nil {<br/>    log.Fatalf(&quot;failed to start proxy: %s&quot;, err.Error())<br/>  }<br/>  for {<br/>    conn, err := proxy.Accept()<br/>    log.Printf(&quot;new connection: %s&quot;, conn.RemoteAddr())<br/>    if err != nil {<br/>      log.Fatalf(&quot;failed to accept connection: %s&quot;, err.Error())<br/>    }<br/>    go transport(conn)<br/>  }<br/>}<br/>func transport(conn net.Conn) {<br/>  defer conn.Close()<br/>  mysqlAddr := fmt.Sprintf(&quot;%s:%s&quot;, os.Getenv(&quot;MYSQL_HOST&quot;), os.Getenv(&quot;MYSQL_PORT&quot;))<br/>  mysqlConn, err := net.Dial(&quot;tcp&quot;, mysqlAddr)<br/>  if err != nil {<br/>    log.Printf(&quot;failed to connect to mysql: %s&quot;, err.Error())<br/>    return<br/>  }<br/>  readChan := make(chan int64)<br/>  writeChan := make(chan int64)<br/>  var readBytes, writeBytes int64<br/>  // from proxy to mysql<br/>  go pipe(mysqlConn, conn, true)<br/>  // from mysql to proxy<br/>  go pipe(conn, mysqlConn, false)<br/>  readBytes = &lt;-readChan<br/>  writeBytes = &lt;-writeChan<br/>  log.Printf(&quot;connection closed. read bytes: %d, write bytes: %d&quot;, readBytes, writeBytes)<br/>}<br/>func pipe(dst, src net.Conn, send bool) {<br/>  if send {<br/>    intercept(src, dst)<br/>  }<br/>  _, err := io.Copy(dst, src)<br/>  if err != nil {<br/>    log.Printf(&quot;connection error: %s&quot;, err.Error())<br/>  }<br/>}<br/>func intercept(src, dst net.Conn) {<br/>  buffer := make([]byte, 4096)<br/>  for {<br/>    n, _ := src.Read(buffer)<br/>    dst.Write(buffer[0:n])<br/>  }<br/>}</span></pre><p id="02c9" class="pw-post-body-paragraph nj nk gt nl b nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og gm bj">Functions explained:</p><ul class=""><li id="5383" class="nj nk gt nl b nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og pl pm pn bj"><strong class="nl gu">transport</strong> — handles TCP connection and pipes bytes in two directions.</li><li id="dc58" class="nj nk gt nl b nm po no np nq pp ns nt nu pq nw nx ny pr oa ob oc ps oe of og pl pm pn bj"><strong class="nl gu">pipe</strong> — pipes bytes, if it’s proxy → mysql, it also calls intercept to process the query.</li><li id="4601" class="nj nk gt nl b nm po no np nq pp ns nt nu pq nw nx ny pr oa ob oc ps oe of og pl pm pn bj"><strong class="nl gu">intercept</strong> — we will implement it later to parse the query.</li></ul><blockquote class="qi qj qk"><p id="3a53" class="nj nk ql nl b nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og gm bj"><strong class="nl gu">Dockerfile</strong></p></blockquote><pre class="pt pu pv pw px py pz qa bo qb ba bj"><span id="705b" class="qc oj gt pz b bf qd qe l qf qg">FROM golang:1.22 as builder<br/><br/>WORKDIR /<br/>COPY . .<br/>RUN CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -o proxy main.go<br/>FROM alpine:latest<br/>COPY --from=builder /proxy .<br/>EXPOSE 3307<br/>CMD [&quot;./proxy&quot;]</span></pre><blockquote class="qi qj qk"><p id="fe28" class="nj nk ql nl b nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og gm bj"><strong class="nl gu">docker-compose.yaml</strong></p></blockquote><pre class="pt pu pv pw px py pz qa bo qb ba bj"><span id="c4fe" class="qc oj gt pz b bf qd qe l qf qg">services:<br/>  proxy:<br/>    restart: always<br/>    build:<br/>      context: .<br/>    ports:<br/>      - 3307:3307<br/>    environment:<br/>      - MYSQL_HOST=mysql<br/>      - MYSQL_PORT=3306<br/>    links:<br/>      - mysql<br/>mysql:<br/>    restart: always<br/>    image: mysql:5.7<br/>    platform: linux/amd64<br/>    ports:<br/>      - 3306:3306<br/>    environment:<br/>      - MYSQL_ROOT_PASSWORD=root<br/>    command: --init-file /data/application/init.sql<br/>    volumes:<br/>      - ./init.sql:/data/application/init.sql</span></pre><blockquote class="qi qj qk"><p id="cad8" class="nj nk ql nl b nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og gm bj"><strong class="nl gu">init.sql</strong></p></blockquote><pre class="pt pu pv pw px py pz qa bo qb ba bj"><span id="b5dc" class="qc oj gt pz b bf qd qe l qf qg">CREATE DATABASE IF NOT EXISTS packagemain;<br/><br/>CREATE TABLE IF NOT EXISTS packagemain.orders_v2 (<br/>    id INT AUTO_INCREMENT PRIMARY KEY,<br/>    name VARCHAR(255) NOT NULL<br/>) ENGINE=InnoDB;<br/>INSERT INTO packagemain.orders_v2 (name) VALUES (&#x27;order1&#x27;);</span></pre><p id="8e51" class="pw-post-body-paragraph nj nk gt nl b nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og gm bj">Note: we don’t have <strong class="nl gu">orders_v1</strong> table in our database.</p><h1 id="0775" class="oi oj gt be ok ol om on oo op oq or os ot ou ov ow ox oy oz pa pb pc pd pe pf bj">SQL Parsing</h1><p id="8237" class="pw-post-body-paragraph nj nk gt nl b nm pg no np nq ph ns nt nu pi nw nx ny pj oa ob oc pk oe of og gm bj">Our function <strong class="nl gu">intercept</strong> can already get a bytes packet. It’s good to understand how MySQL packet is structured. I won’t get into details, but you can <a class="af oh" href="https://www.oreilly.com/library/view/understanding-mysql-internals/0596009577/ch04.html" rel="noopener ugc nofollow" target="_blank">read it here</a>.</p><p id="2aa2" class="pw-post-body-paragraph nj nk gt nl b nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og gm bj">In our intercept function we do the following:</p><ul class=""><li id="6523" class="nj nk gt nl b nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og pl pm pn bj">Look for a <strong class="nl gu">COM_QUERY</strong> client command which has a numeric code 3.</li><li id="7c5d" class="nj nk gt nl b nm po no np nq pp ns nt nu pq nw nx ny pr oa ob oc ps oe of og pl pm pn bj">Get the raw query.</li><li id="e78a" class="nj nk gt nl b nm po no np nq pp ns nt nu pq nw nx ny pr oa ob oc ps oe of og pl pm pn bj">Do very basic table rename.</li></ul><p id="616a" class="pw-post-body-paragraph nj nk gt nl b nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og gm bj">There is a great package <a class="af oh" href="https://github.com/vitessio/vitess/tree/main/go/vt/sqlparser" rel="noopener ugc nofollow" target="_blank">sqlparser</a> from Youtube’s Vitess project, which we can use to parse SQL queries. However, for simplicity of this demonstration, we’re going to use string matching and replacing.</p><blockquote class="qi qj qk"><p id="4263" class="nj nk ql nl b nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og gm bj"><strong class="nl gu">main.go</strong></p></blockquote><pre class="pt pu pv pw px py pz qa bo qb ba bj"><span id="5d75" class="qc oj gt pz b bf qd qe l qf qg">const COM_QUERY = byte(0x03)<br/><br/>func intercept(src, dst net.Conn) {<br/>  buffer := make([]byte, 4096)<br/>  for {<br/>    n, _ := src.Read(buffer)<br/>    if n &gt; 5 {<br/>      switch buffer[4] {<br/>      case COM_QUERY:<br/>        clientQuery := string(buffer[5:n])<br/>        newQuery := rewriteQuery(clientQuery)<br/>        fmt.Printf(&quot;client query: %s\n&quot;, clientQuery)<br/>        fmt.Printf(&quot;server query: %s\n&quot;, newQuery)<br/>        writeModifiedPacket(dst, buffer[:5], newQuery)<br/>        continue<br/>      }<br/>    }<br/>    dst.Write(buffer[0:n])<br/>  }<br/>}<br/>func rewriteQuery(query string) string {<br/>  return strings.NewReplacer(&quot;from orders_v1&quot;, &quot;from orders_v2&quot;).Replace(strings.ToLower(query))<br/>}<br/>func writeModifiedPacket(dst net.Conn, header []byte, query string) {<br/>  newBuffer := make([]byte, 5+len(query))<br/>  copy(newBuffer, header)<br/>  copy(newBuffer[5:], []byte(query))<br/>  dst.Write(newBuffer)<br/>}</span></pre><h1 id="8103" class="oi oj gt be ok ol om on oo op oq or os ot ou ov ow ox oy oz pa pb pc pd pe pf bj">Running the proxy and connecting to it</h1><p id="f756" class="pw-post-body-paragraph nj nk gt nl b nm pg no np nq ph ns nt nu pi nw nx ny pj oa ob oc pk oe of og gm bj">Here we connect to our Proxy which is running on port 3307, not a MySQL server itself (port 3306). And as you can see we can use regular MySQL client, which simplifies the use of this proxy.</p><figure class="pt pu pv pw px nd mv mw paragraph-image"><div role="button" tabindex="0" class="ne nf fi ng bg nh"><div class="mv mw mx"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/0*4ELSQWjcFWLivzp-.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/0*4ELSQWjcFWLivzp-.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/0*4ELSQWjcFWLivzp-.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/0*4ELSQWjcFWLivzp-.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/0*4ELSQWjcFWLivzp-.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/0*4ELSQWjcFWLivzp-.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4ELSQWjcFWLivzp-.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/0*4ELSQWjcFWLivzp-.png 640w, https://miro.medium.com/v2/resize:fit:720/0*4ELSQWjcFWLivzp-.png 720w, https://miro.medium.com/v2/resize:fit:750/0*4ELSQWjcFWLivzp-.png 750w, https://miro.medium.com/v2/resize:fit:786/0*4ELSQWjcFWLivzp-.png 786w, https://miro.medium.com/v2/resize:fit:828/0*4ELSQWjcFWLivzp-.png 828w, https://miro.medium.com/v2/resize:fit:1100/0*4ELSQWjcFWLivzp-.png 1100w, https://miro.medium.com/v2/resize:fit:1400/0*4ELSQWjcFWLivzp-.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bg mc ni c" width="700" height="248" loading="lazy" role="presentation"/></picture></div></div></figure><p id="4f28" class="pw-post-body-paragraph nj nk gt nl b nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og gm bj">Which means <strong class="nl gu">orders_v1</strong> table got rerouted to <strong class="nl gu">orders_v2</strong>. Proxy logs:</p><pre class="pt pu pv pw px py pz qa bo qb ba bj"><span id="f4ed" class="qc oj gt pz b bf qd qe l qf qg">client query: select * from orders_v1;<br/>server query: select * from orders_v2;</span></pre><h1 id="85be" class="oi oj gt be ok ol om on oo op oq or os ot ou ov ow ox oy oz pa pb pc pd pe pf bj">Conclusion</h1><p id="ddb0" class="pw-post-body-paragraph nj nk gt nl b nm pg no np nq ph ns nt nu pi nw nx ny pj oa ob oc pk oe of og gm bj">In conclusion, a database proxy offers a powerful layer of abstraction between your applications and the underlying database(s). It streamlines development by isolating database complexity, empowers database teams with independent schema changes, and enhances security through centralized access control. While there are additional costs like infrastructure overhead and potential latency, for complex distributed systems with multiple teams and data-intensive needs, a database proxy can be a worthwhile investment.</p><p id="a070" class="pw-post-body-paragraph nj nk gt nl b nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og gm bj"><a class="af oh" href="https://github.com/plutov/packagemain/tree/master/database-proxy" rel="noopener ugc nofollow" target="_blank">Source Code</a>.</p><p id="bf6c" class="pw-post-body-paragraph nj nk gt nl b nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og gm bj"><a class="af oh" href="https://packagemain.tech/p/the-developers-guide-to-database" rel="noopener ugc nofollow" target="_blank">Read the original article on packagemain.tech</a></p></div></div></div></div></section></div></div></article></div><div class="ab ca"><div class="ch bg fy fz ga gb"><div class="qm qn ab iz"><div class="qo ab"><a class="qp ax am ao" href="https://medium.com/tag/database?source=post_page-----5b7d5d55d7dd---------------database-----------------" rel="noopener follow"><div class="qq fi cw qr gd qs qt be b bf z bj qu">Database</div></a></div><div class="qo ab"><a class="qp ax am ao" href="https://medium.com/tag/go?source=post_page-----5b7d5d55d7dd---------------go-----------------" rel="noopener follow"><div class="qq fi cw qr gd qs qt be b bf z bj qu">Go</div></a></div><div class="qo ab"><a class="qp ax am ao" href="https://medium.com/tag/golang?source=post_page-----5b7d5d55d7dd---------------golang-----------------" rel="noopener follow"><div class="qq fi cw qr gd qs qt be b bf z bj qu">Golang</div></a></div><div class="qo ab"><a class="qp ax am ao" href="https://medium.com/tag/mysql?source=post_page-----5b7d5d55d7dd---------------mysql-----------------" rel="noopener follow"><div class="qq fi cw qr gd qs qt be b bf z bj qu">MySQL</div></a></div><div class="qo ab"><a class="qp ax am ao" href="https://medium.com/tag/sql?source=post_page-----5b7d5d55d7dd---------------sql-----------------" rel="noopener follow"><div class="qq fi cw qr gd qs qt be b bf z bj qu">Sql</div></a></div></div></div></div><div class="l"></div><footer class="qv qw qx qy qz ra rb rc rd ab q re ij c"><div class="l ae"><div class="ab ca"><div class="ch bg fy fz ga gb"><div class="ab co rf"><div class="ab q ku"><div class="rg l"><span class="l rh ri rj e d"><div class="ab q ku kv"><div class="pw-multi-vote-icon fi jd kw kx ky"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerClapButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fitnext%2F5b7d5d55d7dd&amp;operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fthe-developers-guide-to-database-proxies-when-to-use-them-and-how-to-create-one-5b7d5d55d7dd&amp;user=Alex+Pliutau&amp;userId=83ef5b231666&amp;source=-----5b7d5d55d7dd---------------------clap_footer-----------" rel="noopener follow"><div><div class="bl" aria-hidden="false"><div class="kz ao la lb lc ld am le lf lg ky"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM13.916 3.953l1.523-2.112-1.184-.39zM8.589 1.84l1.522 2.112-.337-2.501zM18.523 18.92c-.86.86-1.75 1.246-2.62 1.33a6 6 0 0 0 .407-.372c2.388-2.389 2.86-4.951 1.399-7.623l-.912-1.603-.79-1.672c-.26-.56-.194-.98.203-1.288a.7.7 0 0 1 .546-.132c.283.046.546.231.728.5l2.363 4.157c.976 1.624 1.141 4.237-1.324 6.702m-10.999-.438L3.37 14.328a.828.828 0 0 1 .585-1.408.83.83 0 0 1 .585.242l2.158 2.157a.365.365 0 0 0 .516-.516l-2.157-2.158-1.449-1.449a.826.826 0 0 1 1.167-1.17l3.438 3.44a.363.363 0 0 0 .516 0 .364.364 0 0 0 0-.516L5.293 9.513l-.97-.97a.826.826 0 0 1 0-1.166.84.84 0 0 1 1.167 0l.97.968 3.437 3.436a.36.36 0 0 0 .517 0 .366.366 0 0 0 0-.516L6.977 7.83a.82.82 0 0 1-.241-.584.82.82 0 0 1 .824-.826c.219 0 .43.087.584.242l5.787 5.787a.366.366 0 0 0 .587-.415l-1.117-2.363c-.26-.56-.194-.98.204-1.289a.7.7 0 0 1 .546-.132c.283.046.545.232.727.501l2.193 3.86c1.302 2.38.883 4.59-1.277 6.75-1.156 1.156-2.602 1.627-4.19 1.367-1.418-.236-2.866-1.033-4.079-2.246M10.75 5.971l2.12 2.12c-.41.502-.465 1.17-.128 1.89l.22.465-3.523-3.523a.8.8 0 0 1-.097-.368c0-.22.086-.428.241-.584a.847.847 0 0 1 1.167 0m7.355 1.705c-.31-.461-.746-.758-1.23-.837a1.44 1.44 0 0 0-1.11.275c-.312.24-.505.543-.59.881a1.74 1.74 0 0 0-.906-.465 1.47 1.47 0 0 0-.82.106l-2.182-2.182a1.56 1.56 0 0 0-2.2 0 1.54 1.54 0 0 0-.396.701 1.56 1.56 0 0 0-2.21-.01 1.55 1.55 0 0 0-.416.753c-.624-.624-1.649-.624-2.237-.037a1.557 1.557 0 0 0 0 2.2c-.239.1-.501.238-.715.453a1.56 1.56 0 0 0 0 2.2l.516.515a1.556 1.556 0 0 0-.753 2.615L7.01 19c1.32 1.319 2.909 2.189 4.475 2.449q.482.08.971.08c.85 0 1.653-.198 2.393-.579.231.033.46.054.686.054 1.266 0 2.457-.52 3.505-1.567 2.763-2.763 2.552-5.734 1.439-7.586z" clip-rule="evenodd"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l lh li lj lk ll lm ln"><p class="be b du z dt"><span class="lo">--</span></p></div></div></span><span class="l h g f rk rl"><div class="ab q ku kv"><div class="pw-multi-vote-icon fi jd kw kx ky"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerClapButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fitnext%2F5b7d5d55d7dd&amp;operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fthe-developers-guide-to-database-proxies-when-to-use-them-and-how-to-create-one-5b7d5d55d7dd&amp;user=Alex+Pliutau&amp;userId=83ef5b231666&amp;source=-----5b7d5d55d7dd---------------------clap_footer-----------" rel="noopener follow"><div><div class="bl" aria-hidden="false"><div class="kz ao la lb lc ld am le lf lg ky"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM13.916 3.953l1.523-2.112-1.184-.39zM8.589 1.84l1.522 2.112-.337-2.501zM18.523 18.92c-.86.86-1.75 1.246-2.62 1.33a6 6 0 0 0 .407-.372c2.388-2.389 2.86-4.951 1.399-7.623l-.912-1.603-.79-1.672c-.26-.56-.194-.98.203-1.288a.7.7 0 0 1 .546-.132c.283.046.546.231.728.5l2.363 4.157c.976 1.624 1.141 4.237-1.324 6.702m-10.999-.438L3.37 14.328a.828.828 0 0 1 .585-1.408.83.83 0 0 1 .585.242l2.158 2.157a.365.365 0 0 0 .516-.516l-2.157-2.158-1.449-1.449a.826.826 0 0 1 1.167-1.17l3.438 3.44a.363.363 0 0 0 .516 0 .364.364 0 0 0 0-.516L5.293 9.513l-.97-.97a.826.826 0 0 1 0-1.166.84.84 0 0 1 1.167 0l.97.968 3.437 3.436a.36.36 0 0 0 .517 0 .366.366 0 0 0 0-.516L6.977 7.83a.82.82 0 0 1-.241-.584.82.82 0 0 1 .824-.826c.219 0 .43.087.584.242l5.787 5.787a.366.366 0 0 0 .587-.415l-1.117-2.363c-.26-.56-.194-.98.204-1.289a.7.7 0 0 1 .546-.132c.283.046.545.232.727.501l2.193 3.86c1.302 2.38.883 4.59-1.277 6.75-1.156 1.156-2.602 1.627-4.19 1.367-1.418-.236-2.866-1.033-4.079-2.246M10.75 5.971l2.12 2.12c-.41.502-.465 1.17-.128 1.89l.22.465-3.523-3.523a.8.8 0 0 1-.097-.368c0-.22.086-.428.241-.584a.847.847 0 0 1 1.167 0m7.355 1.705c-.31-.461-.746-.758-1.23-.837a1.44 1.44 0 0 0-1.11.275c-.312.24-.505.543-.59.881a1.74 1.74 0 0 0-.906-.465 1.47 1.47 0 0 0-.82.106l-2.182-2.182a1.56 1.56 0 0 0-2.2 0 1.54 1.54 0 0 0-.396.701 1.56 1.56 0 0 0-2.21-.01 1.55 1.55 0 0 0-.416.753c-.624-.624-1.649-.624-2.237-.037a1.557 1.557 0 0 0 0 2.2c-.239.1-.501.238-.715.453a1.56 1.56 0 0 0 0 2.2l.516.515a1.556 1.556 0 0 0-.753 2.615L7.01 19c1.32 1.319 2.909 2.189 4.475 2.449q.482.08.971.08c.85 0 1.653-.198 2.393-.579.231.033.46.054.686.054 1.266 0 2.457-.52 3.505-1.567 2.763-2.763 2.552-5.734 1.439-7.586z" clip-rule="evenodd"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l lh li lj lk ll lm ln"><p class="be b du z dt"><span class="lo">--</span></p></div></div></span></div><div class="bp ab"><div><div class="bl" aria-hidden="false"><button class="ao kz lp lq ab q fj lr ls" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="lt"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"></path></svg></button></div></div></div></div><div class="ab q"><div class="rm l iw"><div><div class="bl" aria-hidden="false"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerBookmarkButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F5b7d5d55d7dd&amp;operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fthe-developers-guide-to-database-proxies-when-to-use-them-and-how-to-create-one-5b7d5d55d7dd&amp;source=--------------------------bookmark_footer-----------" rel="noopener follow"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none" viewBox="0 0 25 25" class="dt lv" aria-label="Add to list bookmark button"><path fill="currentColor" d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .805.396L12.5 17l5.695 4.396A.5.5 0 0 0 19 21v-8.5a.5.5 0 0 0-1 0v7.485l-5.195-4.012a.5.5 0 0 0-.61 0L7 19.985z"></path></svg></a></span></div></div></div><div class="rm l iw"><div class="bl" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bl" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="footerSocialShareButton" class="af fj ah ai aj ak al md an ao ap ew me mf ls mg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"></path></svg></button></div></div></div></div></div></div></div></div></div></footer><div class="rn ro rp rq rr l bw"><div class="ab ca"><div class="ch bg fy fz ga gb"><div class="ck ab rs co"><div class="ab hz"><a href="https://medium.com/@pliutau?source=post_page-----5b7d5d55d7dd--------------------------------" rel="noopener follow"><div class="l rt ru bx rv id"><div class="l fi"><img alt="Alex Pliutau" class="l fc bx rw rx cw" src="https://miro.medium.com/v2/resize:fill:144:144/1*0GZGQK6ulOCFFdWNdu_sPQ.png" width="72" height="72" loading="lazy"/><div class="ie bx l rw rx fr n if fs"></div></div></div></a><a href="https://itnext.io/?source=post_page-----5b7d5d55d7dd--------------------------------" rel="noopener follow"><div class="ry ab fi"><div><div class="bl" aria-hidden="false"><div class="l rz sa bx rv ij"><div class="l fi"><img alt="ITNEXT" class="l fc bx by bz cw" src="https://miro.medium.com/v2/resize:fill:64:64/1*yAqDFIFA5F_NXalOJKz4TA.png" width="32" height="32" loading="lazy"/><div class="ie bx l by bz fr n if fs"></div></div></div></div></div></div></a></div><div class="j i d"><div class="ab"><span><a class="be b bf z eo qq ep eq er es et eu ev ew ex ey ez sb fa fb fc bl fd fe" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F83ef5b231666&amp;operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fthe-developers-guide-to-database-proxies-when-to-use-them-and-how-to-create-one-5b7d5d55d7dd&amp;user=Alex+Pliutau&amp;userId=83ef5b231666&amp;source=post_page-83ef5b231666----5b7d5d55d7dd---------------------follow_profile-----------" rel="noopener follow">Follow</a></span><div class="ds l"><div><div><div class="bl" aria-hidden="false"><div class="l"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F631786b3a66e&amp;operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fthe-developers-guide-to-database-proxies-when-to-use-them-and-how-to-create-one-5b7d5d55d7dd&amp;newsletterV3=83ef5b231666&amp;newsletterV3Id=631786b3a66e&amp;user=Alex+Pliutau&amp;userId=83ef5b231666&amp;source=-----5b7d5d55d7dd---------------------subscribe_user-----------" rel="noopener follow"><button class="be b bf z sd am se sf sg sh si sj sk sl ev ew ex ey ez fa fb fc bl fd fe" aria-label="Subscribe"><svg xmlns="http://www.w3.org/2000/svg" width="38" height="38" fill="none" viewBox="0 0 38 38" class="sc sa rz"><rect width="0.5" height="6.5" x="26.25" y="9.25" rx="0.25"></rect><rect width="0.5" height="6.5" x="29.75" y="12.25" rx="0.25" transform="rotate(90 29.75 12.25)"></rect><path d="M19.5 12.5h-7a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-5"></path><path d="M11.5 14.5 19 20l4-3"></path></svg></button></a></span></div></div></div></div></div></div></div></div><div class="ab cm co"><div class="l"><div class="ab q"><a class="af ag ah ai aj ak al am an ao ap aq ar as at ab q" href="https://medium.com/@pliutau?source=post_page-----5b7d5d55d7dd--------------------------------" rel="noopener follow"><h2 class="pw-author-name be sm sn so sp bj"><span class="gm jn">Written by <!-- -->Alex Pliutau</span></h2></a></div><div class="qo ab"><div class="l iw"><span class="pw-follower-count be b bf z bj"><a class="af ag ah ai aj ak al am an ao ap aq ar ip" href="https://medium.com/@pliutau/followers?source=post_page-----5b7d5d55d7dd--------------------------------" rel="noopener follow">250 Followers</a></span></div><div class="be b bf z je jf jg ab ji jj jk jl dt jc"><span class="iq l" aria-hidden="true"><span class="be b bf z dt">·</span></span><span class="l iw">Writer for </span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar ip ab q" href="https://itnext.io/?source=post_page-----5b7d5d55d7dd--------------------------------" rel="noopener follow"><p class="be b bf z je jf jg jh ji jj jk jl bj">ITNEXT</p></a></div></div></div></div><div class="sq l"><p class="be b bf z bj"><a class="af ag ah ai aj ak al am an ao ap aq ar oh gn" href="https://packagemain.tech/" rel="noopener  ugc nofollow">https://packagemain.tech/</a></p></div></div><div class="h k"><div class="ab"><span><a class="be b bf z eo qq ep eq er es et eu ev ew ex ey ez sb fa fb fc bl fd fe" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F83ef5b231666&amp;operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fthe-developers-guide-to-database-proxies-when-to-use-them-and-how-to-create-one-5b7d5d55d7dd&amp;user=Alex+Pliutau&amp;userId=83ef5b231666&amp;source=post_page-83ef5b231666----5b7d5d55d7dd---------------------follow_profile-----------" rel="noopener follow">Follow</a></span><div class="ds l"><div><div><div class="bl" aria-hidden="false"><div class="l"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F631786b3a66e&amp;operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fthe-developers-guide-to-database-proxies-when-to-use-them-and-how-to-create-one-5b7d5d55d7dd&amp;newsletterV3=83ef5b231666&amp;newsletterV3Id=631786b3a66e&amp;user=Alex+Pliutau&amp;userId=83ef5b231666&amp;source=-----5b7d5d55d7dd---------------------subscribe_user-----------" rel="noopener follow"><button class="be b bf z sd am se sf sg sh si sj sk sl ev ew ex ey ez fa fb fc bl fd fe" aria-label="Subscribe"><svg xmlns="http://www.w3.org/2000/svg" width="38" height="38" fill="none" viewBox="0 0 38 38" class="sc sa rz"><rect width="0.5" height="6.5" x="26.25" y="9.25" rx="0.25"></rect><rect width="0.5" height="6.5" x="29.75" y="12.25" rx="0.25" transform="rotate(90 29.75 12.25)"></rect><path d="M19.5 12.5h-7a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-5"></path><path d="M11.5 14.5 19 20l4-3"></path></svg></button></a></span></div></div></div></div></div></div></div></div><div class="sr bg ss my mz na nb nc"></div></div></div><div class="h k j"><div class="sr bg ss st"></div><div class="ab ca"><div class="ch bg fy fz ga gb"><div class="su ab ku iz"><div class="sv sw l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://help.medium.com/hc/en-us?source=post_page-----5b7d5d55d7dd--------------------------------" rel="noopener follow"><p class="be b du z dt">Help</p></a></div><div class="sv sw l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.statuspage.io/?source=post_page-----5b7d5d55d7dd--------------------------------" rel="noopener follow"><p class="be b du z dt">Status</p></a></div><div class="sv sw l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/about?autoplay=1&amp;source=post_page-----5b7d5d55d7dd--------------------------------" rel="noopener follow"><p class="be b du z dt">About</p></a></div><div class="sv sw l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=post_page-----5b7d5d55d7dd--------------------------------" rel="noopener follow"><p class="be b du z dt">Careers</p></a></div><div class="sv sw l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="pressinquiries@medium.com?source=post_page-----5b7d5d55d7dd--------------------------------" rel="noopener follow"><p class="be b du z dt">Press</p></a></div><div class="sv sw l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://blog.medium.com/?source=post_page-----5b7d5d55d7dd--------------------------------" rel="noopener follow"><p class="be b du z dt">Blog</p></a></div><div class="sv sw l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----5b7d5d55d7dd--------------------------------" rel="noopener follow"><p class="be b du z dt">Privacy</p></a></div><div class="sv sw l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----5b7d5d55d7dd--------------------------------" rel="noopener follow"><p class="be b du z dt">Terms</p></a></div><div class="sv sw l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://speechify.com/medium?source=post_page-----5b7d5d55d7dd--------------------------------" rel="noopener follow"><p class="be b du z dt">Text to speech</p></a></div><div class="sv l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/business?source=post_page-----5b7d5d55d7dd--------------------------------" rel="noopener follow"><p class="be b du z dt">Teams</p></a></div></div></div></div></div></div></div></div></div></div><script>window.__BUILD_ID__="main-20240730-192236-285e2571ef"</script><script>window.__GRAPHQL_URI__ = "https://itnext.io/_/graphql"</script><script>window.__PRELOADED_STATE__ = {"algolia":{"queries":{}},"cache":{"experimentGroupSet":true,"reason":"This request is not using the cache middleware worker","group":"disabled","tags":["group-edgeCachePosts","post-5b7d5d55d7dd","user-83ef5b231666","collection-5b301f10ddcd"],"serverVariantState":"","middlewareEnabled":false,"cacheStatus":"DYNAMIC","shouldUseCache":false,"vary":[],"lohpSummerUpsellEnabled":false},"client":{"hydrated":false,"isUs":true,"isNativeMedium":false,"isSafariMobile":false,"isSafari":false,"isFirefox":false,"routingEntity":{"type":"COLLECTION","id":"5b301f10ddcd","explicit":true},"viewerIsBot":false},"debug":{"requestId":"d090e502-ffc1-4368-ba36-fe1208f3b508","hybridDevServices":[],"originalSpanCarrier":{}},"multiVote":{"clapsPerPost":{}},"navigation":{"branch":{"show":null,"hasRendered":null,"blockedByCTA":false},"hideGoogleOneTap":false,"hasRenderedAlternateUserBanner":null,"currentLocation":"https:\u002F\u002Fitnext.io\u002Fthe-developers-guide-to-database-proxies-when-to-use-them-and-how-to-create-one-5b7d5d55d7dd","host":"itnext.io","hostname":"itnext.io","referrer":"https:\u002F\u002Fwww.google.com","hasSetReferrer":false,"susiModal":{"step":null,"operation":"register"},"postRead":false,"partnerProgram":{"selectedCountryCode":null}},"config":{"nodeEnv":"production","version":"main-20240730-192236-285e2571ef","target":"production","productName":"Medium","publicUrl":"https:\u002F\u002Fcdn-client.medium.com\u002Flite","authDomain":"medium.com","authGoogleClientId":"216296035834-k1k6qe060s2tp2a2jam4ljdcms00sttg.apps.googleusercontent.com","favicon":"production","glyphUrl":"https:\u002F\u002Fglyph.medium.com","branchKey":"key_live_ofxXr2qTrrU9NqURK8ZwEhknBxiI6KBm","algolia":{"appId":"MQ57UUUQZ2","apiKeySearch":"394474ced050e3911ae2249ecc774921","indexPrefix":"medium_","host":"-dsn.algolia.net"},"recaptchaKey":"6Lfc37IUAAAAAKGGtC6rLS13R1Hrw_BqADfS1LRk","recaptcha3Key":"6Lf8R9wUAAAAABMI_85Wb8melS7Zj6ziuf99Yot5","recaptchaEnterpriseKeyId":"6Le-uGgpAAAAAPprRaokM8AKthQ9KNGdoxaGUvVp","datadog":{"applicationId":"6702d87d-a7e0-42fe-bbcb-95b469547ea0","clientToken":"pub853ea8d17ad6821d9f8f11861d23dfed","rumToken":"pubf9cc52896502b9413b68ba36fc0c7162","context":{"deployment":{"target":"production","tag":"main-20240730-192236-285e2571ef","commit":"285e2571efab853bbce53612e191456de4ff55fe"}},"datacenter":"us"},"googleAnalyticsCode":"G-7JY7T788PK","googlePay":{"apiVersion":"2","apiVersionMinor":"0","merchantId":"BCR2DN6TV7EMTGBM","merchantName":"Medium","instanceMerchantId":"13685562959212738550"},"applePay":{"version":3},"signInWallCustomDomainCollectionIds":["3a8144eabfe3","336d898217ee","61061eb0c96b","138adf9c44c","819cc2aaeee0"],"mediumMastodonDomainName":"me.dm","mediumOwnedAndOperatedCollectionIds":["8a9336e5bb4","b7e45b22fec3","193b68bd4fba","8d6b8a439e32","54c98c43354d","3f6ecf56618","d944778ce714","92d2092dc598","ae2a65f35510","1285ba81cada","544c7006046e","fc8964313712","40187e704f1c","88d9857e584e","7b6769f2748b","bcc38c8f6edf","cef6983b292","cb8577c9149e","444d13b52878","713d7dbc99b0","ef8e90590e66","191186aaafa0","55760f21cdc5","9dc80918cc93","bdc4052bbdba","8ccfed20cbb2"],"tierOneDomains":["medium.com","thebolditalic.com","arcdigital.media","towardsdatascience.com","uxdesign.cc","codeburst.io","psiloveyou.xyz","writingcooperative.com","entrepreneurshandbook.co","prototypr.io","betterhumans.coach.me","theascent.pub"],"topicsToFollow":["d61cf867d93f","8a146bc21b28","1eca0103fff3","4d562ee63426","aef1078a3ef5","e15e46793f8d","6158eb913466","55f1c20aba7a","3d18b94f6858","4861fee224fd","63c6f1f93ee","1d98b3a9a871","decb52b64abf","ae5d4995e225","830cded25262"],"topicToTagMappings":{"accessibility":"accessibility","addiction":"addiction","android-development":"android-development","art":"art","artificial-intelligence":"artificial-intelligence","astrology":"astrology","basic-income":"basic-income","beauty":"beauty","biotech":"biotech","blockchain":"blockchain","books":"books","business":"business","cannabis":"cannabis","cities":"cities","climate-change":"climate-change","comics":"comics","coronavirus":"coronavirus","creativity":"creativity","cryptocurrency":"cryptocurrency","culture":"culture","cybersecurity":"cybersecurity","data-science":"data-science","design":"design","digital-life":"digital-life","disability":"disability","economy":"economy","education":"education","equality":"equality","family":"family","feminism":"feminism","fiction":"fiction","film":"film","fitness":"fitness","food":"food","freelancing":"freelancing","future":"future","gadgets":"gadgets","gaming":"gaming","gun-control":"gun-control","health":"health","history":"history","humor":"humor","immigration":"immigration","ios-development":"ios-development","javascript":"javascript","justice":"justice","language":"language","leadership":"leadership","lgbtqia":"lgbtqia","lifestyle":"lifestyle","machine-learning":"machine-learning","makers":"makers","marketing":"marketing","math":"math","media":"media","mental-health":"mental-health","mindfulness":"mindfulness","money":"money","music":"music","neuroscience":"neuroscience","nonfiction":"nonfiction","outdoors":"outdoors","parenting":"parenting","pets":"pets","philosophy":"philosophy","photography":"photography","podcasts":"podcast","poetry":"poetry","politics":"politics","privacy":"privacy","product-management":"product-management","productivity":"productivity","programming":"programming","psychedelics":"psychedelics","psychology":"psychology","race":"race","relationships":"relationships","religion":"religion","remote-work":"remote-work","san-francisco":"san-francisco","science":"science","self":"self","self-driving-cars":"self-driving-cars","sexuality":"sexuality","social-media":"social-media","society":"society","software-engineering":"software-engineering","space":"space","spirituality":"spirituality","sports":"sports","startups":"startup","style":"style","technology":"technology","transportation":"transportation","travel":"travel","true-crime":"true-crime","tv":"tv","ux":"ux","venture-capital":"venture-capital","visual-design":"visual-design","work":"work","world":"world","writing":"writing"},"defaultImages":{"avatar":{"imageId":"1*dmbNkD5D-u45r44go_cf0g.png","height":150,"width":150},"orgLogo":{"imageId":"1*OMF3fSqH8t4xBJ9-6oZDZw.png","height":106,"width":545},"postLogo":{"imageId":"1*kFrc4tBFM_tCis-2Ic87WA.png","height":810,"width":1440},"postPreviewImage":{"imageId":"1*hn4v1tCaJy7cWMyb0bpNpQ.png","height":386,"width":579}},"collectionStructuredData":{"8d6b8a439e32":{"name":"Elemental","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F980\u002F1*9ygdqoKprhwuTVKUM0DLPA@2x.png","width":980,"height":159}}},"3f6ecf56618":{"name":"Forge","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F596\u002F1*uULpIlImcO5TDuBZ6lm7Lg@2x.png","width":596,"height":183}}},"ae2a65f35510":{"name":"GEN","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F264\u002F1*RdVZMdvfV3YiZTw6mX7yWA.png","width":264,"height":140}}},"88d9857e584e":{"name":"LEVEL","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*JqYMhNX6KNNb2UlqGqO2WQ.png","width":540,"height":108}}},"7b6769f2748b":{"name":"Marker","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F383\u002F1*haCUs0wF6TgOOvfoY-jEoQ@2x.png","width":383,"height":92}}},"444d13b52878":{"name":"OneZero","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*cw32fIqCbRWzwJaoQw6BUg.png","width":540,"height":123}}},"8ccfed20cbb2":{"name":"Zora","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*tZUQqRcCCZDXjjiZ4bDvgQ.png","width":540,"height":106}}}},"embeddedPostIds":{"coronavirus":"cd3010f9d81f"},"sharedCdcMessaging":{"COVID_APPLICABLE_TAG_SLUGS":[],"COVID_APPLICABLE_TOPIC_NAMES":[],"COVID_APPLICABLE_TOPIC_NAMES_FOR_TOPIC_PAGE":[],"COVID_MESSAGES":{"tierA":{"text":"For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":66,"end":73,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"tierB":{"text":"Anyone can publish on Medium per our Policies, but we don’t fact-check every story. For more info about the coronavirus, see cdc.gov.","markups":[{"start":37,"end":45,"href":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Fcategories\u002F201931128-Policies-Safety"},{"start":125,"end":132,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"paywall":{"text":"This article has been made free for everyone, thanks to Medium Members. For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":56,"end":70,"href":"https:\u002F\u002Fmedium.com\u002Fmembership"},{"start":138,"end":145,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"unbound":{"text":"This article is free for everyone, thanks to Medium Members. For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":45,"end":59,"href":"https:\u002F\u002Fmedium.com\u002Fmembership"},{"start":127,"end":134,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]}},"COVID_BANNER_POST_ID_OVERRIDE_WHITELIST":["3b31a67bff4a"]},"sharedVoteMessaging":{"TAGS":["politics","election-2020","government","us-politics","election","2020-presidential-race","trump","donald-trump","democrats","republicans","congress","republican-party","democratic-party","biden","joe-biden","maga"],"TOPICS":["politics","election"],"MESSAGE":{"text":"Find out more about the U.S. election results here.","markups":[{"start":46,"end":50,"href":"https:\u002F\u002Fcookpolitical.com\u002F2020-national-popular-vote-tracker"}]},"EXCLUDE_POSTS":["397ef29e3ca5"]},"embedPostRules":[],"recircOptions":{"v1":{"limit":3},"v2":{"limit":8}},"braintreeClientKey":"production_zjkj96jm_m56f8fqpf7ngnrd4","braintree":{"enabled":true,"merchantId":"m56f8fqpf7ngnrd4","merchantAccountId":{"usd":"AMediumCorporation_instant","eur":"amediumcorporation_EUR","cad":"amediumcorporation_CAD"},"publicKey":"ds2nn34bg2z7j5gd","braintreeEnvironment":"production","dashboardUrl":"https:\u002F\u002Fwww.braintreegateway.com\u002Fmerchants","gracePeriodDurationInDays":14,"mediumMembershipPlanId":{"monthly":"ce105f8c57a3","monthlyV2":"e8a5e126-792b-4ee6-8fba-d574c1b02fc5","monthlyWithTrial":"d5ee3dbe3db8","monthlyPremium":"fa741a9b47a2","yearly":"a40ad4a43185","yearlyV2":"3815d7d6-b8ca-4224-9b8c-182f9047866e","yearlyStaff":"d74fb811198a","yearlyWithTrial":"b3bc7350e5c7","yearlyPremium":"e21bd2c12166","monthlyOneYearFree":"e6c0637a-2bad-4171-ab4f-3c268633d83c","monthly25PercentOffFirstYear":"235ecc62-0cdb-49ae-9378-726cd21c504b","monthly20PercentOffFirstYear":"ba518864-9c13-4a99-91ca-411bf0cac756","monthly15PercentOffFirstYear":"594c029b-9f89-43d5-88f8-8173af4e070e","monthly10PercentOffFirstYear":"c6c7bc9a-40f2-4b51-8126-e28511d5bdb0","monthlyForStudents":"629ebe51-da7d-41fd-8293-34cd2f2030a8","yearlyOneYearFree":"78ba7be9-0d9f-4ece-aa3e-b54b826f2bf1","yearly25PercentOffFirstYear":"2dbb010d-bb8f-4eeb-ad5c-a08509f42d34","yearly20PercentOffFirstYear":"47565488-435b-47f8-bf93-40d5fbe0ebc8","yearly15PercentOffFirstYear":"8259809b-0881-47d9-acf7-6c001c7f720f","yearly10PercentOffFirstYear":"9dd694fb-96e1-472c-8d9e-3c868d5c1506","yearlyForStudents":"e29345ef-ab1c-4234-95c5-70e50fe6bc23","monthlyCad":"p52orjkaceei","yearlyCad":"h4q9g2up9ktt"},"braintreeDiscountId":{"oneMonthFree":"MONTHS_FREE_01","threeMonthsFree":"MONTHS_FREE_03","sixMonthsFree":"MONTHS_FREE_06","fiftyPercentOffOneYear":"FIFTY_PERCENT_OFF_ONE_YEAR"},"3DSecureVersion":"2","defaultCurrency":"usd","providerPlanIdCurrency":{"4ycw":"usd","rz3b":"usd","3kqm":"usd","jzw6":"usd","c2q2":"usd","nnsw":"usd","q8qw":"usd","d9y6":"usd","fx7w":"cad","nwf2":"cad"}},"paypalClientId":"AXj1G4fotC2GE8KzWX9mSxCH1wmPE3nJglf4Z2ig_amnhvlMVX87otaq58niAg9iuLktVNF_1WCMnN7v","paypal":{"host":"https:\u002F\u002Fapi.paypal.com:443","clientMode":"production","serverMode":"live","webhookId":"4G466076A0294510S","monthlyPlan":{"planId":"P-9WR0658853113943TMU5FDQA","name":"Medium Membership (Monthly) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"yearlyPlan":{"planId":"P-7N8963881P8875835MU5JOPQ","name":"Medium Membership (Annual) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"oneYearGift":{"name":"Medium Membership (1 Year, Digital Gift Code)","description":"Unlimited access to the best and brightest stories on Medium. Gift codes can be redeemed at medium.com\u002Fredeem.","price":"50.00","currency":"USD","sku":"membership-gift-1-yr"},"oldMonthlyPlan":{"planId":"P-96U02458LM656772MJZUVH2Y","name":"Medium Membership (Monthly)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"oldYearlyPlan":{"planId":"P-59P80963JF186412JJZU3SMI","name":"Medium Membership (Annual)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"monthlyPlanWithTrial":{"planId":"P-66C21969LR178604GJPVKUKY","name":"Medium Membership (Monthly) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"yearlyPlanWithTrial":{"planId":"P-6XW32684EX226940VKCT2MFA","name":"Medium Membership (Annual) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"oldMonthlyPlanNoSetupFee":{"planId":"P-4N046520HR188054PCJC7LJI","name":"Medium Membership (Monthly)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"oldYearlyPlanNoSetupFee":{"planId":"P-7A4913502Y5181304CJEJMXQ","name":"Medium Membership (Annual)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"sdkUrl":"https:\u002F\u002Fwww.paypal.com\u002Fsdk\u002Fjs"},"stripePublishableKey":"pk_live_7FReX44VnNIInZwrIIx6ghjl","log":{"json":true,"level":"info"},"imageUploadMaxSizeMb":25,"staffPicks":{"title":"Staff Picks","catalogId":"c7bc6e1ee00f"}},"session":{"xsrf":""}}</script><script>window.__APOLLO_STATE__ = {"ROOT_QUERY":{"__typename":"Query","viewer":null,"variantFlags":[{"__typename":"VariantFlag","name":"ios_social_share_sheet","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"crm_send_contact_to_sendgrid","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_google_one_tap","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_mastodon_avatar_upload","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_pill_based_home_feed","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_archive_page","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_in_app_free_trial","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"can_receive_tips_v0","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_import","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"reengagement_notification_duration","valueType":{"__typename":"VariantFlagNumber"}},{"__typename":"VariantFlag","name":"enable_author_cards_byline","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_deprecate_legacy_providers_v3","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_enable_editor_new_publishing_flow","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_streamline_pub_newsletters","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_iceland_nux","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_moc_load_processor_all_recs_surfaces","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_recaptcha_enterprise","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_group_gifting","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_homepage","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"allow_test_auth","valueType":{"__typename":"VariantFlagString","value":"disallow"}},{"__typename":"VariantFlag","name":"enable_explicit_signals_updated_post_previews","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_partner_program_dashboard","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_rex_aggregator_v2","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_susi_redesign_ios","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_switch_plan_premium_tier","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_see_pronouns","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_braintree_apple_pay","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_braintree_paypal","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_enable_verified_book_author","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_maim_the_meter","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_new_stripe_customers","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_rating_prompt_stories_read_threshold","valueType":{"__typename":"VariantFlagNumber"}},{"__typename":"VariantFlag","name":"enable_rex_reading_history","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_rito_upstream_deadlines","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_simplified_digest_v2_b","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_braintree_webhook","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_conversion_model_v2","valueType":{"__typename":"VariantFlagString","value":"group_1"}},{"__typename":"VariantFlag","name":"enable_google_webhook","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_explicit_signals","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_legacy_feed_in_iceland","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_recommended_publishers_query","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_apple_webhook","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_cache_less_following_feed","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_enable_syntax_highlight","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"onboarding_tags_from_top_views","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_braintree_trial_membership","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_rex_new_push_notification_endpoint","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_moc_load_processor_first_story","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_sharer_create_post_share_key","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_display_paywall_after_onboarding","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"textshots_userid","valueType":{"__typename":"VariantFlagString","value":""}},{"__typename":"VariantFlag","name":"android_enable_friend_links_postpage_banners","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_bg_post_post","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_configure_pronouns","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_response_markup","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"coronavirus_topic_recirc","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_branch_io","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_ios_autorefresh","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"available_monthly_premium_plan","valueType":{"__typename":"VariantFlagString","value":"12a660186432"}},{"__typename":"VariantFlag","name":"disable_partner_program_enrollment","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_automod","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_braintree_integration","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"allow_signup","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"signup_services","valueType":{"__typename":"VariantFlagString","value":"twitter,facebook,google,email,google-fastidv,google-one-tap,apple"}},{"__typename":"VariantFlag","name":"ios_enable_friend_links_creation","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_medium2_kbfd","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_updated_pub_recs_ui","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"glyph_font_set","valueType":{"__typename":"VariantFlagString","value":"m2-unbound-source-serif-pro"}},{"__typename":"VariantFlag","name":"enable_android_offline_reading","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_entities_to_follow_v2","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_marketing_emails","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_speechify_widget","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_two_hour_refresh","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_android_miro_v2","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_auto_follow_on_subscribe","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_update_topic_portals_wtf","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"price_smoke_test_monthly","valueType":{"__typename":"VariantFlagString","value":""}},{"__typename":"VariantFlag","name":"enable_android_verified_author","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_mastodon_for_members","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_app_flirty_thirty","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_susi_redesign_android","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_verifications_service","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_enable_lock_responses","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"limit_user_follows","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_pp_v4","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_speechify_ios","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"allow_access","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_apple_sign_in","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_mobile_lohp_short_hero","valueType":{"__typename":"VariantFlagString","value":"control"}},{"__typename":"VariantFlag","name":"enable_tick_landing_page","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_enable_lists_v2","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_footer_app_buttons","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_ios_dynamic_paywall_aspiriational","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"skip_fs_cache_user_vals","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_ml_rank_rex_anno","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_tribute_landing_page","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_enable_friend_links_postpage_banners","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"signin_services","valueType":{"__typename":"VariantFlagString","value":"twitter,facebook,google,email,google-fastidv,google-one-tap,apple"}},{"__typename":"VariantFlag","name":"available_annual_plan","valueType":{"__typename":"VariantFlagString","value":"2c754bcc2995"}},{"__typename":"VariantFlag","name":"enable_android_dynamic_aspirational_paywall","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_diversification_rex","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_creator_welcome_email","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"browsable_stream_config_bucket","valueType":{"__typename":"VariantFlagString","value":"curated-topics"}},{"__typename":"VariantFlag","name":"enable_ios_easy_resubscribe","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_continue_this_thread","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_braintree_client","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_iceland_forced_android","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_tag_recs","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"limit_post_referrers","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_aurora_pub_follower_page","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_braintree_google_pay","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_moc_load_processor_c","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_pub_stats","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_author_cards","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_enable_home_post_menu","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_gift_summer_discount","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_remove_twitter_onboarding_step","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_ios_offline_reading","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_pre_pp_v4","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_new_partner_program_enrollment_flow","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lo_homepage","valueType":{"__typename":"VariantFlagString","value":"control"}},{"__typename":"VariantFlag","name":"reader_fair_distribution_non_qp","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_enable_topic_portals","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"available_monthly_plan","valueType":{"__typename":"VariantFlagString","value":"60e220181034"}},{"__typename":"VariantFlag","name":"available_annual_premium_plan","valueType":{"__typename":"VariantFlagString","value":"4a442ace1476"}},{"__typename":"VariantFlag","name":"enable_android_dynamic_programming_paywall","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_medium_forever_introductory_discount","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"redefined_top_posts","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_tipping_v0_ios","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_mastodon_for_members_username_selection","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_premium_tier_badge","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"rex_generator_max_candidates","valueType":{"__typename":"VariantFlagNumber"}},{"__typename":"VariantFlag","name":"enable_premium_tier","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_ios_dynamic_paywall_programming","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_server_upstream_deadlines","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_newsletter_lo_flow_custom_domains","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"can_send_tips_v0","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_eventstats_event_processing","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_sharer_validate_post_share_key","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_sprig","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_starspace","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"mobile_custom_app_icon","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_recirc_model","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_seamless_social_sharing","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_enable_friend_links_creation","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_tipping_v0_android","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_enable_image_sharer","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_members_only_audio","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"price_smoke_test_yearly","valueType":{"__typename":"VariantFlagString","value":""}}],"collectionByDomainOrSlug({\"domainOrSlug\":\"itnext.io\"})":{"__ref":"Collection:5b301f10ddcd"},"postResult({\"id\":\"5b7d5d55d7dd\"})":{"__ref":"Post:5b7d5d55d7dd"}},"ImageMetadata:1*SiXeRxgOt0pAYlYhwZIu3g.png":{"__typename":"ImageMetadata","id":"1*SiXeRxgOt0pAYlYhwZIu3g.png"},"Collection:5b301f10ddcd":{"__typename":"Collection","id":"5b301f10ddcd","favicon":{"__ref":"ImageMetadata:1*SiXeRxgOt0pAYlYhwZIu3g.png"},"customStyleSheet":null,"colorPalette":{"__typename":"ColorPalette","highlightSpectrum":{"__typename":"ColorSpectrum","backgroundColor":"#FFFFFFFF","colorPoints":[{"__typename":"ColorPoint","color":"#FFE6F5FF","point":0},{"__typename":"ColorPoint","color":"#FFE2F4FF","point":0.1},{"__typename":"ColorPoint","color":"#FFDDF2FF","point":0.2},{"__typename":"ColorPoint","color":"#FFD8F1FF","point":0.3},{"__typename":"ColorPoint","color":"#FFD3F0FF","point":0.4},{"__typename":"ColorPoint","color":"#FFCDEFFF","point":0.5},{"__typename":"ColorPoint","color":"#FFC8EDFF","point":0.6},{"__typename":"ColorPoint","color":"#FFC3ECFF","point":0.7},{"__typename":"ColorPoint","color":"#FFBDEBFF","point":0.8},{"__typename":"ColorPoint","color":"#FFB7E9FF","point":0.9},{"__typename":"ColorPoint","color":"#FFB1E8FF","point":1}]},"defaultBackgroundSpectrum":{"__typename":"ColorSpectrum","backgroundColor":"#FFFFFFFF","colorPoints":[{"__typename":"ColorPoint","color":"#FF3F8DCE","point":0},{"__typename":"ColorPoint","color":"#FF3F83BD","point":0.1},{"__typename":"ColorPoint","color":"#FF3D79AD","point":0.2},{"__typename":"ColorPoint","color":"#FF3B6E9C","point":0.3},{"__typename":"ColorPoint","color":"#FF38648B","point":0.4},{"__typename":"ColorPoint","color":"#FF34597A","point":0.5},{"__typename":"ColorPoint","color":"#FF2F4E6A","point":0.6},{"__typename":"ColorPoint","color":"#FF2A4259","point":0.7},{"__typename":"ColorPoint","color":"#FF233648","point":0.8},{"__typename":"ColorPoint","color":"#FF1B2937","point":0.9},{"__typename":"ColorPoint","color":"#FF121B25","point":1}]},"tintBackgroundSpectrum":{"__typename":"ColorSpectrum","backgroundColor":"#FF1A71B1","colorPoints":[{"__typename":"ColorPoint","color":"#FF1A71B1","point":0},{"__typename":"ColorPoint","color":"#FF3E82BC","point":0.1},{"__typename":"ColorPoint","color":"#FF5892C7","point":0.2},{"__typename":"ColorPoint","color":"#FF6EA1D1","point":0.3},{"__typename":"ColorPoint","color":"#FF84B0DB","point":0.4},{"__typename":"ColorPoint","color":"#FF98BEE4","point":0.5},{"__typename":"ColorPoint","color":"#FFACCCED","point":0.6},{"__typename":"ColorPoint","color":"#FFBFDAF6","point":0.7},{"__typename":"ColorPoint","color":"#FFD1E7FE","point":0.8},{"__typename":"ColorPoint","color":"#FFE4F4FF","point":0.9},{"__typename":"ColorPoint","color":"#FFF6FFFF","point":1}]}},"googleAnalyticsId":"UA-29035124-5","editors":[{"__typename":"CollectionMastheadUserItem","user":{"__ref":"User:bd28806f72a6"}},{"__typename":"CollectionMastheadUserItem","user":{"__ref":"User:a00cb31d6074"}},{"__typename":"CollectionMastheadUserItem","user":{"__ref":"User:5db23d2304f9"}},{"__typename":"CollectionMastheadUserItem","user":{"__ref":"User:cb3f1b710e82"}},{"__typename":"CollectionMastheadUserItem","user":{"__ref":"User:56eec51fd7a0"}}],"name":"ITNEXT","avatar":{"__ref":"ImageMetadata:1*yAqDFIFA5F_NXalOJKz4TA.png"},"domain":"itnext.io","slug":"itnext","description":"ITNEXT is a platform for IT developers & software engineers to share knowledge, connect, collaborate, learn and experience next-gen technologies.","subscriberCount":57522,"viewerEdge":{"__ref":"CollectionViewerEdge:collectionId:5b301f10ddcd-viewerId:lo_06fe2b88f66c"},"twitterUsername":"itnext_io","facebookPageId":null,"logo":{"__ref":"ImageMetadata:1*jWhTrIoYwTUdKuVXycqAaw.png"}},"User:bd28806f72a6":{"__typename":"User","id":"bd28806f72a6"},"User:a00cb31d6074":{"__typename":"User","id":"a00cb31d6074"},"User:5db23d2304f9":{"__typename":"User","id":"5db23d2304f9"},"User:cb3f1b710e82":{"__typename":"User","id":"cb3f1b710e82"},"User:56eec51fd7a0":{"__typename":"User","id":"56eec51fd7a0"},"ImageMetadata:1*yAqDFIFA5F_NXalOJKz4TA.png":{"__typename":"ImageMetadata","id":"1*yAqDFIFA5F_NXalOJKz4TA.png"},"LinkedAccounts:83ef5b231666":{"__typename":"LinkedAccounts","mastodon":null,"id":"83ef5b231666"},"UserViewerEdge:userId:83ef5b231666-viewerId:lo_06fe2b88f66c":{"__typename":"UserViewerEdge","id":"userId:83ef5b231666-viewerId:lo_06fe2b88f66c","isFollowing":false,"isUser":false,"isMuting":false},"NewsletterV3:631786b3a66e":{"__typename":"NewsletterV3","id":"631786b3a66e","type":"NEWSLETTER_TYPE_AUTHOR","slug":"83ef5b231666","name":"83ef5b231666","collection":null,"user":{"__ref":"User:83ef5b231666"}},"User:83ef5b231666":{"__typename":"User","id":"83ef5b231666","name":"Alex Pliutau","username":"pliutau","newsletterV3":{"__ref":"NewsletterV3:631786b3a66e"},"linkedAccounts":{"__ref":"LinkedAccounts:83ef5b231666"},"isSuspended":false,"imageId":"1*0GZGQK6ulOCFFdWNdu_sPQ.png","mediumMemberAt":0,"verifications":{"__typename":"VerifiedInfo","isBookAuthor":false},"socialStats":{"__typename":"SocialStats","followerCount":250},"customDomainState":null,"hasSubdomain":false,"bio":"https:\u002F\u002Fpackagemain.tech\u002F","isPartnerProgramEnrolled":false,"viewerEdge":{"__ref":"UserViewerEdge:userId:83ef5b231666-viewerId:lo_06fe2b88f66c"},"viewerIsUser":false,"postSubscribeMembershipUpsellShownAt":0,"allowNotes":true,"twitterScreenName":"pliutau","membership":null},"Paragraph:895237bdcb94_0":{"__typename":"Paragraph","id":"895237bdcb94_0","name":"5777","type":"H3","href":null,"layout":null,"metadata":null,"text":"The Developer’s Guide to Database Proxies: When to Use Them and How to Create One","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:0*LX3rIy93k4PzA0T_.jpeg":{"__typename":"ImageMetadata","id":"0*LX3rIy93k4PzA0T_.jpeg","originalHeight":883,"originalWidth":1456,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:895237bdcb94_1":{"__typename":"Paragraph","id":"895237bdcb94_1","name":"3924","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:0*LX3rIy93k4PzA0T_.jpeg"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_2":{"__typename":"Paragraph","id":"895237bdcb94_2","name":"9448","type":"P","href":null,"layout":null,"metadata":null,"text":"Read the original article on packagemain.tech","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":45,"href":"https:\u002F\u002Fpackagemain.tech\u002Fp\u002Fthe-developers-guide-to-database","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_3":{"__typename":"Paragraph","id":"895237bdcb94_3","name":"9c6d","type":"P","href":null,"layout":null,"metadata":null,"text":"Database Proxy is a layer of abstraction between your applications and the underlying database(s).","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_4":{"__typename":"Paragraph","id":"895237bdcb94_4","name":"6292","type":"P","href":null,"layout":null,"metadata":null,"text":"Imagine a complex distributed system that relies heavily on data, where each microservice or a team connects to a database individually (it can be a shared database or specific\u002Fisolated ones). Such a complex platform requires things like centralized monitoring, query validations, alerting, custom sharding, and better security, you name it. While you can get a lot of that from your database server, implementing a database proxy may be a better approach (if you’re ready to invest in it).","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_5":{"__typename":"Paragraph","id":"895237bdcb94_5","name":"d078","type":"P","href":null,"layout":null,"metadata":null,"text":"The main advantage of using a database proxy is that it isolates the database topology from the application layer, so that developers don’t need to know about clusters, nodes and internals of the Data layer (to some extent obviously).","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_6":{"__typename":"Paragraph","id":"895237bdcb94_6","name":"9c6a","type":"H3","href":null,"layout":null,"metadata":null,"text":"Database Proxy Use Cases","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_7":{"__typename":"Paragraph","id":"895237bdcb94_7","name":"0b0c","type":"P","href":null,"layout":null,"metadata":null,"text":"Let’s dive into the various ways database proxies can empower your development teams, enhance security, and optimize database performance.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_8":{"__typename":"Paragraph","id":"895237bdcb94_8","name":"39f5","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Intercept SQL queries from applications and dynamically route them to the correct database\u002Ftable (for example custom sharding). Figma is doing exactly that with their internal Postgres proxy.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":137,"end":155,"href":"https:\u002F\u002Fwww.figma.com\u002Fblog\u002Fhow-figmas-databases-team-lived-to-tell-the-scale\u002F","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":21,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_9":{"__typename":"Paragraph","id":"895237bdcb94_9","name":"548a","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Parse\u002FAnalyze\u002FValidate SQL queries from developers and enrich the response with additional information. Could be useful to tell applications which tables are going to be deprecated.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":34,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_10":{"__typename":"Paragraph","id":"895237bdcb94_10","name":"7660","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Scalability and schema changes without impacting applications. Platform\u002FDatabase teams can independently change the schema without rewriting hundreds of microservices. The ability to transparently add or remove nodes in the database cluster without having to reconfigure or restart an application.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":62,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_11":{"__typename":"Paragraph","id":"895237bdcb94_11","name":"ce77","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Enforce security policies and perform authentication and authorization checks to ensure that only authorized clients can access the database. Direct access to a database can be also forbidden.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":25,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_12":{"__typename":"Paragraph","id":"895237bdcb94_12","name":"16fa","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Improve the performance of database communication by centrally managing the pool of connections, utilizing cache technics, etc.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":23,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_13":{"__typename":"Paragraph","id":"895237bdcb94_13","name":"456a","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Centralized observability. Get notified when an application is using a deprecated table, and much more.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":26,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_14":{"__typename":"Paragraph","id":"895237bdcb94_14","name":"17e3","type":"H3","href":null,"layout":null,"metadata":null,"text":"When to use a Database Proxy","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_15":{"__typename":"Paragraph","id":"895237bdcb94_15","name":"54cc","type":"P","href":null,"layout":null,"metadata":null,"text":"Not all systems need a database proxy, especially early on. Here is the general guideline for when it might become necessary:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_16":{"__typename":"Paragraph","id":"895237bdcb94_16","name":"dc4a","type":"ULI","href":null,"layout":null,"metadata":null,"text":"You have multiple development teams split by different disciplines: for example multiple Backend Teams, Data Engineering team.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_17":{"__typename":"Paragraph","id":"895237bdcb94_17","name":"bb89","type":"ULI","href":null,"layout":null,"metadata":null,"text":"You have a Platform\u002FDatabase team to be an owner of that. Though other teams can own it as well.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_18":{"__typename":"Paragraph","id":"895237bdcb94_18","name":"c520","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Your system is distributed, and you maintain many microservices and many databases.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_19":{"__typename":"Paragraph","id":"895237bdcb94_19","name":"cea8","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Your system is data-heavy.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_20":{"__typename":"Paragraph","id":"895237bdcb94_20","name":"0d8c","type":"ULI","href":null,"layout":null,"metadata":null,"text":"You need better Security and Observability.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_21":{"__typename":"Paragraph","id":"895237bdcb94_21","name":"fb56","type":"H3","href":null,"layout":null,"metadata":null,"text":"Cost of having a Database Proxy","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_22":{"__typename":"Paragraph","id":"895237bdcb94_22","name":"27a4","type":"P","href":null,"layout":null,"metadata":null,"text":"Using a Database Proxy does come at a cost:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_23":{"__typename":"Paragraph","id":"895237bdcb94_23","name":"24bc","type":"ULI","href":null,"layout":null,"metadata":null,"text":"A database proxy is a new element in the infrastructure with its own complexity.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_24":{"__typename":"Paragraph","id":"895237bdcb94_24","name":"c54b","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Could be a single point of failure, so has to be very stable and battle-tested.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_25":{"__typename":"Paragraph","id":"895237bdcb94_25","name":"a61e","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Additional network latency.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_26":{"__typename":"Paragraph","id":"895237bdcb94_26","name":"69a7","type":"H3","href":null,"layout":null,"metadata":null,"text":"Types of Database Proxies","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_27":{"__typename":"Paragraph","id":"895237bdcb94_27","name":"07f1","type":"P","href":null,"layout":null,"metadata":null,"text":"There are a few ways how you can deploy a database proxy:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_28":{"__typename":"Paragraph","id":"895237bdcb94_28","name":"686c","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Custom proxy service (below I’ll provide a simple example in Go)","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_29":{"__typename":"Paragraph","id":"895237bdcb94_29","name":"cc8c","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Managed Cloud solutions like Amazon RDS Proxy","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":29,"end":45,"href":"https:\u002F\u002Faws.amazon.com\u002Frds\u002Fproxy\u002F","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_30":{"__typename":"Paragraph","id":"895237bdcb94_30","name":"ddd4","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Sidecars like Cyral","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":14,"end":19,"href":"https:\u002F\u002Fcyral.com\u002F","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_31":{"__typename":"Paragraph","id":"895237bdcb94_31","name":"3546","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Commercial and open-source products like ProxySQL, or dbpack","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":41,"end":49,"href":"https:\u002F\u002Fproxysql.com\u002F","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":54,"end":60,"href":"https:\u002F\u002Fgithub.com\u002Fcectc\u002Fdbpack","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_32":{"__typename":"Paragraph","id":"895237bdcb94_32","name":"2619","type":"H3","href":null,"layout":null,"metadata":null,"text":"Writing a custom Database Proxy Service in Go","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_33":{"__typename":"Paragraph","id":"895237bdcb94_33","name":"e41a","type":"P","href":null,"layout":null,"metadata":null,"text":"Now, we are going to implement our own MySQL proxy using Go. Keep in mind that this is only an experiment to explain the idea.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_34":{"__typename":"Paragraph","id":"895237bdcb94_34","name":"96e5","type":"P","href":null,"layout":null,"metadata":null,"text":"Our proxy will solve a very simple use case: intercept SQL query and rewrite table name if it matches a pattern.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_35":{"__typename":"Paragraph","id":"895237bdcb94_35","name":"f16e","type":"PRE","href":null,"layout":null,"metadata":null,"text":"-- Application-generated query\nSELECT * FROM orders_v1;\n\n-- Rewritten query\nSELECT * FROM orders_v2;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"sql"},"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_36":{"__typename":"Paragraph","id":"895237bdcb94_36","name":"2eac","type":"P","href":null,"layout":null,"metadata":null,"text":"The implementation is divided into two parts:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_37":{"__typename":"Paragraph","id":"895237bdcb94_37","name":"da11","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Basic proxy to route queries from client to MySQL server.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_38":{"__typename":"Paragraph","id":"895237bdcb94_38","name":"bbf2","type":"OLI","href":null,"layout":null,"metadata":null,"text":"SQL parser with some logic to manipulate the query before it’s sent.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_39":{"__typename":"Paragraph","id":"895237bdcb94_39","name":"a4c9","type":"P","href":null,"layout":null,"metadata":null,"text":"You can see the full source in this Github repository.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":31,"end":53,"href":"https:\u002F\u002Fgithub.com\u002Fplutov\u002Fpackagemain\u002Ftree\u002Fmaster\u002Fdatabase-proxy","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_40":{"__typename":"Paragraph","id":"895237bdcb94_40","name":"2296","type":"H3","href":null,"layout":null,"metadata":null,"text":"TCP proxy from client to MySQL server","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_41":{"__typename":"Paragraph","id":"895237bdcb94_41","name":"5e92","type":"P","href":null,"layout":null,"metadata":null,"text":"Our TCP Proxy is implemented in a very naive approach, and is definitely not production-ready, but is enough to demonstrate how TCP transport works:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_42":{"__typename":"Paragraph","id":"895237bdcb94_42","name":"1dbd","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Create a proxy TCP server","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_43":{"__typename":"Paragraph","id":"895237bdcb94_43","name":"c0b9","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Accept the connection","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_44":{"__typename":"Paragraph","id":"895237bdcb94_44","name":"60f6","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Create TCP connection to MySQL","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_45":{"__typename":"Paragraph","id":"895237bdcb94_45","name":"9921","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Proxy byte stream from the client to the MySQL Server, and back by using pipes","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_46":{"__typename":"Paragraph","id":"895237bdcb94_46","name":"f1e4","type":"BQ","href":null,"layout":null,"metadata":null,"text":"main.go","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":7,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_47":{"__typename":"Paragraph","id":"895237bdcb94_47","name":"b568","type":"PRE","href":null,"layout":null,"metadata":null,"text":"package main\n\nimport (\n  \"fmt\"\n  \"io\"\n  \"log\"\n  \"net\"\n  \"os\"\n)\nfunc main() {\n  \u002F\u002F proxy listens on port 3307\n  proxy, err := net.Listen(\"tcp\", \":3307\")\n  if err != nil {\n    log.Fatalf(\"failed to start proxy: %s\", err.Error())\n  }\n  for {\n    conn, err := proxy.Accept()\n    log.Printf(\"new connection: %s\", conn.RemoteAddr())\n    if err != nil {\n      log.Fatalf(\"failed to accept connection: %s\", err.Error())\n    }\n    go transport(conn)\n  }\n}\nfunc transport(conn net.Conn) {\n  defer conn.Close()\n  mysqlAddr := fmt.Sprintf(\"%s:%s\", os.Getenv(\"MYSQL_HOST\"), os.Getenv(\"MYSQL_PORT\"))\n  mysqlConn, err := net.Dial(\"tcp\", mysqlAddr)\n  if err != nil {\n    log.Printf(\"failed to connect to mysql: %s\", err.Error())\n    return\n  }\n  readChan := make(chan int64)\n  writeChan := make(chan int64)\n  var readBytes, writeBytes int64\n  \u002F\u002F from proxy to mysql\n  go pipe(mysqlConn, conn, true)\n  \u002F\u002F from mysql to proxy\n  go pipe(conn, mysqlConn, false)\n  readBytes = \u003C-readChan\n  writeBytes = \u003C-writeChan\n  log.Printf(\"connection closed. read bytes: %d, write bytes: %d\", readBytes, writeBytes)\n}\nfunc pipe(dst, src net.Conn, send bool) {\n  if send {\n    intercept(src, dst)\n  }\n  _, err := io.Copy(dst, src)\n  if err != nil {\n    log.Printf(\"connection error: %s\", err.Error())\n  }\n}\nfunc intercept(src, dst net.Conn) {\n  buffer := make([]byte, 4096)\n  for {\n    n, _ := src.Read(buffer)\n    dst.Write(buffer[0:n])\n  }\n}","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"go"},"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_48":{"__typename":"Paragraph","id":"895237bdcb94_48","name":"02c9","type":"P","href":null,"layout":null,"metadata":null,"text":"Functions explained:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_49":{"__typename":"Paragraph","id":"895237bdcb94_49","name":"5383","type":"ULI","href":null,"layout":null,"metadata":null,"text":"transport — handles TCP connection and pipes bytes in two directions.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":9,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_50":{"__typename":"Paragraph","id":"895237bdcb94_50","name":"dc58","type":"ULI","href":null,"layout":null,"metadata":null,"text":"pipe — pipes bytes, if it’s proxy → mysql, it also calls intercept to process the query.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":4,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_51":{"__typename":"Paragraph","id":"895237bdcb94_51","name":"4601","type":"ULI","href":null,"layout":null,"metadata":null,"text":"intercept — we will implement it later to parse the query.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":9,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_52":{"__typename":"Paragraph","id":"895237bdcb94_52","name":"3a53","type":"BQ","href":null,"layout":null,"metadata":null,"text":"Dockerfile","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":10,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_53":{"__typename":"Paragraph","id":"895237bdcb94_53","name":"705b","type":"PRE","href":null,"layout":null,"metadata":null,"text":"FROM golang:1.22 as builder\n\nWORKDIR \u002F\nCOPY . .\nRUN CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -o proxy main.go\nFROM alpine:latest\nCOPY --from=builder \u002Fproxy .\nEXPOSE 3307\nCMD [\".\u002Fproxy\"]","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"sql"},"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_54":{"__typename":"Paragraph","id":"895237bdcb94_54","name":"fe28","type":"BQ","href":null,"layout":null,"metadata":null,"text":"docker-compose.yaml","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":19,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_55":{"__typename":"Paragraph","id":"895237bdcb94_55","name":"c4fe","type":"PRE","href":null,"layout":null,"metadata":null,"text":"services:\n  proxy:\n    restart: always\n    build:\n      context: .\n    ports:\n      - 3307:3307\n    environment:\n      - MYSQL_HOST=mysql\n      - MYSQL_PORT=3306\n    links:\n      - mysql\nmysql:\n    restart: always\n    image: mysql:5.7\n    platform: linux\u002Famd64\n    ports:\n      - 3306:3306\n    environment:\n      - MYSQL_ROOT_PASSWORD=root\n    command: --init-file \u002Fdata\u002Fapplication\u002Finit.sql\n    volumes:\n      - .\u002Finit.sql:\u002Fdata\u002Fapplication\u002Finit.sql","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"yaml"},"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_56":{"__typename":"Paragraph","id":"895237bdcb94_56","name":"cad8","type":"BQ","href":null,"layout":null,"metadata":null,"text":"init.sql","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":8,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_57":{"__typename":"Paragraph","id":"895237bdcb94_57","name":"b5dc","type":"PRE","href":null,"layout":null,"metadata":null,"text":"CREATE DATABASE IF NOT EXISTS packagemain;\n\nCREATE TABLE IF NOT EXISTS packagemain.orders_v2 (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    name VARCHAR(255) NOT NULL\n) ENGINE=InnoDB;\nINSERT INTO packagemain.orders_v2 (name) VALUES ('order1');","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"sql"},"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_58":{"__typename":"Paragraph","id":"895237bdcb94_58","name":"8e51","type":"P","href":null,"layout":null,"metadata":null,"text":"Note: we don’t have orders_v1 table in our database.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":20,"end":29,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_59":{"__typename":"Paragraph","id":"895237bdcb94_59","name":"0775","type":"H3","href":null,"layout":null,"metadata":null,"text":"SQL Parsing","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_60":{"__typename":"Paragraph","id":"895237bdcb94_60","name":"8237","type":"P","href":null,"layout":null,"metadata":null,"text":"Our function intercept can already get a bytes packet. It’s good to understand how MySQL packet is structured. I won’t get into details, but you can read it here.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":149,"end":161,"href":"https:\u002F\u002Fwww.oreilly.com\u002Flibrary\u002Fview\u002Funderstanding-mysql-internals\u002F0596009577\u002Fch04.html","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":13,"end":22,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_61":{"__typename":"Paragraph","id":"895237bdcb94_61","name":"2aa2","type":"P","href":null,"layout":null,"metadata":null,"text":"In our intercept function we do the following:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_62":{"__typename":"Paragraph","id":"895237bdcb94_62","name":"6523","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Look for a COM_QUERY client command which has a numeric code 3.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":11,"end":20,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_63":{"__typename":"Paragraph","id":"895237bdcb94_63","name":"7c5d","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Get the raw query.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_64":{"__typename":"Paragraph","id":"895237bdcb94_64","name":"e78a","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Do very basic table rename.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_65":{"__typename":"Paragraph","id":"895237bdcb94_65","name":"616a","type":"P","href":null,"layout":null,"metadata":null,"text":"There is a great package sqlparser from Youtube’s Vitess project, which we can use to parse SQL queries. However, for simplicity of this demonstration, we’re going to use string matching and replacing.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":25,"end":34,"href":"https:\u002F\u002Fgithub.com\u002Fvitessio\u002Fvitess\u002Ftree\u002Fmain\u002Fgo\u002Fvt\u002Fsqlparser","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_66":{"__typename":"Paragraph","id":"895237bdcb94_66","name":"4263","type":"BQ","href":null,"layout":null,"metadata":null,"text":"main.go","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":7,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_67":{"__typename":"Paragraph","id":"895237bdcb94_67","name":"5d75","type":"PRE","href":null,"layout":null,"metadata":null,"text":"const COM_QUERY = byte(0x03)\n\nfunc intercept(src, dst net.Conn) {\n  buffer := make([]byte, 4096)\n  for {\n    n, _ := src.Read(buffer)\n    if n \u003E 5 {\n      switch buffer[4] {\n      case COM_QUERY:\n        clientQuery := string(buffer[5:n])\n        newQuery := rewriteQuery(clientQuery)\n        fmt.Printf(\"client query: %s\\n\", clientQuery)\n        fmt.Printf(\"server query: %s\\n\", newQuery)\n        writeModifiedPacket(dst, buffer[:5], newQuery)\n        continue\n      }\n    }\n    dst.Write(buffer[0:n])\n  }\n}\nfunc rewriteQuery(query string) string {\n  return strings.NewReplacer(\"from orders_v1\", \"from orders_v2\").Replace(strings.ToLower(query))\n}\nfunc writeModifiedPacket(dst net.Conn, header []byte, query string) {\n  newBuffer := make([]byte, 5+len(query))\n  copy(newBuffer, header)\n  copy(newBuffer[5:], []byte(query))\n  dst.Write(newBuffer)\n}","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"go"},"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_68":{"__typename":"Paragraph","id":"895237bdcb94_68","name":"8103","type":"H3","href":null,"layout":null,"metadata":null,"text":"Running the proxy and connecting to it","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_69":{"__typename":"Paragraph","id":"895237bdcb94_69","name":"f756","type":"P","href":null,"layout":null,"metadata":null,"text":"Here we connect to our Proxy which is running on port 3307, not a MySQL server itself (port 3306). And as you can see we can use regular MySQL client, which simplifies the use of this proxy.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:0*4ELSQWjcFWLivzp-.png":{"__typename":"ImageMetadata","id":"0*4ELSQWjcFWLivzp-.png","originalHeight":514,"originalWidth":1456,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:895237bdcb94_70":{"__typename":"Paragraph","id":"895237bdcb94_70","name":"c2a0","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:0*4ELSQWjcFWLivzp-.png"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_71":{"__typename":"Paragraph","id":"895237bdcb94_71","name":"4f28","type":"P","href":null,"layout":null,"metadata":null,"text":"Which means orders_v1 table got rerouted to orders_v2. Proxy logs:","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":12,"end":21,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":44,"end":53,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_72":{"__typename":"Paragraph","id":"895237bdcb94_72","name":"f4ed","type":"PRE","href":null,"layout":null,"metadata":null,"text":"client query: select * from orders_v1;\nserver query: select * from orders_v2;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"csharp"},"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_73":{"__typename":"Paragraph","id":"895237bdcb94_73","name":"85be","type":"H3","href":null,"layout":null,"metadata":null,"text":"Conclusion","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_74":{"__typename":"Paragraph","id":"895237bdcb94_74","name":"ddb0","type":"P","href":null,"layout":null,"metadata":null,"text":"In conclusion, a database proxy offers a powerful layer of abstraction between your applications and the underlying database(s). It streamlines development by isolating database complexity, empowers database teams with independent schema changes, and enhances security through centralized access control. While there are additional costs like infrastructure overhead and potential latency, for complex distributed systems with multiple teams and data-intensive needs, a database proxy can be a worthwhile investment.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_75":{"__typename":"Paragraph","id":"895237bdcb94_75","name":"a070","type":"P","href":null,"layout":null,"metadata":null,"text":"Source Code.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":11,"href":"https:\u002F\u002Fgithub.com\u002Fplutov\u002Fpackagemain\u002Ftree\u002Fmaster\u002Fdatabase-proxy","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:895237bdcb94_76":{"__typename":"Paragraph","id":"895237bdcb94_76","name":"bf6c","type":"P","href":null,"layout":null,"metadata":null,"text":"Read the original article on packagemain.tech","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":45,"href":"https:\u002F\u002Fpackagemain.tech\u002Fp\u002Fthe-developers-guide-to-database","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"CollectionViewerEdge:collectionId:5b301f10ddcd-viewerId:lo_06fe2b88f66c":{"__typename":"CollectionViewerEdge","id":"collectionId:5b301f10ddcd-viewerId:lo_06fe2b88f66c","isEditor":false,"isMuting":false},"ImageMetadata:1*jWhTrIoYwTUdKuVXycqAaw.png":{"__typename":"ImageMetadata","id":"1*jWhTrIoYwTUdKuVXycqAaw.png","originalWidth":800,"originalHeight":152},"Tag:database":{"__typename":"Tag","id":"database","displayTitle":"Database","normalizedTagSlug":"database"},"Tag:go":{"__typename":"Tag","id":"go","displayTitle":"Go","normalizedTagSlug":"go"},"Tag:golang":{"__typename":"Tag","id":"golang","displayTitle":"Golang","normalizedTagSlug":"golang"},"Tag:mysql":{"__typename":"Tag","id":"mysql","displayTitle":"MySQL","normalizedTagSlug":"mysql"},"Tag:sql":{"__typename":"Tag","id":"sql","displayTitle":"Sql","normalizedTagSlug":"sql"},"Post:5b7d5d55d7dd":{"__typename":"Post","id":"5b7d5d55d7dd","collection":{"__ref":"Collection:5b301f10ddcd"},"content({\"postMeteringOptions\":{}})":{"__typename":"PostContent","isLockedPreviewOnly":false,"bodyModel":{"__typename":"RichText","sections":[{"__typename":"Section","name":"8bdc","startIndex":0,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null}],"paragraphs":[{"__ref":"Paragraph:895237bdcb94_0"},{"__ref":"Paragraph:895237bdcb94_1"},{"__ref":"Paragraph:895237bdcb94_2"},{"__ref":"Paragraph:895237bdcb94_3"},{"__ref":"Paragraph:895237bdcb94_4"},{"__ref":"Paragraph:895237bdcb94_5"},{"__ref":"Paragraph:895237bdcb94_6"},{"__ref":"Paragraph:895237bdcb94_7"},{"__ref":"Paragraph:895237bdcb94_8"},{"__ref":"Paragraph:895237bdcb94_9"},{"__ref":"Paragraph:895237bdcb94_10"},{"__ref":"Paragraph:895237bdcb94_11"},{"__ref":"Paragraph:895237bdcb94_12"},{"__ref":"Paragraph:895237bdcb94_13"},{"__ref":"Paragraph:895237bdcb94_14"},{"__ref":"Paragraph:895237bdcb94_15"},{"__ref":"Paragraph:895237bdcb94_16"},{"__ref":"Paragraph:895237bdcb94_17"},{"__ref":"Paragraph:895237bdcb94_18"},{"__ref":"Paragraph:895237bdcb94_19"},{"__ref":"Paragraph:895237bdcb94_20"},{"__ref":"Paragraph:895237bdcb94_21"},{"__ref":"Paragraph:895237bdcb94_22"},{"__ref":"Paragraph:895237bdcb94_23"},{"__ref":"Paragraph:895237bdcb94_24"},{"__ref":"Paragraph:895237bdcb94_25"},{"__ref":"Paragraph:895237bdcb94_26"},{"__ref":"Paragraph:895237bdcb94_27"},{"__ref":"Paragraph:895237bdcb94_28"},{"__ref":"Paragraph:895237bdcb94_29"},{"__ref":"Paragraph:895237bdcb94_30"},{"__ref":"Paragraph:895237bdcb94_31"},{"__ref":"Paragraph:895237bdcb94_32"},{"__ref":"Paragraph:895237bdcb94_33"},{"__ref":"Paragraph:895237bdcb94_34"},{"__ref":"Paragraph:895237bdcb94_35"},{"__ref":"Paragraph:895237bdcb94_36"},{"__ref":"Paragraph:895237bdcb94_37"},{"__ref":"Paragraph:895237bdcb94_38"},{"__ref":"Paragraph:895237bdcb94_39"},{"__ref":"Paragraph:895237bdcb94_40"},{"__ref":"Paragraph:895237bdcb94_41"},{"__ref":"Paragraph:895237bdcb94_42"},{"__ref":"Paragraph:895237bdcb94_43"},{"__ref":"Paragraph:895237bdcb94_44"},{"__ref":"Paragraph:895237bdcb94_45"},{"__ref":"Paragraph:895237bdcb94_46"},{"__ref":"Paragraph:895237bdcb94_47"},{"__ref":"Paragraph:895237bdcb94_48"},{"__ref":"Paragraph:895237bdcb94_49"},{"__ref":"Paragraph:895237bdcb94_50"},{"__ref":"Paragraph:895237bdcb94_51"},{"__ref":"Paragraph:895237bdcb94_52"},{"__ref":"Paragraph:895237bdcb94_53"},{"__ref":"Paragraph:895237bdcb94_54"},{"__ref":"Paragraph:895237bdcb94_55"},{"__ref":"Paragraph:895237bdcb94_56"},{"__ref":"Paragraph:895237bdcb94_57"},{"__ref":"Paragraph:895237bdcb94_58"},{"__ref":"Paragraph:895237bdcb94_59"},{"__ref":"Paragraph:895237bdcb94_60"},{"__ref":"Paragraph:895237bdcb94_61"},{"__ref":"Paragraph:895237bdcb94_62"},{"__ref":"Paragraph:895237bdcb94_63"},{"__ref":"Paragraph:895237bdcb94_64"},{"__ref":"Paragraph:895237bdcb94_65"},{"__ref":"Paragraph:895237bdcb94_66"},{"__ref":"Paragraph:895237bdcb94_67"},{"__ref":"Paragraph:895237bdcb94_68"},{"__ref":"Paragraph:895237bdcb94_69"},{"__ref":"Paragraph:895237bdcb94_70"},{"__ref":"Paragraph:895237bdcb94_71"},{"__ref":"Paragraph:895237bdcb94_72"},{"__ref":"Paragraph:895237bdcb94_73"},{"__ref":"Paragraph:895237bdcb94_74"},{"__ref":"Paragraph:895237bdcb94_75"},{"__ref":"Paragraph:895237bdcb94_76"}]},"validatedShareKey":"","shareKeyCreator":null},"creator":{"__ref":"User:83ef5b231666"},"inResponseToEntityType":null,"isLocked":false,"isMarkedPaywallOnly":false,"lockedSource":"LOCKED_POST_SOURCE_NONE","mediumUrl":"https:\u002F\u002Fitnext.io\u002Fthe-developers-guide-to-database-proxies-when-to-use-them-and-how-to-create-one-5b7d5d55d7dd","primaryTopic":null,"topics":[{"__typename":"Topic","slug":"programming"}],"isPublished":true,"latestPublishedVersion":"895237bdcb94","visibility":"PUBLIC","postResponses":{"__typename":"PostResponses","count":0},"clapCount":7,"allowResponses":true,"isLimitedState":false,"title":"The Developer’s Guide to Database Proxies: When to Use Them and How to Create One","isSeries":false,"sequence":null,"uniqueSlug":"the-developers-guide-to-database-proxies-when-to-use-them-and-how-to-create-one-5b7d5d55d7dd","socialTitle":"","socialDek":"","noIndex":null,"canonicalUrl":"","metaDescription":"","latestPublishedAt":1722330352716,"readingTime":5.372012578616353,"previewContent":{"__typename":"PreviewContent","subtitle":"Read the original article on packagemain.tech"},"previewImage":{"__ref":"ImageMetadata:0*LX3rIy93k4PzA0T_.jpeg"},"isShortform":false,"seoTitle":"","firstPublishedAt":1722329404855,"updatedAt":1722403218255,"shortformType":"SHORTFORM_TYPE_LINK","seoDescription":"","isSuspended":false,"license":"ALL_RIGHTS_RESERVED","tags":[{"__ref":"Tag:database"},{"__ref":"Tag:go"},{"__ref":"Tag:golang"},{"__ref":"Tag:mysql"},{"__ref":"Tag:sql"}],"isNewsletter":false,"statusForCollection":"APPROVED","pendingCollection":null,"detectedLanguage":"en","wordCount":1322,"layerCake":0}}</script><script src="https://cdn-client.medium.com/lite/static/js/manifest.2524eacc.js"></script><script src="https://cdn-client.medium.com/lite/static/js/4900.f6c0663e.js"></script><script src="https://cdn-client.medium.com/lite/static/js/main.6bd91d3f.js"></script><script src="https://cdn-client.medium.com/lite/static/js/instrumentation.d9108df7.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/reporting.ff22a7a5.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/9120.5df29668.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5049.d1ead72d.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/4810.988332a1.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6618.db187378.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/1386.e126dec1.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/9977.343f5002.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5250.fc15c18c.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/8261.08d8d6be.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/7975.19e89f16.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2648.a582e725.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2712.0f6c85f5.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2793.01d2b056.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6636.214ca988.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/3735.ca2f95e3.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5642.b8216689.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6546.0f97e7cb.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6834.f2d3924e.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2420.0330d157.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2106.21ff89d3.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6696.92b2dfc3.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5832.07d4db30.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/3366.16d43002.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6040.6ceb7f43.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/4391.3e417aeb.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/PostPage.MainContent.93164a67.chunk.js"></script><script>window.main();</script></body></html>