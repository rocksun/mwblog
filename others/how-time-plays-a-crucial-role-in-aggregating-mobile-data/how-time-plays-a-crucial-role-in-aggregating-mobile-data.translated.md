# 时间在聚合移动数据中扮演的关键角色

![时间在聚合移动数据中扮演的关键角色的专题图片](https://cdn.thenewstack.io/media/2024/11/3a3c095b-image2-1024x576.png)

移动应用程序，就像它们与之交互的后端一样，是一个计算事件的系统。然而，这个系统可能完全混乱。应用程序运行在开发人员无法访问其运行时的设备上，电池只能持续几个小时，破裂的屏幕阻止了 UI 的完全使用，网络连接的强度会因用户的位置而变化。

所有这些都是在讨论应用程序运行的设备的实际计算限制之前，以及“系统”由成千上万甚至数百万用户同时使用应用程序做不同的事情组成的事实。

这些因素可能同时发生，但应用程序开发人员对它们的可见程度不同。由于这些应用程序是许多业务的基础，因此必须有办法从应用程序活动中找到有意义的信息。移动可观测性解决方案必须在流程的每一步解决一个称为“时间”的实际量，并将这些数据拼凑在一起来反映用户体验。

移动可观测性解决方案的一个关键挑战是从分布在数百万台设备上的活动中重建高保真用户体验，每个活动都在自己的时间线上发生，并有自己的一组用户意图和硬件限制。

移动应用程序的局限性意味着理解移动数据应该从怀疑开始：

- 数据是否按正确的顺序到达后端？
- 检测是否都发生在本机级别，或者它是抽象的或混合框架的一部分？
- 所有事件是否都在我们查看的时间范围内完成，或者我是否需要等待才能理解它？

此外，在聚合此移动遥测数据时，还需要考虑代码之外的一系列更高阶的问题。“时间”是相对的吗？用户在会话结束时是否完成了操作，或者您是否需要为在解决之前具有多个状态的操作构建灵活性？

幸运的是，这些问题是功能性的，而不是哲学性的。最终，这些问题的答案是移动可观测性供应商用来“弯曲时间”以理解特定于移动设备的数据的解决方案。通过了解收集移动遥测数据的一些关键挑战，您可以开始思考如何在观察应用程序时有意义地使用这些遥测数据。

## 移动数据何时到达后端？

移动可观测性 SDK 通常在用户会话结束时将移动事件报告给后端。总体目标是使 SDK 的活动尽可能轻量级；否则，通过网络接收持续的事件流将垄断 SDK 正在观察的应用程序的资源。

此外，这意味着虽然单个应用程序活动不会实时精确地报告，但成千上万甚至数百万个应用程序会话能够尽快被接收、处理和聚合为有意义的指标。

进入后端服务的是高度异步的事件，必须将其组织为充满操作的会话。甚至这些事件的可靠性也值得怀疑。发送事件的连接可能失败并稍后重试，或者事件可能来自较旧或越狱的设备，其时间戳可能与规范时钟相差一两天。后端需要在向移动工程师显示信息之前实时协调这些因素。

此外，某些事件无序地到达后端。用户会话通常通过单个请求传递单个有效负载来报告，其中包含重要功能，例如网络结果或性能跟踪。

但是，警报日志可以实时到达，作为紧急情况的打破常规的一种手段。此外，崩溃仅在应用程序重新启动时报告，因为这些异常遵循移动操作系统设置的严格规则，而不是开发人员设置的规则。要将这些不同的事件转化为一个连贯的时间线，需要一个策略来封装所有这些移动活动。

## 移动可观测性必须考虑延迟数据

![移动数据从在设备上收集到发送到服务器之间经常会延迟。](https://cdn.thenewstack.io/media/2024/11/9c3206d9-image1-1024x576.png)

移动数据从在设备上收集到发送到服务器之间经常会延迟。
### EDITOR'S RESPONSE
移动团队在构建和观察移动应用时，[时间对移动遥测数据收集、发送、处理和分析的影响](https://thenewstack.io/five-tips-for-designing-highly-effective-mobile-slos/)是一个重大挑战。工程师应该理解通过不同时间粒度监控遥测数据的优缺点，因为数据准确性和即时可操作性之间存在权衡。

同样，移动可观测性供应商必须构建他们的系统来适应移动端延迟和乱序数据收集的压力。例如，[Embrace](https://embrace.io/?utm_source=the-new-stack&utm_medium=paid&utm_campaign=aggregated-data) 通过对真实移动应用的使用进行建模来解决这个问题——同时与许多不同类型的设备交互，这些设备通常在许多物理和技术条件下运行许多进程。

用户在使用应用程序时会体验所有这些，因此重现用户体验的能力对于了解您的应用程序是否正常运行，更重要的是，性能是否良好至关重要。

如果您主要熟悉后端系统的观察，您会惊讶于有效观察移动环境是多么具有挑战性。您可以在[我们的移动可观测性指南](http://get.embrace.io/mobile-observability-guide/?utm_source=the-new-stack&utm_medium=paid&utm_campaign=aggregated-data) 中了解更多关于这些关键差异以及您需要提供更好用户体验的内容。

[Tech moves fast, don't miss an episode. Subscribe to our YouTube channel to stream all our podcasts, interviews, demos, and more.](https://youtube.com/thenewstack?sub_confirmation=1)