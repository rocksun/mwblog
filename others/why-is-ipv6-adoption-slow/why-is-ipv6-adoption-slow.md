<!--
# IPv6采用率缓慢的原因
https://cdn.thenewstack.io/media/2023/11/789466b2-ipv6-1024x683.jpg
 -->

IPv6的顺利推广需要政府和关键互联网企业的共同努力。

译自 [Why Is IPv6 Adoption Slow?](https://thenewstack.io/why-is-ipv6-adoption-slow/) 。

IPv6是最新版本的互联网协议，它的设计目的是为了解决IPv4地址空间有限的问题，IPv4早已无法应对数字生态系统的爆炸性增长。

虽然谷歌、Meta、[微软](https://news.microsoft.com/?utm_content=inline-mention)和YouTube等大公司正在逐步采用IPv6，但这种技术上更先进的协议的整体推广速度仍然很慢。截至9月，仅有22%的网站完成了转换。是什么因素阻碍了IPv6的推广？下面我们来看看可能的原因和潜在的解决方案。

## 为什么需要IPv6？

IPv6使用128位地址格式，可以提供比其前身IPv4多得多的唯一IP地址。IPv4使用32位地址格式，其地址空间仅能支持约[40亿台设备](https://en.wikipedia.org/wiki/IPv4_address_exhaustion)。但是，预计到2030年连接设备数量将激增至[300亿台](https://blogs.cisco.com/government/ipv6-and-the-omb-mandate-whats-your-strategy)，IPv4有限的地址空间已经不足以应对。相较而言，IPv6预计可以提供约340万亿(340万亿万)个地址，远远超过未来设备数量的增长需求。

除了扩大地址空间，IPv6还有以下改进:

* **更简便的网络管理**: 与需要手动配置或依赖外部服务器(如动态主机配置协议DHCP)的IPv4不同，IPv6支持无状态地址自动配置(SLAAC)，允许设备自己配置IPv6地址。这对于需要大量不同类型设备同时工作的智慧城市、农业和金融行业来说是个好消息。这样可以减少管理员手动分配IP地址的工作，降低管理成本。
* **更高效的路由和数据包处理**: IPv6有简单的头部结构，提供了分层寻址和前缀聚合功能。这些特性可以减少数据包处理成本，缩小路由表大小，减少IP前缀数量，提升路由效率。
* **对新技术的支持**: IPv6的设计考虑了适应未来的5G和物联网(IoT)等新兴技术。它对服务质量(QoS)功能提供了更好的支持，如流量整形以及按类别和流量类型对数据包进行分类、标记和排队，以优化用户体验。这种处理网络流量的机制确保IPv6不仅可以兼容未来的设备制造技术进步，还可以发挥高效运作。

## 为什么IPv6推广缓慢？

尽管IPv6已经面世20多年，并且在技术上比IPv4有诸多优势，但它仍未能成功取代IPv4。下面我们来看看导致IPv6推广缓慢的主要原因。

### IPv4弹性技术

为了管理IPv4地址稀缺问题并减少立即过渡到IPv6的需求，组织和互联网服务提供商(ISP)采用了一些变通方法，如IPv4租用、网络地址转换(NAT)和无类别域间路由(CIDR)。这些是什么意思呢？

- IPv4租用使IPv4地址持有者可以以约定的成本租出未使用的空间。
- NAT在数据包传输期间将多个设备IP(来自私有网络)映射到一个公共IPv4地址。
- CIDR消除了IP地址类别边界，可以将IPv4地址空间分割成子网，以适应各种寻址方案。

这些技术的集体应用极大地减少了切换到IPv6的紧迫性，因为这些技术仍在以指数增长的速度增加单个IP上的设备数量。但是，负载平衡和流量重定向变得更加麻烦。

### 兼容性和复杂性

大多数现有系统(计算机、网络、路由器)都是为IPv4设计的，不幸的是，IPv6与这些遗留系统和网络设备缺乏向后兼容性。这意味着组织可能需要全面升级网络基础设施才能支持IPv6，这可能是一个复杂的任务。

过渡到IPv6也可能影响客户，因为他们的设备可能不兼容IPv6。为避免因客户迁移到兼容IPv4的竞争对手而可能导致的收入损失，组织犹豫是否要采用IPv6。

另外，尽管IPv6的SLAAC通常是一种优势，但它不包含将域名转换为IP地址所需的DNS信息。

### 过渡成本

如上所述，由于兼容性差异，过渡到IPv6需要系统升级。这可能意味着购买和部署新的(通常昂贵的)网络基础设施，如路由器和交换机。

大多数组织的IT部门也仅熟悉IPv4基础设施和地址。采用IPv6将需要投资IT员工培训和软件迁移，对于网络配置复杂的实体来说，这可能会带来巨大的成本。

### ISP的不准备

ISP在过渡到IPv6中起着至关重要的作用。然而，由于ISP采用缓慢，IPv6的兼容性和成本效率问题更加明显。由于ISP控制着网络及其相关基础设施的大部分，组织可能会认为在这种情况下过渡到IPv6效率低下，特别是当许多ISP缺乏有效实施IPv6的设施时。此外，如果ISP对IPv6支持不足，用户可能会遇到连接问题或访问IPv6启用网站的限制，这会进一步拖慢其采用速度。

## 6种促进IPv6采用的方法

过去曾多次尝试加速IPv6的采用，但效果甚微。例如，互联网工程任务组(IETF)创建了一组旨在标准化IPv6、确保其流量路由并通过IPv4-in-IPv6兼容机制促进其采用的(现已废弃)[工作组](https://ipv6now.com.au/eBusinessIPv6/standards.php)。然而，这项工作以及其他类似举措的影响很小。让我们看看六种未来的潜在解决方案。

### 1. IPv6的技术和财务利益的协同作用

为了推动IPv6的采用，强调它如何提升技术能力和财务收益同样重要。例如，美国国家标准技术研究所的可靠研究估计某些IPv6用例(如VoIP和远程访问产品和服务)的年度利益[超过100亿美元](https://www.nist.gov/document/report05-2pdf)，这是采用IPv6的有力动机。已经采用IPv6的组织(如[苹果](https://support.apple.com/en-gb/guide/security/seccb625dcd9/web)和[领英](https://engineering.linkedin.com/blog/2017/07/linkedin-passes-ipv6-milestone))证明了[过渡的优势](https://thenewstack.io/kubernetes-warms-up-to-ipv6/)，在技术和财务方面都有改进，这进一步验证了这一优势。

### 2. 优先采用纯IPv6单协议栈

IPv6采用的一个障碍是IPv4变通方法的持续存在。逐步淘汰这些临时的IPv4/IPv6变通方法，优先采用纯IPv6对促进IPv6的广泛采用至关重要。

除了地址数量之外，强调IPv6的其他优势可以加强采用单协议栈的论据。例如，除了消除NAT引入的复杂性之外，IPv6还使用简化的十六进制格式地址以及网络部分和主机部分之间更清晰的分界，这使得路由流量和执行子网划分更加容易。

### 3. ISP支持

为了提供IPv6服务，ISP必须做出许多变化，包括地址配置、设置路由协议(如OSPFv3和BGP)以及在网络基础设施上实施安全机制(如IPsec)。ISP必须为其客户分配IPv6地址块，并确保IPv6启用设备之间的连接无缝。他们还必须确保可用的IPv6兼容DNS基础设施，包括可以处理AAAA记录的DNS服务器，以便将域名映射到IPv6地址。这使得[用户可以](https://thenewstack.io/10-things-to-consider-when-allowing-access-to-production/)通过IPv6访问网站和服务，而无需面对与DNS相关的障碍。

鉴于这些复杂性，ISP还需要投资提高其网络工程师的技能，以便高效部署和管理IPv6。对ISP来说，过渡到IPv6是一个复杂、成本高昂的过程，需要广泛深入的支持，包括基础设施补贴、专家贡献和员工培训。

### 4. 政府干预

全球各地的政府可以通过宣传计划和法规推动IPv6的采用。虽然IPv6的采用在私营部门大多是自愿的，但政府机构不必如此，它们可以起到表率作用。

例如，美国政府一直是IPv6的支持者，曾规定联邦机构必须在[2008年6月底之前](https://en.wikipedia.org/wiki/IPv6_deployment)升级，现在正着眼于通过新规定实现另一个里程碑。管理和预算办公室已下令，到2025年底，[联邦网络上80%的基于IP的资产](https://blogs.cisco.com/government/ipv6-and-the-omb-mandate-whats-your-strategy)应在仅IPv6环境下运行。

向采用IPv6的组织提供财政激励措施也可以影响ISP采取必要的步骤。这些激励措施可以是税收优惠，以及提供平稳过渡所需的工具。例如，台湾已[宣布](https://www.itu.int/en/ITU-D/Regional-Presence/AsiaPacific/Documents/Migration%20to%20IPv6%20ver0.pdf)计划通过10亿美元规划推动IPv6和其他技术创新的采用。类似地，截至6月，[德国的IPv6采用率为68%，居世界前列](https://www.vyncke.org/ipv6status/compare.php?metric=p&countries=de)，这在一定程度上是通过为公民使用获得大量[IPv6前缀](https://www.itu.int/en/ITU-D/Regional-Presence/AsiaPacific/Documents/Migration%20to%20IPv6%20ver0.pdf)而实现的。

### 5. 持份者协作

不易替换或升级的遗留系统，如本地硬盘，可能在过渡期间带来挑战。涉及ISP、网络运营商、内容提供商和设备制造商在内的利益相关者协作可以加速IPv6协议的最佳实践、技术和文档的开发。通过季度报告、IPv6中心的网络研讨会和会议以及行业标准白皮书共享这些知识和经验可以在迁移过程中提供透明度。信息共享也可以帮助关键利益相关者(如ISP、网络管理员和内容分发网络)解决兼容性问题。

### 6. 全面测试和持续的社区支持

对IPv6采用进行彻底的测试不可或缺，以识别其日益增长的采用可能带来的任何新问题，并努力平稳解决这些问题。除IETF外，几个利益相关者，如[互联网社会(ISOC)](https://www.internetsociety.org/)，过去也组织了协调测试活动。随着IPv6采用的增长，ISP和组织可以建立支持社区，集体故障排除和创新，开发IPv6特定技术以优化其使用。

## 结论

随着对IP地址需求的不断增加，具有广阔地址能力的IPv6支持物联网的可持续增长。因此，鼓励组织及时采用它，展示其适应能力并引领技术进步的能力，以求未来成功。然而，成功的过渡和加速采用都依赖于政府和关键互联网参与者的共同努力。