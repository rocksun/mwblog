<!doctype html><html lang="en"><head><title data-rh="true">Building Your Own Event-Driven Internal Developer Platform with GitOps and Sveltos | by Artem Lajko | Nov, 2024 | ITNEXT</title><meta data-rh="true" charset="utf-8"/><meta data-rh="true" name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,maximum-scale=1"/><meta data-rh="true" name="theme-color" content="#000000"/><meta data-rh="true" name="twitter:app:name:iphone" content="Medium"/><meta data-rh="true" name="twitter:app:id:iphone" content="828256236"/><meta data-rh="true" property="al:ios:app_name" content="Medium"/><meta data-rh="true" property="al:ios:app_store_id" content="828256236"/><meta data-rh="true" property="al:android:package" content="com.medium.reader"/><meta data-rh="true" property="fb:app_id" content="542599432471018"/><meta data-rh="true" property="og:site_name" content="Medium"/><meta data-rh="true" property="og:type" content="article"/><meta data-rh="true" property="article:published_time" content="2024-11-11T09:10:44.580Z"/><meta data-rh="true" name="title" content="Building Your Own Event-Driven Internal Developer Platform with GitOps and Sveltos | by Artem Lajko | Nov, 2024 | ITNEXT"/><meta data-rh="true" property="og:title" content="Building Your Own Event-Driven Internal Developer Platform with GitOps and Sveltos"/><meta data-rh="true" property="al:android:url" content="medium://p/cbe3de4920d5"/><meta data-rh="true" property="al:ios:url" content="medium://p/cbe3de4920d5"/><meta data-rh="true" property="al:android:app_name" content="Medium"/><meta data-rh="true" name="description" content="Imagine you’re a user visiting a portal of an provider XY, exploring their Database as a Service or managed database offerings. You click a button or call an API (if provided), and voilà — your…"/><meta data-rh="true" property="og:description" content="Discover how to create an event-driven cloud environment that mirrors the architecture used by cloud providers"/><meta data-rh="true" property="og:url" content="https://itnext.io/building-your-own-event-driven-internal-developer-platform-with-gitops-and-sveltos-cbe3de4920d5"/><meta data-rh="true" property="al:web:url" content="https://itnext.io/building-your-own-event-driven-internal-developer-platform-with-gitops-and-sveltos-cbe3de4920d5"/><meta data-rh="true" property="og:image" content="https://miro.medium.com/v2/da:true/resize:fit:1069/1*0iYxYy_pjaUVW0nETz6vQg.gif"/><meta data-rh="true" property="article:author" content="https://medium.com/@artem_lajko"/><meta data-rh="true" name="author" content="Artem Lajko"/><meta data-rh="true" name="robots" content="index,noarchive,follow,max-image-preview:large"/><meta data-rh="true" name="referrer" content="unsafe-url"/><meta data-rh="true" property="twitter:title" content="Building Your Own Event-Driven Internal Developer Platform with GitOps and Sveltos"/><meta data-rh="true" name="twitter:site" content="@itnext_io"/><meta data-rh="true" name="twitter:app:url:iphone" content="medium://p/cbe3de4920d5"/><meta data-rh="true" property="twitter:description" content="Discover how to create an event-driven cloud environment that mirrors the architecture used by cloud providers"/><meta data-rh="true" name="twitter:image:src" content="https://miro.medium.com/v2/da:true/resize:fit:1069/1*0iYxYy_pjaUVW0nETz6vQg.gif"/><meta data-rh="true" name="twitter:card" content="summary_large_image"/><meta data-rh="true" name="twitter:creator" content="@Art3m8"/><meta data-rh="true" name="twitter:label1" content="Reading time"/><meta data-rh="true" name="twitter:data1" content="16 min read"/><link data-rh="true" rel="icon" href="https://miro.medium.com/v2/resize:fill:256:256/1*SiXeRxgOt0pAYlYhwZIu3g.png"/><link data-rh="true" rel="search" type="application/opensearchdescription+xml" title="Medium" href="/osd.xml"/><link data-rh="true" rel="apple-touch-icon" sizes="152x152" href="https://miro.medium.com/v2/resize:fill:304:304/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="apple-touch-icon" sizes="120x120" href="https://miro.medium.com/v2/resize:fill:240:240/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="apple-touch-icon" sizes="76x76" href="https://miro.medium.com/v2/resize:fill:152:152/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="apple-touch-icon" sizes="60x60" href="https://miro.medium.com/v2/resize:fill:120:120/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="mask-icon" href="https://miro.medium.com/v2/resize:fill:1000:1000/7*GAOKVe--MXbEJmV9230oOQ.png" color="#171717"/><link data-rh="true" id="glyph_preload_link" rel="preload" as="style" type="text/css" href="https://glyph.medium.com/css/unbound.css"/><link data-rh="true" id="glyph_link" rel="stylesheet" type="text/css" href="https://glyph.medium.com/css/unbound.css"/><link data-rh="true" rel="author" href="https://medium.com/@artem_lajko"/><link data-rh="true" rel="canonical" href="https://itnext.io/building-your-own-event-driven-internal-developer-platform-with-gitops-and-sveltos-cbe3de4920d5"/><link data-rh="true" rel="alternate" href="android-app://com.medium.reader/https/medium.com/p/cbe3de4920d5"/><script data-rh="true" type="application/ld+json">{"@context":"http:\u002F\u002Fschema.org","@type":"NewsArticle","image":["https:\u002F\u002Fmiro.medium.com\u002Fv2\u002Fda:true\u002Fresize:fit:1200\u002F1*0iYxYy_pjaUVW0nETz6vQg.gif"],"url":"https:\u002F\u002Fitnext.io\u002Fbuilding-your-own-event-driven-internal-developer-platform-with-gitops-and-sveltos-cbe3de4920d5","dateCreated":"2024-11-11T09:10:44.580Z","datePublished":"2024-11-11T09:10:44.580Z","dateModified":"2024-11-13T20:14:23.815Z","headline":"Building Your Own Event-Driven Internal Developer Platform with GitOps and Sveltos","name":"Building Your Own Event-Driven Internal Developer Platform with GitOps and Sveltos","description":"Imagine you’re a user visiting a portal of an provider XY, exploring their Database as a Service or managed database offerings. You click a button or call an API (if provided), and voilà — your…","identifier":"cbe3de4920d5","author":{"@type":"Person","name":"Artem Lajko","url":"https:\u002F\u002Fitnext.io\u002F@artem_lajko"},"creator":["Artem Lajko"],"publisher":{"@type":"Organization","name":"ITNEXT","url":"itnext.io","logo":{"@type":"ImageObject","width":315,"height":60,"url":"https:\u002F\u002Fmiro.medium.com\u002Fv2\u002Fresize:fit:630\u002F1*jWhTrIoYwTUdKuVXycqAaw.png"}},"mainEntityOfPage":"https:\u002F\u002Fitnext.io\u002Fbuilding-your-own-event-driven-internal-developer-platform-with-gitops-and-sveltos-cbe3de4920d5"}</script><style type="text/css" data-fela-rehydration="593" data-fela-type="STATIC">html{box-sizing:border-box;-webkit-text-size-adjust:100%}*, *:before, *:after{box-sizing:inherit}body{margin:0;padding:0;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;color:rgba(0,0,0,0.8);position:relative;min-height:100vh}h1, h2, h3, h4, h5, h6, dl, dd, ol, ul, menu, figure, blockquote, p, pre, form{margin:0}menu, ol, ul{padding:0;list-style:none;list-style-image:none}main{display:block}a{color:inherit;text-decoration:none}a, button, input{-webkit-tap-highlight-color:transparent}img, svg{vertical-align:middle}button{background:transparent;overflow:visible}button, input, optgroup, select, textarea{margin:0}:root{--reach-tabs:1;--reach-menu-button:1}#speechify-root{font-family:Sohne, sans-serif}div[data-popper-reference-hidden="true"]{visibility:hidden;pointer-events:none}.grecaptcha-badge{visibility:hidden}
/*XCode style (c) Angel Garcia <angelgarcia.mail@gmail.com>*/.hljs {background: #fff;color: black;
}/* Gray DOCTYPE selectors like WebKit */
.xml .hljs-meta {color: #c0c0c0;
}.hljs-comment,
.hljs-quote {color: #007400;
}.hljs-tag,
.hljs-attribute,
.hljs-keyword,
.hljs-selector-tag,
.hljs-literal,
.hljs-name {color: #aa0d91;
}.hljs-variable,
.hljs-template-variable {color: #3F6E74;
}.hljs-code,
.hljs-string,
.hljs-meta .hljs-string {color: #c41a16;
}.hljs-regexp,
.hljs-link {color: #0E0EFF;
}.hljs-title,
.hljs-symbol,
.hljs-bullet,
.hljs-number {color: #1c00cf;
}.hljs-section,
.hljs-meta {color: #643820;
}.hljs-title.class_,
.hljs-class .hljs-title,
.hljs-type,
.hljs-built_in,
.hljs-params {color: #5c2699;
}.hljs-attr {color: #836C28;
}.hljs-subst {color: #000;
}.hljs-formula {background-color: #eee;font-style: italic;
}.hljs-addition {background-color: #baeeba;
}.hljs-deletion {background-color: #ffc8bd;
}.hljs-selector-id,
.hljs-selector-class {color: #9b703f;
}.hljs-doctag,
.hljs-strong {font-weight: bold;
}.hljs-emphasis {font-style: italic;
}
</style><style type="text/css" data-fela-rehydration="593" data-fela-type="KEYFRAME">@-webkit-keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}@-moz-keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}@keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}</style><style type="text/css" data-fela-rehydration="593" data-fela-type="RULE">.a{font-family:medium-content-sans-serif-font, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif}.b{font-weight:400}.c{background-color:rgba(255, 255, 255, 1)}.l{display:block}.m{position:sticky}.n{top:0}.o{z-index:500}.p{padding:0 24px}.q{align-items:center}.r{border-bottom:solid 1px #F2F2F2}.y{height:41px}.z{line-height:20px}.ab{display:flex}.ac{height:57px}.ae{flex:1 0 auto}.af{color:inherit}.ag{fill:inherit}.ah{font-size:inherit}.ai{border:inherit}.aj{font-family:inherit}.ak{letter-spacing:inherit}.al{font-weight:inherit}.am{padding:0}.an{margin:0}.ao{cursor:pointer}.ap:disabled{cursor:not-allowed}.aq:disabled{color:#6B6B6B}.ar:disabled{fill:#6B6B6B}.au{width:auto}.av path{fill:#242424}.aw{height:25px}.ax{margin-left:16px}.ay{border:none}.az{border-radius:20px}.ba{width:240px}.bb{background:#F9F9F9}.bc path{fill:#6B6B6B}.be{outline:none}.bf{font-family:sohne, "Helvetica Neue", Helvetica, Arial, sans-serif}.bg{font-size:14px}.bh{width:100%}.bi{padding:10px 20px 10px 0}.bj{background-color:transparent}.bk{color:#242424}.bl::placeholder{color:#6B6B6B}.bm{display:inline-block}.bn{margin-left:12px}.bo{margin-right:12px}.bp{border-radius:4px}.bq{margin-left:24px}.br{height:24px}.bx{background-color:#F9F9F9}.by{border-radius:50%}.bz{height:32px}.ca{width:32px}.cb{justify-content:center}.ch{max-width:680px}.ci{min-width:0}.cj{animation:k1 1.2s ease-in-out infinite}.ck{height:100vh}.cl{margin-bottom:16px}.cm{margin-top:48px}.cn{align-items:flex-start}.co{flex-direction:column}.cp{justify-content:space-between}.cq{margin-bottom:24px}.cw{width:80%}.cx{background-color:#F2F2F2}.dd{height:44px}.de{width:44px}.df{margin:auto 0}.dg{margin-bottom:4px}.dh{height:16px}.di{width:120px}.dj{width:80px}.dp{margin-bottom:8px}.dq{width:96%}.dr{width:98%}.ds{width:81%}.dt{margin-left:8px}.du{color:#6B6B6B}.dv{font-size:13px}.dw{height:100%}.ep{color:#FFFFFF}.eq{fill:#FFFFFF}.er{background:rgba(63, 141, 206, 1)}.es{border-color:rgba(63, 141, 206, 1)}.ew:disabled{cursor:inherit !important}.ex:disabled{opacity:0.3}.ey:disabled:hover{background:rgba(63, 141, 206, 1)}.ez:disabled:hover{border-color:rgba(63, 141, 206, 1)}.fa{border-radius:99em}.fb{border-width:1px}.fc{border-style:solid}.fd{box-sizing:border-box}.fe{text-decoration:none}.ff{text-align:center}.fi{margin-right:32px}.fj{position:relative}.fk{fill:#6B6B6B}.fn{background:transparent}.fo svg{margin-left:4px}.fp svg{fill:#6B6B6B}.fr{box-shadow:inset 0 0 0 1px rgba(0, 0, 0, 0.05)}.fs{position:absolute}.fu{display:none}.ga{margin:0 24px}.ge{background:rgba(255, 255, 255, 1)}.gf{border:1px solid #F2F2F2}.gg{box-shadow:0 1px 4px #F2F2F2}.gh{max-height:100vh}.gi{overflow-y:auto}.gj{left:0}.gk{top:calc(100vh + 100px)}.gl{bottom:calc(100vh + 100px)}.gm{width:10px}.gn{pointer-events:none}.go{word-break:break-word}.gp{word-wrap:break-word}.gq:after{display:block}.gr:after{content:""}.gs:after{clear:both}.gt{line-height:1.23}.gu{letter-spacing:0}.gv{font-style:normal}.gw{font-weight:700}.hr{margin-bottom:-0.27em}.hs{line-height:1.394}.in{align-items:baseline}.io{width:48px}.ip{height:48px}.iq{border:2px solid rgba(255, 255, 255, 1)}.ir{z-index:0}.is{box-shadow:none}.it{border:1px solid rgba(0, 0, 0, 0.05)}.iu{margin-left:-12px}.iv{width:28px}.iw{height:28px}.ix{z-index:1}.iy{width:24px}.iz{margin-bottom:2px}.ja{flex-wrap:nowrap}.jb{font-size:16px}.jc{line-height:24px}.je{margin-left:2px}.jf{margin-top:1px}.jg{cursor:initial}.jh{margin:0 8px}.ji{display:inline}.jj{color:rgba(63, 141, 206, 1)}.jk{fill:rgba(63, 141, 206, 1)}.jn{flex:0 0 auto}.jq{flex-wrap:wrap}.jt{white-space:pre-wrap}.ju{margin-right:4px}.jv{overflow:hidden}.jw{max-height:20px}.jx{text-overflow:ellipsis}.jy{display:-webkit-box}.jz{-webkit-line-clamp:1}.ka{-webkit-box-orient:vertical}.kb{word-break:break-all}.kd{padding-left:8px}.ke{padding-right:8px}.lf> *{flex-shrink:0}.lg{overflow-x:scroll}.lh::-webkit-scrollbar{display:none}.li{scrollbar-width:none}.lj{-ms-overflow-style:none}.lk{width:74px}.ll{flex-direction:row}.lm{z-index:2}.lp{-webkit-user-select:none}.lq{border:0}.lr{fill:rgba(117, 117, 117, 1)}.lu{outline:0}.lv{user-select:none}.lw> svg{pointer-events:none}.mf{cursor:progress}.mg{opacity:1}.mh{padding:4px 0}.mk{margin-top:0px}.ml{width:16px}.mn{display:inline-flex}.mt{max-width:100%}.mu{padding:8px 2px}.mv svg{color:#6B6B6B}.nm{box-shadow:inset 3px 0 0 0 #242424}.nn{padding-left:23px}.no{margin-left:-20px}.np{line-height:1.58}.nq{letter-spacing:-0.004em}.nr{font-style:italic}.ns{font-family:source-serif-pro, Georgia, Cambria, "Times New Roman", Times, serif}.ol{margin-bottom:-0.46em}.om{text-decoration:underline}.on{margin-left:auto}.oo{margin-right:auto}.op{max-width:1069px}.ov{clear:both}.ox{cursor:zoom-in}.oy{z-index:auto}.pa{height:auto}.pb{margin-top:10px}.pc{max-width:728px}.pf{line-height:1.12}.pg{letter-spacing:-0.022em}.ph{font-weight:600}.qa{margin-bottom:-0.28em}.qg{list-style-type:decimal}.qh{margin-left:30px}.qi{padding-left:0px}.qo{padding:2px 4px}.qp{font-size:75%}.qq> strong{font-family:inherit}.qr{font-family:source-code-pro, Menlo, Monaco, "Courier New", Courier, monospace}.qs{max-width:488px}.qt{line-height:1.18}.rh{margin-bottom:-0.31em}.ri{overflow-x:auto}.rj{padding:32px}.rk{border:1px solid #E5E5E5}.rl{line-height:1.4}.rm{margin-top:-0.2em}.rn{margin-bottom:-0.2em}.ro{white-space:pre}.rp{min-width:fit-content}.rq{max-width:548px}.rr{max-width:1240px}.rs{max-width:1194px}.rt{max-width:1176px}.ru{max-width:855px}.rv{max-width:854px}.rw{list-style-type:disc}.rx{max-width:1372px}.ry{max-width:1382px}.rz{max-width:863px}.sa{max-width:891px}.sb{max-width:856px}.sc{margin-bottom:26px}.sd{margin-top:6px}.se{margin-top:8px}.sf{margin-right:8px}.sg{padding:8px 16px}.sh{border-radius:100px}.si{transition:background 300ms ease}.sk{white-space:nowrap}.sl{border-top:none}.sm{margin-bottom:14px}.sn{height:52px}.so{max-height:52px}.sp{box-sizing:content-box}.sq{position:static}.ss{max-width:155px}.sy{margin-right:20px}.te{height:0px}.tf{margin-bottom:40px}.tg{margin-bottom:48px}.tu{border-radius:2px}.tw{height:64px}.tx{width:64px}.ty{align-self:flex-end}.tz{color:rgba(255, 255, 255, 1)}.ua{fill:rgba(255, 255, 255, 1)}.ub{background:rgba(25, 25, 25, 1)}.uc{border-color:rgba(25, 25, 25, 1)}.uf:disabled{opacity:0.1}.ug:disabled:hover{background:rgba(25, 25, 25, 1)}.uh:disabled:hover{border-color:rgba(25, 25, 25, 1)}.ui{flex:1 1 auto}.uo{padding-right:4px}.up{font-weight:500}.uw{margin-top:16px}.ux{margin-top:2px}.uy{margin-bottom:54px}.ve{gap:18px}.vf{fill:rgba(61, 61, 61, 1)}.vr{border-bottom:solid 1px #E5E5E5}.vs{margin-top:72px}.vt{padding:24px 0}.vu{margin-bottom:0px}.vv{margin-right:16px}.as:hover:not(:disabled){color:rgba(25, 25, 25, 1)}.at:hover:not(:disabled){fill:rgba(25, 25, 25, 1)}.et:hover{background:rgba(61, 121, 173, 1)}.eu:hover{border-color:rgba(61, 121, 173, 1)}.ev:hover{cursor:pointer}.fl:hover{color:#242424}.fm:hover{fill:#242424}.fq:hover svg{fill:#242424}.ft:hover{background-color:rgba(0, 0, 0, 0.1)}.jd:hover{text-decoration:underline}.jl:hover:not(:disabled){color:rgba(61, 121, 173, 1)}.jm:hover:not(:disabled){fill:rgba(61, 121, 173, 1)}.lt:hover{fill:rgba(8, 8, 8, 1)}.mi:hover{fill:#000000}.mj:hover p{color:#000000}.mm:hover{color:#000000}.mw:hover svg{color:#000000}.sj:hover{background-color:#F2F2F2}.tv:hover{background-color:none}.ud:hover{background:#000000}.ue:hover{border-color:#242424}.vg:hover{fill:rgba(25, 25, 25, 1)}.bd:focus-within path{fill:#242424}.ls:focus{fill:rgba(8, 8, 8, 1)}.mx:focus svg{color:#000000}.oz:focus{transform:scale(1.01)}.lx:active{border-style:none}</style><style type="text/css" data-fela-rehydration="593" data-fela-type="RULE" media="all and (min-width: 1080px)">.d{display:none}.bw{width:64px}.cg{margin:0 64px}.cv{height:48px}.dc{margin-bottom:52px}.do{margin-bottom:48px}.ef{font-size:14px}.eg{line-height:20px}.em{font-size:13px}.eo{padding:5px 12px}.fh{display:flex}.fz{margin-bottom:68px}.gd{max-width:680px}.hn{font-size:42px}.ho{margin-top:1.19em}.hp{line-height:52px}.hq{letter-spacing:-0.011em}.if{font-size:22px}.ig{margin-top:0.92em}.ih{line-height:28px}.im{align-items:center}.kr{border-top:solid 1px #F2F2F2}.ks{border-bottom:solid 1px #F2F2F2}.kt{margin:32px 0 0}.ku{padding:3px 8px}.ld> *{margin-right:24px}.le> :last-child{margin-right:0}.me{margin-top:0px}.ms{margin:0}.oh{font-size:20px}.oi{margin-top:2.14em}.oj{line-height:32px}.ok{letter-spacing:-0.003em}.ou{margin-top:56px}.pw{font-size:24px}.px{margin-top:1.95em}.py{line-height:30px}.pz{letter-spacing:-0.016em}.qf{margin-top:0.94em}.qn{margin-top:1.14em}.re{margin-top:1.72em}.rf{line-height:24px}.rg{letter-spacing:0}.sx{display:inline-block}.td{margin-bottom:104px}.th{flex-direction:row}.tk{margin-bottom:0}.tl{margin-right:20px}.uj{max-width:500px}.vd{margin-bottom:72px}.vl{margin:40px 0 0}.vq{padding-top:72px}</style><style type="text/css" data-fela-rehydration="593" data-fela-type="RULE" media="all and (max-width: 1079.98px)">.e{display:none}.md{margin-top:0px}.pd{margin-left:auto}.pe{text-align:center}.sw{display:inline-block}</style><style type="text/css" data-fela-rehydration="593" data-fela-type="RULE" media="all and (max-width: 903.98px)">.f{display:none}.mc{margin-top:0px}.sv{display:inline-block}</style><style type="text/css" data-fela-rehydration="593" data-fela-type="RULE" media="all and (max-width: 727.98px)">.g{display:none}.ma{margin-top:0px}.mb{margin-right:0px}.su{display:inline-block}</style><style type="text/css" data-fela-rehydration="593" data-fela-type="RULE" media="all and (max-width: 551.98px)">.h{display:none}.s{display:flex}.t{justify-content:space-between}.bs{width:24px}.cc{margin:0 24px}.cr{height:40px}.cy{margin-bottom:44px}.dk{margin-bottom:32px}.dx{font-size:13px}.dy{line-height:20px}.eh{padding:0px 8px 1px}.fv{margin-bottom:4px}.gx{font-size:32px}.gy{margin-top:1.01em}.gz{line-height:38px}.ha{letter-spacing:-0.014em}.ht{font-size:18px}.hu{margin-top:0.79em}.hv{line-height:24px}.ii{align-items:flex-start}.jo{flex-direction:column}.jr{margin-bottom:2px}.kf{margin:24px -24px 0}.kg{padding:0}.kv> *{margin-right:8px}.kw> :last-child{margin-right:24px}.ln{margin-left:0px}.ly{margin-top:0px}.lz{margin-right:0px}.mo{margin:0}.my{border:1px solid #F2F2F2}.mz{border-radius:99em}.na{padding:0px 16px 0px 12px}.nb{height:38px}.nc{align-items:center}.ne svg{margin-right:8px}.nt{margin-top:1.56em}.nu{line-height:28px}.nv{letter-spacing:-0.003em}.oq{margin-top:40px}.pi{font-size:20px}.pj{margin-top:1.2em}.pk{letter-spacing:0}.qb{margin-top:0.67em}.qj{margin-top:1.34em}.qu{font-size:16px}.qv{margin-top:1.23em}.st{display:inline-block}.sz{margin-bottom:96px}.ts{margin-bottom:20px}.tt{margin-right:0}.un{max-width:100%}.uq{font-size:24px}.ur{line-height:30px}.us{letter-spacing:-0.016em}.uz{margin-bottom:64px}.vh{margin:32px 0 0}.vm{padding-top:48px}.nd:hover{border-color:#E5E5E5}</style><style type="text/css" data-fela-rehydration="593" data-fela-type="RULE" media="all and (min-width: 904px) and (max-width: 1079.98px)">.i{display:none}.bv{width:64px}.cf{margin:0 64px}.cu{height:48px}.db{margin-bottom:52px}.dn{margin-bottom:48px}.ed{font-size:14px}.ee{line-height:20px}.ek{font-size:13px}.el{padding:5px 12px}.fg{display:flex}.fy{margin-bottom:68px}.gc{max-width:680px}.hj{font-size:42px}.hk{margin-top:1.19em}.hl{line-height:52px}.hm{letter-spacing:-0.011em}.ic{font-size:22px}.id{margin-top:0.92em}.ie{line-height:28px}.il{align-items:center}.kn{border-top:solid 1px #F2F2F2}.ko{border-bottom:solid 1px #F2F2F2}.kp{margin:32px 0 0}.kq{padding:3px 8px}.lb> *{margin-right:24px}.lc> :last-child{margin-right:0}.mr{margin:0}.od{font-size:20px}.oe{margin-top:2.14em}.of{line-height:32px}.og{letter-spacing:-0.003em}.ot{margin-top:56px}.ps{font-size:24px}.pt{margin-top:1.95em}.pu{line-height:30px}.pv{letter-spacing:-0.016em}.qe{margin-top:0.94em}.qm{margin-top:1.14em}.rb{margin-top:1.72em}.rc{line-height:24px}.rd{letter-spacing:0}.tc{margin-bottom:104px}.ti{flex-direction:row}.tm{margin-bottom:0}.tn{margin-right:20px}.uk{max-width:500px}.vc{margin-bottom:72px}.vk{margin:40px 0 0}.vp{padding-top:72px}</style><style type="text/css" data-fela-rehydration="593" data-fela-type="RULE" media="all and (min-width: 728px) and (max-width: 903.98px)">.j{display:none}.w{display:flex}.x{justify-content:space-between}.bu{width:64px}.ce{margin:0 48px}.ct{height:48px}.da{margin-bottom:52px}.dm{margin-bottom:48px}.eb{font-size:13px}.ec{line-height:20px}.ej{padding:0px 8px 1px}.fx{margin-bottom:68px}.gb{max-width:680px}.hf{font-size:42px}.hg{margin-top:1.19em}.hh{line-height:52px}.hi{letter-spacing:-0.011em}.hz{font-size:22px}.ia{margin-top:0.92em}.ib{line-height:28px}.ik{align-items:center}.kj{border-top:solid 1px #F2F2F2}.kk{border-bottom:solid 1px #F2F2F2}.kl{margin:32px 0 0}.km{padding:3px 8px}.kz> *{margin-right:24px}.la> :last-child{margin-right:0}.mq{margin:0}.nz{font-size:20px}.oa{margin-top:2.14em}.ob{line-height:32px}.oc{letter-spacing:-0.003em}.os{margin-top:56px}.po{font-size:24px}.pp{margin-top:1.95em}.pq{line-height:30px}.pr{letter-spacing:-0.016em}.qd{margin-top:0.94em}.ql{margin-top:1.14em}.qy{margin-top:1.72em}.qz{line-height:24px}.ra{letter-spacing:0}.tb{margin-bottom:104px}.tj{flex-direction:row}.to{margin-bottom:0}.tp{margin-right:20px}.ul{max-width:500px}.vb{margin-bottom:72px}.vj{margin:40px 0 0}.vo{padding-top:72px}</style><style type="text/css" data-fela-rehydration="593" data-fela-type="RULE" media="all and (min-width: 552px) and (max-width: 727.98px)">.k{display:none}.u{display:flex}.v{justify-content:space-between}.bt{width:24px}.cd{margin:0 24px}.cs{height:40px}.cz{margin-bottom:44px}.dl{margin-bottom:32px}.dz{font-size:13px}.ea{line-height:20px}.ei{padding:0px 8px 1px}.fw{margin-bottom:4px}.hb{font-size:32px}.hc{margin-top:1.01em}.hd{line-height:38px}.he{letter-spacing:-0.014em}.hw{font-size:18px}.hx{margin-top:0.79em}.hy{line-height:24px}.ij{align-items:flex-start}.jp{flex-direction:column}.js{margin-bottom:2px}.kh{margin:24px 0 0}.ki{padding:0}.kx> *{margin-right:8px}.ky> :last-child{margin-right:8px}.lo{margin-left:0px}.mp{margin:0}.nf{border:1px solid #F2F2F2}.ng{border-radius:99em}.nh{padding:0px 16px 0px 12px}.ni{height:38px}.nj{align-items:center}.nl svg{margin-right:8px}.nw{margin-top:1.56em}.nx{line-height:28px}.ny{letter-spacing:-0.003em}.or{margin-top:40px}.pl{font-size:20px}.pm{margin-top:1.2em}.pn{letter-spacing:0}.qc{margin-top:0.67em}.qk{margin-top:1.34em}.qw{font-size:16px}.qx{margin-top:1.23em}.ta{margin-bottom:96px}.tq{margin-bottom:20px}.tr{margin-right:0}.um{max-width:100%}.ut{font-size:24px}.uu{line-height:30px}.uv{letter-spacing:-0.016em}.va{margin-bottom:64px}.vi{margin:32px 0 0}.vn{padding-top:48px}.nk:hover{border-color:#E5E5E5}</style><style type="text/css" data-fela-rehydration="593" data-fela-type="RULE" media="print">.sr{display:none}</style><style type="text/css" data-fela-rehydration="593" data-fela-type="RULE" media="(orientation: landscape) and (max-width: 903.98px)">.kc{max-height:none}</style><style type="text/css" data-fela-rehydration="593" data-fela-type="RULE" media="(prefers-reduced-motion: no-preference)">.ow{transition:transform 300ms cubic-bezier(0.2, 0, 0.2, 1)}</style></head><body><div id="root"><div class="a b c"><div class="d e f g h i j k"></div><script>document.domain = document.domain;</script><div class="l c"><div class="l m n o c"><div class="p q r s t u v w x i d y z"><a class="du ag dv bf ak b am an ao ap aq ar as at s u w i d q dw z" href="https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fcbe3de4920d5&amp;%7Efeature=LoOpenInAppButton&amp;%7Echannel=ShowPostUnderCollection&amp;source=---top_nav_layout_nav----------------------------------" rel="noopener follow">Open in app<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="none" viewBox="0 0 10 10" class="dt"><path fill="currentColor" d="M.985 8.485a.375.375 0 1 0 .53.53zM8.75 1.25h.375A.375.375 0 0 0 8.75.875zM8.375 6.5a.375.375 0 1 0 .75 0zM3.5.875a.375.375 0 1 0 0 .75zm-1.985 8.14 7.5-7.5-.53-.53-7.5 7.5zm6.86-7.765V6.5h.75V1.25zM3.5 1.625h5.25v-.75H3.5z"></path></svg></a><div class="ab q"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span><a class="bf b dx dy eh dz ea ei eb ec ej ek ee el em eg eo ep eq er es et eu ev ew ex ey ez fa fb fc fd bm fe ff" data-testid="headerSignUpButton" href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fbuilding-your-own-event-driven-internal-developer-platform-with-gitops-and-sveltos-cbe3de4920d5&amp;source=post_page---top_nav_layout_nav-----------------------global_nav-----------" rel="noopener follow">Sign up</a></span></p><div class="ax l"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSignInButton" href="https://medium.com/m/signin?operation=login&amp;redirect=https%3A%2F%2Fitnext.io%2Fbuilding-your-own-event-driven-internal-developer-platform-with-gitops-and-sveltos-cbe3de4920d5&amp;source=post_page---top_nav_layout_nav-----------------------global_nav-----------" rel="noopener follow">Sign in</a></span></p></div></div></div><div class="p q r ab ac"><div class="ab q ae"><a class="af ag ah ai aj ak al am an ao ap aq ar as at ab" aria-label="Homepage" data-testid="headerMediumLogo" href="https://medium.com/?source=---top_nav_layout_nav----------------------------------" rel="noopener follow"><svg xmlns="http://www.w3.org/2000/svg" width="719" height="160" fill="none" viewBox="0 0 719 160" class="au av aw"><path fill="#242424" d="m174.104 9.734.215-.047V8.02H130.39L89.6 103.89 48.81 8.021H1.472v1.666l.212.047c8.018 1.81 12.09 4.509 12.09 14.242V137.93c0 9.734-4.087 12.433-12.106 14.243l-.212.047v1.671h32.118v-1.665l-.213-.048c-8.018-1.809-12.089-4.509-12.089-14.242V30.586l52.399 123.305h2.972l53.925-126.743V140.75c-.687 7.688-4.721 10.062-11.982 11.701l-.215.05v1.652h55.948v-1.652l-.215-.05c-7.269-1.639-11.4-4.013-12.087-11.701l-.037-116.774h.037c0-9.733 4.071-12.432 12.087-14.242m25.555 75.488c.915-20.474 8.268-35.252 20.606-35.507 3.806.063 6.998 1.312 9.479 3.714 5.272 5.118 7.751 15.812 7.368 31.793zm-.553 5.77h65.573v-.275c-.186-15.656-4.721-27.834-13.466-36.196-7.559-7.227-18.751-11.203-30.507-11.203h-.263c-6.101 0-13.584 1.48-18.909 4.16-6.061 2.807-11.407 7.003-15.855 12.511-7.161 8.874-11.499 20.866-12.554 34.343q-.05.606-.092 1.212a50 50 0 0 0-.065 1.151 85.807 85.807 0 0 0-.094 5.689c.71 30.524 17.198 54.917 46.483 54.917 25.705 0 40.675-18.791 44.407-44.013l-1.886-.664c-6.557 13.556-18.334 21.771-31.738 20.769-18.297-1.369-32.314-19.922-31.042-42.395m139.722 41.359c-2.151 5.101-6.639 7.908-12.653 7.908s-11.513-4.129-15.418-11.63c-4.197-8.053-6.405-19.436-6.405-32.92 0-28.067 8.729-46.22 22.24-46.22 5.657 0 10.111 2.807 12.236 7.704zm43.499 20.008c-8.019-1.897-12.089-4.722-12.089-14.951V1.309l-48.716 14.353v1.757l.299-.024c6.72-.543 11.278.386 13.925 2.83 2.072 1.915 3.082 4.853 3.082 8.987v18.66c-4.803-3.067-10.516-4.56-17.448-4.56-14.059 0-26.909 5.92-36.176 16.672-9.66 11.205-14.767 26.518-14.767 44.278-.003 31.72 15.612 53.039 38.851 53.039 13.595 0 24.533-7.449 29.54-20.013v16.865h43.711v-1.746zM424.1 19.819c0-9.904-7.468-17.374-17.375-17.374-9.859 0-17.573 7.632-17.573 17.374s7.721 17.374 17.573 17.374c9.907 0 17.375-7.47 17.375-17.374m11.499 132.546c-8.019-1.897-12.089-4.722-12.089-14.951h-.035V43.635l-43.714 12.551v1.705l.263.024c9.458.842 12.047 4.1 12.047 15.152v81.086h43.751v-1.746zm112.013 0c-8.018-1.897-12.089-4.722-12.089-14.951V43.635l-41.621 12.137v1.71l.246.026c7.733.813 9.967 4.257 9.967 15.36v59.279c-2.578 5.102-7.415 8.131-13.274 8.336-9.503 0-14.736-6.419-14.736-18.073V43.638l-43.714 12.55v1.703l.262.024c9.459.84 12.05 4.097 12.05 15.152v50.17a56.3 56.3 0 0 0 .91 10.444l.787 3.423c3.701 13.262 13.398 20.197 28.59 20.197 12.868 0 24.147-7.966 29.115-20.43v17.311h43.714v-1.747zm169.818 1.788v-1.749l-.213-.05c-8.7-2.006-12.089-5.789-12.089-13.49v-63.79c0-19.89-11.171-31.761-29.883-31.761-13.64 0-25.141 7.882-29.569 20.16-3.517-13.01-13.639-20.16-28.606-20.16-13.146 0-23.449 6.938-27.869 18.657V43.643L545.487 55.68v1.715l.263.024c9.345.829 12.047 4.181 12.047 14.95v81.784h40.787v-1.746l-.215-.053c-6.941-1.631-9.181-4.606-9.181-12.239V66.998c1.836-4.289 5.537-9.37 12.853-9.37 9.086 0 13.692 6.296 13.692 18.697v77.828h40.797v-1.746l-.215-.053c-6.94-1.631-9.18-4.606-9.18-12.239V75.066a42 42 0 0 0-.578-7.26c1.947-4.661 5.86-10.177 13.475-10.177 9.214 0 13.691 6.114 13.691 18.696v77.828z"></path></svg></a><div class="ax h"><div class="ab ay az ba bb q bc bd"><div class="bm" aria-hidden="false" aria-describedby="searchResults" aria-labelledby="searchResults"></div><div class="bn bo ab"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.092 11.06a6.95 6.95 0 1 1 13.9 0 6.95 6.95 0 0 1-13.9 0m6.95-8.05a8.05 8.05 0 1 0 5.13 14.26l3.75 3.75a.56.56 0 1 0 .79-.79l-3.73-3.73A8.05 8.05 0 0 0 11.042 3z" clip-rule="evenodd"></path></svg></div><input role="combobox" aria-controls="searchResults" aria-expanded="false" aria-label="search" data-testid="headerSearchInput" tabindex="0" class="ay be bf bg z bh bi bj bk bl" placeholder="Search" value=""/></div></div></div><div class="h k w fg fh"><div class="fi ab"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerWriteButton" href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fnew-story&amp;source=---top_nav_layout_nav-----------------------new_post_topnav-----------" rel="noopener follow"><div class="bf b bg z du fj fk ab q fl fm"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-label="Write"><path fill="currentColor" d="M14 4a.5.5 0 0 0 0-1zm7 6a.5.5 0 0 0-1 0zm-7-7H4v1h10zM3 4v16h1V4zm1 17h16v-1H4zm17-1V10h-1v10zm-1 1a1 1 0 0 0 1-1h-1zM3 20a1 1 0 0 0 1 1v-1zM4 3a1 1 0 0 0-1 1h1z"></path><path stroke="currentColor" d="m17.5 4.5-8.458 8.458a.25.25 0 0 0-.06.098l-.824 2.47a.25.25 0 0 0 .316.316l2.47-.823a.25.25 0 0 0 .098-.06L19.5 6.5m-2-2 2.323-2.323a.25.25 0 0 1 .354 0l1.646 1.646a.25.25 0 0 1 0 .354L19.5 6.5m-2-2 2 2"></path></svg><div class="dt l">Write</div></div></a></span></div></div><div class="k j i d"><div class="fi ab"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSearchButton" href="https://medium.com/search?source=---top_nav_layout_nav----------------------------------" rel="noopener follow"><div class="bf b bg z du fj fk ab q fl fm"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-label="Search"><path fill="currentColor" fill-rule="evenodd" d="M4.092 11.06a6.95 6.95 0 1 1 13.9 0 6.95 6.95 0 0 1-13.9 0m6.95-8.05a8.05 8.05 0 1 0 5.13 14.26l3.75 3.75a.56.56 0 1 0 .79-.79l-3.73-3.73A8.05 8.05 0 0 0 11.042 3z" clip-rule="evenodd"></path></svg></div></a></div></div><div class="fi h k j"><div class="ab q"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span><a class="bf b dx dy eh dz ea ei eb ec ej ek ee el em eg eo ep eq er es et eu ev ew ex ey ez fa fb fc fd bm fe ff" data-testid="headerSignUpButton" href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fbuilding-your-own-event-driven-internal-developer-platform-with-gitops-and-sveltos-cbe3de4920d5&amp;source=post_page---top_nav_layout_nav-----------------------global_nav-----------" rel="noopener follow">Sign up</a></span></p><div class="ax l"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSignInButton" href="https://medium.com/m/signin?operation=login&amp;redirect=https%3A%2F%2Fitnext.io%2Fbuilding-your-own-event-driven-internal-developer-platform-with-gitops-and-sveltos-cbe3de4920d5&amp;source=post_page---top_nav_layout_nav-----------------------global_nav-----------" rel="noopener follow">Sign in</a></span></p></div></div></div><div class="l" aria-hidden="false"><button class="ay fn am ab q ao fo fp fq" aria-label="user options menu" data-testid="headerUserIcon"><div class="l fj"><img alt="" class="l fd by bz ca cx" src="https://miro.medium.com/v2/resize:fill:64:64/1*dmbNkD5D-u45r44go_cf0g.png" width="32" height="32" loading="lazy" role="presentation"/><div class="fr by l bz ca fs n ay ft"></div></div></button></div></div></div><div class="fu"><a rel="me" href="https://me.dm/@artem_lajko">Mastodon</a></div><div class="l"><div class="fv fw fx fy fz l"><div class="ab cb"><div class="ci bh ga gb gc gd"></div></div><article><div class="l"><div class="l"><span class="l"></span><section><div><div class="fs gj gk gl gm gn"></div><div class="go gp gq gr gs"><div class="ab cb"><div class="ci bh ga gb gc gd"><div><h1 id="b39e" class="pw-post-title gt gu gv bf gw gx gy gz ha hb hc hd he hf hg hh hi hj hk hl hm hn ho hp hq hr bk" data-testid="storyTitle">Building Your Own Event-Driven Internal Developer Platform with GitOps and Sveltos</h1></div><div><h2 id="2eaf" class="pw-subtitle-paragraph hs gu gv bf b ht hu hv hw hx hy hz ia ib ic id ie if ig ih cq du">Discover how to create an event-driven cloud environment that mirrors the architecture used by cloud providers</h2><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="ii ij ik il im ab"><div><div class="ab in"><div><div class="bm" aria-hidden="false"><a href="https://medium.com/@artem_lajko?source=post_page---byline--cbe3de4920d5--------------------------------" rel="noopener follow"><div class="l io ip by iq ir"><div class="l fj"><img alt="Artem Lajko" class="l fd by dd de cx" src="https://miro.medium.com/v2/resize:fill:88:88/1*RaBgnDPDAQFUu4irAkXieQ.jpeg" width="44" height="44" loading="lazy" data-testid="authorPhoto"/><div class="is by l dd de fs n it ft"></div></div></div></a></div></div><div class="iu ab fj"><div><div class="bm" aria-hidden="false"><a href="https://itnext.io/?source=post_page---byline--cbe3de4920d5--------------------------------" rel="noopener  ugc nofollow"><div class="l iv iw by iq ix"><div class="l fj"><img alt="ITNEXT" class="l fd by br iy cx" src="https://miro.medium.com/v2/resize:fill:48:48/1*yAqDFIFA5F_NXalOJKz4TA.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto"/><div class="is by l br iy fs n it ft"></div></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="iz ab q"><div class="ab q ja"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b jb jc bk"><a class="af ag ah ai aj ak al am an ao ap aq ar jd" data-testid="authorName" href="https://medium.com/@artem_lajko?source=post_page---byline--cbe3de4920d5--------------------------------" rel="noopener follow">Artem Lajko</a></p></div></div></div><div class="je jf l"><div class="ab jg"><div class="ab"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="#437AFF" d="M15.163 8c0 .65-.459 1.144-.863 1.575-.232.244-.471.5-.563.719s-.086.543-.092.875c-.006.606-.018 1.3-.49 1.781-.47.481-1.15.494-1.744.5-.324.006-.655.013-.857.094s-.465.337-.704.575c-.422.412-.906.881-1.542.881-.637 0-1.12-.469-1.543-.881-.239-.238-.49-.482-.704-.575-.214-.094-.532-.088-.857-.094-.593-.006-1.273-.019-1.744-.5s-.484-1.175-.49-1.781c-.006-.332-.012-.669-.092-.875-.08-.207-.33-.475-.563-.719-.404-.431-.863-.925-.863-1.575s.46-1.144.863-1.575c.233-.244.472-.5.563-.719.092-.219.086-.544.092-.875.006-.606.019-1.3.49-1.781s1.15-.494 1.744-.5c.325-.006.655-.012.857-.094.202-.081.465-.337.704-.575C7.188 1.47 7.671 1 8.308 1s1.12.469 1.542.881c.239.238.49.481.704.575s.533.088.857.094c.594.006 1.273.019 1.745.5.47.481.483 1.175.49 1.781.005.331.011.669.091.875s.33.475.563.719c.404.431.863.925.863 1.575"></path><path fill="#fff" d="M7.328 10.5c.195 0 .381.08.519.22.137.141.215.331.216.53 0 .066.026.13.072.177a.24.24 0 0 0 .346 0 .25.25 0 0 0 .071-.177c.001-.199.079-.389.216-.53a.73.73 0 0 1 .519-.22h1.959c.13 0 .254-.053.346-.146a.5.5 0 0 0 .143-.354V6a.5.5 0 0 0-.143-.354.49.49 0 0 0-.346-.146h-1.47c-.324 0-.635.132-.865.366-.23.235-.359.552-.359.884v2.5c0 .066-.025.13-.071.177a.24.24 0 0 1-.346 0 .25.25 0 0 1-.072-.177v-2.5c0-.332-.13-.65-.359-.884A1.21 1.21 0 0 0 6.84 5.5h-1.47a.49.49 0 0 0-.346.146A.5.5 0 0 0 4.88 6v4c0 .133.051.26.143.354a.49.49 0 0 0 .347.146z"></path></svg></div></div></div><span class="jh ji" aria-hidden="true"><span class="bf b bg z du">·</span></span><p class="bf b jb jc du"><span><a class="jj jk ah ai aj ak al am an ao ap aq ar ex jl jm" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F2099f3d62707&amp;operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fbuilding-your-own-event-driven-internal-developer-platform-with-gitops-and-sveltos-cbe3de4920d5&amp;user=Artem+Lajko&amp;userId=2099f3d62707&amp;source=post_page-2099f3d62707--byline--cbe3de4920d5---------------------post_header-----------" rel="noopener follow">Follow</a></span></p></div></div></span></div></div><div class="l jn"><span class="bf b bg z du"><div class="ab cn jo jp jq"><div class="jr js ab"><div class="bf b bg z du ab jt"><span class="ju l jn">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar jd ab q" data-testid="publicationName" href="https://itnext.io/?source=post_page---byline--cbe3de4920d5--------------------------------" rel="noopener  ugc nofollow"><p class="bf b bg z jv jw jx jy jz ka kb kc bk">ITNEXT</p></a></div></div></div><div class="h k"><span class="jh ji" aria-hidden="true"><span class="bf b bg z du">·</span></span></div></div><span class="bf b bg z du"><div class="ab ae"><span data-testid="storyReadTime">16 min read</span><div class="kd ke l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z du">·</span></span></div><span data-testid="storyPublishDate">Nov 11, 2024</span></div></span></div></span></div></div></div><div class="ab cp kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku"><div class="h k w fg fh q"><div class="lk l"><div class="ab q ll lm"><div class="pw-multi-vote-icon fj ju ln lo lp"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerClapButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fitnext%2Fcbe3de4920d5&amp;operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fbuilding-your-own-event-driven-internal-developer-platform-with-gitops-and-sveltos-cbe3de4920d5&amp;user=Artem+Lajko&amp;userId=2099f3d62707&amp;source=---header_actions--cbe3de4920d5---------------------clap_footer-----------" rel="noopener follow"><div><div class="bm" aria-hidden="false"><div class="lq ao lr ls lt lu am lv lw lx lp"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM13.916 3.953l1.523-2.112-1.184-.39zM8.589 1.84l1.522 2.112-.337-2.501zM18.523 18.92c-.86.86-1.75 1.246-2.62 1.33a6 6 0 0 0 .407-.372c2.388-2.389 2.86-4.951 1.399-7.623l-.912-1.603-.79-1.672c-.26-.56-.194-.98.203-1.288a.7.7 0 0 1 .546-.132c.283.046.546.231.728.5l2.363 4.157c.976 1.624 1.141 4.237-1.324 6.702m-10.999-.438L3.37 14.328a.828.828 0 0 1 .585-1.408.83.83 0 0 1 .585.242l2.158 2.157a.365.365 0 0 0 .516-.516l-2.157-2.158-1.449-1.449a.826.826 0 0 1 1.167-1.17l3.438 3.44a.363.363 0 0 0 .516 0 .364.364 0 0 0 0-.516L5.293 9.513l-.97-.97a.826.826 0 0 1 0-1.166.84.84 0 0 1 1.167 0l.97.968 3.437 3.436a.36.36 0 0 0 .517 0 .366.366 0 0 0 0-.516L6.977 7.83a.82.82 0 0 1-.241-.584.82.82 0 0 1 .824-.826c.219 0 .43.087.584.242l5.787 5.787a.366.366 0 0 0 .587-.415l-1.117-2.363c-.26-.56-.194-.98.204-1.289a.7.7 0 0 1 .546-.132c.283.046.545.232.727.501l2.193 3.86c1.302 2.38.883 4.59-1.277 6.75-1.156 1.156-2.602 1.627-4.19 1.367-1.418-.236-2.866-1.033-4.079-2.246M10.75 5.971l2.12 2.12c-.41.502-.465 1.17-.128 1.89l.22.465-3.523-3.523a.8.8 0 0 1-.097-.368c0-.22.086-.428.241-.584a.847.847 0 0 1 1.167 0m7.355 1.705c-.31-.461-.746-.758-1.23-.837a1.44 1.44 0 0 0-1.11.275c-.312.24-.505.543-.59.881a1.74 1.74 0 0 0-.906-.465 1.47 1.47 0 0 0-.82.106l-2.182-2.182a1.56 1.56 0 0 0-2.2 0 1.54 1.54 0 0 0-.396.701 1.56 1.56 0 0 0-2.21-.01 1.55 1.55 0 0 0-.416.753c-.624-.624-1.649-.624-2.237-.037a1.557 1.557 0 0 0 0 2.2c-.239.1-.501.238-.715.453a1.56 1.56 0 0 0 0 2.2l.516.515a1.556 1.556 0 0 0-.753 2.615L7.01 19c1.32 1.319 2.909 2.189 4.475 2.449q.482.08.971.08c.85 0 1.653-.198 2.393-.579.231.033.46.054.686.054 1.266 0 2.457-.52 3.505-1.567 2.763-2.763 2.552-5.734 1.439-7.586z" clip-rule="evenodd"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l ly lz ma mb mc md me"><p class="bf b dv z du"><span class="mf">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao lq mg mh ab q fk mi mj" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="mk"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"></path></svg></button></div></div></div><div class="ab q kv kw kx ky kz la lb lc ld le lf lg lh li lj"><div class="ml k j i d"></div><div class="h k"><div><div class="bm" aria-hidden="false"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerBookmarkButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fcbe3de4920d5&amp;operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fbuilding-your-own-event-driven-internal-developer-platform-with-gitops-and-sveltos-cbe3de4920d5&amp;source=---header_actions--cbe3de4920d5---------------------bookmark_footer-----------" rel="noopener follow"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none" viewBox="0 0 25 25" class="du mm" aria-label="Add to list bookmark button"><path fill="currentColor" d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .805.396L12.5 17l5.695 4.396A.5.5 0 0 0 19 21v-8.5a.5.5 0 0 0-1 0v7.485l-5.195-4.012a.5.5 0 0 0-.61 0L7 19.985z"></path></svg></a></span></div></div></div><div class="fd mn cn"><div class="l ae"><div class="ab cb"><div class="mo mp mq mr ms mt ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af fk ah ai aj ak al mu an ao ap ex mv mw mj mx my mz na nb s nc nd ne nf ng nh ni u nj nk nl"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"></path></svg><div class="j i d"><p class="bf b bg z du">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af fk ah ai aj ak al mu an ao ap ex mv mw mj mx my mz na nb s nc nd ne nf ng nh ni u nj nk nl"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"></path></svg><div class="j i d"><p class="bf b bg z du">Share</p></div></button></div></div></div></div></div></div></div></div></div><blockquote class="nm nn no"><p id="6444" class="np nq nr ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk"><strong class="ns gw">Note: </strong>this is a hands-on guide requiring experience with Kubernetes and Helm. To follow along with this tutorial, you’ll also need three running Kubernetes clusters.<br/><br/>If you believe in open source and share this philosophy, <a class="af om" href="https://github.com/projectsveltos/addon-controller" rel="noopener ugc nofollow" target="_blank">please consider leaving a ⭐️</a> to support those who make these amazing tools available and enable setups like this!</p></blockquote><figure class="oq or os ot ou ov on oo paragraph-image"><div role="button" tabindex="0" class="ow ox fj oy bh oz"><div class="on oo op"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*0iYxYy_pjaUVW0nETz6vQg.gif 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*0iYxYy_pjaUVW0nETz6vQg.gif 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*0iYxYy_pjaUVW0nETz6vQg.gif 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*0iYxYy_pjaUVW0nETz6vQg.gif 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*0iYxYy_pjaUVW0nETz6vQg.gif 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*0iYxYy_pjaUVW0nETz6vQg.gif 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0iYxYy_pjaUVW0nETz6vQg.gif 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*0iYxYy_pjaUVW0nETz6vQg.gif 640w, https://miro.medium.com/v2/resize:fit:720/1*0iYxYy_pjaUVW0nETz6vQg.gif 720w, https://miro.medium.com/v2/resize:fit:750/1*0iYxYy_pjaUVW0nETz6vQg.gif 750w, https://miro.medium.com/v2/resize:fit:786/1*0iYxYy_pjaUVW0nETz6vQg.gif 786w, https://miro.medium.com/v2/resize:fit:828/1*0iYxYy_pjaUVW0nETz6vQg.gif 828w, https://miro.medium.com/v2/resize:fit:1100/1*0iYxYy_pjaUVW0nETz6vQg.gif 1100w, https://miro.medium.com/v2/resize:fit:1400/1*0iYxYy_pjaUVW0nETz6vQg.gif 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh mt pa c" width="700" height="318" loading="lazy" role="presentation"/></picture></div></div><figcaption class="pb ff pc on oo pd pe bf b bg z du">Fig: 0: Your Own Event-Driven Cloud</figcaption></figure><p id="d818" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">Imagine you’re a user visiting a portal of an provider XY, exploring their Database as a Service or managed database offerings. You click a button or call an API (if provided), and voilà — your database instance is ready. But have you ever wondered, <em class="nr">Is this database really running on a traditional virtual machine?</em> It feels more like it’s operating within a <strong class="ns gw">Kubernetes cluster</strong>, doesn’t it? Did you ever ask yourself, how they build this cloud based environment on the backbone of an Internal Developer Platform in make them available in a portal?</p><p id="1651" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">Let’s go with that thought: imagine the database is indeed running on Kubernetes. What happens the moment you hit <strong class="ns gw">“create”</strong>? This action triggers an event resource, specifying when and how the database cluster should be deployed. At this point, <strong class="ns gw">Sveltos</strong> steps in, managing deployment to the appropriate cluster, retrieving necessary configurations, and providing the details you need to connect to your database seamlessly.</p><p id="d96d" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">While I can’t reveal every technical detail behind building a cloud like the major providers (let’s avoid any legal headaches!) or maybe I will build my own IDP solution. I’ll guide you through setting up a similar event-driven cloud architecture. We’ll break down each component, and by the end, you’ll have a solid understanding — and maybe even a new cloud based on a IDP of your own in the making!</p><h1 id="b677" class="pf pg gv bf ph pi pj hv pk pl pm hy pn po pp pq pr ps pt pu pv pw px py pz qa bk">Quick Overview</h1><p id="74d1" class="pw-post-body-paragraph np nq gv ns b ht qb nu nv hw qc nx ny nz qd ob oc od qe of og oh qf oj ok ol go bk">Before we dive in, here’s what you need to know: This guide is fully hands-on, starting from scratch! All you’ll need are three running clusters:</p><ol class=""><li id="1d66" class="np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol qg qh qi bk"><strong class="ns gw">Management Cluster</strong></li><li id="0d0a" class="np nq gv ns b ht qj nu nv hw qk nx ny nz ql ob oc od qm of og oh qn oj ok ol qg qh qi bk"><strong class="ns gw">Service Cluster</strong></li><li id="0ba0" class="np nq gv ns b ht qj nu nv hw qk nx ny nz ql ob oc od qm of og oh qn oj ok ol qg qh qi bk"><strong class="ns gw">Workload/Application Cluster</strong></li></ol><p id="8812" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">We’ll be walking through the following steps:</p><ol class=""><li id="2f16" class="np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol qg qh qi bk"><strong class="ns gw">Install Prerequisites</strong>: Set up <code class="cx qo qp qq qr b">sveltosctl</code>, <code class="cx qo qp qq qr b">cert-manager</code>, and <code class="cx qo qp qq qr b">sveltos</code>, and apply the necessary labels on the management cluster.</li><li id="18f8" class="np nq gv ns b ht qj nu nv hw qk nx ny nz ql ob oc od qm of og oh qn oj ok ol qg qh qi bk"><strong class="ns gw">Register the Service Cluster</strong>: Prepare the service cluster for managing deployments.</li><li id="3ba6" class="np nq gv ns b ht qj nu nv hw qk nx ny nz ql ob oc od qm of og oh qn oj ok ol qg qh qi bk"><strong class="ns gw">Deploy Database Operator</strong>: Install the <code class="cx qo qp qq qr b">cloudnative-pg</code> operator on the service cluster.</li><li id="f936" class="np nq gv ns b ht qj nu nv hw qk nx ny nz ql ob oc od qm of og oh qn oj ok ol qg qh qi bk"><strong class="ns gw">Automate Database Deployment</strong>: Instruct Sveltos to automatically deploy a Postgres database instance.</li><li id="6350" class="np nq gv ns b ht qj nu nv hw qk nx ny nz ql ob oc od qm of og oh qn oj ok ol qg qh qi bk"><strong class="ns gw">Register the Workload Cluster</strong>: Connect the workload cluster to the architecture.</li><li id="a3ae" class="np nq gv ns b ht qj nu nv hw qk nx ny nz ql ob oc od qm of og oh qn oj ok ol qg qh qi bk"><strong class="ns gw">Deploy an Application</strong>: Launch an application that connects to the Postgres database.</li></ol><figure class="oq or os ot ou ov on oo paragraph-image"><div class="on oo qs"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*OYSp04Ki-prpTW4omB_Ugw.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*OYSp04Ki-prpTW4omB_Ugw.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*OYSp04Ki-prpTW4omB_Ugw.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*OYSp04Ki-prpTW4omB_Ugw.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*OYSp04Ki-prpTW4omB_Ugw.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*OYSp04Ki-prpTW4omB_Ugw.png 1100w, https://miro.medium.com/v2/resize:fit:976/format:webp/1*OYSp04Ki-prpTW4omB_Ugw.png 976w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 488px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*OYSp04Ki-prpTW4omB_Ugw.png 640w, https://miro.medium.com/v2/resize:fit:720/1*OYSp04Ki-prpTW4omB_Ugw.png 720w, https://miro.medium.com/v2/resize:fit:750/1*OYSp04Ki-prpTW4omB_Ugw.png 750w, https://miro.medium.com/v2/resize:fit:786/1*OYSp04Ki-prpTW4omB_Ugw.png 786w, https://miro.medium.com/v2/resize:fit:828/1*OYSp04Ki-prpTW4omB_Ugw.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*OYSp04Ki-prpTW4omB_Ugw.png 1100w, https://miro.medium.com/v2/resize:fit:976/1*OYSp04Ki-prpTW4omB_Ugw.png 976w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 488px"/><img alt="" class="bh mt pa c" width="488" height="250" loading="lazy" role="presentation"/></picture></div><figcaption class="pb ff pc on oo pd pe bf b bg z du">Fig. 1: Which path will you choose?</figcaption></figure><p id="6f98" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">Let’s get straight to it. There are two sections A and B below. A is a detailed guide that also explains what happens behind the scenes. B is a short way to quickly deploy things without really understanding them and believe whatever you want to believe.</p><p id="b71d" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">Let’s get started with Path A or B!</p><h1 id="dbbd" class="pf pg gv bf ph pi pj hv pk pl pm hy pn po pp pq pr ps pt pu pv pw px py pz qa bk">Path A: The Deep Dive</h1><p id="926b" class="pw-post-body-paragraph np nq gv ns b ht qb nu nv hw qc nx ny nz qd ob oc od qe of og oh qf oj ok ol go bk">In this section, we will go together step-by-step, explaining each command and its purpose to give you a deeper understanding of what’s happening behind the scenes</p><h2 id="1f0d" class="qt pg gv bf ph qu qv dy pk qw qx ea pn nz qy qz ra od rb rc rd oh re rf rg rh bk"><strong class="al">1. Install sveltosctl, cert-manager, sveltos and add labels on the management cluster</strong></h2><p id="8053" class="pw-post-body-paragraph np nq gv ns b ht qb nu nv hw qc nx ny nz qd ob oc od qe of og oh qf oj ok ol go bk">First, let’s <a class="af om" href="https://github.com/projectsveltos/sveltosctl" rel="noopener ugc nofollow" target="_blank">install </a><code class="cx qo qp qq qr b"><a class="af om" href="https://github.com/projectsveltos/sveltosctl" rel="noopener ugc nofollow" target="_blank">sveltosctl</a></code>, the command-line tool for interacting with Sveltos. This tool will help us manage deployments across our clusters.</p><p id="b872" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">Here’s how to install it:</p><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="3628" class="rl pg gv qr b bg rm rn l ro rp">#MacOs<br/>sudo wget https://github.com/projectsveltos/sveltosctl/releases/download/v0.41.1/sveltosctl-darwin-arm64 -O /usr/local/bin/sveltosctl<br/>sudo chmod +x /usr/local/bin/sveltosctl<br/><br/>#Linux<br/>sudo wget https://github.com/projectsveltos/sveltosctl/releases/download/v0.41.1/sveltosctl-linux-amd64 -O /usr/local/bin/sveltosctl<br/>sudo chmod +x /usr/local/bin/sveltosctl</span></pre><figure class="oq or os ot ou ov on oo paragraph-image"><div class="on oo rq"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*pKQ0bx-ShPHSwIN7FQ9r4w.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*pKQ0bx-ShPHSwIN7FQ9r4w.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*pKQ0bx-ShPHSwIN7FQ9r4w.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*pKQ0bx-ShPHSwIN7FQ9r4w.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*pKQ0bx-ShPHSwIN7FQ9r4w.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*pKQ0bx-ShPHSwIN7FQ9r4w.png 1100w, https://miro.medium.com/v2/resize:fit:1096/format:webp/1*pKQ0bx-ShPHSwIN7FQ9r4w.png 1096w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 548px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*pKQ0bx-ShPHSwIN7FQ9r4w.png 640w, https://miro.medium.com/v2/resize:fit:720/1*pKQ0bx-ShPHSwIN7FQ9r4w.png 720w, https://miro.medium.com/v2/resize:fit:750/1*pKQ0bx-ShPHSwIN7FQ9r4w.png 750w, https://miro.medium.com/v2/resize:fit:786/1*pKQ0bx-ShPHSwIN7FQ9r4w.png 786w, https://miro.medium.com/v2/resize:fit:828/1*pKQ0bx-ShPHSwIN7FQ9r4w.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*pKQ0bx-ShPHSwIN7FQ9r4w.png 1100w, https://miro.medium.com/v2/resize:fit:1096/1*pKQ0bx-ShPHSwIN7FQ9r4w.png 1096w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 548px"/><img alt="" class="bh mt pa c" width="548" height="390" loading="lazy" role="presentation"/></picture></div><figcaption class="pb ff pc on oo pd pe bf b bg z du">Fig .2: Install Sveltosctl on the client Device</figcaption></figure><p id="b58b" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">Now, let’s install <a class="af om" href="https://cert-manager.io" rel="noopener ugc nofollow" target="_blank">Cert-Manager</a> using <a class="af om" href="https://helm.sh" rel="noopener ugc nofollow" target="_blank">Helm</a>. This tool manages certificates for us, which is crucial for secure communication between clusters.</p><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="80b6" class="rl pg gv qr b bg rm rn l ro rp">helm install cert-manager jetstack/cert-manager --namespace cert-manager --create-namespace --version v1.16.1 --set crds.enabled=true</span></pre><figure class="oq or os ot ou ov on oo paragraph-image"><div role="button" tabindex="0" class="ow ox fj oy bh oz"><div class="on oo rr"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*apAh6_PLVMjxJxUJBrwMig.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*apAh6_PLVMjxJxUJBrwMig.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*apAh6_PLVMjxJxUJBrwMig.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*apAh6_PLVMjxJxUJBrwMig.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*apAh6_PLVMjxJxUJBrwMig.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*apAh6_PLVMjxJxUJBrwMig.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*apAh6_PLVMjxJxUJBrwMig.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*apAh6_PLVMjxJxUJBrwMig.png 640w, https://miro.medium.com/v2/resize:fit:720/1*apAh6_PLVMjxJxUJBrwMig.png 720w, https://miro.medium.com/v2/resize:fit:750/1*apAh6_PLVMjxJxUJBrwMig.png 750w, https://miro.medium.com/v2/resize:fit:786/1*apAh6_PLVMjxJxUJBrwMig.png 786w, https://miro.medium.com/v2/resize:fit:828/1*apAh6_PLVMjxJxUJBrwMig.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*apAh6_PLVMjxJxUJBrwMig.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*apAh6_PLVMjxJxUJBrwMig.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh mt pa c" width="700" height="312" loading="lazy" role="presentation"/></picture></div></div><figcaption class="pb ff pc on oo pd pe bf b bg z du">Fig. 3: Install Helm Chart for Cert-Manager</figcaption></figure><p id="8510" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">Next, we’ll deploy the <a class="af om" href="https://projectsveltos.github.io/sveltos/getting_started/install/install/" rel="noopener ugc nofollow" target="_blank">Sveltos stack</a> itself via Helm. This step will set up the core Sveltos components on our management cluster.</p><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="ab2d" class="rl pg gv qr b bg rm rn l ro rp">helm install projectsveltos projectsveltos/projectsveltos -n projectsveltos --create-namespace</span></pre><figure class="oq or os ot ou ov on oo paragraph-image"><div role="button" tabindex="0" class="ow ox fj oy bh oz"><div class="on oo rs"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*mC0ew_1T1PKa7D5HHcACwg.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*mC0ew_1T1PKa7D5HHcACwg.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*mC0ew_1T1PKa7D5HHcACwg.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*mC0ew_1T1PKa7D5HHcACwg.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*mC0ew_1T1PKa7D5HHcACwg.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*mC0ew_1T1PKa7D5HHcACwg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mC0ew_1T1PKa7D5HHcACwg.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*mC0ew_1T1PKa7D5HHcACwg.png 640w, https://miro.medium.com/v2/resize:fit:720/1*mC0ew_1T1PKa7D5HHcACwg.png 720w, https://miro.medium.com/v2/resize:fit:750/1*mC0ew_1T1PKa7D5HHcACwg.png 750w, https://miro.medium.com/v2/resize:fit:786/1*mC0ew_1T1PKa7D5HHcACwg.png 786w, https://miro.medium.com/v2/resize:fit:828/1*mC0ew_1T1PKa7D5HHcACwg.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*mC0ew_1T1PKa7D5HHcACwg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*mC0ew_1T1PKa7D5HHcACwg.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh mt pa c" width="700" height="387" loading="lazy" role="presentation"/></picture></div></div><figcaption class="pb ff pc on oo pd pe bf b bg z du">Fig. 4: Install Helm Chart for Projectsveltos</figcaption></figure><p id="89df" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">Labeling the management cluster helps Sveltos identify and organize clusters by type, simplifying deployments later on.</p><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="cff9" class="rl pg gv qr b bg rm rn l ro rp">kubectl label sveltoscluster -n mgmt mgmt type=mgmt</span></pre><figure class="oq or os ot ou ov on oo paragraph-image"><div role="button" tabindex="0" class="ow ox fj oy bh oz"><div class="on oo rt"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*a3Qrymn6_5lyOIBTK_gVOg.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*a3Qrymn6_5lyOIBTK_gVOg.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*a3Qrymn6_5lyOIBTK_gVOg.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*a3Qrymn6_5lyOIBTK_gVOg.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*a3Qrymn6_5lyOIBTK_gVOg.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*a3Qrymn6_5lyOIBTK_gVOg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a3Qrymn6_5lyOIBTK_gVOg.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*a3Qrymn6_5lyOIBTK_gVOg.png 640w, https://miro.medium.com/v2/resize:fit:720/1*a3Qrymn6_5lyOIBTK_gVOg.png 720w, https://miro.medium.com/v2/resize:fit:750/1*a3Qrymn6_5lyOIBTK_gVOg.png 750w, https://miro.medium.com/v2/resize:fit:786/1*a3Qrymn6_5lyOIBTK_gVOg.png 786w, https://miro.medium.com/v2/resize:fit:828/1*a3Qrymn6_5lyOIBTK_gVOg.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*a3Qrymn6_5lyOIBTK_gVOg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*a3Qrymn6_5lyOIBTK_gVOg.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh mt pa c" width="700" height="445" loading="lazy" role="presentation"/></picture></div></div><figcaption class="pb ff pc on oo pd pe bf b bg z du">Fig. 5: Label Management Cluster</figcaption></figure><p id="fe42" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">To allow Sveltos to work with resources like <em class="nr">ConfigMaps</em> and <em class="nr">Secrets</em>, we need to add specific permissions. Here’s how to patch the <code class="cx qo qp qq qr b">addon-controller-role-extra</code> <em class="nr">ClusterRole</em> for this purpose:</p><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="c7f5" class="rl pg gv qr b bg rm rn l ro rp">kubectl patch clusterrole addon-controller-role-extra --type=&#x27;json&#x27; -p=&#x27;[<br/>  {<br/>    &quot;op&quot;: &quot;add&quot;,<br/>    &quot;path&quot;: &quot;/rules&quot;,<br/>    &quot;value&quot;: [<br/>      {<br/>        &quot;apiGroups&quot;: [&quot;&quot;],<br/>        &quot;resources&quot;: [&quot;configmaps&quot;, &quot;secrets&quot;],<br/>        &quot;verbs&quot;: [&quot;*&quot;]<br/>      }<br/>    ]<br/>  }<br/>]&#x27;</span></pre><p id="d34d" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">Congratulations! You’ve completed the foundational setup. Let’s continue with Step 2.</p><h2 id="81bf" class="qt pg gv bf ph qu qv dy pk qw qx ea pn nz qy qz ra od rb rc rd oh re rf rg rh bk"><strong class="al">2. Register the service cluster</strong></h2><p id="ac1f" class="pw-post-body-paragraph np nq gv ns b ht qb nu nv hw qc nx ny nz qd ob oc od qe of og oh qf oj ok ol go bk">This step is straightforward, thanks to <code class="cx qo qp qq qr b">sveltosctl</code>. Here’s how to connect the management cluster to the service cluster:</p><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="4ca3" class="rl pg gv qr b bg rm rn l ro rp">kubectl create ns service-cluster<br/>sveltosctl register cluster --namespace=service-cluster --cluster=service-cluster --fleet-cluster-context=service-cluster --labels=type=services</span></pre><figure class="oq or os ot ou ov on oo paragraph-image"><div role="button" tabindex="0" class="ow ox fj oy bh oz"><div class="on oo ru"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*nt0H0Tcnl8N1QLR714bFVQ.gif 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*nt0H0Tcnl8N1QLR714bFVQ.gif 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*nt0H0Tcnl8N1QLR714bFVQ.gif 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*nt0H0Tcnl8N1QLR714bFVQ.gif 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*nt0H0Tcnl8N1QLR714bFVQ.gif 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*nt0H0Tcnl8N1QLR714bFVQ.gif 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nt0H0Tcnl8N1QLR714bFVQ.gif 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*nt0H0Tcnl8N1QLR714bFVQ.gif 640w, https://miro.medium.com/v2/resize:fit:720/1*nt0H0Tcnl8N1QLR714bFVQ.gif 720w, https://miro.medium.com/v2/resize:fit:750/1*nt0H0Tcnl8N1QLR714bFVQ.gif 750w, https://miro.medium.com/v2/resize:fit:786/1*nt0H0Tcnl8N1QLR714bFVQ.gif 786w, https://miro.medium.com/v2/resize:fit:828/1*nt0H0Tcnl8N1QLR714bFVQ.gif 828w, https://miro.medium.com/v2/resize:fit:1100/1*nt0H0Tcnl8N1QLR714bFVQ.gif 1100w, https://miro.medium.com/v2/resize:fit:1400/1*nt0H0Tcnl8N1QLR714bFVQ.gif 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh mt pa c" width="700" height="254" loading="lazy" role="presentation"/></picture></div></div><figcaption class="pb ff pc on oo pd pe bf b bg z du">Fig.6: Register Service Cluster and label it</figcaption></figure><p id="3115" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">In this step we created the connection between the management cluster and the managed service cluster. But lets take a look on the provided parameter to get a better understand:</p><p id="175c" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk"><code class="cx qo qp qq qr b">--namaespace=service-cluster</code> : will create the namespace for the managed cluster in the management cluster</p><p id="3234" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk"><code class="cx qo qp qq qr b">--cluster=service-cluster</code> : will add a name to the managed cluster in the CustomResource sveltoscluster</p><p id="33e8" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk"><code class="cx qo qp qq qr b">--fleet-cluster-context=service-cluster</code> : will use your context name to access the cluster that should be managed by sveltos. In my case it is service-cluster</p><p id="c38c" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk"><code class="cx qo qp qq qr b">--labels=types=services</code> : will add label to the added managed cluster into the CustomResource sveltoscluster, which allow deploy apps based on the labels.</p><p id="2b6e" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">To verify the labels, use the following command:</p><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="040e" class="rl pg gv qr b bg rm rn l ro rp">kubectl get sveltoscluster -A --show-labels<br/><br/>NAMESPACE          NAME               READY   VERSION        LABELS<br/>mgmt               mgmt               true    v1.29.2+k3s1   projectsveltos.io/k8s-version=v1.29.2,sveltos-agent=present,type=mgmt<br/>service-cluster    service-cluster    true    v1.29.2+k3s1   projectsveltos.io/k8s-version=v1.29.2,sveltos-agent=present,type=services</span></pre><p id="d8fc" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">This setup enables Sveltos to recognize and manage the service cluster based on labels, which will come in handy for deploying applications.</p><p id="5cd1" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">If you’re curious about how Sveltos manages add-ons, feel free to explore <a class="af om" href="https://projectsveltos.github.io/sveltos/addons/addons/" rel="noopener ugc nofollow" target="_blank">further resources</a>. For now, let’s continue by deploying the <code class="cx qo qp qq qr b"><a class="af om" href="https://cloudnative-pg.io" rel="noopener ugc nofollow" target="_blank">cloudnative-pg</a></code> operator to help set up the managed service on the service cluster.</p><h2 id="aab8" class="qt pg gv bf ph qu qv dy pk qw qx ea pn nz qy qz ra od rb rc rd oh re rf rg rh bk"><strong class="al">3. Deploy cloudnative-pg Operator on the service cluster</strong></h2><p id="6bb4" class="pw-post-body-paragraph np nq gv ns b ht qb nu nv hw qc nx ny nz qd ob oc od qe of og oh qf oj ok ol go bk">To deploy the CloudNative-PG operator, we’ll apply a <code class="cx qo qp qq qr b">ClusterProfile</code> <em class="nr">CustomResource</em> on the management cluster. This <code class="cx qo qp qq qr b">ClusterProfile</code> instructs Sveltos to deploy the operator on clusters that match specific labels.</p><p id="5e16" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">Run the following command to apply the <code class="cx qo qp qq qr b">ClusterProfile</code>:</p><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="1ae7" class="rl pg gv qr b bg rm rn l ro rp">kubectl apply -f https://raw.githubusercontent.com/projectsveltos/sveltos/main/docs/assets/cloudnative-pg.yaml</span></pre><p id="90cc" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">After this step, our setup will look like this:</p><figure class="oq or os ot ou ov on oo paragraph-image"><div role="button" tabindex="0" class="ow ox fj oy bh oz"><div class="on oo rv"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*1HOIrxe6mJoaUIyux31RJA.gif 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*1HOIrxe6mJoaUIyux31RJA.gif 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*1HOIrxe6mJoaUIyux31RJA.gif 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*1HOIrxe6mJoaUIyux31RJA.gif 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*1HOIrxe6mJoaUIyux31RJA.gif 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*1HOIrxe6mJoaUIyux31RJA.gif 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1HOIrxe6mJoaUIyux31RJA.gif 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*1HOIrxe6mJoaUIyux31RJA.gif 640w, https://miro.medium.com/v2/resize:fit:720/1*1HOIrxe6mJoaUIyux31RJA.gif 720w, https://miro.medium.com/v2/resize:fit:750/1*1HOIrxe6mJoaUIyux31RJA.gif 750w, https://miro.medium.com/v2/resize:fit:786/1*1HOIrxe6mJoaUIyux31RJA.gif 786w, https://miro.medium.com/v2/resize:fit:828/1*1HOIrxe6mJoaUIyux31RJA.gif 828w, https://miro.medium.com/v2/resize:fit:1100/1*1HOIrxe6mJoaUIyux31RJA.gif 1100w, https://miro.medium.com/v2/resize:fit:1400/1*1HOIrxe6mJoaUIyux31RJA.gif 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh mt pa c" width="700" height="342" loading="lazy" role="presentation"/></picture></div></div><figcaption class="pb ff pc on oo pd pe bf b bg z du">Fig. 7: Deploy PG-Operator based on ClusterProfile Instruction</figcaption></figure><p id="64b0" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk"><strong class="ns gw">What is a ClusterProfile?</strong></p><p id="e4d8" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">A <code class="cx qo qp qq qr b">ClusterProfile</code> acts like a blueprint that defines which resources should be deployed on clusters that match certain labels. In this case, the profile targets clusters labeled as <code class="cx qo qp qq qr b">type=services</code> and instructs Sveltos to install the <a class="af om" href="https://github.com/cloudnative-pg/charts" rel="noopener ugc nofollow" target="_blank">CloudNative-PG Helm chart</a> there. Here’s what it looks like:</p><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="1685" class="rl pg gv qr b bg rm rn l ro rp">---<br/>apiVersion: config.projectsveltos.io/v1beta1<br/>kind: ClusterProfile<br/>metadata:<br/>  name: deploy-cnpg<br/>spec:<br/>  clusterSelector:<br/>    matchLabels:<br/>      type: services<br/>  syncMode: Continuous<br/>  helmCharts:<br/>  - repositoryURL:    https://cloudnative-pg.github.io/charts<br/>    repositoryName:   cloudnative-pg <br/>    chartName:        cloudnative-pg/cloudnative-pg<br/>    chartVersion:     0.22.1 <br/>    releaseName:      cnpg<br/>    releaseNamespace: cnpg-system<br/>    helmChartAction:  Install</span></pre><p id="6600" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">In this example, any cluster with the label <code class="cx qo qp qq qr b">type=services</code> will have the CloudNative-PG Helm chart automatically installed, continuously synchronizing as specified.</p><p id="f59e" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">To check the resources deployed on the service cluster, you can use:</p><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="0a19" class="rl pg gv qr b bg rm rn l ro rp">sveltosctl show addons <br/><br/>+-----------------------------------+----------------------------+------------------+-----------------------------------+---------+-------------------------------+---------------------------------------------+<br/>|              CLUSTER              |       RESOURCE TYPE        |    NAMESPACE     |               NAME                | VERSION |             TIME              |                  PROFILES                   |<br/>+-----------------------------------+----------------------------+------------------+-----------------------------------+---------+-------------------------------+---------------------------------------------+<br/>| service-cluster/service-cluster   | helm chart                 | cnpg-system      | cnpg                              | 0.22.1  | 2024-11-02 11:35:40 +0100 CET | ClusterProfile/deploy-cnpg                  |<br/>+-----------------------------------+----------------------------+------------------+-----------------------------------+---------+-------------------------------+---------------------------------------------+</span></pre><p id="edaf" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">This confirms that the CloudNative-PG operator has been successfully deployed on the service cluster.</p><h2 id="59a8" class="qt pg gv bf ph qu qv dy pk qw qx ea pn nz qy qz ra od rb rc rd oh re rf rg rh bk"><strong class="al">4. Instruct Sveltos to automatically deploy Postgres DB</strong></h2><p id="d560" class="pw-post-body-paragraph np nq gv ns b ht qb nu nv hw qc nx ny nz qd ob oc od qe of og oh qf oj ok ol go bk">In this step, we’ll configure Sveltos to automatically deploy a PostgreSQL database on clusters labeled with <code class="cx qo qp qq qr b">postgres=required</code>. Whenever Sveltos detects a managed cluster with this label, it will:</p><ul class=""><li id="a8b4" class="np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol rw qh qi bk">Create a PostgreSQL instance on the cluster.</li><li id="f680" class="np nq gv ns b ht qj nu nv hw qk nx ny nz ql ob oc od qm of og oh qn oj ok ol rw qh qi bk">Expose the database via a LoadBalancer service.</li><li id="35be" class="np nq gv ns b ht qj nu nv hw qk nx ny nz ql ob oc od qm of og oh qn oj ok ol rw qh qi bk">Retrieve the credentials and connection details, including the external IP and port.</li></ul><p id="9dca" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">To enable this, apply the following configurations:</p><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="4e87" class="rl pg gv qr b bg rm rn l ro rp">kubectl apply -f https://raw.githubusercontent.com/projectsveltos/sveltos/main/docs/assets/auto-deploy-postgres-cluster.yaml<br/>kubectl apply -f https://raw.githubusercontent.com/projectsveltos/sveltos/main/docs/assets/fetch-postgres-data.yaml</span></pre><p id="d8b9" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">These configurations set up two workflows:</p><ul class=""><li id="de3c" class="np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol rw qh qi bk"><strong class="ns gw">Auto-Deploy PostgreSQL Cluster</strong>: Deploys PostgreSQL on clusters labeled with <code class="cx qo qp qq qr b">type=services</code> when triggered.</li><li id="438e" class="np nq gv ns b ht qj nu nv hw qk nx ny nz ql ob oc od qm of og oh qn oj ok ol rw qh qi bk"><strong class="ns gw">Fetch PostgreSQL Cluster Data</strong>: Retrieves connection data and credentials for PostgreSQL clusters based on specific events.</li></ul><p id="988b" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">The <strong class="ns gw">first workflow</strong> will be like:</p><figure class="oq or os ot ou ov on oo paragraph-image"><div role="button" tabindex="0" class="ow ox fj oy bh oz"><div class="on oo rx"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*bNQpGYIGByJimicFp2QNMA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*bNQpGYIGByJimicFp2QNMA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*bNQpGYIGByJimicFp2QNMA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*bNQpGYIGByJimicFp2QNMA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*bNQpGYIGByJimicFp2QNMA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*bNQpGYIGByJimicFp2QNMA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bNQpGYIGByJimicFp2QNMA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*bNQpGYIGByJimicFp2QNMA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*bNQpGYIGByJimicFp2QNMA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*bNQpGYIGByJimicFp2QNMA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*bNQpGYIGByJimicFp2QNMA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*bNQpGYIGByJimicFp2QNMA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*bNQpGYIGByJimicFp2QNMA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*bNQpGYIGByJimicFp2QNMA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh mt pa c" width="700" height="478" loading="lazy" role="presentation"/></picture></div></div><figcaption class="pb ff pc on oo pd pe bf b bg z du">Fig. 8: Workfow 1: <strong class="bf ph">Auto-Deploy PostgreSQL Cluster</strong></figcaption></figure><p id="eb05" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">In Sveltos, the <strong class="ns gw">EventSource</strong> defines specific events (such as creation or deletion of resources) to watch in Kubernetes clusters, while the <strong class="ns gw">EventTrigger</strong> specifies which add-ons or applications to deploy in response to these events.</p><p id="9eed" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">This how the applied resources looks like:</p><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="2d3d" class="rl pg gv qr b bg rm rn l ro rp"># Anytime a SveltosCluster with label postgres: required<br/># is created, deploys a postgres cluster.<br/># Source cluster is the management cluster.<br/># Destination cluster is the cluster with label type:services<br/>apiVersion: lib.projectsveltos.io/v1beta1<br/>kind: EventSource<br/>metadata:<br/>  name: detect-cluster-requiring-postgres<br/>spec:<br/>  collectResources: true<br/>  resourceSelectors:<br/>  - group: &quot;lib.projectsveltos.io&quot;<br/>    version: &quot;v1beta1&quot;<br/>    kind: &quot;SveltosCluster&quot;<br/>    labelFilters:<br/>    - key: postgres<br/>      operation: Equal<br/>      value: required<br/>---<br/>apiVersion: lib.projectsveltos.io/v1beta1<br/>kind: EventTrigger<br/>metadata:<br/>  name: deploy-postgres-cluster<br/>spec:<br/>  sourceClusterSelector:<br/>    matchLabels:<br/>      type: mgmt<br/>  destinationClusterSelector:<br/>    matchLabels:<br/>      type: services<br/>  eventSourceName: detect-cluster-requiring-postgres<br/>  oneForEvent: true<br/>  policyRefs:<br/>  - name: postgres-cluster<br/>    namespace: default<br/>    kind: ConfigMap<br/>---<br/>apiVersion: v1<br/>data:<br/>  cluster.yaml: |<br/>    apiVersion: postgresql.cnpg.io/v1<br/>    kind: Cluster<br/>    metadata:<br/>      name: cluster-{{ .Resource.metadata.name }}<br/>      namespace: {{ .Resource.metadata.namespace }}<br/>      labels:<br/>        cluster: {{ .Resource.metadata.namespace }}-{{ .Resource.metadata.name }}<br/>    spec:<br/>      instances: 3<br/>      bootstrap:<br/>        initdb:<br/>          database: todo<br/>      storage:<br/>        size: 1Gi<br/>      managed:<br/>        services:<br/>          disabledDefaultServices: [&quot;ro&quot;, &quot;r&quot;]<br/>          additional:<br/>          - selectorType: rw<br/>            serviceTemplate:<br/>              metadata:<br/>                name: cluster-rw-lb<br/>              spec:<br/>                type: LoadBalancer<br/>kind: ConfigMap<br/>metadata:<br/>  annotations:<br/>    projectsveltos.io/instantiate: ok<br/>  name: postgres-cluster<br/>  namespace: default</span></pre><p id="19c6" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">And here is the explaination what will happen and how Sveltos handle it.</p><ul class=""><li id="60c6" class="np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol rw qh qi bk"><strong class="ns gw">EventSource Definition</strong>: The EventSource <code class="cx qo qp qq qr b">detect-cluster-requiring-postgres</code> monitors the creation of any <code class="cx qo qp qq qr b">SveltosCluster</code> object labeled with <code class="cx qo qp qq qr b">postgres: required</code>. When such a labeled cluster is created, Sveltos detects this as a significant event.</li><li id="8a8c" class="np nq gv ns b ht qj nu nv hw qk nx ny nz ql ob oc od qm of og oh qn oj ok ol rw qh qi bk"><strong class="ns gw">EventTrigger Definition</strong>: The EventTrigger <code class="cx qo qp qq qr b">deploy-postgres-cluster</code> is triggered when the above event occurs. It is configured to deploy the PostgreSQL cluster in a target cluster labeled <code class="cx qo qp qq qr b">type: services</code>, with the source being the management cluster labeled <code class="cx qo qp qq qr b">type: mgmt</code>.</li><li id="7905" class="np nq gv ns b ht qj nu nv hw qk nx ny nz ql ob oc od qm of og oh qn oj ok ol rw qh qi bk"><strong class="ns gw">PostgreSQL Cluster Deployment</strong>: The EventTrigger references a <code class="cx qo qp qq qr b">ConfigMap</code> (<code class="cx qo qp qq qr b">postgres-cluster</code>) that contains a template to define a PostgreSQL cluster. When the event is triggered, Sveltos uses this template to create a new PostgreSQL cluster in the target cluster. The template dynamically incorporates details like the name and namespace of the originating cluster.</li></ul><p id="6ed4" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">In summary, Sveltos watches for specific labels on clusters and, when it detects a match, automatically deploys a PostgreSQL cluster in a designated target cluster.</p><p id="5532" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">The <strong class="ns gw">Second workflow</strong> composite of two workflows and looks like:</p><figure class="oq or os ot ou ov on oo paragraph-image"><div role="button" tabindex="0" class="ow ox fj oy bh oz"><div class="on oo ry"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*x2GJ3pRdZkSnIFpfX6ia2Q.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*x2GJ3pRdZkSnIFpfX6ia2Q.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*x2GJ3pRdZkSnIFpfX6ia2Q.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*x2GJ3pRdZkSnIFpfX6ia2Q.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*x2GJ3pRdZkSnIFpfX6ia2Q.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*x2GJ3pRdZkSnIFpfX6ia2Q.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x2GJ3pRdZkSnIFpfX6ia2Q.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*x2GJ3pRdZkSnIFpfX6ia2Q.png 640w, https://miro.medium.com/v2/resize:fit:720/1*x2GJ3pRdZkSnIFpfX6ia2Q.png 720w, https://miro.medium.com/v2/resize:fit:750/1*x2GJ3pRdZkSnIFpfX6ia2Q.png 750w, https://miro.medium.com/v2/resize:fit:786/1*x2GJ3pRdZkSnIFpfX6ia2Q.png 786w, https://miro.medium.com/v2/resize:fit:828/1*x2GJ3pRdZkSnIFpfX6ia2Q.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*x2GJ3pRdZkSnIFpfX6ia2Q.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*x2GJ3pRdZkSnIFpfX6ia2Q.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh mt pa c" width="700" height="606" loading="lazy" role="presentation"/></picture></div></div><figcaption class="pb ff pc on oo pd pe bf b bg z du">Fig. 9: Workflow 2: <strong class="bf ph">Fetch PostgreSQL Cluster Data</strong></figcaption></figure><p id="3b4e" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">In this setup, Sveltos is configured to retrieve PostgreSQL credentials and load balancer information from a services cluster and make them accessible in the management cluster:</p><p id="ecad" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk"><strong class="ns gw">Fetching PostgreSQL Credentials</strong>:</p><ul class=""><li id="eedb" class="np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol rw qh qi bk"><strong class="ns gw">EventSource</strong>: <code class="cx qo qp qq qr b">detect-credentials-secret</code> monitors for <code class="cx qo qp qq qr b">Secret</code> objects in the services cluster that have the label <code class="cx qo qp qq qr b">cnpg.io/reload: true</code>. This label indicates that the secret contains PostgreSQL credentials.</li><li id="a5a1" class="np nq gv ns b ht qj nu nv hw qk nx ny nz ql ob oc od qm of og oh qn oj ok ol rw qh qi bk"><strong class="ns gw">EventTrigger</strong>: <code class="cx qo qp qq qr b">credentials-secret</code> is activated when such a <code class="cx qo qp qq qr b">Secret</code> is detected in any cluster labeled <code class="cx qo qp qq qr b">type: services</code>. It initiates the creation of a <code class="cx qo qp qq qr b">Secret</code> in the management cluster (labeled <code class="cx qo qp qq qr b">type: mgmt</code>) with the PostgreSQL credentials.</li><li id="4125" class="np nq gv ns b ht qj nu nv hw qk nx ny nz ql ob oc od qm of og oh qn oj ok ol rw qh qi bk"><strong class="ns gw">ConfigMap Template</strong>: The <code class="cx qo qp qq qr b">credentials</code> ConfigMap contains a template to create a <code class="cx qo qp qq qr b">Secret</code> named <code class="cx qo qp qq qr b">pg-credentials</code> in the management cluster. This template dynamically pulls the username and password from the original Secret in the services cluster, allowing Sveltos to replicate these credentials securely.</li></ul><p id="ec60" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk"><strong class="ns gw">Fetching Load Balancer Information</strong>:</p><ul class=""><li id="befd" class="np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol rw qh qi bk"><strong class="ns gw">EventSource</strong>: <code class="cx qo qp qq qr b">detect-loadbalancer</code> monitors for <code class="cx qo qp qq qr b">Service</code> objects in the services cluster labeled <code class="cx qo qp qq qr b">cnpg.io/isManaged: true</code>, indicating they are managed PostgreSQL load balancers.</li><li id="5be3" class="np nq gv ns b ht qj nu nv hw qk nx ny nz ql ob oc od qm of og oh qn oj ok ol rw qh qi bk"><strong class="ns gw">EventTrigger</strong>: <code class="cx qo qp qq qr b">cnpg-loadbalancer-data</code> triggers when such a Service is detected, and it creates a ConfigMap in the management cluster to store the load balancer’s external IP and port information.</li><li id="0c49" class="np nq gv ns b ht qj nu nv hw qk nx ny nz ql ob oc od qm of og oh qn oj ok ol rw qh qi bk"><strong class="ns gw">ConfigMap Template</strong>: The <code class="cx qo qp qq qr b">loadbalancer-data</code> ConfigMap template is used to generate a ConfigMap named <code class="cx qo qp qq qr b">pg-loadbalancer-data</code> in the management cluster. It populates this ConfigMap with the load balancer’s external IP address and port, enabling external access to the PostgreSQL instance from the management cluster.</li></ul><p id="b91a" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">This setup allows the management cluster to have <strong class="ns gw">secure and dynamic</strong> access to PostgreSQL credentials and connection details for instances deployed in the services cluster.</p><p id="dced" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">Next, let’s register the workload cluster to trigger events in the following steps.</p><h2 id="ddc2" class="qt pg gv bf ph qu qv dy pk qw qx ea pn nz qy qz ra od rb rc rd oh re rf rg rh bk"><strong class="al">5. Register the workload cluster</strong></h2><p id="1646" class="pw-post-body-paragraph np nq gv ns b ht qb nu nv hw qc nx ny nz qd ob oc od qe of og oh qf oj ok ol go bk">Now, let’s register the workload cluster with Sveltos. By labeling this cluster with <code class="cx qo qp qq qr b">postgres=required</code>, we instruct Sveltos to deploy a new PostgreSQL instance on the service cluster and gather the necessary connection details. Here’s how to register the workload cluster:</p><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="5118" class="rl pg gv qr b bg rm rn l ro rp">kubectl create ns workload-cluster<br/>sveltosctl register cluster --namespace=workload-cluster --cluster=workload-cluster --fleet-cluster-context=workload-cluster --labels=postgres=required</span></pre><p id="0d2b" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">Once the cluster is registered, Sveltos automatically triggers the workflows (Events) we set up in Step 4. Here’s what happens behind the scenes:</p><ul class=""><li id="2836" class="np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol rw qh qi bk"><strong class="ns gw">Triggering Deployment and Data Collection</strong><br/>Sveltos creates <code class="cx qo qp qq qr b">ClusterProfiles</code> and <code class="cx qo qp qq qr b">ConfigMaps</code> using the templates defined in the previous <code class="cx qo qp qq qr b">EventTrigger</code>configurations. Based on these templates, it deploys a PostgreSQL cluster in the service cluster under the <code class="cx qo qp qq qr b">workload-cluster</code> namespace. It also retrieves and stores the database’s connection information (such as credentials and load balancer IP) in the management cluster’s under the workload-cluster namespace.</li><li id="eff8" class="np nq gv ns b ht qj nu nv hw qk nx ny nz ql ob oc od qm of og oh qn oj ok ol rw qh qi bk"><strong class="ns gw">Automatic Creation of ClusterProfile and ConfigMap</strong><br/>Sveltos generates a <code class="cx qo qp qq qr b">ClusterProfile</code> that targets the <code class="cx qo qp qq qr b">type=services</code> cluster, referencing the new ConfigMap created from the template. Here’s an example of the generated <code class="cx qo qp qq qr b">ClusterProfile</code>:</li></ul><p id="01d3" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">This will looks like:</p><figure class="oq or os ot ou ov on oo paragraph-image"><div role="button" tabindex="0" class="ow ox fj oy bh oz"><div class="on oo rz"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*j2UxwBZjfu08iGPMZRNFog.gif 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*j2UxwBZjfu08iGPMZRNFog.gif 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*j2UxwBZjfu08iGPMZRNFog.gif 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*j2UxwBZjfu08iGPMZRNFog.gif 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*j2UxwBZjfu08iGPMZRNFog.gif 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*j2UxwBZjfu08iGPMZRNFog.gif 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j2UxwBZjfu08iGPMZRNFog.gif 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*j2UxwBZjfu08iGPMZRNFog.gif 640w, https://miro.medium.com/v2/resize:fit:720/1*j2UxwBZjfu08iGPMZRNFog.gif 720w, https://miro.medium.com/v2/resize:fit:750/1*j2UxwBZjfu08iGPMZRNFog.gif 750w, https://miro.medium.com/v2/resize:fit:786/1*j2UxwBZjfu08iGPMZRNFog.gif 786w, https://miro.medium.com/v2/resize:fit:828/1*j2UxwBZjfu08iGPMZRNFog.gif 828w, https://miro.medium.com/v2/resize:fit:1100/1*j2UxwBZjfu08iGPMZRNFog.gif 1100w, https://miro.medium.com/v2/resize:fit:1400/1*j2UxwBZjfu08iGPMZRNFog.gif 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh mt pa c" width="700" height="570" loading="lazy" role="presentation"/></picture></div></div><figcaption class="pb ff pc on oo pd pe bf b bg z du">Fig. 10: Deploy PG-Cluster on Service-Cluster and fetch PG-Data</figcaption></figure><p id="59a7" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">So Sveltos create <em class="nr">ClusterProfiles</em> based that matches the destination cluster. It also have this <em class="nr">ClusterProfile</em> reference the newly created <em class="nr">ConfigMap</em> from the Template.</p><p id="72bc" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">So you can see a new <em class="nr">ClusterProfile</em> is created like:</p><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="1b02" class="rl pg gv qr b bg rm rn l ro rp">apiVersion: config.projectsveltos.io/v1beta1<br/>kind: ClusterProfile<br/>metadata:<br/>  finalizers:<br/>  - clusterprofilefinalizer.projectsveltos.io<br/>  generation: 1<br/>  labels:<br/>    eventtrigger.lib.projectsveltos.io/clusterNamespace: mgmt<br/>    eventtrigger.lib.projectsveltos.io/clustername: mgmt<br/>    eventtrigger.lib.projectsveltos.io/clustertype: Sveltos<br/>    eventtrigger.lib.projectsveltos.io/eventreportname: detect-cluster-requiring-postgres<br/>    eventtrigger.lib.projectsveltos.io/eventtriggername: deploy-postgres-cluster<br/>    eventtrigger.lib.projectsveltos.io/resourcename: workload-cluster<br/>    eventtrigger.lib.projectsveltos.io/resourcenamespace: workload-cluster<br/>    projectsveltos.io/cluster-name: service-cluster<br/>    projectsveltos.io/cluster-profile-name: sveltos-j7dn263no745a5e58uya<br/>    projectsveltos.io/cluster-type: Sveltos<br/>  name: sveltos-j7dn263no745a5e58uya<br/>spec:<br/>  clusterSelector:<br/>    matchLabels:<br/>      type: services<br/>  continueOnConflict: false<br/>  policyRefs:<br/>  - deploymentType: Remote<br/>    kind: ConfigMap<br/>    name: sveltos-bnnnp8dv2ndb8i7dx1vo<br/>    namespace: projectsveltos<br/>  reloader: false<br/>  stopMatchingBehavior: WithdrawPolicies<br/>  syncMode: Continuous<br/>  tier: 100<br/></span></pre><p id="cb37" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">and here you can see that reference <em class="nr">ConfigMap</em>, that have the <em class="nr">CustomResource</em> for creating a <em class="nr">Cluster</em> inside:</p><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="2ebb" class="rl pg gv qr b bg rm rn l ro rp">apiVersion: v1<br/>kind: ConfigMap<br/>metadata:<br/>  labels:<br/>    eventtrigger.lib.projectsveltos.io/clusterNamespace: mgmt<br/>    eventtrigger.lib.projectsveltos.io/clustername: mgmt<br/>    eventtrigger.lib.projectsveltos.io/clustertype: Sveltos<br/>    eventtrigger.lib.projectsveltos.io/eventreportname: detect-cluster-requiring-postgres<br/>    eventtrigger.lib.projectsveltos.io/eventtriggername: deploy-postgres-cluster<br/>    eventtrigger.lib.projectsveltos.io/refname: postgres-cluster<br/>    eventtrigger.lib.projectsveltos.io/refnamespace: default<br/>    eventtrigger.lib.projectsveltos.io/resourcename: workload-cluster<br/>    eventtrigger.lib.projectsveltos.io/resourcenamespace: workload-cluster<br/>  name: sveltos-bnnnp8dv2ndb8i7dx1vo<br/>  namespace: projectsveltos<br/>data:<br/>  cluster.yaml: |<br/>    apiVersion: postgresql.cnpg.io/v1<br/>    kind: Cluster<br/>    metadata:<br/>      name: cluster-workload-cluster<br/>      namespace: workload-cluster<br/>      labels:<br/>        cluster: workload-cluster-workload-cluster<br/>    spec:<br/>      instances: 3<br/>      bootstrap:<br/>        initdb:<br/>          database: todo<br/>      storage:<br/>        size: 1Gi<br/>      managed:<br/>        services:<br/>          disabledDefaultServices: [&quot;ro&quot;, &quot;r&quot;]<br/>          additional:<br/>          - selectorType: rw<br/>            serviceTemplate:<br/>              metadata:<br/>                name: cluster-rw-lb<br/>              spec:<br/>                type: LoadBalancer<br/><br/></span></pre><p id="ce1c" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">Of course, this is just one example — you can do much more, such as using Helm to install a chart via triggers, eliminating the need to specify it in a <em class="nr">ConfigMap (</em>More on this at the end).</p><p id="8fd9" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">Now, let’s verify that Sveltos has successfully deployed the PostgreSQL instance and fetched the connection details. To check the credentials, use:</p><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="3dd8" class="rl pg gv qr b bg rm rn l ro rp">kubectl get secret -n workload-cluster<br/><br/><br/><br/>#output <br/>Name                                  TYPE     DATA   AGE<br/>workload-cluster-sveltos-kubeconfig   Opaque   1      47h<br/>pg-credentials                        Opaque   2      47h</span></pre><p id="5e1b" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">The <code class="cx qo qp qq qr b">pg-credentials</code> secret contains the PostgreSQL credentials:</p><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="e061" class="rl pg gv qr b bg rm rn l ro rp">data:<br/>  password: bTloa....<br/>  user: d...</span></pre><p id="e8af" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">To check the connection details (external IP and port), use:</p><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="eeb7" class="rl pg gv qr b bg rm rn l ro rp">kubectl get configmap -n workload-cluster service-cluster-loadbalancer-data -oyaml                                                                               04.11.24  11:32:44  management-cluster/default ⎈<br/><br/>#output like<br/>apiVersion: v1<br/>data:<br/>  external-ip: 212.2.....<br/>  port: &quot;5432&quot;</span></pre><p id="29ad" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">This completes the setup, with the management cluster now able to access the PostgreSQL instance’s connection details and credentials securely and automatically.</p><h2 id="fa11" class="qt pg gv bf ph qu qv dy pk qw qx ea pn nz qy qz ra od rb rc rd oh re rf rg rh bk"><strong class="al">6. Deploy an application that access the Postgres DB</strong></h2><p id="f7fe" class="pw-post-body-paragraph np nq gv ns b ht qb nu nv hw qc nx ny nz qd ob oc od qe of og oh qf oj ok ol go bk">Sveltos can now be used to deploy a <em class="nr">Job</em> in the workload-cluster cluster. This <em class="nr">Job</em> will access the Postgres DB running on the services-cluster.</p><p id="0dde" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">This <em class="nr">Job</em> is expressed as a template and will be deployed by Sveltos in any cluster with the label <code class="cx qo qp qq qr b">type=app</code>.</p><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="984b" class="rl pg gv qr b bg rm rn l ro rp">kubectl apply -f https://raw.githubusercontent.com/projectsveltos/sveltos/main/docs/assets/job-to-create-table.yaml<br/><br/>kubectl label sveltoscluster -n workloadcluster workload-cluster type=app</span></pre><p id="dfa7" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">The change will then look like this:</p><figure class="oq or os ot ou ov on oo paragraph-image"><div role="button" tabindex="0" class="ow ox fj oy bh oz"><div class="on oo sa"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*EQvwDKtCTkk44v5paYycHw.gif 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*EQvwDKtCTkk44v5paYycHw.gif 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*EQvwDKtCTkk44v5paYycHw.gif 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*EQvwDKtCTkk44v5paYycHw.gif 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*EQvwDKtCTkk44v5paYycHw.gif 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*EQvwDKtCTkk44v5paYycHw.gif 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EQvwDKtCTkk44v5paYycHw.gif 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*EQvwDKtCTkk44v5paYycHw.gif 640w, https://miro.medium.com/v2/resize:fit:720/1*EQvwDKtCTkk44v5paYycHw.gif 720w, https://miro.medium.com/v2/resize:fit:750/1*EQvwDKtCTkk44v5paYycHw.gif 750w, https://miro.medium.com/v2/resize:fit:786/1*EQvwDKtCTkk44v5paYycHw.gif 786w, https://miro.medium.com/v2/resize:fit:828/1*EQvwDKtCTkk44v5paYycHw.gif 828w, https://miro.medium.com/v2/resize:fit:1100/1*EQvwDKtCTkk44v5paYycHw.gif 1100w, https://miro.medium.com/v2/resize:fit:1400/1*EQvwDKtCTkk44v5paYycHw.gif 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh mt pa c" width="700" height="770" loading="lazy" role="presentation"/></picture></div></div><figcaption class="pb ff pc on oo pd pe bf b bg z du">Fig. 11: Deploy a Job on the Workload Cluster which has access to PG-DB on the Service Cluster</figcaption></figure><p id="3b5e" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">It establishes a connection to the workload-cluster, creating a new ClusterProfile, which instructs Sveltos to deploy a <em class="nr">Job</em> on the cluster matching <code class="cx qo qp qq qr b">type=app</code>.</p><p id="a49e" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">If you take a closer look at the <em class="nr">ClusterProfile</em>:</p><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="0416" class="rl pg gv qr b bg rm rn l ro rp">apiVersion: config.projectsveltos.io/v1beta1<br/>kind: ClusterProfile<br/>metadata:<br/>  finalizers:<br/>  - clusterprofilefinalizer.projectsveltos.io<br/>  name: deploy-job<br/>spec:<br/>  clusterSelector:<br/>    matchLabels:<br/>      type: app<br/>  continueOnConflict: false<br/>  policyRefs:<br/>  - deploymentType: Remote<br/>    kind: ConfigMap<br/>    name: job-to-create-table<br/>    namespace: default<br/>  reloader: false<br/>  stopMatchingBehavior: WithdrawPolicies<br/>  syncMode: Continuous<br/>  templateResourceRefs:<br/>  - identifier: Credentials<br/>    resource:<br/>      apiVersion: v1<br/>      kind: Secret<br/>      name: pg-credentials<br/>  - identifier: LoadBalancer<br/>    resource:<br/>      apiVersion: v1<br/>      kind: ConfigMap<br/>      name: pg-loadbalancer-data<br/>  tier: 100</span></pre><p id="c3dd" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">Here’s what happens:</p><ul class=""><li id="1df4" class="np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol rw qh qi bk">Sveltos uses the ConfigMap <code class="cx qo qp qq qr b">job-to-create-table</code> in the <code class="cx qo qp qq qr b">default</code> namespace.</li><li id="cd58" class="np nq gv ns b ht qj nu nv hw qk nx ny nz ql ob oc od qm of og oh qn oj ok ol rw qh qi bk">It replaces values in the template with data from the Secret <code class="cx qo qp qq qr b">pg-credentials</code> and <em class="nr">ConfigMap</em> <code class="cx qo qp qq qr b">pg-loadbalancer-data</code>, setting the namespace based on the matching label <code class="cx qo qp qq qr b">type=app</code> (workload-cluster).</li><li id="a296" class="np nq gv ns b ht qj nu nv hw qk nx ny nz ql ob oc od qm of og oh qn oj ok ol rw qh qi bk">Sveltos then creates a Job using the fetched information on the remote cluster that matches the label <code class="cx qo qp qq qr b">type=app</code> (in our case workload-cluster).</li></ul><p id="978d" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">You can check if the provisioning is working as expected with:</p><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="2f26" class="rl pg gv qr b bg rm rn l ro rp">kubectl get clustersummaries -A -owide<br/><br/>NAMESPACE          NAME                                                   HELMCHARTS    KUSTOMIZEREFS   POLICYREFS<br/>mgmt               sveltos-1a6ec1ce3bandndeqixd-sveltos-mgmt                                            Provisioned<br/>mgmt               sveltos-p46z943e935h2vtev56i-sveltos-mgmt                                            Provisioned<br/>service-cluster    deploy-cnpg-sveltos-service-cluster                    Provisioned<br/>service-cluster    sveltos-xind5b6qvvrnbeur2flf-sveltos-service-cluster                                 Provisioned<br/>workload-cluster   deploy-job-sveltos-workload-cluster                                                  Provisioned</span></pre><p id="bb9d" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">You should now see the<em class="nr"> Job </em><code class="cx qo qp qq qr b">todo-table</code> running in the workload-cluster.</p><h1 id="c179" class="pf pg gv bf ph pi pj hv pk pl pm hy pn po pp pq pr ps pt pu pv pw px py pz qa bk">Path B: The Shortcut</h1><h2 id="c9ee" class="qt pg gv bf ph qu qv dy pk qw qx ea pn nz qy qz ra od rb rc rd oh re rf rg rh bk"><strong class="al">1. Install sveltosctl, cert-manager, sveltos and add labels on the management cluster</strong></h2><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="ec7f" class="rl pg gv qr b bg rm rn l ro rp">#MacOs<br/>sudo wget https://github.com/projectsveltos/sveltosctl/releases/download/v0.41.1/sveltosctl-darwin-arm64 -O /usr/local/bin/sveltosctl<br/>sudo chmod +x /usr/local/bin/sveltosctl<br/><br/>#Linux<br/>sudo wget https://github.com/projectsveltos/sveltosctl/releases/download/v0.41.1/sveltosctl-linux-amd64 -O /usr/local/bin/sveltosctl<br/>sudo chmod +x /usr/local/bin/sveltosctl<br/><br/><br/>#Cert-Manager<br/>helm install cert-manager jetstack/cert-manager --namespace cert-manager --create-namespace --version v1.16.1 --set crds.enabled=true<br/><br/><br/>#Sveltos<br/>helm install projectsveltos projectsveltos/projectsveltos -n projectsveltos --create-namespace<br/><br/>#Label management cluster<br/>kubectl label sveltoscluster -n mgmt mgmt type=mgmt<br/><br/>#grant extra permission.<br/>kubectl patch clusterrole addon-controller-role-extra --type=&#x27;json&#x27; -p=&#x27;[<br/>  {<br/>    &quot;op&quot;: &quot;add&quot;,<br/>    &quot;path&quot;: &quot;/rules&quot;,<br/>    &quot;value&quot;: [<br/>      {<br/>        &quot;apiGroups&quot;: [&quot;&quot;],<br/>        &quot;resources&quot;: [&quot;configmaps&quot;, &quot;secrets&quot;],<br/>        &quot;verbs&quot;: [&quot;*&quot;]<br/>      }<br/>    ]<br/>  }<br/>]&#x27;<br/><br/><br/></span></pre><h2 id="8401" class="qt pg gv bf ph qu qv dy pk qw qx ea pn nz qy qz ra od rb rc rd oh re rf rg rh bk">2. Register the Service Cluster</h2><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="cb71" class="rl pg gv qr b bg rm rn l ro rp">kubectl create ns service-cluster<br/>sveltosctl register cluster --namespace=service-cluster --cluster=service-cluster --fleet-cluster-context=service-cluster --labels=type=services</span></pre><p id="8647" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">Check labels:</p><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="57f8" class="rl pg gv qr b bg rm rn l ro rp">kubectl get sveltoscluster -A --show-labels<br/><br/>NAMESPACE          NAME               READY   VERSION        LABELS<br/>mgmt               mgmt               true    v1.29.2+k3s1   projectsveltos.io/k8s-version=v1.29.2,sveltos-agent=present,type=mgmt<br/>service-cluster    service-cluster    true    v1.29.2+k3s1   projectsveltos.io/k8s-version=v1.29.2,sveltos-agent=present,type=services</span></pre><h2 id="69e2" class="qt pg gv bf ph qu qv dy pk qw qx ea pn nz qy qz ra od rb rc rd oh re rf rg rh bk">3. Deploy CloudNative-PG Operator on the Service Cluster</h2><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="4e4b" class="rl pg gv qr b bg rm rn l ro rp">kubectl apply -f https://raw.githubusercontent.com/projectsveltos/sveltos/main/docs/assets/cloudnative-pg.yaml</span></pre><p id="add1" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">Now you can see the deployed resources on the service cluster with:</p><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="0145" class="rl pg gv qr b bg rm rn l ro rp">sveltosctl show addons <br/><br/>+-----------------------------------+----------------------------+------------------+-----------------------------------+---------+-------------------------------+---------------------------------------------+<br/>|              CLUSTER              |       RESOURCE TYPE        |    NAMESPACE     |               NAME                | VERSION |             TIME              |                  PROFILES                   |<br/>+-----------------------------------+----------------------------+------------------+-----------------------------------+---------+-------------------------------+---------------------------------------------+<br/>| service-cluster/service-cluster   | helm chart                 | cnpg-system      | cnpg                              | 0.22.1  | 2024-11-02 11:35:40 +0100 CET | ClusterProfile/deploy-cnpg                  |<br/>+-----------------------------------+----------------------------+------------------+-----------------------------------+---------+-------------------------------+---------------------------------------------+</span></pre><h2 id="e0a1" class="qt pg gv bf ph qu qv dy pk qw qx ea pn nz qy qz ra od rb rc rd oh re rf rg rh bk">4. Instruct Sveltos to Automatically Deploy a PostgreSQL Database</h2><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="bf04" class="rl pg gv qr b bg rm rn l ro rp">kubectl apply -f https://raw.githubusercontent.com/projectsveltos/sveltos/main/docs/assets/auto-deploy-postgres-cluster.yaml<br/>kubectl apply -f https://raw.githubusercontent.com/projectsveltos/sveltos/main/docs/assets/fetch-postgres-data.yaml</span></pre><h2 id="c645" class="qt pg gv bf ph qu qv dy pk qw qx ea pn nz qy qz ra od rb rc rd oh re rf rg rh bk">5. Register the Workload Cluster</h2><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="9ec8" class="rl pg gv qr b bg rm rn l ro rp">kubectl create ns workload-cluster<br/>sveltosctl register cluster --namespace=workload-cluster --cluster=workload-cluster --fleet-cluster-context=workload-cluster --labels=postgres=required</span></pre><p id="bfd2" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">Now Verify Sveltos deployed the Postgres Cluster and fetched the necessary info to connect:</p><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="9283" class="rl pg gv qr b bg rm rn l ro rp">kubectl get secret -n workload-cluster<br/><br/>#output <br/>Name                                  TYPE     DATA   AGE<br/>workload-cluster-sveltos-kubeconfig   Opaque   1      47h<br/>pg-credentials                        Opaque   2      47h</span></pre><h2 id="70ce" class="qt pg gv bf ph qu qv dy pk qw qx ea pn nz qy qz ra od rb rc rd oh re rf rg rh bk">6. Deploy an Application that Accesses the PostgreSQL Database</h2><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="b042" class="rl pg gv qr b bg rm rn l ro rp">kubectl apply -f https://raw.githubusercontent.com/projectsveltos/sveltos/main/docs/assets/job-to-create-table.yaml<br/><br/>kubectl label sveltoscluster -n workload-cluster workload-cluster type=app</span></pre><p id="9675" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">Check if provisioning worked as expected:</p><pre class="oq or os ot ou ri qr rj bp rk bb bk"><span id="7cba" class="rl pg gv qr b bg rm rn l ro rp">kubectl get clustersummaries -A -owide<br/><br/>NAMESPACE          NAME                                                   HELMCHARTS    KUSTOMIZEREFS   POLICYREFS<br/>mgmt               sveltos-1a6ec1ce3bandndeqixd-sveltos-mgmt                                            Provisioned<br/>mgmt               sveltos-p46z943e935h2vtev56i-sveltos-mgmt                                            Provisioned<br/>service-cluster    deploy-cnpg-sveltos-service-cluster                    Provisioned<br/>service-cluster    sveltos-xind5b6qvvrnbeur2flf-sveltos-service-cluster                                 Provisioned<br/>workload-cluster   deploy-job-sveltos-workload-cluster                                                  Provisioned</span></pre><p id="1eae" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">You should now see the Job <code class="cx qo qp qq qr b">todo-table</code> running in the workload-cluster.</p><p id="20f0" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk"><strong class="ns gw">Congratulations!</strong> You’ve created an event-driven, managed Database-as-a-Service! You can further extend this setup by defining jobs that trigger credential sharing with users or services referenced by the UI, as shown in the initial example.</p><h1 id="f360" class="pf pg gv bf ph pi pj hv pk pl pm hy pn po pp pq pr ps pt pu pv pw px py pz qa bk">Wrapping Up</h1><p id="402a" class="pw-post-body-paragraph np nq gv ns b ht qb nu nv hw qc nx ny nz qd ob oc od qe of og oh qf oj ok ol go bk">I can imagine you’re now wondering, where’s the GitOps part? The headline was meant to catch your attention? No. In reality, the Sveltos Addon-Controller workflow is based on the GitOps approach, but for a full GitOps experience, you can pair <a class="af om" href="https://projectsveltos.github.io/sveltos/addons/example_flux_sources/" rel="noopener ugc nofollow" target="_blank">Sveltos with Flux CD — it’s already integrate</a>d. Why use Flux CD? To deploy <em class="nr">ClusterProfiles</em> and apply another Sveltos <em class="nr">CustomResources</em>, you’ll need GitOps Tools like <a class="af om" href="https://www.google.com/search?client=safari&amp;rls=en&amp;q=flux+cd&amp;ie=UTF-8&amp;oe=UTF-8" rel="noopener ugc nofollow" target="_blank">Flux CD</a>.</p><p id="eb87" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">This was just a small part of how you could implement it. Sveltos offers many different possibilities for providing event-driven managed services. At the same time, the managed service can be integrated into an internal developer platform to offer teams a self-service approach.</p><p id="2ef5" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">We have depicted the following scenario:</p><figure class="oq or os ot ou ov on oo paragraph-image"><div role="button" tabindex="0" class="ow ox fj oy bh oz"><div class="on oo sb"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*1V_kMNCqBFPT6wzIKW1URw.gif 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*1V_kMNCqBFPT6wzIKW1URw.gif 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*1V_kMNCqBFPT6wzIKW1URw.gif 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*1V_kMNCqBFPT6wzIKW1URw.gif 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*1V_kMNCqBFPT6wzIKW1URw.gif 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*1V_kMNCqBFPT6wzIKW1URw.gif 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1V_kMNCqBFPT6wzIKW1URw.gif 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*1V_kMNCqBFPT6wzIKW1URw.gif 640w, https://miro.medium.com/v2/resize:fit:720/1*1V_kMNCqBFPT6wzIKW1URw.gif 720w, https://miro.medium.com/v2/resize:fit:750/1*1V_kMNCqBFPT6wzIKW1URw.gif 750w, https://miro.medium.com/v2/resize:fit:786/1*1V_kMNCqBFPT6wzIKW1URw.gif 786w, https://miro.medium.com/v2/resize:fit:828/1*1V_kMNCqBFPT6wzIKW1URw.gif 828w, https://miro.medium.com/v2/resize:fit:1100/1*1V_kMNCqBFPT6wzIKW1URw.gif 1100w, https://miro.medium.com/v2/resize:fit:1400/1*1V_kMNCqBFPT6wzIKW1URw.gif 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh mt pa c" width="700" height="508" loading="lazy" role="presentation"/></picture></div></div><figcaption class="pb ff pc on oo pd pe bf b bg z du">Fig. 12: Relationship 1 K8s-Cluster : 1 PG-Cluster</figcaption></figure><p id="da2b" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">Thus, we have created a 1:1 relationship between a workload cluster and a PostgreSQL cluster on the service cluster because we configured our ClusterProfiles based on the clusters’ labels.</p><p id="f9fa" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">There’s also an option to build something like this:</p><figure class="oq or os ot ou ov on oo paragraph-image"><div role="button" tabindex="0" class="ow ox fj oy bh oz"><div class="on oo sb"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*Qw1q_8PMDz5Eya_wvGFW4g.gif 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*Qw1q_8PMDz5Eya_wvGFW4g.gif 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*Qw1q_8PMDz5Eya_wvGFW4g.gif 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*Qw1q_8PMDz5Eya_wvGFW4g.gif 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*Qw1q_8PMDz5Eya_wvGFW4g.gif 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*Qw1q_8PMDz5Eya_wvGFW4g.gif 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qw1q_8PMDz5Eya_wvGFW4g.gif 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*Qw1q_8PMDz5Eya_wvGFW4g.gif 640w, https://miro.medium.com/v2/resize:fit:720/1*Qw1q_8PMDz5Eya_wvGFW4g.gif 720w, https://miro.medium.com/v2/resize:fit:750/1*Qw1q_8PMDz5Eya_wvGFW4g.gif 750w, https://miro.medium.com/v2/resize:fit:786/1*Qw1q_8PMDz5Eya_wvGFW4g.gif 786w, https://miro.medium.com/v2/resize:fit:828/1*Qw1q_8PMDz5Eya_wvGFW4g.gif 828w, https://miro.medium.com/v2/resize:fit:1100/1*Qw1q_8PMDz5Eya_wvGFW4g.gif 1100w, https://miro.medium.com/v2/resize:fit:1400/1*Qw1q_8PMDz5Eya_wvGFW4g.gif 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh mt pa c" width="700" height="566" loading="lazy" role="presentation"/></picture></div></div><figcaption class="pb ff pc on oo pd pe bf b bg z du">Fig. 13: Relationship 1 K8s-Cluster: N-PG-Cluster</figcaption></figure><p id="bc0b" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">Instead of responding to the cluster’s labels, you could use a ConfigMap, for example, that indicates the need for a PostgreSQL cluster. Based on this, Sveltos can then create multiple PostgreSQL clusters per namespace/ConfigMap. This would be too much for this blog, but you can find instructions on <a class="af om" href="https://projectsveltos.github.io/sveltos/events/db-as-a-service-multiple-db-per-cluster/" rel="noopener ugc nofollow" target="_blank">how to do it <strong class="ns gw">HERE</strong>:</a></p><p id="a012" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">Furthermore, if you want to address security concerns and don’t want the credentials for all managed services to reside in the management cluster, you can implement the following:</p><figure class="oq or os ot ou ov on oo paragraph-image"><div role="button" tabindex="0" class="ow ox fj oy bh oz"><div class="on oo sb"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*xevorSDulQknBOilv4wtFw.gif 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*xevorSDulQknBOilv4wtFw.gif 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*xevorSDulQknBOilv4wtFw.gif 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*xevorSDulQknBOilv4wtFw.gif 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*xevorSDulQknBOilv4wtFw.gif 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*xevorSDulQknBOilv4wtFw.gif 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xevorSDulQknBOilv4wtFw.gif 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*xevorSDulQknBOilv4wtFw.gif 640w, https://miro.medium.com/v2/resize:fit:720/1*xevorSDulQknBOilv4wtFw.gif 720w, https://miro.medium.com/v2/resize:fit:750/1*xevorSDulQknBOilv4wtFw.gif 750w, https://miro.medium.com/v2/resize:fit:786/1*xevorSDulQknBOilv4wtFw.gif 786w, https://miro.medium.com/v2/resize:fit:828/1*xevorSDulQknBOilv4wtFw.gif 828w, https://miro.medium.com/v2/resize:fit:1100/1*xevorSDulQknBOilv4wtFw.gif 1100w, https://miro.medium.com/v2/resize:fit:1400/1*xevorSDulQknBOilv4wtFw.gif 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh mt pa c" width="700" height="566" loading="lazy" role="presentation"/></picture></div></div><figcaption class="pb ff pc on oo pd pe bf b bg z du">Fig. 14: Relationship 1 K8s-Cluster: N PG-Cluster and increased Security</figcaption></figure><p id="b9be" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">Here, the credentials are stored in the respective workload cluster.<br/>Hopefully, you can see that the possibilities are enormous, and your imagination might be the only limiting factor here.</p><p id="122a" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk">If you’re building exciting solutions, feel free to share them in the form of a blog, tutorial, etc. But even more important, if you believe in open-source and live by this philosophy, <a class="af om" href="https://github.com/projectsveltos/addon-controller" rel="noopener ugc nofollow" target="_blank">please leave a ⭐️</a>! Even cooler would be contributing through a blog or, if you’re skilled enough, directly to the <a class="af om" href="https://github.com/projectsveltos" rel="noopener ugc nofollow" target="_blank">Projectsveltos</a> itself.</p><p id="1fa0" class="pw-post-body-paragraph np nq gv ns b ht nt nu nv hw nw nx ny nz oa ob oc od oe of og oh oi oj ok ol go bk"><strong class="ns gw">P.S.</strong> Please leave a Comment which Path you choose — are you the “I need to know every detail” type, or the “just hit deploy and pray” type? 😬</p><h1 id="e877" class="pf pg gv bf ph pi pj hv pk pl pm hy pn po pp pq pr ps pt pu pv pw px py pz qa bk">Contact Information</h1><p id="4107" class="pw-post-body-paragraph np nq gv ns b ht qb nu nv hw qc nx ny nz qd ob oc od qe of og oh qf oj ok ol go bk">Got questions, want to chat, or just keen to stay connected? Skip the Medium comments and let’s connect on <a class="af om" href="http://www.linkedin.com/in/lajko" rel="noopener ugc nofollow" target="_blank">LinkedIn</a> 🤙. Don’t forget to subscribe to the <a class="af om" href="/@artem_lajko/subscribe" rel="noopener ugc nofollow" target="_blank">Medium Newsletter</a> so you never miss an update!</p></div></div></div></div></section></div></div></article></div><div class="ab cb"><div class="ci bh ga gb gc gd"><div class="sc sd ab jq"><div class="se ab"><a class="sf ay am ao" href="https://medium.com/tag/kubernetes?source=post_page-----cbe3de4920d5--------------------------------" rel="noopener follow"><div class="sg fj cx sh gf si sj bf b bg z bk sk">Kubernetes</div></a></div><div class="se ab"><a class="sf ay am ao" href="https://medium.com/tag/cloud?source=post_page-----cbe3de4920d5--------------------------------" rel="noopener follow"><div class="sg fj cx sh gf si sj bf b bg z bk sk">Cloud</div></a></div><div class="se ab"><a class="sf ay am ao" href="https://medium.com/tag/cloud-computing?source=post_page-----cbe3de4920d5--------------------------------" rel="noopener follow"><div class="sg fj cx sh gf si sj bf b bg z bk sk">Cloud Computing</div></a></div><div class="se ab"><a class="sf ay am ao" href="https://medium.com/tag/gitops?source=post_page-----cbe3de4920d5--------------------------------" rel="noopener follow"><div class="sg fj cx sh gf si sj bf b bg z bk sk">Gitops</div></a></div><div class="se ab"><a class="sf ay am ao" href="https://medium.com/tag/devops?source=post_page-----cbe3de4920d5--------------------------------" rel="noopener follow"><div class="sg fj cx sh gf si sj bf b bg z bk sk">DevOps</div></a></div></div></div></div><div class="l"></div><footer class="sl sm sn so sp ab q sq ix c"><div class="l ae"><div class="ab cb"><div class="ci bh ga gb gc gd"><div class="ab cp sr"><div class="ab q ll"><div class="ss l"><span class="l st su sv e d"><div class="ab q ll lm"><div class="pw-multi-vote-icon fj ju ln lo lp"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerClapButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fitnext%2Fcbe3de4920d5&amp;operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fbuilding-your-own-event-driven-internal-developer-platform-with-gitops-and-sveltos-cbe3de4920d5&amp;user=Artem+Lajko&amp;userId=2099f3d62707&amp;source=---footer_actions--cbe3de4920d5---------------------clap_footer-----------" rel="noopener follow"><div><div class="bm" aria-hidden="false"><div class="lq ao lr ls lt lu am lv lw lx lp"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM13.916 3.953l1.523-2.112-1.184-.39zM8.589 1.84l1.522 2.112-.337-2.501zM18.523 18.92c-.86.86-1.75 1.246-2.62 1.33a6 6 0 0 0 .407-.372c2.388-2.389 2.86-4.951 1.399-7.623l-.912-1.603-.79-1.672c-.26-.56-.194-.98.203-1.288a.7.7 0 0 1 .546-.132c.283.046.546.231.728.5l2.363 4.157c.976 1.624 1.141 4.237-1.324 6.702m-10.999-.438L3.37 14.328a.828.828 0 0 1 .585-1.408.83.83 0 0 1 .585.242l2.158 2.157a.365.365 0 0 0 .516-.516l-2.157-2.158-1.449-1.449a.826.826 0 0 1 1.167-1.17l3.438 3.44a.363.363 0 0 0 .516 0 .364.364 0 0 0 0-.516L5.293 9.513l-.97-.97a.826.826 0 0 1 0-1.166.84.84 0 0 1 1.167 0l.97.968 3.437 3.436a.36.36 0 0 0 .517 0 .366.366 0 0 0 0-.516L6.977 7.83a.82.82 0 0 1-.241-.584.82.82 0 0 1 .824-.826c.219 0 .43.087.584.242l5.787 5.787a.366.366 0 0 0 .587-.415l-1.117-2.363c-.26-.56-.194-.98.204-1.289a.7.7 0 0 1 .546-.132c.283.046.545.232.727.501l2.193 3.86c1.302 2.38.883 4.59-1.277 6.75-1.156 1.156-2.602 1.627-4.19 1.367-1.418-.236-2.866-1.033-4.079-2.246M10.75 5.971l2.12 2.12c-.41.502-.465 1.17-.128 1.89l.22.465-3.523-3.523a.8.8 0 0 1-.097-.368c0-.22.086-.428.241-.584a.847.847 0 0 1 1.167 0m7.355 1.705c-.31-.461-.746-.758-1.23-.837a1.44 1.44 0 0 0-1.11.275c-.312.24-.505.543-.59.881a1.74 1.74 0 0 0-.906-.465 1.47 1.47 0 0 0-.82.106l-2.182-2.182a1.56 1.56 0 0 0-2.2 0 1.54 1.54 0 0 0-.396.701 1.56 1.56 0 0 0-2.21-.01 1.55 1.55 0 0 0-.416.753c-.624-.624-1.649-.624-2.237-.037a1.557 1.557 0 0 0 0 2.2c-.239.1-.501.238-.715.453a1.56 1.56 0 0 0 0 2.2l.516.515a1.556 1.556 0 0 0-.753 2.615L7.01 19c1.32 1.319 2.909 2.189 4.475 2.449q.482.08.971.08c.85 0 1.653-.198 2.393-.579.231.033.46.054.686.054 1.266 0 2.457-.52 3.505-1.567 2.763-2.763 2.552-5.734 1.439-7.586z" clip-rule="evenodd"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l ly lz ma mb mc md me"><p class="bf b dv z du"><span class="mf">--</span></p></div></div></span><span class="l h g f sw sx"><div class="ab q ll lm"><div class="pw-multi-vote-icon fj ju ln lo lp"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerClapButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fitnext%2Fcbe3de4920d5&amp;operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fbuilding-your-own-event-driven-internal-developer-platform-with-gitops-and-sveltos-cbe3de4920d5&amp;user=Artem+Lajko&amp;userId=2099f3d62707&amp;source=---footer_actions--cbe3de4920d5---------------------clap_footer-----------" rel="noopener follow"><div><div class="bm" aria-hidden="false"><div class="lq ao lr ls lt lu am lv lw lx lp"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM13.916 3.953l1.523-2.112-1.184-.39zM8.589 1.84l1.522 2.112-.337-2.501zM18.523 18.92c-.86.86-1.75 1.246-2.62 1.33a6 6 0 0 0 .407-.372c2.388-2.389 2.86-4.951 1.399-7.623l-.912-1.603-.79-1.672c-.26-.56-.194-.98.203-1.288a.7.7 0 0 1 .546-.132c.283.046.546.231.728.5l2.363 4.157c.976 1.624 1.141 4.237-1.324 6.702m-10.999-.438L3.37 14.328a.828.828 0 0 1 .585-1.408.83.83 0 0 1 .585.242l2.158 2.157a.365.365 0 0 0 .516-.516l-2.157-2.158-1.449-1.449a.826.826 0 0 1 1.167-1.17l3.438 3.44a.363.363 0 0 0 .516 0 .364.364 0 0 0 0-.516L5.293 9.513l-.97-.97a.826.826 0 0 1 0-1.166.84.84 0 0 1 1.167 0l.97.968 3.437 3.436a.36.36 0 0 0 .517 0 .366.366 0 0 0 0-.516L6.977 7.83a.82.82 0 0 1-.241-.584.82.82 0 0 1 .824-.826c.219 0 .43.087.584.242l5.787 5.787a.366.366 0 0 0 .587-.415l-1.117-2.363c-.26-.56-.194-.98.204-1.289a.7.7 0 0 1 .546-.132c.283.046.545.232.727.501l2.193 3.86c1.302 2.38.883 4.59-1.277 6.75-1.156 1.156-2.602 1.627-4.19 1.367-1.418-.236-2.866-1.033-4.079-2.246M10.75 5.971l2.12 2.12c-.41.502-.465 1.17-.128 1.89l.22.465-3.523-3.523a.8.8 0 0 1-.097-.368c0-.22.086-.428.241-.584a.847.847 0 0 1 1.167 0m7.355 1.705c-.31-.461-.746-.758-1.23-.837a1.44 1.44 0 0 0-1.11.275c-.312.24-.505.543-.59.881a1.74 1.74 0 0 0-.906-.465 1.47 1.47 0 0 0-.82.106l-2.182-2.182a1.56 1.56 0 0 0-2.2 0 1.54 1.54 0 0 0-.396.701 1.56 1.56 0 0 0-2.21-.01 1.55 1.55 0 0 0-.416.753c-.624-.624-1.649-.624-2.237-.037a1.557 1.557 0 0 0 0 2.2c-.239.1-.501.238-.715.453a1.56 1.56 0 0 0 0 2.2l.516.515a1.556 1.556 0 0 0-.753 2.615L7.01 19c1.32 1.319 2.909 2.189 4.475 2.449q.482.08.971.08c.85 0 1.653-.198 2.393-.579.231.033.46.054.686.054 1.266 0 2.457-.52 3.505-1.567 2.763-2.763 2.552-5.734 1.439-7.586z" clip-rule="evenodd"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l ly lz ma mb mc md me"><p class="bf b dv z du"><span class="mf">--</span></p></div></div></span></div><div class="bq ab"><div><div class="bm" aria-hidden="false"><button class="ao lq mg mh ab q fk mi mj" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="mk"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"></path></svg></button></div></div></div></div><div class="ab q"><div class="sy l jn"><div><div class="bm" aria-hidden="false"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerBookmarkButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fcbe3de4920d5&amp;operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fbuilding-your-own-event-driven-internal-developer-platform-with-gitops-and-sveltos-cbe3de4920d5&amp;source=---footer_actions--cbe3de4920d5---------------------bookmark_footer-----------" rel="noopener follow"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none" viewBox="0 0 25 25" class="du mm" aria-label="Add to list bookmark button"><path fill="currentColor" d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .805.396L12.5 17l5.695 4.396A.5.5 0 0 0 19 21v-8.5a.5.5 0 0 0-1 0v7.485l-5.195-4.012a.5.5 0 0 0-.61 0L7 19.985z"></path></svg></a></span></div></div></div><div class="sy l jn"><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="footerSocialShareButton" class="af fk ah ai aj ak al mu an ao ap ex mv mw mj mx"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"></path></svg></button></div></div></div></div></div></div></div></div></div></footer><div class="sz ta tb tc td l"><div class="ab cb"><div class="ci bh ga gb gc gd"><div class="te bh r tf"></div><div class="tg l"><div class="ab th ti tj jp jo"><div class="tk tl tm tn to tp tq tr ts tt ab cp"><div class="h k"><a href="https://itnext.io/?source=post_page---post_publication_info--cbe3de4920d5--------------------------------" rel="noopener follow"><div class="fj ab"><img alt="ITNEXT" class="tu io ip cx" src="https://miro.medium.com/v2/resize:fill:96:96/1*yAqDFIFA5F_NXalOJKz4TA.png" width="48" height="48" loading="lazy"/><div class="tu l ip io fs n fr tv"></div></div></a></div><div class="j i d"><a href="https://itnext.io/?source=post_page---post_publication_info--cbe3de4920d5--------------------------------" rel="noopener follow"><div class="fj ab"><img alt="ITNEXT" class="tu tx tw cx" src="https://miro.medium.com/v2/resize:fill:128:128/1*yAqDFIFA5F_NXalOJKz4TA.png" width="64" height="64" loading="lazy"/><div class="tu l tw tx fs n fr tv"></div></div></a></div><div class="j i d ty jn"><div class="ab"><span><a class="bf b bg z tz sg ua ub uc ud ue ev ew uf ug uh fa fb fc fd bm fe ff" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Fitnext&amp;operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fbuilding-your-own-event-driven-internal-developer-platform-with-gitops-and-sveltos-cbe3de4920d5&amp;collection=ITNEXT&amp;collectionId=5b301f10ddcd&amp;source=post_page---post_publication_info--cbe3de4920d5---------------------follow_profile-----------" rel="noopener follow">Follow</a></span></div></div></div><div class="ab co ui"><div class="uj uk ul um un l"><a class="af ag ah aj ak al am an ao ap aq ar as at ab q" href="https://itnext.io/?source=post_page---post_publication_info--cbe3de4920d5--------------------------------" rel="noopener follow"><h2 class="pw-author-name bf up uq ur us ut uu uv nz qz ra od rc rd oh rf rg bk"><span class="go uo">Published in <!-- -->ITNEXT</span></h2></a><div class="se ab in"><div class="l jn"><span class="pw-follower-count bf b bg z du"><a class="af ag ah ai aj ak al am an ao ap aq ar jd" rel="noopener follow" href="/followers?source=post_page---post_publication_info--cbe3de4920d5--------------------------------">65K Followers</a></span></div><div class="bf b bg z du ab jt"><span class="jh l" aria-hidden="true"><span class="bf b bg z du">·</span></span><a class="af ag ah ai aj ak al am an ao ap aq ar jd" rel="noopener follow" href="/how-to-improve-storybook-performance-in-large-projects-4048f20e4d33?source=post_page---post_publication_info--cbe3de4920d5--------------------------------">Last published <!-- -->9 hours ago</a></div></div><div class="uw l"><p class="bf b bg z bk"><span class="go">ITNEXT is a platform for IT developers &amp; software engineers to share knowledge, connect, collaborate, learn and experience next-gen technologies.</span></p></div></div></div><div class="h k"><div class="ab"><span><a class="bf b bg z tz sg ua ub uc ud ue ev ew uf ug uh fa fb fc fd bm fe ff" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Fitnext&amp;operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fbuilding-your-own-event-driven-internal-developer-platform-with-gitops-and-sveltos-cbe3de4920d5&amp;collection=ITNEXT&amp;collectionId=5b301f10ddcd&amp;source=post_page---post_publication_info--cbe3de4920d5---------------------follow_profile-----------" rel="noopener follow">Follow</a></span></div></div></div></div><div class="ab th ti tj jp jo"><div class="tk tl tm tn to tp tq tr ts tt ab cp"><div class="h k"><a tabindex="0" href="https://medium.com/@artem_lajko?source=post_page---post_author_info--cbe3de4920d5--------------------------------" rel="noopener follow"><div class="l fj"><img alt="Artem Lajko" class="l fd by ip io cx" src="https://miro.medium.com/v2/resize:fill:96:96/1*RaBgnDPDAQFUu4irAkXieQ.jpeg" width="48" height="48" loading="lazy"/><div class="fr by l ip io fs n ay tv"></div></div></a></div><div class="j i d"><a tabindex="0" href="https://medium.com/@artem_lajko?source=post_page---post_author_info--cbe3de4920d5--------------------------------" rel="noopener follow"><div class="l fj"><img alt="Artem Lajko" class="l fd by tw tx cx" src="https://miro.medium.com/v2/resize:fill:128:128/1*RaBgnDPDAQFUu4irAkXieQ.jpeg" width="64" height="64" loading="lazy"/><div class="fr by l tw tx fs n ay tv"></div></div></a></div><div class="j i d ty jn"><div class="ab"><span><a class="bf b bg z tz sg ua ub uc ud ue ev ew uf ug uh fa fb fc fd bm fe ff" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F2099f3d62707&amp;operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fbuilding-your-own-event-driven-internal-developer-platform-with-gitops-and-sveltos-cbe3de4920d5&amp;user=Artem+Lajko&amp;userId=2099f3d62707&amp;source=post_page-2099f3d62707--post_author_info--cbe3de4920d5---------------------follow_profile-----------" rel="noopener follow">Follow</a></span></div></div></div><div class="ab co ui"><div class="uj uk ul um un l"><a class="af ag ah aj ak al am an ao ap aq ar as at ab q" href="https://medium.com/@artem_lajko?source=post_page---post_author_info--cbe3de4920d5--------------------------------" rel="noopener follow"><h2 class="pw-author-name bf up uq ur us ut uu uv nz qz ra od rc rd oh rf rg bk"><span class="go uo">Written by <!-- -->Artem Lajko</span></h2><div class="ux ab"><div><div class="ab" aria-hidden="false"><div class="ab jg"><div class="ab"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 16 16"><path fill="#437AFF" d="M15.163 8c0 .65-.459 1.144-.863 1.575-.232.244-.471.5-.563.719s-.086.543-.092.875c-.006.606-.018 1.3-.49 1.781-.47.481-1.15.494-1.744.5-.324.006-.655.013-.857.094s-.465.337-.704.575c-.422.412-.906.881-1.542.881-.637 0-1.12-.469-1.543-.881-.239-.238-.49-.482-.704-.575-.214-.094-.532-.088-.857-.094-.593-.006-1.273-.019-1.744-.5s-.484-1.175-.49-1.781c-.006-.332-.012-.669-.092-.875-.08-.207-.33-.475-.563-.719-.404-.431-.863-.925-.863-1.575s.46-1.144.863-1.575c.233-.244.472-.5.563-.719.092-.219.086-.544.092-.875.006-.606.019-1.3.49-1.781s1.15-.494 1.744-.5c.325-.006.655-.012.857-.094.202-.081.465-.337.704-.575C7.188 1.47 7.671 1 8.308 1s1.12.469 1.542.881c.239.238.49.481.704.575s.533.088.857.094c.594.006 1.273.019 1.745.5.47.481.483 1.175.49 1.781.005.331.011.669.091.875s.33.475.563.719c.404.431.863.925.863 1.575"></path><path fill="#fff" d="M7.328 10.5c.195 0 .381.08.519.22.137.141.215.331.216.53 0 .066.026.13.072.177a.24.24 0 0 0 .346 0 .25.25 0 0 0 .071-.177c.001-.199.079-.389.216-.53a.73.73 0 0 1 .519-.22h1.959c.13 0 .254-.053.346-.146a.5.5 0 0 0 .143-.354V6a.5.5 0 0 0-.143-.354.49.49 0 0 0-.346-.146h-1.47c-.324 0-.635.132-.865.366-.23.235-.359.552-.359.884v2.5c0 .066-.025.13-.071.177a.24.24 0 0 1-.346 0 .25.25 0 0 1-.072-.177v-2.5c0-.332-.13-.65-.359-.884A1.21 1.21 0 0 0 6.84 5.5h-1.47a.49.49 0 0 0-.346.146A.5.5 0 0 0 4.88 6v4c0 .133.051.26.143.354a.49.49 0 0 0 .347.146z"></path></svg></div></div></div></div></div></a><div class="se ab in"><div class="l jn"><span class="pw-follower-count bf b bg z du"><a class="af ag ah ai aj ak al am an ao ap aq ar jd" href="https://medium.com/@artem_lajko/followers?source=post_page---post_author_info--cbe3de4920d5--------------------------------" rel="noopener follow">2.4K Followers</a></span></div><div class="bf b bg z du ab jt"><span class="jh l" aria-hidden="true"><span class="bf b bg z du">·</span></span><a class="af ag ah ai aj ak al am an ao ap aq ar jd" href="https://medium.com/@artem_lajko/following?source=post_page---post_author_info--cbe3de4920d5--------------------------------" rel="noopener follow">143 Following</a></div></div><div class="uw l"><p class="bf b bg z bk">Do something with cloud, kubernetes, gitops and all the fancy stuff <a class="af ag ah ai aj ak al am an ao ap aq ar om gp" href="https://www.linkedin.com/in/lajko" rel="noopener  ugc nofollow">https://www.linkedin.com/in/lajko</a></p></div></div></div><div class="h k"><div class="ab"><span><a class="bf b bg z tz sg ua ub uc ud ue ev ew uf ug uh fa fb fc fd bm fe ff" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F2099f3d62707&amp;operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fbuilding-your-own-event-driven-internal-developer-platform-with-gitops-and-sveltos-cbe3de4920d5&amp;user=Artem+Lajko&amp;userId=2099f3d62707&amp;source=post_page-2099f3d62707--post_author_info--cbe3de4920d5---------------------follow_profile-----------" rel="noopener follow">Follow</a></span></div></div></div></div></div></div><div class="uy l"><div class="te bh r uz va vb vc vd"></div><div class="ab cb"><div class="ci bh ga gb gc gd"><div class="ab q cp"><h2 class="bf up pi hv pk pl hy pn po pq pr ps pu pv pw py pz bk">No responses yet</h2><div class="ab ve"><div><div class="bm" aria-hidden="false"><a class="vf vg" href="https://policy.medium.com/medium-rules-30e5502c4eb4?source=post_page---post_responses--cbe3de4920d5--------------------------------" rel="noopener follow" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 25 25"><path fill-rule="evenodd" d="M11.987 5.036a.754.754 0 0 1 .914-.01c.972.721 1.767 1.218 2.6 1.543.828.322 1.719.485 2.887.505a.755.755 0 0 1 .741.757c-.018 3.623-.43 6.256-1.449 8.21-1.034 1.984-2.662 3.209-4.966 4.083a.75.75 0 0 1-.537-.003c-2.243-.874-3.858-2.095-4.897-4.074-1.024-1.951-1.457-4.583-1.476-8.216a.755.755 0 0 1 .741-.757c1.195-.02 2.1-.182 2.923-.503.827-.322 1.6-.815 2.519-1.535m.468.903c-.897.69-1.717 1.21-2.623 1.564-.898.35-1.856.527-3.026.565.037 3.45.469 5.817 1.36 7.515.884 1.684 2.25 2.762 4.284 3.571 2.092-.81 3.465-1.89 4.344-3.575.886-1.698 1.299-4.065 1.334-7.512-1.149-.039-2.091-.217-2.99-.567-.906-.353-1.745-.873-2.683-1.561m-.009 9.155a2.672 2.672 0 1 0 0-5.344 2.672 2.672 0 0 0 0 5.344m0 1a3.672 3.672 0 1 0 0-7.344 3.672 3.672 0 0 0 0 7.344m-1.813-3.777.525-.526.916.917 1.623-1.625.526.526-2.149 2.152z" clip-rule="evenodd"></path></svg></a></div></div></div></div><div class="vh vi vj vk vl l"></div></div></div></div><div class="vm vn vo vp vq l bx"><div class="h k j"><div class="te bh vr vs"></div><div class="ab cb"><div class="ci bh ga gb gc gd"><div class="vt ab ll jq"><div class="vu vv l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://help.medium.com/hc/en-us?source=post_page-----cbe3de4920d5--------------------------------" rel="noopener follow"><p class="bf b dv z du">Help</p></a></div><div class="vu vv l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.statuspage.io/?source=post_page-----cbe3de4920d5--------------------------------" rel="noopener follow"><p class="bf b dv z du">Status</p></a></div><div class="vu vv l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/about?autoplay=1&amp;source=post_page-----cbe3de4920d5--------------------------------" rel="noopener follow"><p class="bf b dv z du">About</p></a></div><div class="vu vv l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=post_page-----cbe3de4920d5--------------------------------" rel="noopener follow"><p class="bf b dv z du">Careers</p></a></div><div class="vu vv l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="pressinquiries@medium.com?source=post_page-----cbe3de4920d5--------------------------------" rel="noopener follow"><p class="bf b dv z du">Press</p></a></div><div class="vu vv l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://blog.medium.com/?source=post_page-----cbe3de4920d5--------------------------------" rel="noopener follow"><p class="bf b dv z du">Blog</p></a></div><div class="vu vv l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----cbe3de4920d5--------------------------------" rel="noopener follow"><p class="bf b dv z du">Privacy</p></a></div><div class="vu vv l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----cbe3de4920d5--------------------------------" rel="noopener follow"><p class="bf b dv z du">Terms</p></a></div><div class="vu vv l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://speechify.com/medium?source=post_page-----cbe3de4920d5--------------------------------" rel="noopener follow"><p class="bf b dv z du">Text to speech</p></a></div><div class="vu l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/business?source=post_page-----cbe3de4920d5--------------------------------" rel="noopener follow"><p class="bf b dv z du">Teams</p></a></div></div></div></div></div></div></div></div></div></div><script>window.__BUILD_ID__="main-20241212-205827-84030d187b"</script><script>window.__GRAPHQL_URI__ = "https://itnext.io/_/graphql"</script><script>window.__PRELOADED_STATE__ = {"algolia":{"queries":{}},"cache":{"experimentGroupSet":true,"reason":"This request is not using the cache middleware worker","group":"disabled","tags":["group-edgeCachePosts","post-cbe3de4920d5","user-2099f3d62707","collection-5b301f10ddcd"],"serverVariantState":"","middlewareEnabled":false,"cacheStatus":"DYNAMIC","shouldUseCache":false,"vary":[],"lohpSummerUpsellEnabled":false},"client":{"hydrated":false,"isUs":false,"isNativeMedium":false,"isSafariMobile":false,"isSafari":false,"isFirefox":false,"routingEntity":{"type":"COLLECTION","id":"5b301f10ddcd","explicit":true},"viewerIsBot":false},"debug":{"requestId":"17dc2dab-af10-4af8-8557-a6acfa9088dc","hybridDevServices":[],"originalSpanCarrier":{"traceparent":"00-6ac349afba03565f12825c84a1c66dad-47d610865d2b6600-01"}},"multiVote":{"clapsPerPost":{}},"navigation":{"branch":{"show":null,"hasRendered":null,"blockedByCTA":false},"hideGoogleOneTap":false,"hasRenderedAlternateUserBanner":null,"currentLocation":"https:\u002F\u002Fitnext.io\u002Fbuilding-your-own-event-driven-internal-developer-platform-with-gitops-and-sveltos-cbe3de4920d5","host":"itnext.io","hostname":"itnext.io","referrer":"https:\u002F\u002Fwww.google.com","hasSetReferrer":false,"susiModal":{"step":null,"operation":"register"},"postRead":false,"partnerProgram":{"selectedCountryCode":null}},"config":{"nodeEnv":"production","version":"main-20241212-205827-84030d187b","target":"production","productName":"Medium","publicUrl":"https:\u002F\u002Fcdn-client.medium.com\u002Flite","authDomain":"medium.com","authGoogleClientId":"216296035834-k1k6qe060s2tp2a2jam4ljdcms00sttg.apps.googleusercontent.com","favicon":"production","glyphUrl":"https:\u002F\u002Fglyph.medium.com","branchKey":"key_live_ofxXr2qTrrU9NqURK8ZwEhknBxiI6KBm","algolia":{"appId":"MQ57UUUQZ2","apiKeySearch":"394474ced050e3911ae2249ecc774921","indexPrefix":"medium_","host":"-dsn.algolia.net"},"recaptchaKey":"6Lfc37IUAAAAAKGGtC6rLS13R1Hrw_BqADfS1LRk","recaptcha3Key":"6Lf8R9wUAAAAABMI_85Wb8melS7Zj6ziuf99Yot5","recaptchaEnterpriseKeyId":"6Le-uGgpAAAAAPprRaokM8AKthQ9KNGdoxaGUvVp","datadog":{"applicationId":"6702d87d-a7e0-42fe-bbcb-95b469547ea0","clientToken":"pub853ea8d17ad6821d9f8f11861d23dfed","rumToken":"pubf9cc52896502b9413b68ba36fc0c7162","context":{"deployment":{"target":"production","tag":"main-20241212-205827-84030d187b","commit":"84030d187ba78af9593727ff3f13c9aea910f3cd"}},"datacenter":"us"},"googleAnalyticsCode":"G-7JY7T788PK","googlePay":{"apiVersion":"2","apiVersionMinor":"0","merchantId":"BCR2DN6TV7EMTGBM","merchantName":"Medium","instanceMerchantId":"13685562959212738550"},"applePay":{"version":3},"signInWallCustomDomainCollectionIds":["3a8144eabfe3","336d898217ee","61061eb0c96b","138adf9c44c","819cc2aaeee0"],"mediumMastodonDomainName":"me.dm","mediumOwnedAndOperatedCollectionIds":["8a9336e5bb4","b7e45b22fec3","193b68bd4fba","8d6b8a439e32","54c98c43354d","3f6ecf56618","d944778ce714","92d2092dc598","ae2a65f35510","1285ba81cada","544c7006046e","fc8964313712","40187e704f1c","88d9857e584e","7b6769f2748b","bcc38c8f6edf","cef6983b292","cb8577c9149e","444d13b52878","713d7dbc99b0","ef8e90590e66","191186aaafa0","55760f21cdc5","9dc80918cc93","bdc4052bbdba","8ccfed20cbb2"],"tierOneDomains":["medium.com","thebolditalic.com","arcdigital.media","towardsdatascience.com","uxdesign.cc","codeburst.io","psiloveyou.xyz","writingcooperative.com","entrepreneurshandbook.co","prototypr.io","betterhumans.coach.me","theascent.pub"],"topicsToFollow":["d61cf867d93f","8a146bc21b28","1eca0103fff3","4d562ee63426","aef1078a3ef5","e15e46793f8d","6158eb913466","55f1c20aba7a","3d18b94f6858","4861fee224fd","63c6f1f93ee","1d98b3a9a871","decb52b64abf","ae5d4995e225","830cded25262"],"topicToTagMappings":{"accessibility":"accessibility","addiction":"addiction","android-development":"android-development","art":"art","artificial-intelligence":"artificial-intelligence","astrology":"astrology","basic-income":"basic-income","beauty":"beauty","biotech":"biotech","blockchain":"blockchain","books":"books","business":"business","cannabis":"cannabis","cities":"cities","climate-change":"climate-change","comics":"comics","coronavirus":"coronavirus","creativity":"creativity","cryptocurrency":"cryptocurrency","culture":"culture","cybersecurity":"cybersecurity","data-science":"data-science","design":"design","digital-life":"digital-life","disability":"disability","economy":"economy","education":"education","equality":"equality","family":"family","feminism":"feminism","fiction":"fiction","film":"film","fitness":"fitness","food":"food","freelancing":"freelancing","future":"future","gadgets":"gadgets","gaming":"gaming","gun-control":"gun-control","health":"health","history":"history","humor":"humor","immigration":"immigration","ios-development":"ios-development","javascript":"javascript","justice":"justice","language":"language","leadership":"leadership","lgbtqia":"lgbtqia","lifestyle":"lifestyle","machine-learning":"machine-learning","makers":"makers","marketing":"marketing","math":"math","media":"media","mental-health":"mental-health","mindfulness":"mindfulness","money":"money","music":"music","neuroscience":"neuroscience","nonfiction":"nonfiction","outdoors":"outdoors","parenting":"parenting","pets":"pets","philosophy":"philosophy","photography":"photography","podcasts":"podcast","poetry":"poetry","politics":"politics","privacy":"privacy","product-management":"product-management","productivity":"productivity","programming":"programming","psychedelics":"psychedelics","psychology":"psychology","race":"race","relationships":"relationships","religion":"religion","remote-work":"remote-work","san-francisco":"san-francisco","science":"science","self":"self","self-driving-cars":"self-driving-cars","sexuality":"sexuality","social-media":"social-media","society":"society","software-engineering":"software-engineering","space":"space","spirituality":"spirituality","sports":"sports","startups":"startup","style":"style","technology":"technology","transportation":"transportation","travel":"travel","true-crime":"true-crime","tv":"tv","ux":"ux","venture-capital":"venture-capital","visual-design":"visual-design","work":"work","world":"world","writing":"writing"},"defaultImages":{"avatar":{"imageId":"1*dmbNkD5D-u45r44go_cf0g.png","height":150,"width":150},"orgLogo":{"imageId":"7*V1_7XP4snlmqrc_0Njontw.png","height":110,"width":500},"postLogo":{"imageId":"bd978bb536350a710e8efb012513429cabdc4c28700604261aeda246d0f980b7","height":810,"width":1440},"postPreviewImage":{"imageId":"1*hn4v1tCaJy7cWMyb0bpNpQ.png","height":386,"width":579}},"collectionStructuredData":{"8d6b8a439e32":{"name":"Elemental","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F980\u002F1*9ygdqoKprhwuTVKUM0DLPA@2x.png","width":980,"height":159}}},"3f6ecf56618":{"name":"Forge","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F596\u002F1*uULpIlImcO5TDuBZ6lm7Lg@2x.png","width":596,"height":183}}},"ae2a65f35510":{"name":"GEN","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F264\u002F1*RdVZMdvfV3YiZTw6mX7yWA.png","width":264,"height":140}}},"88d9857e584e":{"name":"LEVEL","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*JqYMhNX6KNNb2UlqGqO2WQ.png","width":540,"height":108}}},"7b6769f2748b":{"name":"Marker","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F383\u002F1*haCUs0wF6TgOOvfoY-jEoQ@2x.png","width":383,"height":92}}},"444d13b52878":{"name":"OneZero","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*cw32fIqCbRWzwJaoQw6BUg.png","width":540,"height":123}}},"8ccfed20cbb2":{"name":"Zora","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*tZUQqRcCCZDXjjiZ4bDvgQ.png","width":540,"height":106}}}},"embeddedPostIds":{"coronavirus":"cd3010f9d81f"},"sharedCdcMessaging":{"COVID_APPLICABLE_TAG_SLUGS":[],"COVID_APPLICABLE_TOPIC_NAMES":[],"COVID_APPLICABLE_TOPIC_NAMES_FOR_TOPIC_PAGE":[],"COVID_MESSAGES":{"tierA":{"text":"For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":66,"end":73,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"tierB":{"text":"Anyone can publish on Medium per our Policies, but we don’t fact-check every story. For more info about the coronavirus, see cdc.gov.","markups":[{"start":37,"end":45,"href":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Fcategories\u002F201931128-Policies-Safety"},{"start":125,"end":132,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"paywall":{"text":"This article has been made free for everyone, thanks to Medium Members. For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":56,"end":70,"href":"https:\u002F\u002Fmedium.com\u002Fmembership"},{"start":138,"end":145,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"unbound":{"text":"This article is free for everyone, thanks to Medium Members. For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":45,"end":59,"href":"https:\u002F\u002Fmedium.com\u002Fmembership"},{"start":127,"end":134,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]}},"COVID_BANNER_POST_ID_OVERRIDE_WHITELIST":["3b31a67bff4a"]},"sharedVoteMessaging":{"TAGS":["politics","election-2020","government","us-politics","election","2020-presidential-race","trump","donald-trump","democrats","republicans","congress","republican-party","democratic-party","biden","joe-biden","maga"],"TOPICS":["politics","election"],"MESSAGE":{"text":"Find out more about the U.S. election results here.","markups":[{"start":46,"end":50,"href":"https:\u002F\u002Fcookpolitical.com\u002F2020-national-popular-vote-tracker"}]},"EXCLUDE_POSTS":["397ef29e3ca5"]},"embedPostRules":[],"recircOptions":{"v1":{"limit":3},"v2":{"limit":8}},"braintreeClientKey":"production_zjkj96jm_m56f8fqpf7ngnrd4","braintree":{"enabled":true,"merchantId":"m56f8fqpf7ngnrd4","merchantAccountId":{"usd":"AMediumCorporation_instant","eur":"amediumcorporation_EUR","cad":"amediumcorporation_CAD"},"publicKey":"ds2nn34bg2z7j5gd","braintreeEnvironment":"production","dashboardUrl":"https:\u002F\u002Fwww.braintreegateway.com\u002Fmerchants","gracePeriodDurationInDays":14,"mediumMembershipPlanId":{"monthly":"ce105f8c57a3","monthlyV2":"e8a5e126-792b-4ee6-8fba-d574c1b02fc5","monthlyWithTrial":"d5ee3dbe3db8","monthlyPremium":"fa741a9b47a2","yearly":"a40ad4a43185","yearlyV2":"3815d7d6-b8ca-4224-9b8c-182f9047866e","yearlyStaff":"d74fb811198a","yearlyWithTrial":"b3bc7350e5c7","yearlyPremium":"e21bd2c12166","monthlyOneYearFree":"e6c0637a-2bad-4171-ab4f-3c268633d83c","monthly25PercentOffFirstYear":"235ecc62-0cdb-49ae-9378-726cd21c504b","monthly20PercentOffFirstYear":"ba518864-9c13-4a99-91ca-411bf0cac756","monthly15PercentOffFirstYear":"594c029b-9f89-43d5-88f8-8173af4e070e","monthly10PercentOffFirstYear":"c6c7bc9a-40f2-4b51-8126-e28511d5bdb0","monthlyForStudents":"629ebe51-da7d-41fd-8293-34cd2f2030a8","yearlyOneYearFree":"78ba7be9-0d9f-4ece-aa3e-b54b826f2bf1","yearly25PercentOffFirstYear":"2dbb010d-bb8f-4eeb-ad5c-a08509f42d34","yearly20PercentOffFirstYear":"47565488-435b-47f8-bf93-40d5fbe0ebc8","yearly15PercentOffFirstYear":"8259809b-0881-47d9-acf7-6c001c7f720f","yearly10PercentOffFirstYear":"9dd694fb-96e1-472c-8d9e-3c868d5c1506","yearlyForStudents":"e29345ef-ab1c-4234-95c5-70e50fe6bc23","monthlyCad":"p52orjkaceei","yearlyCad":"h4q9g2up9ktt"},"braintreeDiscountId":{"oneMonthFree":"MONTHS_FREE_01","threeMonthsFree":"MONTHS_FREE_03","sixMonthsFree":"MONTHS_FREE_06","fiftyPercentOffOneYear":"FIFTY_PERCENT_OFF_ONE_YEAR"},"3DSecureVersion":"2","defaultCurrency":"usd","providerPlanIdCurrency":{"4ycw":"usd","rz3b":"usd","3kqm":"usd","jzw6":"usd","c2q2":"usd","nnsw":"usd","q8qw":"usd","d9y6":"usd","fx7w":"cad","nwf2":"cad"}},"paypalClientId":"AXj1G4fotC2GE8KzWX9mSxCH1wmPE3nJglf4Z2ig_amnhvlMVX87otaq58niAg9iuLktVNF_1WCMnN7v","paypal":{"host":"https:\u002F\u002Fapi.paypal.com:443","clientMode":"production","serverMode":"live","webhookId":"4G466076A0294510S","monthlyPlan":{"planId":"P-9WR0658853113943TMU5FDQA","name":"Medium Membership (Monthly) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"yearlyPlan":{"planId":"P-7N8963881P8875835MU5JOPQ","name":"Medium Membership (Annual) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"oneYearGift":{"name":"Medium Membership (1 Year, Digital Gift Code)","description":"Unlimited access to the best and brightest stories on Medium. Gift codes can be redeemed at medium.com\u002Fredeem.","price":"50.00","currency":"USD","sku":"membership-gift-1-yr"},"oldMonthlyPlan":{"planId":"P-96U02458LM656772MJZUVH2Y","name":"Medium Membership (Monthly)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"oldYearlyPlan":{"planId":"P-59P80963JF186412JJZU3SMI","name":"Medium Membership (Annual)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"monthlyPlanWithTrial":{"planId":"P-66C21969LR178604GJPVKUKY","name":"Medium Membership (Monthly) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"yearlyPlanWithTrial":{"planId":"P-6XW32684EX226940VKCT2MFA","name":"Medium Membership (Annual) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"oldMonthlyPlanNoSetupFee":{"planId":"P-4N046520HR188054PCJC7LJI","name":"Medium Membership (Monthly)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"oldYearlyPlanNoSetupFee":{"planId":"P-7A4913502Y5181304CJEJMXQ","name":"Medium Membership (Annual)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"sdkUrl":"https:\u002F\u002Fwww.paypal.com\u002Fsdk\u002Fjs"},"stripePublishableKey":"pk_live_7FReX44VnNIInZwrIIx6ghjl","log":{"json":true,"level":"info"},"imageUploadMaxSizeMb":25,"staffPicks":{"title":"Staff Picks","catalogId":"c7bc6e1ee00f"}},"session":{"xsrf":""}}</script><script>window.__APOLLO_STATE__ = {"ROOT_QUERY":{"__typename":"Query","viewer":null,"variantFlags":[{"__typename":"VariantFlag","name":"enable_braintree_google_pay","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_ios_dynamic_paywall_programming","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_starspace","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_susi_redesign_android","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"reader_fair_distribution_non_qp","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_enable_editor_new_publishing_flow","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_sharer_create_post_share_key","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_winback_promotion_email","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_enable_friend_links_creation","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"redefined_top_posts","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_tag_recs","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_braintree_webhook","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"limit_user_follows","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"allow_signup","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"price_smoke_test_monthly","valueType":{"__typename":"VariantFlagString","value":""}},{"__typename":"VariantFlag","name":"enable_post_bottom_responses","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_recaptcha_enterprise","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_enable_verified_book_author","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_enable_lists_v2","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_update_explore_wtf","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_abandoned_cart_promotion_email","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_server_upstream_deadlines","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_enable_topic_portals","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"available_monthly_premium_plan","valueType":{"__typename":"VariantFlagString","value":"12a660186432"}},{"__typename":"VariantFlag","name":"enable_apple_sign_in","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_deprecate_legacy_providers_v3","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_explicit_signals_updated_post_previews","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_response_markup","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_moc_load_processor_all_recs_surfaces","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"textshots_userid","valueType":{"__typename":"VariantFlagString","value":""}},{"__typename":"VariantFlag","name":"enable_switch_plan_premium_tier","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_tipping_v0_ios","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"price_smoke_test_yearly","valueType":{"__typename":"VariantFlagString","value":""}},{"__typename":"VariantFlag","name":"enable_author_cards_byline","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_iceland_nux","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_social_share_sheet","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"can_receive_tips_v0","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_seamless_social_sharing","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"limit_post_referrers","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_enable_syntax_highlight","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_conversion_model_v2","valueType":{"__typename":"VariantFlagString","value":"group_2"}},{"__typename":"VariantFlag","name":"onboarding_tags_from_top_views","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"can_send_tips_v0","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_remove_twitter_onboarding_step","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_android_offline_reading","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"skip_fs_cache_user_vals","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"available_annual_plan","valueType":{"__typename":"VariantFlagString","value":"2c754bcc2995"}},{"__typename":"VariantFlag","name":"enable_cache_less_following_feed","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_post_bottom_responses_native","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_premium_tier_badge","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_tipping_v0_android","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_gift_banner","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_intrinsic_automatic_actions","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_rex_reading_history","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_marketing_emails","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_pre_pp_v4","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_post_bottom_responses_input","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_braintree_paypal","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_updated_pub_recs_ui","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_mastodon_for_members","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_speechify_widget","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_update_topic_portals_wtf","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_ranker_v10","valueType":{"__typename":"VariantFlagString","value":"control"}},{"__typename":"VariantFlag","name":"enable_tick_landing_page","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"allow_test_auth","valueType":{"__typename":"VariantFlagString","value":"disallow"}},{"__typename":"VariantFlag","name":"enable_configure_pronouns","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_conversion_ranker_v2","valueType":{"__typename":"VariantFlagString","value":"control"}},{"__typename":"VariantFlag","name":"enable_auto_follow_on_subscribe","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_android_dynamic_aspirational_paywall","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_explicit_signals","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_branch_io","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_mastodon_for_members_username_selection","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_boost_nia_v01","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_entities_to_follow_v2","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_pp_country_expansion","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_enable_friend_links_creation","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"available_monthly_plan","valueType":{"__typename":"VariantFlagString","value":"60e220181034"}},{"__typename":"VariantFlag","name":"disable_partner_program_enrollment","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_app_flirty_thirty","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_footer_app_buttons","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_homepage","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_newsletter_lo_flow_custom_domains","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_android_miro_v2","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_see_pronouns","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"mobile_custom_app_icon","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lo_homepage","valueType":{"__typename":"VariantFlagString","value":"control"}},{"__typename":"VariantFlag","name":"enable_tribute_landing_page","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_continue_this_thread","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_publication_hierarchy_web","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"allow_access","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"browsable_stream_config_bucket","valueType":{"__typename":"VariantFlagString","value":"curated-topics"}},{"__typename":"VariantFlag","name":"enable_apple_webhook","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_bg_post_post","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_sharer_validate_post_share_key","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_verifications_service","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_two_hour_refresh","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_android_verified_author","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_braintree_apple_pay","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_recommended_publishers_query","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"signup_services","valueType":{"__typename":"VariantFlagString","value":"twitter,facebook,google,email,google-fastidv,google-one-tap,apple"}},{"__typename":"VariantFlag","name":"enable_ios_autorefresh","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_display_paywall_after_onboarding","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"available_annual_premium_plan","valueType":{"__typename":"VariantFlagString","value":"4a442ace1476"}},{"__typename":"VariantFlag","name":"enable_google_one_tap","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_recirc_model","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_susi_redesign_ios","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_rex_aggregator_v2","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_speechify_ios","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"num_post_bottom_responses_to_show","valueType":{"__typename":"VariantFlagNumber","value":3}},{"__typename":"VariantFlag","name":"enable_mastodon_avatar_upload","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_moc_load_processor_c","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"rex_generator_max_candidates","valueType":{"__typename":"VariantFlagNumber","value":1000}},{"__typename":"VariantFlag","name":"enable_braintree_trial_membership","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_group_gifting","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_braintree_client","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_iceland_forced_android","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_members_only_audio","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_enable_friend_links_postpage_banners","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_rating_prompt_stories_read_threshold","valueType":{"__typename":"VariantFlagNumber","value":2}},{"__typename":"VariantFlag","name":"enable_android_dynamic_programming_paywall","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_moc_load_processor_first_story","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_diversification_rex","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_pp_v4","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_premium_tier","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"coronavirus_topic_recirc","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_creator_welcome_email","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"reengagement_notification_duration","valueType":{"__typename":"VariantFlagNumber","value":3}},{"__typename":"VariantFlag","name":"ios_enable_lock_responses","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_import","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_google_webhook","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_eventstats_event_processing","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_new_manage_membership_flow","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_sprig","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"signin_services","valueType":{"__typename":"VariantFlagString","value":"twitter,facebook,google,email,google-fastidv,google-one-tap,apple"}},{"__typename":"VariantFlag","name":"enable_trust_service_recaptcha","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_enable_home_post_menu","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_post_publish_permission_check","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_pill_based_home_feed","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_rito_upstream_deadlines","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_legacy_feed_in_iceland","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_maim_the_meter","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_author_cards","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_ios_easy_resubscribe","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_ml_rank_rex_anno","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"glyph_font_set","valueType":{"__typename":"VariantFlagString","value":"m2-unbound-source-serif-pro"}},{"__typename":"VariantFlag","name":"enable_automod","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_ios_dynamic_paywall_aspiriational","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_rex_new_push_notification_endpoint","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_simplified_digest_v2_b","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_enable_friend_links_postpage_banners","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_ios_offline_reading","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_archive_page","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_in_app_free_trial","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_enable_image_sharer","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_aurora_pub_follower_page","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_medium2_kbfd","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_new_stripe_customers","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"goliath_externalsearch_enable_comment_deindexation","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_braintree_integration","valueType":{"__typename":"VariantFlagBoolean","value":true}}],"collectionByDomainOrSlug({\"domainOrSlug\":\"itnext.io\"})":{"__ref":"Collection:5b301f10ddcd"},"postResult({\"id\":\"cbe3de4920d5\"})":{"__ref":"Post:cbe3de4920d5"}},"ImageMetadata:1*SiXeRxgOt0pAYlYhwZIu3g.png":{"__typename":"ImageMetadata","id":"1*SiXeRxgOt0pAYlYhwZIu3g.png"},"Collection:5b301f10ddcd":{"__typename":"Collection","id":"5b301f10ddcd","favicon":{"__ref":"ImageMetadata:1*SiXeRxgOt0pAYlYhwZIu3g.png"},"customStyleSheet":null,"colorPalette":{"__typename":"ColorPalette","highlightSpectrum":{"__typename":"ColorSpectrum","backgroundColor":"#FFFFFFFF","colorPoints":[{"__typename":"ColorPoint","color":"#FFE6F5FF","point":0},{"__typename":"ColorPoint","color":"#FFE2F4FF","point":0.1},{"__typename":"ColorPoint","color":"#FFDDF2FF","point":0.2},{"__typename":"ColorPoint","color":"#FFD8F1FF","point":0.3},{"__typename":"ColorPoint","color":"#FFD3F0FF","point":0.4},{"__typename":"ColorPoint","color":"#FFCDEFFF","point":0.5},{"__typename":"ColorPoint","color":"#FFC8EDFF","point":0.6},{"__typename":"ColorPoint","color":"#FFC3ECFF","point":0.7},{"__typename":"ColorPoint","color":"#FFBDEBFF","point":0.8},{"__typename":"ColorPoint","color":"#FFB7E9FF","point":0.9},{"__typename":"ColorPoint","color":"#FFB1E8FF","point":1}]},"defaultBackgroundSpectrum":{"__typename":"ColorSpectrum","backgroundColor":"#FFFFFFFF","colorPoints":[{"__typename":"ColorPoint","color":"#FF3F8DCE","point":0},{"__typename":"ColorPoint","color":"#FF3F83BD","point":0.1},{"__typename":"ColorPoint","color":"#FF3D79AD","point":0.2},{"__typename":"ColorPoint","color":"#FF3B6E9C","point":0.3},{"__typename":"ColorPoint","color":"#FF38648B","point":0.4},{"__typename":"ColorPoint","color":"#FF34597A","point":0.5},{"__typename":"ColorPoint","color":"#FF2F4E6A","point":0.6},{"__typename":"ColorPoint","color":"#FF2A4259","point":0.7},{"__typename":"ColorPoint","color":"#FF233648","point":0.8},{"__typename":"ColorPoint","color":"#FF1B2937","point":0.9},{"__typename":"ColorPoint","color":"#FF121B25","point":1}]},"tintBackgroundSpectrum":{"__typename":"ColorSpectrum","backgroundColor":"#FF1A71B1","colorPoints":[{"__typename":"ColorPoint","color":"#FF1A71B1","point":0},{"__typename":"ColorPoint","color":"#FF3E82BC","point":0.1},{"__typename":"ColorPoint","color":"#FF5892C7","point":0.2},{"__typename":"ColorPoint","color":"#FF6EA1D1","point":0.3},{"__typename":"ColorPoint","color":"#FF84B0DB","point":0.4},{"__typename":"ColorPoint","color":"#FF98BEE4","point":0.5},{"__typename":"ColorPoint","color":"#FFACCCED","point":0.6},{"__typename":"ColorPoint","color":"#FFBFDAF6","point":0.7},{"__typename":"ColorPoint","color":"#FFD1E7FE","point":0.8},{"__typename":"ColorPoint","color":"#FFE4F4FF","point":0.9},{"__typename":"ColorPoint","color":"#FFF6FFFF","point":1}]}},"domain":"itnext.io","slug":"itnext","googleAnalyticsId":"UA-29035124-5","name":"ITNEXT","subscriberCount":65541,"description":"ITNEXT is a platform for IT developers & software engineers to share knowledge, connect, collaborate, learn and experience next-gen technologies.","avatar":{"__ref":"ImageMetadata:1*yAqDFIFA5F_NXalOJKz4TA.png"},"latestPostsConnection({\"paging\":{\"limit\":1}})":{"__typename":"PostConnection","posts":[{"__ref":"Post:4048f20e4d33"}]},"viewerEdge":{"__ref":"CollectionViewerEdge:collectionId:5b301f10ddcd-viewerId:lo_7ce4e254e84e"},"twitterUsername":"itnext_io","facebookPageId":null,"logo":{"__ref":"ImageMetadata:1*jWhTrIoYwTUdKuVXycqAaw.png"}},"ImageMetadata:1*yAqDFIFA5F_NXalOJKz4TA.png":{"__typename":"ImageMetadata","id":"1*yAqDFIFA5F_NXalOJKz4TA.png"},"User:9ea815b3598d":{"__typename":"User","id":"9ea815b3598d","customDomainState":null,"hasSubdomain":false,"username":"danielostapenko"},"Post:4048f20e4d33":{"__typename":"Post","id":"4048f20e4d33","firstPublishedAt":1734304549716,"creator":{"__ref":"User:9ea815b3598d"},"collection":{"__ref":"Collection:5b301f10ddcd"},"isSeries":false,"mediumUrl":"https:\u002F\u002Fitnext.io\u002Fhow-to-improve-storybook-performance-in-large-projects-4048f20e4d33","sequence":null,"uniqueSlug":"how-to-improve-storybook-performance-in-large-projects-4048f20e4d33"},"MastodonAccount:artem_lajko@me.dm":{"__typename":"MastodonAccount","domain":"me.dm","username":"artem_lajko","id":"artem_lajko@me.dm"},"LinkedAccounts:2099f3d62707":{"__typename":"LinkedAccounts","mastodon":{"__ref":"MastodonAccount:artem_lajko@me.dm"},"id":"2099f3d62707"},"Membership:3e5344de616a":{"__typename":"Membership","tier":"MEMBER","id":"3e5344de616a"},"User:2099f3d62707":{"__typename":"User","id":"2099f3d62707","linkedAccounts":{"__ref":"LinkedAccounts:2099f3d62707"},"isSuspended":false,"name":"Artem Lajko","imageId":"1*RaBgnDPDAQFUu4irAkXieQ.jpeg","customDomainState":{"__typename":"CustomDomainState","live":null},"hasSubdomain":false,"username":"artem_lajko","verifications":{"__typename":"VerifiedInfo","isBookAuthor":true},"socialStats":{"__typename":"SocialStats","followerCount":2425,"followingCount":116,"collectionFollowingCount":27},"bio":"Do something with cloud, kubernetes, gitops and all the fancy stuff https:\u002F\u002Fwww.linkedin.com\u002Fin\u002Flajko","membership":{"__ref":"Membership:3e5344de616a"},"allowNotes":true,"viewerEdge":{"__ref":"UserViewerEdge:userId:2099f3d62707-viewerId:lo_7ce4e254e84e"},"twitterScreenName":"Art3m8"},"Paragraph:10b932665a51_0":{"__typename":"Paragraph","id":"10b932665a51_0","name":"b39e","type":"H3","href":null,"layout":null,"metadata":null,"text":"Building Your Own Event-Driven Internal Developer Platform with GitOps and Sveltos","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_1":{"__typename":"Paragraph","id":"10b932665a51_1","name":"2eaf","type":"H4","href":null,"layout":null,"metadata":null,"text":"Discover how to create an event-driven cloud environment that mirrors the architecture used by cloud providers","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_2":{"__typename":"Paragraph","id":"10b932665a51_2","name":"6444","type":"BQ","href":null,"layout":null,"metadata":null,"text":"Note: this is a hands-on guide requiring experience with Kubernetes and Helm. To follow along with this tutorial, you’ll also need three running Kubernetes clusters.\n\nIf you believe in open source and share this philosophy, please consider leaving a ⭐️ to support those who make these amazing tools available and enable setups like this!","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":224,"end":252,"href":"https:\u002F\u002Fgithub.com\u002Fprojectsveltos\u002Faddon-controller","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":6,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*0iYxYy_pjaUVW0nETz6vQg.gif":{"__typename":"ImageMetadata","id":"1*0iYxYy_pjaUVW0nETz6vQg.gif","originalHeight":485,"originalWidth":1069,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:10b932665a51_3":{"__typename":"Paragraph","id":"10b932665a51_3","name":"882f","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*0iYxYy_pjaUVW0nETz6vQg.gif"},"text":"Fig: 0: Your Own Event-Driven Cloud","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_4":{"__typename":"Paragraph","id":"10b932665a51_4","name":"d818","type":"P","href":null,"layout":null,"metadata":null,"text":"Imagine you’re a user visiting a portal of an provider XY, exploring their Database as a Service or managed database offerings. You click a button or call an API (if provided), and voilà — your database instance is ready. But have you ever wondered, Is this database really running on a traditional virtual machine? It feels more like it’s operating within a Kubernetes cluster, doesn’t it? Did you ever ask yourself, how they build this cloud based environment on the backbone of an Internal Developer Platform in make them available in a portal?","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":359,"end":377,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":250,"end":315,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_5":{"__typename":"Paragraph","id":"10b932665a51_5","name":"1651","type":"P","href":null,"layout":null,"metadata":null,"text":"Let’s go with that thought: imagine the database is indeed running on Kubernetes. What happens the moment you hit “create”? This action triggers an event resource, specifying when and how the database cluster should be deployed. At this point, Sveltos steps in, managing deployment to the appropriate cluster, retrieving necessary configurations, and providing the details you need to connect to your database seamlessly.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":114,"end":122,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":244,"end":251,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_6":{"__typename":"Paragraph","id":"10b932665a51_6","name":"d96d","type":"P","href":null,"layout":null,"metadata":null,"text":"While I can’t reveal every technical detail behind building a cloud like the major providers (let’s avoid any legal headaches!) or maybe I will build my own IDP solution. I’ll guide you through setting up a similar event-driven cloud architecture. We’ll break down each component, and by the end, you’ll have a solid understanding — and maybe even a new cloud based on a IDP of your own in the making!","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_7":{"__typename":"Paragraph","id":"10b932665a51_7","name":"b677","type":"H3","href":null,"layout":null,"metadata":null,"text":"Quick Overview","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_8":{"__typename":"Paragraph","id":"10b932665a51_8","name":"74d1","type":"P","href":null,"layout":null,"metadata":null,"text":"Before we dive in, here’s what you need to know: This guide is fully hands-on, starting from scratch! All you’ll need are three running clusters:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_9":{"__typename":"Paragraph","id":"10b932665a51_9","name":"1d66","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Management Cluster","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":18,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_10":{"__typename":"Paragraph","id":"10b932665a51_10","name":"0d0a","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Service Cluster","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":15,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_11":{"__typename":"Paragraph","id":"10b932665a51_11","name":"0ba0","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Workload\u002FApplication Cluster","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":28,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_12":{"__typename":"Paragraph","id":"10b932665a51_12","name":"8812","type":"P","href":null,"layout":null,"metadata":null,"text":"We’ll be walking through the following steps:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_13":{"__typename":"Paragraph","id":"10b932665a51_13","name":"2f16","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Install Prerequisites: Set up sveltosctl, cert-manager, and sveltos, and apply the necessary labels on the management cluster.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":30,"end":40,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":42,"end":54,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":60,"end":67,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":21,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_14":{"__typename":"Paragraph","id":"10b932665a51_14","name":"18f8","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Register the Service Cluster: Prepare the service cluster for managing deployments.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":28,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_15":{"__typename":"Paragraph","id":"10b932665a51_15","name":"3ba6","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Deploy Database Operator: Install the cloudnative-pg operator on the service cluster.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":38,"end":52,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":24,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_16":{"__typename":"Paragraph","id":"10b932665a51_16","name":"f936","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Automate Database Deployment: Instruct Sveltos to automatically deploy a Postgres database instance.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":28,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_17":{"__typename":"Paragraph","id":"10b932665a51_17","name":"6350","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Register the Workload Cluster: Connect the workload cluster to the architecture.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":29,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_18":{"__typename":"Paragraph","id":"10b932665a51_18","name":"a3ae","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Deploy an Application: Launch an application that connects to the Postgres database.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":21,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*OYSp04Ki-prpTW4omB_Ugw.png":{"__typename":"ImageMetadata","id":"1*OYSp04Ki-prpTW4omB_Ugw.png","originalHeight":250,"originalWidth":488,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:10b932665a51_19":{"__typename":"Paragraph","id":"10b932665a51_19","name":"da38","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*OYSp04Ki-prpTW4omB_Ugw.png"},"text":"Fig. 1: Which path will you choose?","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_20":{"__typename":"Paragraph","id":"10b932665a51_20","name":"6f98","type":"P","href":null,"layout":null,"metadata":null,"text":"Let’s get straight to it. There are two sections A and B below. A is a detailed guide that also explains what happens behind the scenes. B is a short way to quickly deploy things without really understanding them and believe whatever you want to believe.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_21":{"__typename":"Paragraph","id":"10b932665a51_21","name":"b71d","type":"P","href":null,"layout":null,"metadata":null,"text":"Let’s get started with Path A or B!","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_22":{"__typename":"Paragraph","id":"10b932665a51_22","name":"dbbd","type":"H3","href":null,"layout":null,"metadata":null,"text":"Path A: The Deep Dive","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_23":{"__typename":"Paragraph","id":"10b932665a51_23","name":"926b","type":"P","href":null,"layout":null,"metadata":null,"text":"In this section, we will go together step-by-step, explaining each command and its purpose to give you a deeper understanding of what’s happening behind the scenes","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_24":{"__typename":"Paragraph","id":"10b932665a51_24","name":"1f0d","type":"H4","href":null,"layout":null,"metadata":null,"text":"1. Install sveltosctl, cert-manager, sveltos and add labels on the management cluster","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":85,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_25":{"__typename":"Paragraph","id":"10b932665a51_25","name":"8053","type":"P","href":null,"layout":null,"metadata":null,"text":"First, let’s install sveltosctl, the command-line tool for interacting with Sveltos. This tool will help us manage deployments across our clusters.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":21,"end":31,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":13,"end":31,"href":"https:\u002F\u002Fgithub.com\u002Fprojectsveltos\u002Fsveltosctl","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_26":{"__typename":"Paragraph","id":"10b932665a51_26","name":"b872","type":"P","href":null,"layout":null,"metadata":null,"text":"Here’s how to install it:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_27":{"__typename":"Paragraph","id":"10b932665a51_27","name":"3628","type":"PRE","href":null,"layout":null,"metadata":null,"text":"#MacOs\nsudo wget https:\u002F\u002Fgithub.com\u002Fprojectsveltos\u002Fsveltosctl\u002Freleases\u002Fdownload\u002Fv0.41.1\u002Fsveltosctl-darwin-arm64 -O \u002Fusr\u002Flocal\u002Fbin\u002Fsveltosctl\nsudo chmod +x \u002Fusr\u002Flocal\u002Fbin\u002Fsveltosctl\n\n#Linux\nsudo wget https:\u002F\u002Fgithub.com\u002Fprojectsveltos\u002Fsveltosctl\u002Freleases\u002Fdownload\u002Fv0.41.1\u002Fsveltosctl-linux-amd64 -O \u002Fusr\u002Flocal\u002Fbin\u002Fsveltosctl\nsudo chmod +x \u002Fusr\u002Flocal\u002Fbin\u002Fsveltosctl","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"bash"},"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*pKQ0bx-ShPHSwIN7FQ9r4w.png":{"__typename":"ImageMetadata","id":"1*pKQ0bx-ShPHSwIN7FQ9r4w.png","originalHeight":390,"originalWidth":548,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:10b932665a51_28":{"__typename":"Paragraph","id":"10b932665a51_28","name":"bddf","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*pKQ0bx-ShPHSwIN7FQ9r4w.png"},"text":"Fig .2: Install Sveltosctl on the client Device","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_29":{"__typename":"Paragraph","id":"10b932665a51_29","name":"b58b","type":"P","href":null,"layout":null,"metadata":null,"text":"Now, let’s install Cert-Manager using Helm. This tool manages certificates for us, which is crucial for secure communication between clusters.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":19,"end":31,"href":"https:\u002F\u002Fcert-manager.io","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":38,"end":42,"href":"https:\u002F\u002Fhelm.sh","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_30":{"__typename":"Paragraph","id":"10b932665a51_30","name":"80b6","type":"PRE","href":null,"layout":null,"metadata":null,"text":"helm install cert-manager jetstack\u002Fcert-manager --namespace cert-manager --create-namespace --version v1.16.1 --set crds.enabled=true","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"cpp"},"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*apAh6_PLVMjxJxUJBrwMig.png":{"__typename":"ImageMetadata","id":"1*apAh6_PLVMjxJxUJBrwMig.png","originalHeight":552,"originalWidth":1240,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:10b932665a51_31":{"__typename":"Paragraph","id":"10b932665a51_31","name":"9064","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*apAh6_PLVMjxJxUJBrwMig.png"},"text":"Fig. 3: Install Helm Chart for Cert-Manager","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_32":{"__typename":"Paragraph","id":"10b932665a51_32","name":"8510","type":"P","href":null,"layout":null,"metadata":null,"text":"Next, we’ll deploy the Sveltos stack itself via Helm. This step will set up the core Sveltos components on our management cluster.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":23,"end":36,"href":"https:\u002F\u002Fprojectsveltos.github.io\u002Fsveltos\u002Fgetting_started\u002Finstall\u002Finstall\u002F","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_33":{"__typename":"Paragraph","id":"10b932665a51_33","name":"ab2d","type":"PRE","href":null,"layout":null,"metadata":null,"text":"helm install projectsveltos projectsveltos\u002Fprojectsveltos -n projectsveltos --create-namespace","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"bash"},"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*mC0ew_1T1PKa7D5HHcACwg.png":{"__typename":"ImageMetadata","id":"1*mC0ew_1T1PKa7D5HHcACwg.png","originalHeight":660,"originalWidth":1194,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:10b932665a51_34":{"__typename":"Paragraph","id":"10b932665a51_34","name":"3ee7","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*mC0ew_1T1PKa7D5HHcACwg.png"},"text":"Fig. 4: Install Helm Chart for Projectsveltos","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_35":{"__typename":"Paragraph","id":"10b932665a51_35","name":"89df","type":"P","href":null,"layout":null,"metadata":null,"text":"Labeling the management cluster helps Sveltos identify and organize clusters by type, simplifying deployments later on.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_36":{"__typename":"Paragraph","id":"10b932665a51_36","name":"cff9","type":"PRE","href":null,"layout":null,"metadata":null,"text":"kubectl label sveltoscluster -n mgmt mgmt type=mgmt","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"bash"},"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*a3Qrymn6_5lyOIBTK_gVOg.png":{"__typename":"ImageMetadata","id":"1*a3Qrymn6_5lyOIBTK_gVOg.png","originalHeight":746,"originalWidth":1176,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:10b932665a51_37":{"__typename":"Paragraph","id":"10b932665a51_37","name":"316c","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*a3Qrymn6_5lyOIBTK_gVOg.png"},"text":"Fig. 5: Label Management Cluster","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_38":{"__typename":"Paragraph","id":"10b932665a51_38","name":"fe42","type":"P","href":null,"layout":null,"metadata":null,"text":"To allow Sveltos to work with resources like ConfigMaps and Secrets, we need to add specific permissions. Here’s how to patch the addon-controller-role-extra ClusterRole for this purpose:","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":130,"end":157,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":45,"end":55,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":60,"end":67,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":158,"end":169,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_39":{"__typename":"Paragraph","id":"10b932665a51_39","name":"c7f5","type":"PRE","href":null,"layout":null,"metadata":null,"text":"kubectl patch clusterrole addon-controller-role-extra --type='json' -p='[\n  {\n    \"op\": \"add\",\n    \"path\": \"\u002Frules\",\n    \"value\": [\n      {\n        \"apiGroups\": [\"\"],\n        \"resources\": [\"configmaps\", \"secrets\"],\n        \"verbs\": [\"*\"]\n      }\n    ]\n  }\n]'","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"rust"},"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_40":{"__typename":"Paragraph","id":"10b932665a51_40","name":"d34d","type":"P","href":null,"layout":null,"metadata":null,"text":"Congratulations! You’ve completed the foundational setup. Let’s continue with Step 2.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_41":{"__typename":"Paragraph","id":"10b932665a51_41","name":"81bf","type":"H4","href":null,"layout":null,"metadata":null,"text":"2. Register the service cluster","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":31,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_42":{"__typename":"Paragraph","id":"10b932665a51_42","name":"ac1f","type":"P","href":null,"layout":null,"metadata":null,"text":"This step is straightforward, thanks to sveltosctl. Here’s how to connect the management cluster to the service cluster:","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":40,"end":50,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_43":{"__typename":"Paragraph","id":"10b932665a51_43","name":"4ca3","type":"PRE","href":null,"layout":null,"metadata":null,"text":"kubectl create ns service-cluster\nsveltosctl register cluster --namespace=service-cluster --cluster=service-cluster --fleet-cluster-context=service-cluster --labels=type=services","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"cpp"},"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*nt0H0Tcnl8N1QLR714bFVQ.gif":{"__typename":"ImageMetadata","id":"1*nt0H0Tcnl8N1QLR714bFVQ.gif","originalHeight":310,"originalWidth":855,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:10b932665a51_44":{"__typename":"Paragraph","id":"10b932665a51_44","name":"0da7","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*nt0H0Tcnl8N1QLR714bFVQ.gif"},"text":"Fig.6: Register Service Cluster and label it","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_45":{"__typename":"Paragraph","id":"10b932665a51_45","name":"3115","type":"P","href":null,"layout":null,"metadata":null,"text":"In this step we created the connection between the management cluster and the managed service cluster. But lets take a look on the provided parameter to get a better understand:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_46":{"__typename":"Paragraph","id":"10b932665a51_46","name":"175c","type":"P","href":null,"layout":null,"metadata":null,"text":"--namaespace=service-cluster : will create the namespace for the managed cluster in the management cluster","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":0,"end":28,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_47":{"__typename":"Paragraph","id":"10b932665a51_47","name":"3234","type":"P","href":null,"layout":null,"metadata":null,"text":"--cluster=service-cluster : will add a name to the managed cluster in the CustomResource sveltoscluster","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":0,"end":25,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_48":{"__typename":"Paragraph","id":"10b932665a51_48","name":"33e8","type":"P","href":null,"layout":null,"metadata":null,"text":"--fleet-cluster-context=service-cluster : will use your context name to access the cluster that should be managed by sveltos. In my case it is service-cluster","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":0,"end":39,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_49":{"__typename":"Paragraph","id":"10b932665a51_49","name":"c38c","type":"P","href":null,"layout":null,"metadata":null,"text":"--labels=types=services : will add label to the added managed cluster into the CustomResource sveltoscluster, which allow deploy apps based on the labels.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":0,"end":23,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_50":{"__typename":"Paragraph","id":"10b932665a51_50","name":"2b6e","type":"P","href":null,"layout":null,"metadata":null,"text":"To verify the labels, use the following command:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_51":{"__typename":"Paragraph","id":"10b932665a51_51","name":"040e","type":"PRE","href":null,"layout":null,"metadata":null,"text":"kubectl get sveltoscluster -A --show-labels\n\nNAMESPACE          NAME               READY   VERSION        LABELS\nmgmt               mgmt               true    v1.29.2+k3s1   projectsveltos.io\u002Fk8s-version=v1.29.2,sveltos-agent=present,type=mgmt\nservice-cluster    service-cluster    true    v1.29.2+k3s1   projectsveltos.io\u002Fk8s-version=v1.29.2,sveltos-agent=present,type=services","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"lua"},"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_52":{"__typename":"Paragraph","id":"10b932665a51_52","name":"d8fc","type":"P","href":null,"layout":null,"metadata":null,"text":"This setup enables Sveltos to recognize and manage the service cluster based on labels, which will come in handy for deploying applications.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_53":{"__typename":"Paragraph","id":"10b932665a51_53","name":"5cd1","type":"P","href":null,"layout":null,"metadata":null,"text":"If you’re curious about how Sveltos manages add-ons, feel free to explore further resources. For now, let’s continue by deploying the cloudnative-pg operator to help set up the managed service on the service cluster.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":134,"end":148,"href":"","anchorType":"LINK","userId":"","linkMetadata":null},{"__typename":"Markup","type":"A","start":74,"end":91,"href":"https:\u002F\u002Fprojectsveltos.github.io\u002Fsveltos\u002Faddons\u002Faddons\u002F","anchorType":"LINK","userId":"","linkMetadata":null},{"__typename":"Markup","type":"A","start":134,"end":148,"href":"https:\u002F\u002Fcloudnative-pg.io","anchorType":"LINK","userId":"","linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_54":{"__typename":"Paragraph","id":"10b932665a51_54","name":"aab8","type":"H4","href":null,"layout":null,"metadata":null,"text":"3. Deploy cloudnative-pg Operator on the service cluster","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":56,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_55":{"__typename":"Paragraph","id":"10b932665a51_55","name":"6bb4","type":"P","href":null,"layout":null,"metadata":null,"text":"To deploy the CloudNative-PG operator, we’ll apply a ClusterProfile CustomResource on the management cluster. This ClusterProfile instructs Sveltos to deploy the operator on clusters that match specific labels.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":53,"end":67,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":115,"end":129,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":68,"end":82,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_56":{"__typename":"Paragraph","id":"10b932665a51_56","name":"5e16","type":"P","href":null,"layout":null,"metadata":null,"text":"Run the following command to apply the ClusterProfile:","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":39,"end":53,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_57":{"__typename":"Paragraph","id":"10b932665a51_57","name":"1ae7","type":"PRE","href":null,"layout":null,"metadata":null,"text":"kubectl apply -f https:\u002F\u002Fraw.githubusercontent.com\u002Fprojectsveltos\u002Fsveltos\u002Fmain\u002Fdocs\u002Fassets\u002Fcloudnative-pg.yaml","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"ruby"},"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_58":{"__typename":"Paragraph","id":"10b932665a51_58","name":"90cc","type":"P","href":null,"layout":null,"metadata":null,"text":"After this step, our setup will look like this:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*1HOIrxe6mJoaUIyux31RJA.gif":{"__typename":"ImageMetadata","id":"1*1HOIrxe6mJoaUIyux31RJA.gif","originalHeight":417,"originalWidth":854,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:10b932665a51_59":{"__typename":"Paragraph","id":"10b932665a51_59","name":"9ca9","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*1HOIrxe6mJoaUIyux31RJA.gif"},"text":"Fig. 7: Deploy PG-Operator based on ClusterProfile Instruction","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_60":{"__typename":"Paragraph","id":"10b932665a51_60","name":"64b0","type":"P","href":null,"layout":null,"metadata":null,"text":"What is a ClusterProfile?","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":25,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_61":{"__typename":"Paragraph","id":"10b932665a51_61","name":"e4d8","type":"P","href":null,"layout":null,"metadata":null,"text":"A ClusterProfile acts like a blueprint that defines which resources should be deployed on clusters that match certain labels. In this case, the profile targets clusters labeled as type=services and instructs Sveltos to install the CloudNative-PG Helm chart there. Here’s what it looks like:","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":2,"end":16,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":180,"end":193,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":231,"end":256,"href":"https:\u002F\u002Fgithub.com\u002Fcloudnative-pg\u002Fcharts","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_62":{"__typename":"Paragraph","id":"10b932665a51_62","name":"1685","type":"PRE","href":null,"layout":null,"metadata":null,"text":"---\napiVersion: config.projectsveltos.io\u002Fv1beta1\nkind: ClusterProfile\nmetadata:\n  name: deploy-cnpg\nspec:\n  clusterSelector:\n    matchLabels:\n      type: services\n  syncMode: Continuous\n  helmCharts:\n  - repositoryURL:    https:\u002F\u002Fcloudnative-pg.github.io\u002Fcharts\n    repositoryName:   cloudnative-pg \n    chartName:        cloudnative-pg\u002Fcloudnative-pg\n    chartVersion:     0.22.1 \n    releaseName:      cnpg\n    releaseNamespace: cnpg-system\n    helmChartAction:  Install","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"yaml"},"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_63":{"__typename":"Paragraph","id":"10b932665a51_63","name":"6600","type":"P","href":null,"layout":null,"metadata":null,"text":"In this example, any cluster with the label type=services will have the CloudNative-PG Helm chart automatically installed, continuously synchronizing as specified.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":44,"end":57,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_64":{"__typename":"Paragraph","id":"10b932665a51_64","name":"f59e","type":"P","href":null,"layout":null,"metadata":null,"text":"To check the resources deployed on the service cluster, you can use:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_65":{"__typename":"Paragraph","id":"10b932665a51_65","name":"0a19","type":"PRE","href":null,"layout":null,"metadata":null,"text":"sveltosctl show addons \n\n+-----------------------------------+----------------------------+------------------+-----------------------------------+---------+-------------------------------+---------------------------------------------+\n|              CLUSTER              |       RESOURCE TYPE        |    NAMESPACE     |               NAME                | VERSION |             TIME              |                  PROFILES                   |\n+-----------------------------------+----------------------------+------------------+-----------------------------------+---------+-------------------------------+---------------------------------------------+\n| service-cluster\u002Fservice-cluster   | helm chart                 | cnpg-system      | cnpg                              | 0.22.1  | 2024-11-02 11:35:40 +0100 CET | ClusterProfile\u002Fdeploy-cnpg                  |\n+-----------------------------------+----------------------------+------------------+-----------------------------------+---------+-------------------------------+---------------------------------------------+","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"sql"},"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_66":{"__typename":"Paragraph","id":"10b932665a51_66","name":"edaf","type":"P","href":null,"layout":null,"metadata":null,"text":"This confirms that the CloudNative-PG operator has been successfully deployed on the service cluster.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_67":{"__typename":"Paragraph","id":"10b932665a51_67","name":"59a8","type":"H4","href":null,"layout":null,"metadata":null,"text":"4. Instruct Sveltos to automatically deploy Postgres DB","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":55,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_68":{"__typename":"Paragraph","id":"10b932665a51_68","name":"d560","type":"P","href":null,"layout":null,"metadata":null,"text":"In this step, we’ll configure Sveltos to automatically deploy a PostgreSQL database on clusters labeled with postgres=required. Whenever Sveltos detects a managed cluster with this label, it will:","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":109,"end":126,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_69":{"__typename":"Paragraph","id":"10b932665a51_69","name":"a8b4","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Create a PostgreSQL instance on the cluster.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_70":{"__typename":"Paragraph","id":"10b932665a51_70","name":"f680","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Expose the database via a LoadBalancer service.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_71":{"__typename":"Paragraph","id":"10b932665a51_71","name":"35be","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Retrieve the credentials and connection details, including the external IP and port.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_72":{"__typename":"Paragraph","id":"10b932665a51_72","name":"9dca","type":"P","href":null,"layout":null,"metadata":null,"text":"To enable this, apply the following configurations:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_73":{"__typename":"Paragraph","id":"10b932665a51_73","name":"4e87","type":"PRE","href":null,"layout":null,"metadata":null,"text":"kubectl apply -f https:\u002F\u002Fraw.githubusercontent.com\u002Fprojectsveltos\u002Fsveltos\u002Fmain\u002Fdocs\u002Fassets\u002Fauto-deploy-postgres-cluster.yaml\nkubectl apply -f https:\u002F\u002Fraw.githubusercontent.com\u002Fprojectsveltos\u002Fsveltos\u002Fmain\u002Fdocs\u002Fassets\u002Ffetch-postgres-data.yaml","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"bash"},"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_74":{"__typename":"Paragraph","id":"10b932665a51_74","name":"d8b9","type":"P","href":null,"layout":null,"metadata":null,"text":"These configurations set up two workflows:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_75":{"__typename":"Paragraph","id":"10b932665a51_75","name":"de3c","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Auto-Deploy PostgreSQL Cluster: Deploys PostgreSQL on clusters labeled with type=services when triggered.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":76,"end":89,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":30,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_76":{"__typename":"Paragraph","id":"10b932665a51_76","name":"438e","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Fetch PostgreSQL Cluster Data: Retrieves connection data and credentials for PostgreSQL clusters based on specific events.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":29,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_77":{"__typename":"Paragraph","id":"10b932665a51_77","name":"988b","type":"P","href":null,"layout":null,"metadata":null,"text":"The first workflow will be like:","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":4,"end":18,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*bNQpGYIGByJimicFp2QNMA.png":{"__typename":"ImageMetadata","id":"1*bNQpGYIGByJimicFp2QNMA.png","originalHeight":936,"originalWidth":1372,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:10b932665a51_78":{"__typename":"Paragraph","id":"10b932665a51_78","name":"7553","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*bNQpGYIGByJimicFp2QNMA.png"},"text":"Fig. 8: Workfow 1: Auto-Deploy PostgreSQL Cluster","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":19,"end":49,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_79":{"__typename":"Paragraph","id":"10b932665a51_79","name":"eb05","type":"P","href":null,"layout":null,"metadata":null,"text":"In Sveltos, the EventSource defines specific events (such as creation or deletion of resources) to watch in Kubernetes clusters, while the EventTrigger specifies which add-ons or applications to deploy in response to these events.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":16,"end":27,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":139,"end":151,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_80":{"__typename":"Paragraph","id":"10b932665a51_80","name":"9eed","type":"P","href":null,"layout":null,"metadata":null,"text":"This how the applied resources looks like:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_81":{"__typename":"Paragraph","id":"10b932665a51_81","name":"2d3d","type":"PRE","href":null,"layout":null,"metadata":null,"text":"# Anytime a SveltosCluster with label postgres: required\n# is created, deploys a postgres cluster.\n# Source cluster is the management cluster.\n# Destination cluster is the cluster with label type:services\napiVersion: lib.projectsveltos.io\u002Fv1beta1\nkind: EventSource\nmetadata:\n  name: detect-cluster-requiring-postgres\nspec:\n  collectResources: true\n  resourceSelectors:\n  - group: \"lib.projectsveltos.io\"\n    version: \"v1beta1\"\n    kind: \"SveltosCluster\"\n    labelFilters:\n    - key: postgres\n      operation: Equal\n      value: required\n---\napiVersion: lib.projectsveltos.io\u002Fv1beta1\nkind: EventTrigger\nmetadata:\n  name: deploy-postgres-cluster\nspec:\n  sourceClusterSelector:\n    matchLabels:\n      type: mgmt\n  destinationClusterSelector:\n    matchLabels:\n      type: services\n  eventSourceName: detect-cluster-requiring-postgres\n  oneForEvent: true\n  policyRefs:\n  - name: postgres-cluster\n    namespace: default\n    kind: ConfigMap\n---\napiVersion: v1\ndata:\n  cluster.yaml: |\n    apiVersion: postgresql.cnpg.io\u002Fv1\n    kind: Cluster\n    metadata:\n      name: cluster-{{ .Resource.metadata.name }}\n      namespace: {{ .Resource.metadata.namespace }}\n      labels:\n        cluster: {{ .Resource.metadata.namespace }}-{{ .Resource.metadata.name }}\n    spec:\n      instances: 3\n      bootstrap:\n        initdb:\n          database: todo\n      storage:\n        size: 1Gi\n      managed:\n        services:\n          disabledDefaultServices: [\"ro\", \"r\"]\n          additional:\n          - selectorType: rw\n            serviceTemplate:\n              metadata:\n                name: cluster-rw-lb\n              spec:\n                type: LoadBalancer\nkind: ConfigMap\nmetadata:\n  annotations:\n    projectsveltos.io\u002Finstantiate: ok\n  name: postgres-cluster\n  namespace: default","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"yaml"},"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_82":{"__typename":"Paragraph","id":"10b932665a51_82","name":"19c6","type":"P","href":null,"layout":null,"metadata":null,"text":"And here is the explaination what will happen and how Sveltos handle it.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_83":{"__typename":"Paragraph","id":"10b932665a51_83","name":"60c6","type":"ULI","href":null,"layout":null,"metadata":null,"text":"EventSource Definition: The EventSource detect-cluster-requiring-postgres monitors the creation of any SveltosCluster object labeled with postgres: required. When such a labeled cluster is created, Sveltos detects this as a significant event.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":40,"end":73,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":103,"end":117,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":138,"end":156,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":22,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_84":{"__typename":"Paragraph","id":"10b932665a51_84","name":"8a8c","type":"ULI","href":null,"layout":null,"metadata":null,"text":"EventTrigger Definition: The EventTrigger deploy-postgres-cluster is triggered when the above event occurs. It is configured to deploy the PostgreSQL cluster in a target cluster labeled type: services, with the source being the management cluster labeled type: mgmt.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":42,"end":65,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":186,"end":200,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":255,"end":265,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":23,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_85":{"__typename":"Paragraph","id":"10b932665a51_85","name":"7905","type":"ULI","href":null,"layout":null,"metadata":null,"text":"PostgreSQL Cluster Deployment: The EventTrigger references a ConfigMap (postgres-cluster) that contains a template to define a PostgreSQL cluster. When the event is triggered, Sveltos uses this template to create a new PostgreSQL cluster in the target cluster. The template dynamically incorporates details like the name and namespace of the originating cluster.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":61,"end":70,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":72,"end":88,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":29,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_86":{"__typename":"Paragraph","id":"10b932665a51_86","name":"6ed4","type":"P","href":null,"layout":null,"metadata":null,"text":"In summary, Sveltos watches for specific labels on clusters and, when it detects a match, automatically deploys a PostgreSQL cluster in a designated target cluster.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_87":{"__typename":"Paragraph","id":"10b932665a51_87","name":"5532","type":"P","href":null,"layout":null,"metadata":null,"text":"The Second workflow composite of two workflows and looks like:","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":4,"end":19,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*x2GJ3pRdZkSnIFpfX6ia2Q.png":{"__typename":"ImageMetadata","id":"1*x2GJ3pRdZkSnIFpfX6ia2Q.png","originalHeight":1196,"originalWidth":1382,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:10b932665a51_88":{"__typename":"Paragraph","id":"10b932665a51_88","name":"04a8","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*x2GJ3pRdZkSnIFpfX6ia2Q.png"},"text":"Fig. 9: Workflow 2: Fetch PostgreSQL Cluster Data","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":20,"end":49,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_89":{"__typename":"Paragraph","id":"10b932665a51_89","name":"3b4e","type":"P","href":null,"layout":null,"metadata":null,"text":"In this setup, Sveltos is configured to retrieve PostgreSQL credentials and load balancer information from a services cluster and make them accessible in the management cluster:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_90":{"__typename":"Paragraph","id":"10b932665a51_90","name":"ecad","type":"P","href":null,"layout":null,"metadata":null,"text":"Fetching PostgreSQL Credentials:","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":31,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_91":{"__typename":"Paragraph","id":"10b932665a51_91","name":"eedb","type":"ULI","href":null,"layout":null,"metadata":null,"text":"EventSource: detect-credentials-secret monitors for Secret objects in the services cluster that have the label cnpg.io\u002Freload: true. This label indicates that the secret contains PostgreSQL credentials.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":13,"end":38,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":52,"end":58,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":111,"end":131,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":11,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_92":{"__typename":"Paragraph","id":"10b932665a51_92","name":"a5a1","type":"ULI","href":null,"layout":null,"metadata":null,"text":"EventTrigger: credentials-secret is activated when such a Secret is detected in any cluster labeled type: services. It initiates the creation of a Secret in the management cluster (labeled type: mgmt) with the PostgreSQL credentials.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":14,"end":32,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":58,"end":64,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":100,"end":114,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":147,"end":153,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":189,"end":199,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":12,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_93":{"__typename":"Paragraph","id":"10b932665a51_93","name":"4125","type":"ULI","href":null,"layout":null,"metadata":null,"text":"ConfigMap Template: The credentials ConfigMap contains a template to create a Secret named pg-credentials in the management cluster. This template dynamically pulls the username and password from the original Secret in the services cluster, allowing Sveltos to replicate these credentials securely.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":24,"end":35,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":78,"end":84,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":91,"end":105,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":18,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_94":{"__typename":"Paragraph","id":"10b932665a51_94","name":"ec60","type":"P","href":null,"layout":null,"metadata":null,"text":"Fetching Load Balancer Information:","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":34,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_95":{"__typename":"Paragraph","id":"10b932665a51_95","name":"befd","type":"ULI","href":null,"layout":null,"metadata":null,"text":"EventSource: detect-loadbalancer monitors for Service objects in the services cluster labeled cnpg.io\u002FisManaged: true, indicating they are managed PostgreSQL load balancers.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":13,"end":32,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":46,"end":53,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":94,"end":117,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":11,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_96":{"__typename":"Paragraph","id":"10b932665a51_96","name":"5be3","type":"ULI","href":null,"layout":null,"metadata":null,"text":"EventTrigger: cnpg-loadbalancer-data triggers when such a Service is detected, and it creates a ConfigMap in the management cluster to store the load balancer’s external IP and port information.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":14,"end":36,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":12,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_97":{"__typename":"Paragraph","id":"10b932665a51_97","name":"0c49","type":"ULI","href":null,"layout":null,"metadata":null,"text":"ConfigMap Template: The loadbalancer-data ConfigMap template is used to generate a ConfigMap named pg-loadbalancer-data in the management cluster. It populates this ConfigMap with the load balancer’s external IP address and port, enabling external access to the PostgreSQL instance from the management cluster.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":24,"end":41,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":99,"end":119,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":18,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_98":{"__typename":"Paragraph","id":"10b932665a51_98","name":"b91a","type":"P","href":null,"layout":null,"metadata":null,"text":"This setup allows the management cluster to have secure and dynamic access to PostgreSQL credentials and connection details for instances deployed in the services cluster.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":49,"end":67,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_99":{"__typename":"Paragraph","id":"10b932665a51_99","name":"dced","type":"P","href":null,"layout":null,"metadata":null,"text":"Next, let’s register the workload cluster to trigger events in the following steps.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_100":{"__typename":"Paragraph","id":"10b932665a51_100","name":"ddc2","type":"H4","href":null,"layout":null,"metadata":null,"text":"5. Register the workload cluster","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":32,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_101":{"__typename":"Paragraph","id":"10b932665a51_101","name":"1646","type":"P","href":null,"layout":null,"metadata":null,"text":"Now, let’s register the workload cluster with Sveltos. By labeling this cluster with postgres=required, we instruct Sveltos to deploy a new PostgreSQL instance on the service cluster and gather the necessary connection details. Here’s how to register the workload cluster:","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":85,"end":102,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_102":{"__typename":"Paragraph","id":"10b932665a51_102","name":"5118","type":"PRE","href":null,"layout":null,"metadata":null,"text":"kubectl create ns workload-cluster\nsveltosctl register cluster --namespace=workload-cluster --cluster=workload-cluster --fleet-cluster-context=workload-cluster --labels=postgres=required","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"cpp"},"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_103":{"__typename":"Paragraph","id":"10b932665a51_103","name":"0d2b","type":"P","href":null,"layout":null,"metadata":null,"text":"Once the cluster is registered, Sveltos automatically triggers the workflows (Events) we set up in Step 4. Here’s what happens behind the scenes:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_104":{"__typename":"Paragraph","id":"10b932665a51_104","name":"2836","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Triggering Deployment and Data Collection\nSveltos creates ClusterProfiles and ConfigMaps using the templates defined in the previous EventTriggerconfigurations. Based on these templates, it deploys a PostgreSQL cluster in the service cluster under the workload-cluster namespace. It also retrieves and stores the database’s connection information (such as credentials and load balancer IP) in the management cluster’s under the workload-cluster namespace.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":58,"end":73,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":78,"end":88,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":133,"end":145,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":252,"end":268,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":41,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_105":{"__typename":"Paragraph","id":"10b932665a51_105","name":"eff8","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Automatic Creation of ClusterProfile and ConfigMap\nSveltos generates a ClusterProfile that targets the type=services cluster, referencing the new ConfigMap created from the template. Here’s an example of the generated ClusterProfile:","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":71,"end":85,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":103,"end":116,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":218,"end":232,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":50,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_106":{"__typename":"Paragraph","id":"10b932665a51_106","name":"01d3","type":"P","href":null,"layout":null,"metadata":null,"text":"This will looks like:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*j2UxwBZjfu08iGPMZRNFog.gif":{"__typename":"ImageMetadata","id":"1*j2UxwBZjfu08iGPMZRNFog.gif","originalHeight":702,"originalWidth":863,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:10b932665a51_107":{"__typename":"Paragraph","id":"10b932665a51_107","name":"f12c","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*j2UxwBZjfu08iGPMZRNFog.gif"},"text":"Fig. 10: Deploy PG-Cluster on Service-Cluster and fetch PG-Data","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_108":{"__typename":"Paragraph","id":"10b932665a51_108","name":"59a7","type":"P","href":null,"layout":null,"metadata":null,"text":"So Sveltos create ClusterProfiles based that matches the destination cluster. It also have this ClusterProfile reference the newly created ConfigMap from the Template.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"EM","start":18,"end":33,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":96,"end":110,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":139,"end":148,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_109":{"__typename":"Paragraph","id":"10b932665a51_109","name":"72bc","type":"P","href":null,"layout":null,"metadata":null,"text":"So you can see a new ClusterProfile is created like:","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"EM","start":21,"end":35,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_110":{"__typename":"Paragraph","id":"10b932665a51_110","name":"1b02","type":"PRE","href":null,"layout":null,"metadata":null,"text":"apiVersion: config.projectsveltos.io\u002Fv1beta1\nkind: ClusterProfile\nmetadata:\n  finalizers:\n  - clusterprofilefinalizer.projectsveltos.io\n  generation: 1\n  labels:\n    eventtrigger.lib.projectsveltos.io\u002FclusterNamespace: mgmt\n    eventtrigger.lib.projectsveltos.io\u002Fclustername: mgmt\n    eventtrigger.lib.projectsveltos.io\u002Fclustertype: Sveltos\n    eventtrigger.lib.projectsveltos.io\u002Feventreportname: detect-cluster-requiring-postgres\n    eventtrigger.lib.projectsveltos.io\u002Feventtriggername: deploy-postgres-cluster\n    eventtrigger.lib.projectsveltos.io\u002Fresourcename: workload-cluster\n    eventtrigger.lib.projectsveltos.io\u002Fresourcenamespace: workload-cluster\n    projectsveltos.io\u002Fcluster-name: service-cluster\n    projectsveltos.io\u002Fcluster-profile-name: sveltos-j7dn263no745a5e58uya\n    projectsveltos.io\u002Fcluster-type: Sveltos\n  name: sveltos-j7dn263no745a5e58uya\nspec:\n  clusterSelector:\n    matchLabels:\n      type: services\n  continueOnConflict: false\n  policyRefs:\n  - deploymentType: Remote\n    kind: ConfigMap\n    name: sveltos-bnnnp8dv2ndb8i7dx1vo\n    namespace: projectsveltos\n  reloader: false\n  stopMatchingBehavior: WithdrawPolicies\n  syncMode: Continuous\n  tier: 100\n","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"yaml"},"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_111":{"__typename":"Paragraph","id":"10b932665a51_111","name":"cb37","type":"P","href":null,"layout":null,"metadata":null,"text":"and here you can see that reference ConfigMap, that have the CustomResource for creating a Cluster inside:","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"EM","start":36,"end":45,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":61,"end":75,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":91,"end":98,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_112":{"__typename":"Paragraph","id":"10b932665a51_112","name":"2ebb","type":"PRE","href":null,"layout":null,"metadata":null,"text":"apiVersion: v1\nkind: ConfigMap\nmetadata:\n  labels:\n    eventtrigger.lib.projectsveltos.io\u002FclusterNamespace: mgmt\n    eventtrigger.lib.projectsveltos.io\u002Fclustername: mgmt\n    eventtrigger.lib.projectsveltos.io\u002Fclustertype: Sveltos\n    eventtrigger.lib.projectsveltos.io\u002Feventreportname: detect-cluster-requiring-postgres\n    eventtrigger.lib.projectsveltos.io\u002Feventtriggername: deploy-postgres-cluster\n    eventtrigger.lib.projectsveltos.io\u002Frefname: postgres-cluster\n    eventtrigger.lib.projectsveltos.io\u002Frefnamespace: default\n    eventtrigger.lib.projectsveltos.io\u002Fresourcename: workload-cluster\n    eventtrigger.lib.projectsveltos.io\u002Fresourcenamespace: workload-cluster\n  name: sveltos-bnnnp8dv2ndb8i7dx1vo\n  namespace: projectsveltos\ndata:\n  cluster.yaml: |\n    apiVersion: postgresql.cnpg.io\u002Fv1\n    kind: Cluster\n    metadata:\n      name: cluster-workload-cluster\n      namespace: workload-cluster\n      labels:\n        cluster: workload-cluster-workload-cluster\n    spec:\n      instances: 3\n      bootstrap:\n        initdb:\n          database: todo\n      storage:\n        size: 1Gi\n      managed:\n        services:\n          disabledDefaultServices: [\"ro\", \"r\"]\n          additional:\n          - selectorType: rw\n            serviceTemplate:\n              metadata:\n                name: cluster-rw-lb\n              spec:\n                type: LoadBalancer\n\n","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"yaml"},"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_113":{"__typename":"Paragraph","id":"10b932665a51_113","name":"ce1c","type":"P","href":null,"layout":null,"metadata":null,"text":"Of course, this is just one example — you can do much more, such as using Helm to install a chart via triggers, eliminating the need to specify it in a ConfigMap (More on this at the end).","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"EM","start":152,"end":163,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_114":{"__typename":"Paragraph","id":"10b932665a51_114","name":"8fd9","type":"P","href":null,"layout":null,"metadata":null,"text":"Now, let’s verify that Sveltos has successfully deployed the PostgreSQL instance and fetched the connection details. To check the credentials, use:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_115":{"__typename":"Paragraph","id":"10b932665a51_115","name":"3dd8","type":"PRE","href":null,"layout":null,"metadata":null,"text":"kubectl get secret -n workload-cluster\n\n\n\n#output \nName                                  TYPE     DATA   AGE\nworkload-cluster-sveltos-kubeconfig   Opaque   1      47h\npg-credentials                        Opaque   2      47h","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"bash"},"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_116":{"__typename":"Paragraph","id":"10b932665a51_116","name":"5e1b","type":"P","href":null,"layout":null,"metadata":null,"text":"The pg-credentials secret contains the PostgreSQL credentials:","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":4,"end":18,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_117":{"__typename":"Paragraph","id":"10b932665a51_117","name":"e061","type":"PRE","href":null,"layout":null,"metadata":null,"text":"data:\n  password: bTloa....\n  user: d...","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"yaml"},"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_118":{"__typename":"Paragraph","id":"10b932665a51_118","name":"e8af","type":"P","href":null,"layout":null,"metadata":null,"text":"To check the connection details (external IP and port), use:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_119":{"__typename":"Paragraph","id":"10b932665a51_119","name":"eeb7","type":"PRE","href":null,"layout":null,"metadata":null,"text":"kubectl get configmap -n workload-cluster service-cluster-loadbalancer-data -oyaml                                                                               04.11.24  11:32:44  management-cluster\u002Fdefault ⎈\n\n#output like\napiVersion: v1\ndata:\n  external-ip: 212.2.....\n  port: \"5432\"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"bash"},"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_120":{"__typename":"Paragraph","id":"10b932665a51_120","name":"29ad","type":"P","href":null,"layout":null,"metadata":null,"text":"This completes the setup, with the management cluster now able to access the PostgreSQL instance’s connection details and credentials securely and automatically.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_121":{"__typename":"Paragraph","id":"10b932665a51_121","name":"fa11","type":"H4","href":null,"layout":null,"metadata":null,"text":"6. Deploy an application that access the Postgres DB","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":52,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_122":{"__typename":"Paragraph","id":"10b932665a51_122","name":"f7fe","type":"P","href":null,"layout":null,"metadata":null,"text":"Sveltos can now be used to deploy a Job in the workload-cluster cluster. This Job will access the Postgres DB running on the services-cluster.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"EM","start":36,"end":39,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":78,"end":81,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_123":{"__typename":"Paragraph","id":"10b932665a51_123","name":"0dde","type":"P","href":null,"layout":null,"metadata":null,"text":"This Job is expressed as a template and will be deployed by Sveltos in any cluster with the label type=app.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":98,"end":106,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":5,"end":8,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_124":{"__typename":"Paragraph","id":"10b932665a51_124","name":"984b","type":"PRE","href":null,"layout":null,"metadata":null,"text":"kubectl apply -f https:\u002F\u002Fraw.githubusercontent.com\u002Fprojectsveltos\u002Fsveltos\u002Fmain\u002Fdocs\u002Fassets\u002Fjob-to-create-table.yaml\n\nkubectl label sveltoscluster -n workloadcluster workload-cluster type=app","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"lua"},"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_125":{"__typename":"Paragraph","id":"10b932665a51_125","name":"dfa7","type":"P","href":null,"layout":null,"metadata":null,"text":"The change will then look like this:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*EQvwDKtCTkk44v5paYycHw.gif":{"__typename":"ImageMetadata","id":"1*EQvwDKtCTkk44v5paYycHw.gif","originalHeight":979,"originalWidth":891,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:10b932665a51_126":{"__typename":"Paragraph","id":"10b932665a51_126","name":"1954","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*EQvwDKtCTkk44v5paYycHw.gif"},"text":"Fig. 11: Deploy a Job on the Workload Cluster which has access to PG-DB on the Service Cluster","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_127":{"__typename":"Paragraph","id":"10b932665a51_127","name":"3b5e","type":"P","href":null,"layout":null,"metadata":null,"text":"It establishes a connection to the workload-cluster, creating a new ClusterProfile, which instructs Sveltos to deploy a Job on the cluster matching type=app.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":148,"end":156,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":120,"end":123,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_128":{"__typename":"Paragraph","id":"10b932665a51_128","name":"a49e","type":"P","href":null,"layout":null,"metadata":null,"text":"If you take a closer look at the ClusterProfile:","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"EM","start":33,"end":47,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_129":{"__typename":"Paragraph","id":"10b932665a51_129","name":"0416","type":"PRE","href":null,"layout":null,"metadata":null,"text":"apiVersion: config.projectsveltos.io\u002Fv1beta1\nkind: ClusterProfile\nmetadata:\n  finalizers:\n  - clusterprofilefinalizer.projectsveltos.io\n  name: deploy-job\nspec:\n  clusterSelector:\n    matchLabels:\n      type: app\n  continueOnConflict: false\n  policyRefs:\n  - deploymentType: Remote\n    kind: ConfigMap\n    name: job-to-create-table\n    namespace: default\n  reloader: false\n  stopMatchingBehavior: WithdrawPolicies\n  syncMode: Continuous\n  templateResourceRefs:\n  - identifier: Credentials\n    resource:\n      apiVersion: v1\n      kind: Secret\n      name: pg-credentials\n  - identifier: LoadBalancer\n    resource:\n      apiVersion: v1\n      kind: ConfigMap\n      name: pg-loadbalancer-data\n  tier: 100","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"yaml"},"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_130":{"__typename":"Paragraph","id":"10b932665a51_130","name":"c3dd","type":"P","href":null,"layout":null,"metadata":null,"text":"Here’s what happens:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_131":{"__typename":"Paragraph","id":"10b932665a51_131","name":"1df4","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Sveltos uses the ConfigMap job-to-create-table in the default namespace.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":27,"end":46,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":54,"end":61,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_132":{"__typename":"Paragraph","id":"10b932665a51_132","name":"cd58","type":"ULI","href":null,"layout":null,"metadata":null,"text":"It replaces values in the template with data from the Secret pg-credentials and ConfigMap pg-loadbalancer-data, setting the namespace based on the matching label type=app (workload-cluster).","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":61,"end":75,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":90,"end":110,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":162,"end":170,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":80,"end":89,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_133":{"__typename":"Paragraph","id":"10b932665a51_133","name":"a296","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Sveltos then creates a Job using the fetched information on the remote cluster that matches the label type=app (in our case workload-cluster).","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":102,"end":110,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_134":{"__typename":"Paragraph","id":"10b932665a51_134","name":"978d","type":"P","href":null,"layout":null,"metadata":null,"text":"You can check if the provisioning is working as expected with:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_135":{"__typename":"Paragraph","id":"10b932665a51_135","name":"2f26","type":"PRE","href":null,"layout":null,"metadata":null,"text":"kubectl get clustersummaries -A -owide\n\nNAMESPACE          NAME                                                   HELMCHARTS    KUSTOMIZEREFS   POLICYREFS\nmgmt               sveltos-1a6ec1ce3bandndeqixd-sveltos-mgmt                                            Provisioned\nmgmt               sveltos-p46z943e935h2vtev56i-sveltos-mgmt                                            Provisioned\nservice-cluster    deploy-cnpg-sveltos-service-cluster                    Provisioned\nservice-cluster    sveltos-xind5b6qvvrnbeur2flf-sveltos-service-cluster                                 Provisioned\nworkload-cluster   deploy-job-sveltos-workload-cluster                                                  Provisioned","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"vbnet"},"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_136":{"__typename":"Paragraph","id":"10b932665a51_136","name":"bb9d","type":"P","href":null,"layout":null,"metadata":null,"text":"You should now see the Job todo-table running in the workload-cluster.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":27,"end":37,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":22,"end":27,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_137":{"__typename":"Paragraph","id":"10b932665a51_137","name":"c179","type":"H3","href":null,"layout":null,"metadata":null,"text":"Path B: The Shortcut","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_138":{"__typename":"Paragraph","id":"10b932665a51_138","name":"c9ee","type":"H4","href":null,"layout":null,"metadata":null,"text":"1. Install sveltosctl, cert-manager, sveltos and add labels on the management cluster","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":85,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_139":{"__typename":"Paragraph","id":"10b932665a51_139","name":"ec7f","type":"PRE","href":null,"layout":null,"metadata":null,"text":"#MacOs\nsudo wget https:\u002F\u002Fgithub.com\u002Fprojectsveltos\u002Fsveltosctl\u002Freleases\u002Fdownload\u002Fv0.41.1\u002Fsveltosctl-darwin-arm64 -O \u002Fusr\u002Flocal\u002Fbin\u002Fsveltosctl\nsudo chmod +x \u002Fusr\u002Flocal\u002Fbin\u002Fsveltosctl\n\n#Linux\nsudo wget https:\u002F\u002Fgithub.com\u002Fprojectsveltos\u002Fsveltosctl\u002Freleases\u002Fdownload\u002Fv0.41.1\u002Fsveltosctl-linux-amd64 -O \u002Fusr\u002Flocal\u002Fbin\u002Fsveltosctl\nsudo chmod +x \u002Fusr\u002Flocal\u002Fbin\u002Fsveltosctl\n\n\n#Cert-Manager\nhelm install cert-manager jetstack\u002Fcert-manager --namespace cert-manager --create-namespace --version v1.16.1 --set crds.enabled=true\n\n\n#Sveltos\nhelm install projectsveltos projectsveltos\u002Fprojectsveltos -n projectsveltos --create-namespace\n\n#Label management cluster\nkubectl label sveltoscluster -n mgmt mgmt type=mgmt\n\n#grant extra permission.\nkubectl patch clusterrole addon-controller-role-extra --type='json' -p='[\n  {\n    \"op\": \"add\",\n    \"path\": \"\u002Frules\",\n    \"value\": [\n      {\n        \"apiGroups\": [\"\"],\n        \"resources\": [\"configmaps\", \"secrets\"],\n        \"verbs\": [\"*\"]\n      }\n    ]\n  }\n]'\n\n\n","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"bash"},"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_140":{"__typename":"Paragraph","id":"10b932665a51_140","name":"8401","type":"H4","href":null,"layout":null,"metadata":null,"text":"2. Register the Service Cluster","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_141":{"__typename":"Paragraph","id":"10b932665a51_141","name":"cb71","type":"PRE","href":null,"layout":null,"metadata":null,"text":"kubectl create ns service-cluster\nsveltosctl register cluster --namespace=service-cluster --cluster=service-cluster --fleet-cluster-context=service-cluster --labels=type=services","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"cpp"},"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_142":{"__typename":"Paragraph","id":"10b932665a51_142","name":"8647","type":"P","href":null,"layout":null,"metadata":null,"text":"Check labels:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_143":{"__typename":"Paragraph","id":"10b932665a51_143","name":"57f8","type":"PRE","href":null,"layout":null,"metadata":null,"text":"kubectl get sveltoscluster -A --show-labels\n\nNAMESPACE          NAME               READY   VERSION        LABELS\nmgmt               mgmt               true    v1.29.2+k3s1   projectsveltos.io\u002Fk8s-version=v1.29.2,sveltos-agent=present,type=mgmt\nservice-cluster    service-cluster    true    v1.29.2+k3s1   projectsveltos.io\u002Fk8s-version=v1.29.2,sveltos-agent=present,type=services","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"lua"},"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_144":{"__typename":"Paragraph","id":"10b932665a51_144","name":"69e2","type":"H4","href":null,"layout":null,"metadata":null,"text":"3. Deploy CloudNative-PG Operator on the Service Cluster","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_145":{"__typename":"Paragraph","id":"10b932665a51_145","name":"4e4b","type":"PRE","href":null,"layout":null,"metadata":null,"text":"kubectl apply -f https:\u002F\u002Fraw.githubusercontent.com\u002Fprojectsveltos\u002Fsveltos\u002Fmain\u002Fdocs\u002Fassets\u002Fcloudnative-pg.yaml","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"ruby"},"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_146":{"__typename":"Paragraph","id":"10b932665a51_146","name":"add1","type":"P","href":null,"layout":null,"metadata":null,"text":"Now you can see the deployed resources on the service cluster with:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_147":{"__typename":"Paragraph","id":"10b932665a51_147","name":"0145","type":"PRE","href":null,"layout":null,"metadata":null,"text":"sveltosctl show addons \n\n+-----------------------------------+----------------------------+------------------+-----------------------------------+---------+-------------------------------+---------------------------------------------+\n|              CLUSTER              |       RESOURCE TYPE        |    NAMESPACE     |               NAME                | VERSION |             TIME              |                  PROFILES                   |\n+-----------------------------------+----------------------------+------------------+-----------------------------------+---------+-------------------------------+---------------------------------------------+\n| service-cluster\u002Fservice-cluster   | helm chart                 | cnpg-system      | cnpg                              | 0.22.1  | 2024-11-02 11:35:40 +0100 CET | ClusterProfile\u002Fdeploy-cnpg                  |\n+-----------------------------------+----------------------------+------------------+-----------------------------------+---------+-------------------------------+---------------------------------------------+","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"sql"},"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_148":{"__typename":"Paragraph","id":"10b932665a51_148","name":"e0a1","type":"H4","href":null,"layout":null,"metadata":null,"text":"4. Instruct Sveltos to Automatically Deploy a PostgreSQL Database","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_149":{"__typename":"Paragraph","id":"10b932665a51_149","name":"bf04","type":"PRE","href":null,"layout":null,"metadata":null,"text":"kubectl apply -f https:\u002F\u002Fraw.githubusercontent.com\u002Fprojectsveltos\u002Fsveltos\u002Fmain\u002Fdocs\u002Fassets\u002Fauto-deploy-postgres-cluster.yaml\nkubectl apply -f https:\u002F\u002Fraw.githubusercontent.com\u002Fprojectsveltos\u002Fsveltos\u002Fmain\u002Fdocs\u002Fassets\u002Ffetch-postgres-data.yaml","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"bash"},"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_150":{"__typename":"Paragraph","id":"10b932665a51_150","name":"c645","type":"H4","href":null,"layout":null,"metadata":null,"text":"5. Register the Workload Cluster","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_151":{"__typename":"Paragraph","id":"10b932665a51_151","name":"9ec8","type":"PRE","href":null,"layout":null,"metadata":null,"text":"kubectl create ns workload-cluster\nsveltosctl register cluster --namespace=workload-cluster --cluster=workload-cluster --fleet-cluster-context=workload-cluster --labels=postgres=required","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"cpp"},"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_152":{"__typename":"Paragraph","id":"10b932665a51_152","name":"bfd2","type":"P","href":null,"layout":null,"metadata":null,"text":"Now Verify Sveltos deployed the Postgres Cluster and fetched the necessary info to connect:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_153":{"__typename":"Paragraph","id":"10b932665a51_153","name":"9283","type":"PRE","href":null,"layout":null,"metadata":null,"text":"kubectl get secret -n workload-cluster\n\n#output \nName                                  TYPE     DATA   AGE\nworkload-cluster-sveltos-kubeconfig   Opaque   1      47h\npg-credentials                        Opaque   2      47h","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"bash"},"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_154":{"__typename":"Paragraph","id":"10b932665a51_154","name":"70ce","type":"H4","href":null,"layout":null,"metadata":null,"text":"6. Deploy an Application that Accesses the PostgreSQL Database","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_155":{"__typename":"Paragraph","id":"10b932665a51_155","name":"b042","type":"PRE","href":null,"layout":null,"metadata":null,"text":"kubectl apply -f https:\u002F\u002Fraw.githubusercontent.com\u002Fprojectsveltos\u002Fsveltos\u002Fmain\u002Fdocs\u002Fassets\u002Fjob-to-create-table.yaml\n\nkubectl label sveltoscluster -n workload-cluster workload-cluster type=app","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"bash"},"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_156":{"__typename":"Paragraph","id":"10b932665a51_156","name":"9675","type":"P","href":null,"layout":null,"metadata":null,"text":"Check if provisioning worked as expected:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_157":{"__typename":"Paragraph","id":"10b932665a51_157","name":"7cba","type":"PRE","href":null,"layout":null,"metadata":null,"text":"kubectl get clustersummaries -A -owide\n\nNAMESPACE          NAME                                                   HELMCHARTS    KUSTOMIZEREFS   POLICYREFS\nmgmt               sveltos-1a6ec1ce3bandndeqixd-sveltos-mgmt                                            Provisioned\nmgmt               sveltos-p46z943e935h2vtev56i-sveltos-mgmt                                            Provisioned\nservice-cluster    deploy-cnpg-sveltos-service-cluster                    Provisioned\nservice-cluster    sveltos-xind5b6qvvrnbeur2flf-sveltos-service-cluster                                 Provisioned\nworkload-cluster   deploy-job-sveltos-workload-cluster                                                  Provisioned","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"bash"},"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_158":{"__typename":"Paragraph","id":"10b932665a51_158","name":"1eae","type":"P","href":null,"layout":null,"metadata":null,"text":"You should now see the Job todo-table running in the workload-cluster.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":27,"end":37,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_159":{"__typename":"Paragraph","id":"10b932665a51_159","name":"20f0","type":"P","href":null,"layout":null,"metadata":null,"text":"Congratulations! You’ve created an event-driven, managed Database-as-a-Service! You can further extend this setup by defining jobs that trigger credential sharing with users or services referenced by the UI, as shown in the initial example.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":16,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_160":{"__typename":"Paragraph","id":"10b932665a51_160","name":"f360","type":"H3","href":null,"layout":null,"metadata":null,"text":"Wrapping Up","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_161":{"__typename":"Paragraph","id":"10b932665a51_161","name":"402a","type":"P","href":null,"layout":null,"metadata":null,"text":"I can imagine you’re now wondering, where’s the GitOps part? The headline was meant to catch your attention? No. In reality, the Sveltos Addon-Controller workflow is based on the GitOps approach, but for a full GitOps experience, you can pair Sveltos with Flux CD — it’s already integrated. Why use Flux CD? To deploy ClusterProfiles and apply another Sveltos CustomResources, you’ll need GitOps Tools like Flux CD.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":243,"end":288,"href":"https:\u002F\u002Fprojectsveltos.github.io\u002Fsveltos\u002Faddons\u002Fexample_flux_sources\u002F","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":407,"end":414,"href":"https:\u002F\u002Fwww.google.com\u002Fsearch?client=safari&rls=en&q=flux+cd&ie=UTF-8&oe=UTF-8","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":318,"end":333,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":360,"end":375,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_162":{"__typename":"Paragraph","id":"10b932665a51_162","name":"eb87","type":"P","href":null,"layout":null,"metadata":null,"text":"This was just a small part of how you could implement it. Sveltos offers many different possibilities for providing event-driven managed services. At the same time, the managed service can be integrated into an internal developer platform to offer teams a self-service approach.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_163":{"__typename":"Paragraph","id":"10b932665a51_163","name":"2ef5","type":"P","href":null,"layout":null,"metadata":null,"text":"We have depicted the following scenario:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*1V_kMNCqBFPT6wzIKW1URw.gif":{"__typename":"ImageMetadata","id":"1*1V_kMNCqBFPT6wzIKW1URw.gif","originalHeight":620,"originalWidth":856,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:10b932665a51_164":{"__typename":"Paragraph","id":"10b932665a51_164","name":"fce5","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*1V_kMNCqBFPT6wzIKW1URw.gif"},"text":"Fig. 12: Relationship 1 K8s-Cluster : 1 PG-Cluster","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_165":{"__typename":"Paragraph","id":"10b932665a51_165","name":"da2b","type":"P","href":null,"layout":null,"metadata":null,"text":"Thus, we have created a 1:1 relationship between a workload cluster and a PostgreSQL cluster on the service cluster because we configured our ClusterProfiles based on the clusters’ labels.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_166":{"__typename":"Paragraph","id":"10b932665a51_166","name":"f9fa","type":"P","href":null,"layout":null,"metadata":null,"text":"There’s also an option to build something like this:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*Qw1q_8PMDz5Eya_wvGFW4g.gif":{"__typename":"ImageMetadata","id":"1*Qw1q_8PMDz5Eya_wvGFW4g.gif","originalHeight":691,"originalWidth":856,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:10b932665a51_167":{"__typename":"Paragraph","id":"10b932665a51_167","name":"4bdb","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*Qw1q_8PMDz5Eya_wvGFW4g.gif"},"text":"Fig. 13: Relationship 1 K8s-Cluster: N-PG-Cluster","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_168":{"__typename":"Paragraph","id":"10b932665a51_168","name":"bc0b","type":"P","href":null,"layout":null,"metadata":null,"text":"Instead of responding to the cluster’s labels, you could use a ConfigMap, for example, that indicates the need for a PostgreSQL cluster. Based on this, Sveltos can then create multiple PostgreSQL clusters per namespace\u002FConfigMap. This would be too much for this blog, but you can find instructions on how to do it HERE:","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":301,"end":319,"href":"https:\u002F\u002Fprojectsveltos.github.io\u002Fsveltos\u002Fevents\u002Fdb-as-a-service-multiple-db-per-cluster\u002F","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":314,"end":318,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_169":{"__typename":"Paragraph","id":"10b932665a51_169","name":"a012","type":"P","href":null,"layout":null,"metadata":null,"text":"Furthermore, if you want to address security concerns and don’t want the credentials for all managed services to reside in the management cluster, you can implement the following:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*xevorSDulQknBOilv4wtFw.gif":{"__typename":"ImageMetadata","id":"1*xevorSDulQknBOilv4wtFw.gif","originalHeight":691,"originalWidth":856,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:10b932665a51_170":{"__typename":"Paragraph","id":"10b932665a51_170","name":"acf7","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*xevorSDulQknBOilv4wtFw.gif"},"text":"Fig. 14: Relationship 1 K8s-Cluster: N PG-Cluster and increased Security","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_171":{"__typename":"Paragraph","id":"10b932665a51_171","name":"b9be","type":"P","href":null,"layout":null,"metadata":null,"text":"Here, the credentials are stored in the respective workload cluster.\nHopefully, you can see that the possibilities are enormous, and your imagination might be the only limiting factor here.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_172":{"__typename":"Paragraph","id":"10b932665a51_172","name":"122a","type":"P","href":null,"layout":null,"metadata":null,"text":"If you’re building exciting solutions, feel free to share them in the form of a blog, tutorial, etc. But even more important, if you believe in open-source and live by this philosophy, please leave a ⭐️! Even cooler would be contributing through a blog or, if you’re skilled enough, directly to the Projectsveltos itself.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":185,"end":202,"href":"https:\u002F\u002Fgithub.com\u002Fprojectsveltos\u002Faddon-controller","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":299,"end":313,"href":"https:\u002F\u002Fgithub.com\u002Fprojectsveltos","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_173":{"__typename":"Paragraph","id":"10b932665a51_173","name":"1fa0","type":"P","href":null,"layout":null,"metadata":null,"text":"P.S. Please leave a Comment which Path you choose — are you the “I need to know every detail” type, or the “just hit deploy and pray” type? 😬","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":4,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_174":{"__typename":"Paragraph","id":"10b932665a51_174","name":"e877","type":"H3","href":null,"layout":null,"metadata":null,"text":"Contact Information","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:10b932665a51_175":{"__typename":"Paragraph","id":"10b932665a51_175","name":"4107","type":"P","href":null,"layout":null,"metadata":null,"text":"Got questions, want to chat, or just keen to stay connected? Skip the Medium comments and let’s connect on LinkedIn 🤙. Don’t forget to subscribe to the Medium Newsletter so you never miss an update!","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":107,"end":115,"href":"http:\u002F\u002Fwww.linkedin.com\u002Fin\u002Flajko","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":153,"end":170,"href":"\u002F@artem_lajko\u002Fsubscribe","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"CollectionViewerEdge:collectionId:5b301f10ddcd-viewerId:lo_7ce4e254e84e":{"__typename":"CollectionViewerEdge","id":"collectionId:5b301f10ddcd-viewerId:lo_7ce4e254e84e","isEditor":false,"isMuting":false},"UserViewerEdge:userId:2099f3d62707-viewerId:lo_7ce4e254e84e":{"__typename":"UserViewerEdge","id":"userId:2099f3d62707-viewerId:lo_7ce4e254e84e","isMuting":false},"ImageMetadata:1*jWhTrIoYwTUdKuVXycqAaw.png":{"__typename":"ImageMetadata","id":"1*jWhTrIoYwTUdKuVXycqAaw.png","originalWidth":800,"originalHeight":152},"PostViewerEdge:postId:cbe3de4920d5-viewerId:lo_7ce4e254e84e":{"__typename":"PostViewerEdge","shouldIndexPostForExternalSearch":true,"id":"postId:cbe3de4920d5-viewerId:lo_7ce4e254e84e"},"Tag:kubernetes":{"__typename":"Tag","id":"kubernetes","displayTitle":"Kubernetes","normalizedTagSlug":"kubernetes"},"Tag:cloud":{"__typename":"Tag","id":"cloud","displayTitle":"Cloud","normalizedTagSlug":"cloud"},"Tag:cloud-computing":{"__typename":"Tag","id":"cloud-computing","displayTitle":"Cloud Computing","normalizedTagSlug":"cloud-computing"},"Tag:gitops":{"__typename":"Tag","id":"gitops","displayTitle":"Gitops","normalizedTagSlug":"gitops"},"Tag:devops":{"__typename":"Tag","id":"devops","displayTitle":"DevOps","normalizedTagSlug":"devops"},"Post:cbe3de4920d5":{"__typename":"Post","id":"cbe3de4920d5","collection":{"__ref":"Collection:5b301f10ddcd"},"content({\"postMeteringOptions\":{}})":{"__typename":"PostContent","isLockedPreviewOnly":false,"bodyModel":{"__typename":"RichText","sections":[{"__typename":"Section","name":"d61a","startIndex":0,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null}],"paragraphs":[{"__ref":"Paragraph:10b932665a51_0"},{"__ref":"Paragraph:10b932665a51_1"},{"__ref":"Paragraph:10b932665a51_2"},{"__ref":"Paragraph:10b932665a51_3"},{"__ref":"Paragraph:10b932665a51_4"},{"__ref":"Paragraph:10b932665a51_5"},{"__ref":"Paragraph:10b932665a51_6"},{"__ref":"Paragraph:10b932665a51_7"},{"__ref":"Paragraph:10b932665a51_8"},{"__ref":"Paragraph:10b932665a51_9"},{"__ref":"Paragraph:10b932665a51_10"},{"__ref":"Paragraph:10b932665a51_11"},{"__ref":"Paragraph:10b932665a51_12"},{"__ref":"Paragraph:10b932665a51_13"},{"__ref":"Paragraph:10b932665a51_14"},{"__ref":"Paragraph:10b932665a51_15"},{"__ref":"Paragraph:10b932665a51_16"},{"__ref":"Paragraph:10b932665a51_17"},{"__ref":"Paragraph:10b932665a51_18"},{"__ref":"Paragraph:10b932665a51_19"},{"__ref":"Paragraph:10b932665a51_20"},{"__ref":"Paragraph:10b932665a51_21"},{"__ref":"Paragraph:10b932665a51_22"},{"__ref":"Paragraph:10b932665a51_23"},{"__ref":"Paragraph:10b932665a51_24"},{"__ref":"Paragraph:10b932665a51_25"},{"__ref":"Paragraph:10b932665a51_26"},{"__ref":"Paragraph:10b932665a51_27"},{"__ref":"Paragraph:10b932665a51_28"},{"__ref":"Paragraph:10b932665a51_29"},{"__ref":"Paragraph:10b932665a51_30"},{"__ref":"Paragraph:10b932665a51_31"},{"__ref":"Paragraph:10b932665a51_32"},{"__ref":"Paragraph:10b932665a51_33"},{"__ref":"Paragraph:10b932665a51_34"},{"__ref":"Paragraph:10b932665a51_35"},{"__ref":"Paragraph:10b932665a51_36"},{"__ref":"Paragraph:10b932665a51_37"},{"__ref":"Paragraph:10b932665a51_38"},{"__ref":"Paragraph:10b932665a51_39"},{"__ref":"Paragraph:10b932665a51_40"},{"__ref":"Paragraph:10b932665a51_41"},{"__ref":"Paragraph:10b932665a51_42"},{"__ref":"Paragraph:10b932665a51_43"},{"__ref":"Paragraph:10b932665a51_44"},{"__ref":"Paragraph:10b932665a51_45"},{"__ref":"Paragraph:10b932665a51_46"},{"__ref":"Paragraph:10b932665a51_47"},{"__ref":"Paragraph:10b932665a51_48"},{"__ref":"Paragraph:10b932665a51_49"},{"__ref":"Paragraph:10b932665a51_50"},{"__ref":"Paragraph:10b932665a51_51"},{"__ref":"Paragraph:10b932665a51_52"},{"__ref":"Paragraph:10b932665a51_53"},{"__ref":"Paragraph:10b932665a51_54"},{"__ref":"Paragraph:10b932665a51_55"},{"__ref":"Paragraph:10b932665a51_56"},{"__ref":"Paragraph:10b932665a51_57"},{"__ref":"Paragraph:10b932665a51_58"},{"__ref":"Paragraph:10b932665a51_59"},{"__ref":"Paragraph:10b932665a51_60"},{"__ref":"Paragraph:10b932665a51_61"},{"__ref":"Paragraph:10b932665a51_62"},{"__ref":"Paragraph:10b932665a51_63"},{"__ref":"Paragraph:10b932665a51_64"},{"__ref":"Paragraph:10b932665a51_65"},{"__ref":"Paragraph:10b932665a51_66"},{"__ref":"Paragraph:10b932665a51_67"},{"__ref":"Paragraph:10b932665a51_68"},{"__ref":"Paragraph:10b932665a51_69"},{"__ref":"Paragraph:10b932665a51_70"},{"__ref":"Paragraph:10b932665a51_71"},{"__ref":"Paragraph:10b932665a51_72"},{"__ref":"Paragraph:10b932665a51_73"},{"__ref":"Paragraph:10b932665a51_74"},{"__ref":"Paragraph:10b932665a51_75"},{"__ref":"Paragraph:10b932665a51_76"},{"__ref":"Paragraph:10b932665a51_77"},{"__ref":"Paragraph:10b932665a51_78"},{"__ref":"Paragraph:10b932665a51_79"},{"__ref":"Paragraph:10b932665a51_80"},{"__ref":"Paragraph:10b932665a51_81"},{"__ref":"Paragraph:10b932665a51_82"},{"__ref":"Paragraph:10b932665a51_83"},{"__ref":"Paragraph:10b932665a51_84"},{"__ref":"Paragraph:10b932665a51_85"},{"__ref":"Paragraph:10b932665a51_86"},{"__ref":"Paragraph:10b932665a51_87"},{"__ref":"Paragraph:10b932665a51_88"},{"__ref":"Paragraph:10b932665a51_89"},{"__ref":"Paragraph:10b932665a51_90"},{"__ref":"Paragraph:10b932665a51_91"},{"__ref":"Paragraph:10b932665a51_92"},{"__ref":"Paragraph:10b932665a51_93"},{"__ref":"Paragraph:10b932665a51_94"},{"__ref":"Paragraph:10b932665a51_95"},{"__ref":"Paragraph:10b932665a51_96"},{"__ref":"Paragraph:10b932665a51_97"},{"__ref":"Paragraph:10b932665a51_98"},{"__ref":"Paragraph:10b932665a51_99"},{"__ref":"Paragraph:10b932665a51_100"},{"__ref":"Paragraph:10b932665a51_101"},{"__ref":"Paragraph:10b932665a51_102"},{"__ref":"Paragraph:10b932665a51_103"},{"__ref":"Paragraph:10b932665a51_104"},{"__ref":"Paragraph:10b932665a51_105"},{"__ref":"Paragraph:10b932665a51_106"},{"__ref":"Paragraph:10b932665a51_107"},{"__ref":"Paragraph:10b932665a51_108"},{"__ref":"Paragraph:10b932665a51_109"},{"__ref":"Paragraph:10b932665a51_110"},{"__ref":"Paragraph:10b932665a51_111"},{"__ref":"Paragraph:10b932665a51_112"},{"__ref":"Paragraph:10b932665a51_113"},{"__ref":"Paragraph:10b932665a51_114"},{"__ref":"Paragraph:10b932665a51_115"},{"__ref":"Paragraph:10b932665a51_116"},{"__ref":"Paragraph:10b932665a51_117"},{"__ref":"Paragraph:10b932665a51_118"},{"__ref":"Paragraph:10b932665a51_119"},{"__ref":"Paragraph:10b932665a51_120"},{"__ref":"Paragraph:10b932665a51_121"},{"__ref":"Paragraph:10b932665a51_122"},{"__ref":"Paragraph:10b932665a51_123"},{"__ref":"Paragraph:10b932665a51_124"},{"__ref":"Paragraph:10b932665a51_125"},{"__ref":"Paragraph:10b932665a51_126"},{"__ref":"Paragraph:10b932665a51_127"},{"__ref":"Paragraph:10b932665a51_128"},{"__ref":"Paragraph:10b932665a51_129"},{"__ref":"Paragraph:10b932665a51_130"},{"__ref":"Paragraph:10b932665a51_131"},{"__ref":"Paragraph:10b932665a51_132"},{"__ref":"Paragraph:10b932665a51_133"},{"__ref":"Paragraph:10b932665a51_134"},{"__ref":"Paragraph:10b932665a51_135"},{"__ref":"Paragraph:10b932665a51_136"},{"__ref":"Paragraph:10b932665a51_137"},{"__ref":"Paragraph:10b932665a51_138"},{"__ref":"Paragraph:10b932665a51_139"},{"__ref":"Paragraph:10b932665a51_140"},{"__ref":"Paragraph:10b932665a51_141"},{"__ref":"Paragraph:10b932665a51_142"},{"__ref":"Paragraph:10b932665a51_143"},{"__ref":"Paragraph:10b932665a51_144"},{"__ref":"Paragraph:10b932665a51_145"},{"__ref":"Paragraph:10b932665a51_146"},{"__ref":"Paragraph:10b932665a51_147"},{"__ref":"Paragraph:10b932665a51_148"},{"__ref":"Paragraph:10b932665a51_149"},{"__ref":"Paragraph:10b932665a51_150"},{"__ref":"Paragraph:10b932665a51_151"},{"__ref":"Paragraph:10b932665a51_152"},{"__ref":"Paragraph:10b932665a51_153"},{"__ref":"Paragraph:10b932665a51_154"},{"__ref":"Paragraph:10b932665a51_155"},{"__ref":"Paragraph:10b932665a51_156"},{"__ref":"Paragraph:10b932665a51_157"},{"__ref":"Paragraph:10b932665a51_158"},{"__ref":"Paragraph:10b932665a51_159"},{"__ref":"Paragraph:10b932665a51_160"},{"__ref":"Paragraph:10b932665a51_161"},{"__ref":"Paragraph:10b932665a51_162"},{"__ref":"Paragraph:10b932665a51_163"},{"__ref":"Paragraph:10b932665a51_164"},{"__ref":"Paragraph:10b932665a51_165"},{"__ref":"Paragraph:10b932665a51_166"},{"__ref":"Paragraph:10b932665a51_167"},{"__ref":"Paragraph:10b932665a51_168"},{"__ref":"Paragraph:10b932665a51_169"},{"__ref":"Paragraph:10b932665a51_170"},{"__ref":"Paragraph:10b932665a51_171"},{"__ref":"Paragraph:10b932665a51_172"},{"__ref":"Paragraph:10b932665a51_173"},{"__ref":"Paragraph:10b932665a51_174"},{"__ref":"Paragraph:10b932665a51_175"}]},"validatedShareKey":"","shareKeyCreator":null},"creator":{"__ref":"User:2099f3d62707"},"inResponseToEntityType":null,"isLocked":false,"isMarkedPaywallOnly":false,"lockedSource":"LOCKED_POST_SOURCE_NONE","mediumUrl":"https:\u002F\u002Fitnext.io\u002Fbuilding-your-own-event-driven-internal-developer-platform-with-gitops-and-sveltos-cbe3de4920d5","primaryTopic":null,"topics":[],"isPublished":true,"latestPublishedVersion":"10b932665a51","visibility":"PUBLIC","postResponses":{"__typename":"PostResponses","count":0},"clapCount":90,"allowResponses":true,"isLimitedState":false,"title":"Building Your Own Event-Driven Internal Developer Platform with GitOps and Sveltos","isSeries":false,"sequence":null,"uniqueSlug":"building-your-own-event-driven-internal-developer-platform-with-gitops-and-sveltos-cbe3de4920d5","socialTitle":"","socialDek":"","canonicalUrl":"","metaDescription":"","latestPublishedAt":1731316244580,"readingTime":15.481132075471699,"previewContent":{"__typename":"PreviewContent","subtitle":"Discover how to create an event-driven cloud environment that mirrors the architecture used by cloud providers"},"previewImage":{"__ref":"ImageMetadata:1*0iYxYy_pjaUVW0nETz6vQg.gif"},"isShortform":false,"seoTitle":"","firstPublishedAt":1731316244580,"updatedAt":1731528863815,"shortformType":"SHORTFORM_TYPE_LINK","seoDescription":"","viewerEdge":{"__ref":"PostViewerEdge:postId:cbe3de4920d5-viewerId:lo_7ce4e254e84e"},"isSuspended":false,"license":"ALL_RIGHTS_RESERVED","tags":[{"__ref":"Tag:kubernetes"},{"__ref":"Tag:cloud"},{"__ref":"Tag:cloud-computing"},{"__ref":"Tag:gitops"},{"__ref":"Tag:devops"}],"isNewsletter":false,"statusForCollection":"APPROVED","pendingCollection":null,"detectedLanguage":"en","wordCount":3705,"layerCake":6,"responsesLocked":false}}</script><script src="https://cdn-client.medium.com/lite/static/js/manifest.29c81b71.js"></script><script src="https://cdn-client.medium.com/lite/static/js/9865.1496d74a.js"></script><script src="https://cdn-client.medium.com/lite/static/js/main.162991f9.js"></script><script src="https://cdn-client.medium.com/lite/static/js/instrumentation.d9108df7.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/reporting.ff22a7a5.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/9120.5df29668.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5049.d1ead72d.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/4810.6318add7.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6618.db187378.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2707.a4e221ac.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/9977.933c1c9a.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/8599.73cb8339.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5250.9f9e01d2.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/9898.d9e26c5e.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2648.26563adf.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/8393.826a25fb.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/4863.28ab43f6.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6589.247b1d02.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5642.0f82ef97.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6546.cd03f950.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6834.8aa8d357.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2420.2a5e2d95.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/839.1c286b32.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/7975.60bcefe8.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2106.0350840b.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/7394.73a57633.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5794.9e8ff5dd.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/8204.7749bc66.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/4391.59acaed3.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/PostPage.MainContent.2dc8b1c6.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/8414.6565ad5f.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/3974.8d3e0217.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2527.d5e0c2f5.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/PostResponsesContent.7ad7ca92.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/responses.editor.5a11f4da.chunk.js"></script><script>window.main();</script></body></html>