# 新一代可观测性：平台工程中的监控与分析

可观测性通过提供实时洞察、异常的主动检测以及信息化的决策制定，重塑了平台管理。

这是一部关于平台工程的诗歌。译自 [Next-Gen Observability: Monitoring and Analytics in Platform Engineering](https://thenewstack.io/next-gen-observability-monitoring-and-analytics-in-platform-engineering/) 。

![](https://cdn.thenewstack.io/media/2023/09/89cda2c6-cats-eyes-2944820_1280-1024x682.jpg)
*图片来自Pixabay 的 Михаил Прокопенко*

随着应用程序变得越来越复杂、动态和相互关联，需要强大、有弹性的平台来支持它们已经成为一个基础要求。[平台工程](https://thenewstack.io/platform-engineering-is-a-bandwagon-worth-jumping-on/)是打造这种强大基础的艺术，涵盖从编排微服务到大规模管理基础设施的各个方面。

在这种背景下，新一代可观测性的概念作为平台工程卓越的关键使能者而出现。可观测性超越了传统的监控和分析边界，为复杂的软件生态系统的内部运作提供全面深入的视图。它不仅仅停留在可见性，而是赋予平台工程师洞察复杂分布式系统、快速响应事故以及主动优化性能的知识和工具。

## 平台工程特有的挑战

平台工程提出了需要创新解决方案的独特挑战。随着平台的发展，它本质上会变得更加复杂，包含大量相互关联的服务、微服务、容器等。这种复杂性引入了许多潜在的陷阱：

- **分布式特性**：服务分布在各个节点和位置，很难理解它们之间的交互和依赖关系。
- **扩展需求**：随着平台使用规模的扩大，确保所有组件无缝可扩展变成一个优先事项，这需要动态资源分配和负载均衡。
- **弹性要求**：平台故障或性能下降会对依赖它们的应用程序产生连锁反应，因此平台弹性至关重要。

## 新一代可观测性的角色

新一代可观测性以变革力量的姿态迎头直击这些挑战。它为平台工程师提供了看透表面，深入洞察服务交互内在运行、跟踪数据流动以及理解整个平台性能特性的工具。通过聚合指标、日志和分布式追踪的数据，可观测性提供了超越独立监控工具局限性的全面视角。

本文探索了新一代可观测性与平台工程的结合。它深入探讨了可观测性如何通过提供实时见解、异常的主动检测以及优化资源利用的信息化决策重塑平台管理。通过将可观测性的力量与平台工程的艺术相结合，组织可以构建弹性强大、高性能的平台，这些平台构成了现代应用程序的基石。

## 理解平台工程

平台工程在塑造应用程序构建和交付的基础方面发挥着关键作用。在其核心，平台工程包括设计、开发和管理支持整个应用生态系统的基础设施、服务和工具。

> 平台工程是为了让应用程序蓬勃发展而创建所需技术基础的学科。它涉及创建一个内聚的服务、库和框架生态系统，以抽象复杂性，使应用开发人员可以专注于构建差异化功能，而不是与基础设施的复杂性作斗争。

平台的一个决定性特征是它们错综复杂的相互关联的服务和组件网。这些组件范围从微服务到数据库、负载平衡器、缓存系统等。这些元素无缝协作以提供应用程序所依赖的平台所需的功能。

平台环境的管理具有内在的复杂性。协调各种服务、确保无缝通信、管理资源的扩展和缩减以及维持一致的性能水平提出了一个多方面的挑战。平台工程师必须在考虑安全性、可扩展性和可维护性等因素的同时应对这些复杂性。

平台故障造成的影响会超出平台本身的范围，给整个应用生态系统投下广泛的阴影。这些干扰会产生连锁反应，导致宕机时间、数据丢失以及愤怒和失望的客户群。其影响不仅仅是直接的财政损失；它们还会对一个公司的声誉造成长期的损害，侵蚀信任和信心。

在当代环境中，用户期望依赖于始终如一的、可靠的体验的交付。平台性能上的任何失误都有可能损害用户满意度。反过来，这可能导致令人沮丧的连锁反应，表现为用户流失和错过业务增长机会。保障高质量用户体验的先决条件需要平台本身的健壮性。

进入可观测性的关键概念——现代平台工程体系结构的基石。可观测性充当希望的灯塔，为平台工程师提供了一套工具，这些工具超越了单纯的可见性。这些工具使工程师能够超越表面，深入探索平台核心的复杂机制。

这种动态洞察力使他们能够浏览复杂交互的迷宫，及时诊断问题并实时提供补救措施。凭借其揭示平台内部运作的深刻能力，可观测性使工程师能够快速识别和解决问题，从而减轻干扰的影响并加强平台抵御逆境的弹性。

## 平台工程下一代可观测性的核心概念

在平台工程的复杂性中，大量服务协同工作以提供一系列功能，理解分布式平台中的复杂相互作用提出了一个艰巨的挑战。

这个挑战的核心在于一种由相互关联的服务网组成的复杂性，每个服务都有特定的任务和职责。这些服务的范围通常跨越大量节点、容器，甚至地理位置。因此，跟踪单个请求在这个复杂网络中导航的过程成为一个充满复杂性和细微差异的努力。

在这种迷宫般的环境中，分布式跟踪的灯塔出现为一个强大的解决方案。这种技术，类似于解开一根紧密编织的线，照亮了请求在服务范围内的流动。通过捕获这些复杂的旅程，分布式跟踪揭示了服务依赖性、导致延迟的瓶颈以及复杂的通信模式的内在联系的见解。仿佛被赋予了看到编织平台结构的线的能力，平台工程师获得了每个请求所进行的旅程的整体视图。这种新发现的清晰度使他们能够精确定位问题并敏捷优化。

然而，分布式跟踪的优势超越了单个服务的小天地。得到的洞察力延伸其范围，涵盖整个平台。平台工程师利用这些洞察力发现跨多个服务的系统性问题。影响整个平台的瓶颈、延迟波动和故障被及时带到光明中。其结果影响深远：性能提高，宕机时间缩短，最终，显著提高了用户体验。在平台工程的复杂舞蹈中，分布式跟踪成为一个灯塔，驱散复杂性，照亮通往最佳性能和弹性的途径。

在可观测性的核心，指标和监控占据中心舞台，提供平台活力和效率的全景视图。

指标，那些可量化的路标，展开了一个数据编年史，封装了平台的多方面功能。从 CPU 和内存的利用率到响应时间的迅速节奏和错误率的拼图，指标展示内部运作，显示了平台运营健康的清晰画面。

这对角色的一个并行功能是监控的艺术——一种持续的监视，揭示了预期标准的偏差。充当数据哨兵的指标会勤奋地标记资源消耗的突然激增、令人困惑的错误率出现或性能建立模式的偏差。然而，监控的作用超越了简单的警报；它是一种前瞻性的灯塔。通过持续监测这些指标，监控预测可扩展性的需求。随着平台使用的起伏，用户和请求的激增和衰退，平台的编排必须与之同步。主动监控警惕地站岗，确保动态分配资源，并准备好满足需求的激增。

在指标和监控的舞蹈中，平台可扩展性的动态性凸显出来。在现代平台的编年史中，可扩展性被编织为一个内在的线程。随着用户及其请求的起伏，服务及其负载的变化，平台必须是可塑性的，并能够优雅地扩展和收缩。 可观测性扮演连接角色，通过实时心跳的转化赋能平台工程师。依靠可观测性提供的洞察，工程师监督平台性能的起伏，确保采取主动而不是反应式的扩展方法。因此，随着平台交响乐的展开，可观测性奏出其和谐的音符，在不同负载下指挥平台的优雅芭蕾舞。

在平台工程的复杂编年史中，日志出现为揭示平台事件故事的文本编年史。

日志扮演着文书的角色，记录平台领域内事件、错误和任务的叙述。通过其精心结构的条目，它们为各个组件所承担的努力创建了一个按时间顺序的踪迹。从日志中获得的见解为可观测性提供了一个上下文背景，使平台工程师能够解剖导致异常或事故的序列。

然而，在复杂平台内多服务环境的背景下，聚合和分析日志变得令人生畏。随着大量服务的共存，在各种节点和实例上收集日志的任务变得艰巨。将这些分散的日志统一起来创造一个连贯的叙述提出了一个巨大的挑战，这种环境生成的海量日志也加剧了这个问题。

解决这个复杂挑战的解决方案为高效日志分析铺平了道路。以 ELK 堆栈(包括 Elasticsearch、Logstash 和 Kibana)为代表的日志聚合工具就是良好的指引灯塔。这些工具促进了日志的集中收集、索引和可视化。平台工程师搜索、过滤和分析日志的努力得到这些工具的加强，提供了简化的过程。快速跟踪事故起源成为现实，使工程师在有效故障排除和缩短解决时间方面更上一层楼。随着日志从单纯的条目发展成为洞见拼图，这些工具在可观测性的增强下，照亮了通往增强平台理解力和弹性的道路。

## 在平台工程中实施下一代可观测性

在平台内广泛的服务中进行代码 Instrumenting 是实现细粒度可观测性的门户。

这里有一些要考虑的因素:

- **细粒度可观测性数据**：检测涉及 Instrument 具有监控功能的代码，以洞察服务行为。这使工程师能够在代码级别跟踪性能指标、捕获追踪并记录事件。细粒度的可观测性数据提供了对每个服务交互的细致视图，有助于全面理解。
- **检测的最佳实践**：有效的 Instrumenting 需要深思熟虑的方法。平台工程师需要仔细选择要捕获的指标、跟踪和日志，而不引入过多开销。最佳实践包括使检测与关键业务和运营指标保持一致，考虑采样策略以管理数据量，并确保与可观测性工具兼容。
- **代码级可观测性用于识别瓶颈**：代码级可观测性在识别影响平台性能的瓶颈方面发挥关键作用。工程师可以跟踪请求流、查明延迟高峰并分析服务交互。通过理解服务如何协作和识别资源密集型组件，工程师可以优化平台以提高效率。

## 主动监控和事故响应

主动监控使平台工程师能够在问题升级成重大事故之前预先识别潜在问题。

主动监控方法涉及设置警报和触发器，基于预定义阈值检测异常。通过持续监测指标，工程师可以及早发现预期行为的偏差。这使他们能够在用户受影响之前采取纠正措施。

可观测性数据可无缝集成到事故响应工作流程中。发生事故时，工程师可以访问实时的可观测性洞察力，快速诊断根本原因。这通过提供即时上下文和可操作的数据来缩短平均故障解决时间(MTTR)。

可观测性在事故期间提供对整个平台行为的实时洞察。工程师可以分析跟踪、指标和日志，以跟踪问题在服务之间的传播。这有助于准确的根本原因分析和快速补救。

## 随着平台增长扩展可观测性

随着平台的增长扩展可观测性带来了与数据量、资源分配和工具功能相关的挑战。大量服务生成的海量可观测性数据可能会压垮传统方法。

为了管理涌入的数据，可观测性管道发挥作用。这些管道促进了可观测性数据的收集、聚合和处理。通过战略性地设计管道，工程师可以管理数据流、过滤噪音并确保相关的洞察力可供分析。

可观测性不是静态的；它与平台扩展同步发展。随着平台架构、服务和用户群的演变，工程师需要不断评估和调整他们的可观测性策略。这可以确保可观测性在支持决策和优化方面保持有效。

## 通过可观测性实现平台工程卓越

在其核心，可观测性为平台资源利用的动态交响乐展开实时洞察。诸如 CPU 使用率的节奏、内存消耗的节拍和网络延迟的音调等指标奏出和谐的音符，为工程师提供指引。这些指标就像乐谱上的音符，揭示了使用不足的仪器和过度使用的和弦。这样的洞察推动工程师明智地分配资源，灵活地在扩展和保守、平衡和分配之间取得平衡。

然而，可观测性不仅仅是一个地图；它是艺术家的调色板。用数据浸润的画笔，它赋予工程师打造精准表现的能力。在可观测性数据的复杂画布中蕴含着艺术家诊断性能限制和低效领域的能力。跟踪和指标揭示秘密，指出延迟音高、过度资源奢侈和服务依赖关系的互动导致的减速。依托这些启示，工程师承担起娴熟的斗篷，微调平台的组件。目标不外乎是最佳性能，一种效率的交响乐，在整个平台中回荡。

生动的案例研究作为案例，提供了可观测性转型影响的生动画面。这些故事讲述了通过可观测性获得的洞察如何产生有形的性能改进。这些编年史讲述了响应时间缩短、精简操作和协调体验的故事。这些不仅仅是轶事，而是可观测性数据编织进工程决策的织物，指挥性能飞跃的展示，产生可识别的收益。在平台工程的复杂编舞中，可观测性扮演多个角色——一个指导者、作曲家和性能增强的建筑师。

## 确保业务连续性和用户满意度

在业务运营和用户满意度的复杂互动中，可观测性作为一个安全网出现，作为监视商业连续性和提高用户满意度的哨兵。

在业务运营领域，可观测性是抵御平台中断风暴的哨兵。这种中断的动荡会扰乱业务运营，侵蚀用户信任的基石。可观测性介入，指挥故障识别和解决的敏捷芭蕾。在这种动态舞蹈中，工程师利用实时洞察作为灯塔，精确定位导致问题的难以捉摸的根本原因。可观测性的力量确保恢复迅速，影响减小，这证明了它在最小化宕机影响方面的作用。

然而，可观测性的画布延伸到业务运营领域之外。它将触角伸向用户体验的边界。在这里，它揭示了一个引人注目的相关性——平台健康状况与用户满意度保持同步起舞。迟缓的响应、不协调的错误或者服务的明显缺失会破坏用户体验，导致失望甚至流失。可观测性数据照亮的用户互动门户成为工程师透过的望远镜。这一视角让工程师一窥用户的情绪及其互动。可观测性揭示的洞察为工程师铺平了一条道路，使平台行为与用户情绪保持一致，编排促进积极体验的主动措施。

最后，案例研究阐明了可观测性的变革力量。这些真实世界的故事讲述了可观测性驱动的优化如何与用户满意度的织物交织。

从精简电子商务领域的结账过程到优化视频流体验，这些例子证明了可观测性在打造以用户为中心的平台方面的作用。在这个平台工程交响乐中，可观测性扮演指挥的角色，协调业务连续性与用户满意度的和谐。

## 结论

可观测性不仅仅是一个工具；它是一个思维方式，重塑我们如何理解、管理和优化平台。软件工程世界正在发展，拥抱下一代可观测性力量的人将更好地 Equipped 构建健壮、可扩展和以用户为中心的平台，定义未来。

在你的平台工程之旅中，记住通往卓越的道路由洞察、数据和可观测性铺就。接受这种范式转变，通过将可观测性融入战略的 DNA，使你的平台工程努力达到新的高度。你的平台不仅会经得起复杂性的风暴考验，还将变得更强大、更具弹性，并准备重新定义可能的界限。
