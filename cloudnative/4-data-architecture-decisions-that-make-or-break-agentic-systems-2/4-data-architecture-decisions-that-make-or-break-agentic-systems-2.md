
<!--
title: S3是新网络：重塑云时代数据架构
cover: https://cdn.thenewstack.io/media/2026/01/d21578c8-sara-oliveira-_ds9hwwuy1q-unsplash-scaled.jpg
summary: 本文探讨了云对象存储（尤其是S3）如何颠覆传统数据库架构，实现计算与存储分离。这种模式带来更高的可扩展性、成本效益和灵活性，并催生了瞬时计算集群、事件驱动工作流及AI/ML管道等新架构。TiDB X作为实例，展示了S3如何赋能云数据库，使其在AI时代实现弹性、高性能和简化管理，摆脱传统网络限制，使数据无处不在，易于访问。
-->

本文探讨了云对象存储（尤其是S3）如何颠覆传统数据库架构，实现计算与存储分离。这种模式带来更高的可扩展性、成本效益和灵活性，并催生了瞬时计算集群、事件驱动工作流及AI/ML管道等新架构。TiDB X作为实例，展示了S3如何赋能云数据库，使其在AI时代实现弹性、高性能和简化管理，摆脱传统网络限制，使数据无处不在，易于访问。

> 译自：[S3 is the new network: Rethinking data architecture for the cloud era](https://thenewstack.io/4-data-architecture-decisions-that-make-or-break-agentic-systems-2/)
> 
> 作者：Max Liu

几十年来，分布式[数据库](https://thenewstack.io/databases/)一直基于存储将与计算紧密结合的假设而构建。

理由是，[数据](https://thenewstack.io/data/)在网络上传输的距离越远，延迟的可能性就越大。本地RAID（独立磁盘冗余阵列）、网络附加存储（NAS）和集群文件系统使数据保持接近，从而实现快速轻松的访问。

但在分布式系统中，将整个数据存储库保持在靠近计算的位置会使扩展变得缓慢、繁琐且昂贵。每次复制节点或集群时，其关联数据也必须随之复制。

这并不理想，但直到最近，还没有任何合理的替代方案。数据库必须扩展。必须满足服务级别协议（SLA）。广域网络不足以支持大规模高性能数据库。因此，数据库设计者投入了大量精力来解决与协调、一致性和复制逻辑相关的问题。

但想象一下情况有所不同。如果他们不必担心网络、数据存储在哪里，或者如何将其从A点传输到B点，那会怎么样？他们会如何设计数据库呢？

这就是云对象存储服务（如[AWS S3](https://thenewstack.io/werner-vogels-6-lessons-for-keeping-systems-simple/)、[Google Cloud Storage](https://thenewstack.io/storage/cloud-storage-services-for-cloud-native-applications/)和Microsoft Blob Storage）的出现引发的引人入胜的问题。

## 什么是云对象存储？

云对象存储服务的结构再简单不过了。它们本质上是巨大的数据堆，通过API以键/值对的形式访问。

其无限的存储容量和“无处不在”的可用性使其具有革命性意义。它们可以容纳数十亿条记录——图像、日志、训练数据，无论您需要什么——而且至关重要的是，它们可以使这些记录中的每一条在全球任何地方、任何工作负载级别下都可供计算使用。

S3极其可靠。它的设计具有11个9的持久性（即99.999999999%）和99.99%的可用性，并自动在亚马逊的区域设施之间复制数据。这意味着S3上的数据非常安全且高度可用，而无需管理物理磁盘或复制。

此外，S3可无缝扩展。没有固定的卷。无需容量规划。您可以存储的数据量几乎是无限的，性能随并行访问而扩展，而不是受限于单个服务器瓶颈。这些保证使架构师无需担心低级存储故障、容量以及涉及一致性的边缘情况。

> 像S3这样的服务在纯粹的速度方面有所欠缺，但它们在可靠性和易于维护方面弥补了这一点。

简而言之，云对象存储提供了高度持久、始终在线、强一致性的单一事实来源。它不像本地存储那么快，但也不需要那么快。像S3这样的服务在纯粹的速度方面有所欠缺，但它们在可靠性和易于维护方面弥补了这一点。数据库无需担心分片、分段和软件定义网络，只需放心地检索数据，并确信数据将在合理的时间内交付。

这意味着，对于下一代分布式数据库，云对象存储在所有实际目的上都将成为网络。

## 围绕对象存储出现的架构模式

基于云对象存储的构建带来了以前不切实际的几种架构模式。

*   **瞬时计算集群：** 将对象存储与计算分离，可以更轻松地临时启动特定作业的集群，并在完成后将其拆除。这对于AI代理尤其有用，它们通常会构建临时数据库来完成任务。可以随意启动计算，而无需数据复制的开销。
*   **事件驱动工作流：** S3中新对象的到达可以触发Lambda函数，启动训练作业，或通知下游消费者。这种工作流在数据高度复制的系统中是不切实际的，但当数据集中存储在单一存储库中时则微不足道。
*   **AI和ML管道：** 许多分布式机器学习工作流受益于集中式对象存储数据存储。训练数据集、特征存储、模型检查点和实验日志通常都存储在对象存储中。TensorFlow、PyTorch和SageMaker等框架被设计为直接从对象存储流式传输数据。
*   **大规模分层存储：** 数据库通常将数据分为“热”数据（需求量大）或“冷”数据（很少访问）。热数据存储在高速闪存存储上，而冷数据存储在更具成本效益的旋转磁盘上。热数据和冷数据的配置通常需要手动干预和仔细的容量规划。但使用云对象存储，数据库可以根据需求自动处理分层，在对象存储和高速缓存之间移动数据。对象存储的可用性和无限容量使得规划变得不必要。

## 示例：TiDB X

现在让我们看看这些功能如何转化为实际设计。[**PingCAP**](https://www.pingcap.com/)将云对象存储作为[**TiDB X**](https://www.pingcap.com/blog/introducing-tidb-x-a-new-foundation-distributed-sql-ai-era/)的基础，这是我们流行的[开源](https://thenewstack.io/open-source/)分布式SQL数据库TiDB的最新版本。

![显示TiDB X内置对象存储架构的图表。](https://cdn.thenewstack.io/media/2026/01/0e642228-screenshot-2026-01-30-at-19.24.06-1024x584.png)

TiDB X的内置对象存储架构。

如上图所示，TiDB X完全分离了计算和存储，使用S3作为共享后端。计算节点独立地向上和向下扩展。快速本地缓存和Raft确保热数据的一致性和低延迟访问。TiDB X不将整个数据存储库保持在附近，而是只将最活跃的数据保持在计算附近。TiDB X监控查询模式、延迟目标和数据特性，然后根据需求进行自我调整。

其基于对象存储的架构简化了恢复和备份过程。通过使用S3进行主要数据持久化，TiDB X减少了传统备份维护的开销，从而显著缩短了完成时间。此设计还减轻了节点故障的影响：由于本地状态功能主要作为持久、复制存储的缓存，因此可以通过直接从对象存储检索其所需状态来替换故障实例以恢复操作。

从操作角度来看，云对象存储使[TiDB X具有高度适应性和极高的成本效益](https://www.pingcap.com/blog/introducing-tidb-x-a-new-foundation-distributed-sql-ai-era/#:~:text=Smarter%20economics%3A%20Usage%2Dbased%20pricing%20and%20RU/s%20enforcement%20so%20your%20database%20costs%20stay%20predictable%20and%20aligned%20with%20real%20demand.)。其自动伸缩器不仅响应预设的基础设施阈值，还响应查询模式、延迟目标和数据类型等上下文信号。这使其能够实时调整资源以处理不同的任务。

总而言之，通过构建在AWS的高性能对象数据存储之上，TiDB X展示了云数据库如何在不牺牲一致性或规模的情况下实现弹性、性能和简单性。

## S3作为通信基础

将大型关系型数据存储库保持在靠近计算资源的位置一直是一种折衷。它是解决传统网络局限性所产生问题的一种昂贵解决方案。

通过像TiDB这样的架构，我们看到S3等服务的强大功能和规模使得旧的变通方法变得不必要。它们使传统架构日益过时。更重要的是，它们启用了诸如瞬时计算之类的实践，这适用于用户更可能是AI代理而不是人类的世界。

随着AI重塑业务组织和最佳实践，数据库本身也在改变形式。很大程度上，是S3等服务使得这种转变成为可能。通过使数据无位置、无处不在且易于访问，云对象存储正在颠覆曾经指导数据库设计的假设。结果将是更灵活、更具弹性的数据库——它们更易于管理且几乎毫不费力地扩展。