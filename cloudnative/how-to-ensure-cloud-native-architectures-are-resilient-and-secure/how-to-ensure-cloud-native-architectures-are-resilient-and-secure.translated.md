# 如何确保云原生架构的弹性和安全性

在当今快节奏的数字环境中，企业正在争先恐后地利用云原生技术进行创新和扩展。但根据我的经验，这种匆忙往往会付出代价，尤其是在安全性方面。在最近与一家金融服务公司的项目中，我亲眼目睹了将速度置于安全之上的做法如何暴露了关键漏洞。

乍一看，我合作的公司似乎是一个云原生成功的典范：微服务分布在多个区域，完全自动化的管道，以及频繁的功能发布。然而，在安全审计期间，我们发现其 API 通信方式存在严重漏洞，这使整个系统处于危险之中。该团队实施了广泛的 [API 访问控制以简化](https://thenewstack.io/veracodes-sbom-api-simplifies-software-security-for-devs/) 扩展，这无意中造成了重大的安全漏洞。只要一个服务被破坏，攻击者就可以横向移动到整个系统，从而可能访问敏感的财务数据。

根据我的经验，[API 漏洞正成为攻击者常用的切入点](https://thenewstack.io/why-your-api-keys-are-leaving-you-vulnerable-to-attack/)，导致了我们今天看到的许多数据泄露事件。[2023 年 Salt Labs 报告](https://content.salt.security/rs/352-UXR-417/images/SaltSecurity-Report-State_of_API_Security.pdf#:~:text=The%20most%20eye%2Dopening%20finding%20from%20the%20Q1,with%2017%%20having%20experienced%20an%20API%2Drelated%20breach.) 显示，去年 94% 的企业都遇到了 API 安全问题，主要原因是配置错误和可见性差。这些数据强调了不安全的 API 对企业构成的重大风险。[Gartner 预测](https://www.gartner.com/en/documents/4009103)，到 2025 年，近一半的企业 API 可能得不到管理，从而造成重大的安全漏洞。随着企业将重点放在速度和增长上，[安全往往被抛在脑后](https://thenewstack.io/implement-fine-grained-security-or-get-left-behind/)。

**微服务：增加了灵活性，也增加了风险**
微服务提供了灵活性并加快了更新速度，但也带来了复杂性，以及更多风险。在本例中，该公司已将其 [平台拆分为数十个微服务](https://thenewstack.io/platform-engineering-reshapes-software-dev-at-bechtle/)，负责从用户身份验证到交易处理的所有事项。虽然这使得扩展更容易，但也增加了安全漏洞的可能性。由于有如此多的活动部件，监控 API 流量成为一项重大挑战，关键漏洞被忽视了。

如果没有适当的监督，这些盲点很快就会成为攻击者的重要切入点。

未经管理的 [API 可能会在未来造成严重的漏洞](https://thenewstack.io/3-api-vulnerabilities-developers-accidentally-create/)。如果这些漏洞得不到解决，企业可能会在几年内面临重大威胁。

**为什么自动化本身无法保护您的 API**
自动化通过 [扫描代码和依赖项以查找安全](https://thenewstack.io/checkov-2-0-context-aware-security-scanning-for-infrastructure-as-code/) 问题来帮助公司快速发布功能。虽然自动化最初有效，但它忽略了更严重的问题，例如过于宽泛的 API 设置。过度依赖自动化导致团队忽视了更深层次的设计缺陷。虽然自动化工具捕获了更多次要的代码问题，但它们未能检测到系统范围内的漏洞。

我注意到这个问题在云原生设置中越来越严重。团队经常过度依赖自动化，而没有意识到这些工具可能会错过一些细微但关键的问题，例如过于宽泛的 API 权限或配置更改。虽然自动化对于速度至关重要，但它还不够。手动审查和定期审计对于发现自动化可能错过的架构缺陷至关重要。

**我们如何解决问题：构建弹性**
一旦我们确定了漏洞，很明显架构需要的不只是快速修复，而是需要彻底改造。以下是我们解决问题的方法：

* **实施细粒度的 API 访问控制：** 我们重新设计了 API 访问控制策略，以确保每个服务仅具有执行其所需任务的必要权限。这减少了攻击者横向移动的可能性。
* **加强 API 安全监控：** 我们实施了全面的 API 安全监控解决方案，以实时检测可疑活动。这使我们能够快速识别和响应任何潜在的威胁。
* **定期进行安全审计：** 我们建立了定期安全审计流程，以识别和解决任何潜在的漏洞。这有助于确保我们的系统始终保持安全。
* **培养安全意识：** 我们对开发团队进行了安全意识培训，以强调安全的重要性，并让他们了解最佳实践。这有助于确保安全成为开发过程中的首要任务。

通过采取这些措施，我们能够显著提高云原生架构的弹性和安全性。这不仅保护了我们的客户数据，还确保了我们能够继续快速创新和扩展。

**结论**
在云原生环境中，速度和安全性并非不可兼得。通过实施适当的安全措施，企业可以利用云原生技术的优势，同时保护其系统免受攻击。关键在于认识到自动化本身不足以确保安全，需要采取全面的方法，包括细粒度的访问控制、全面的监控、定期审计和安全意识培训。只有这样，企业才能真正实现云原生架构的弹性和安全性。
## API 强制最小权限**: 我们审查了所有 API 交互并重新配置了 [遵循最小权限原则的访问控制](https://thenewstack.io/from-it-to-devops-evolution-of-privileged-access-management/)。每个微服务只被授予了必要的访问权限，从而显著减少了攻击面。**强化访问控制策略**: 广泛的访问控制被收紧，确保每个服务只有必要的权限。这减少了内部和外部威胁，并创建了更透明的审计跟踪。**将自动化与手动审计相结合**: 虽然自动化仍然是必不可少的工具，但在开发和部署的关键点，我们添加了手动审计。这些手动检查帮助我们发现自动化遗漏的错误配置和设计缺陷。**实施服务网格**: 为了 [加强服务之间的安全性](https://thenewstack.io/how-to-tighten-security-across-complex-and-cloud-native-environments/)，我们实施了一个服务网格，这让我们对 API 如何交互有了更好的控制，并且最重要的是，帮助我们更密切地关注通信模式。即使一个服务被破坏，服务网格也能阻止横向移动，最大限度地减少损害。**采用混沌工程**: 我们使用混沌工程原则对架构进行压力测试，模拟故障和攻击。这帮助我们在漏洞被利用之前识别并修复它们。

**云原生团队的关键要点**

这个项目中的经验教训广泛适用于任何使用云原生架构的组织。以下是你保护基础设施可以做的事情：

* **定期审计 API**: 确保所有 API 交互都遵循最小权限原则。广泛的权限会造成严重的漏洞，尤其是在微服务环境中。
* **强化访问控制策略**: 定期审查和收紧访问控制以降低风险。定期审计对于发现过于广泛的权限至关重要。
* **将自动化与手动审计相结合**: 自动化对于速度至关重要，但手动审查可以发现更深层的架构缺陷。安排定期审计以发现错误配置和设计问题。
* **利用服务网格进行 API 安全**: 服务网格允许更严格地控制服务之间的通信，并更好地了解 API 交互。
* **拥抱混沌工程**: 通过模拟故障和攻击对架构进行压力测试，以便在漏洞变得严重之前发现它们。

**结论：没有安全性的速度是灾难的配方**

随着越来越多的公司拥抱 [云原生技术](https://thenewstack.io/cloud-native/)，优先考虑敏捷性和可扩展性的冲动往往会将安全性置于次要地位。但这种权衡不可持续。到 2025 年，如果今天没有实施适当的控制措施，未经管理的 API 可能会使组织面临重大漏洞。

你的选择将决定你的系统是否能够抵御未来的威胁。不要让对速度和创新的追求成为安全灾难。弹性和安全性与敏捷性一样重要。

[
YOUTUBE.COM/THENEWSTACK
技术发展迅速，不要错过任何一集。订阅我们的 YouTube
频道以收看我们所有的播客、访谈、演示等。
](https://youtube.com/thenewstack?sub_confirmation=1)