几年前，我曾在一家全球支付钱包公司领导一个产品团队，当时我们推出了一款首创的平台，该平台为消费者简化了银行卡和账户的开通流程，同时惠及银行和钱包。当时，我们的钱包在全球拥有数亿用户，处理着数千亿美元的电子商务支付交易量。

然而，尽管规模庞大，用户旅程中的一个环节却异常耗时且需手动操作：添加支付卡和银行账户。用户必须输入冗长的银行卡号和银行详细信息，并且常常因风险标记需要额外验证而遇到阻碍。每一个摩擦点都意味着钱包和合作银行的收入损失。在评估问题时，我们设想了一种新颖的方式来为用户解决这个问题。如果用户能够一次性认证，就能看到他们的支付工具出现、激活并可立即使用，而无需手动输入，那会怎样？

我们在概念阶段收集到的见解成为了我们全球银行合作平台的基石。该平台为全球多家银行提供银行卡开通、用户注册和支付凭证配置服务，创建了一种新的集成模式，让消费者不再需要记住银行卡号，银行和金融科技公司都在共享的[身份驱动基础设施](https://thenewstack.io/rethinking-identity-and-access-for-cloud-native/)上运行。除了银行卡，它还支持了诸如关联奖励账户等额外功能，减少了整个金融生态系统中的摩擦。

## **核心问题**

我们的数据和研究表明，当用户被要求输入支付详情或即使在[身份验证](https://thenewstack.io/what-do-authentication-and-authorization-mean-in-zero-trust/)后，风险系统仍阻止交易时，消费者就会流失。痛点主要有三方面：

1.  无需手动输入即可添加支付凭证。
2.  新用户开户无需冗余的注册流程。
3.  建立双方均可信任的已验证身份上下文。

解决这个问题需要重新思考开通流程，不再将其视为孤立的流程，而是作为钱包和银行之间共享的[安全身份编排](https://thenewstack.io/unlocking-the-power-of-security-orchestration/)。从技术上讲，这意味着构建一个足够灵活的系统，能够与全球多样化的银行系统集成，同时保持一致且合规的用户体验。

## **为碎片化金融系统架构**

### **身份作为锚点**

我们将平台以基于OAuth的身份链接为核心。用户可以通过登录凭证或生物识别技术进行身份验证，由此产生的可信会话将编排用于身份、账户、风险检查、用户资料和账户链接逻辑的微服务。

然而，[银行在身份管理](https://thenewstack.io/banking-on-identity-management-to-boost-revenue/)、API约定和序列要求方面差异很大。我们早期的试点集成是定制的，需要频繁进行协调沟通。为了实现规模化，我们创建了一个标准API规范，该规范抽象了银行端的差异，定义了强制性和可选参数，并实现了一个能够应对序列差异的微服务编排模型。

### **编排多个入口点**

一个关键挑战是支持用户从银行应用程序或钱包应用程序开始操作。

*   **从银行应用程序开始**，银行会将用户重定向到带有会话ID的钱包界面，发送后端负载数据，我们将其缓存起来，直到用户完成身份验证、同意共享数据并选择账户。我们使用会话ID将上下文关联起来，实现了短生命周期的缓存条目、会话协调逻辑以及针对部分流程的备用机制。
*   **从钱包应用程序开始**，用户被深层链接到他们的银行应用程序。在身份验证和账户选择后，银行返回一个唯一的会话ID，该ID用于后台API调用以传递凭证。在幕后，一个分布式状态机协调着两个应用程序、两个后端系统以及严格的监管约束，以维护完整性和会话连续性。
*   **新用户**可以实时创建。如果在重定向时未识别出用户，接收方会自动生成一个已验证的配置文件，从而消除冗余数据输入，并在不到一分钟的时间内启用完全配置的账户。

## **应对生态系统约束**

即使技术架构问题已解决，现实世界的限制也带来了挑战：漫长的银行合同周期减缓了开通速度；风险系统偶尔会阻止合法用户；客户服务工具尚未更新以处理新流程；生物识别技术推广的延迟迫使我们采用临时的基于网页视图的流程。此外，银行的银行卡和支票/储蓄系统各自独立运行，需要精心编排的集成。

## **我们从早期失败中学到了最多**

平台最深刻的教训出现在系统间的连接处。

早期，一些银行在完全更新其风险模型之前就上线了。经过身份验证的用户触发了高风险标记，因为他们的系统从未见过无需手动输入的银行卡配置。在我们看来会话是正常的，但交易却被阻止了。我们通过共同开发风险映射指南、共享事件模式和监控钩子来解决这个问题，以便银行能够可靠地解释这些流程。

客户服务是另一个关键的故障点。支持团队缺乏排查多应用程序流程所需的上下文或工具。用户遇到了边缘情况，银行看到了呼叫量激增，而我们的日志却没有显示任何故障。解决这个问题需要为支持团队提供旅程可见性、可人工读取的错误解释和CRM模板，有效地将支持视为系统运行时的一部分。

分析可见性同样具有挑战性，如果没有在银行应用程序中进行埋点，登录或账户选择期间的流失情况是不透明的。我们实施了共享事件模式和轻量级SDK，从而能够跨机构重建端到端的用户旅程。

在纯工程问题方面，微服务和应用程序之间的竞态条件偶尔会导致身份或负载数据乱序到达。我们采用了状态机驱动的编排、异步回调、更严格的幂等规则和分布式跟踪，确保在负载下的流程稳健运行。

在第一波上线中，一些银行无法支持生物识别身份验证，迫使我们不得不依赖网页视图。尽管功能可用，但该流程感觉笨重，降低了登录成功率并增加了摩擦。然而，对于那些通过生物识别技术上线的合作伙伴，我们能够收集到有利数据，并利用这些数据加速移动更新并提高多家银行的采用率。

## **影响**

平台上线后，彻底改变了开通流程。银行卡配置变得几乎无感，流失率急剧下降，成功完成率显著提高。用户参与了关联奖励账户和探索“用奖励支付”等额外功能，从而提升了交易量和留存率。

对钱包而言，更少的放弃流程意味着更高的客户生命周期价值，以及在不重新设计用户旅程的情况下推出新功能的能力。对用户而言，体验变得直观而安全：一次认证，您的支付工具即可使用。该平台验证了跨机构工作流既可以无摩擦又可以安全，为未来全球范围内的银行集成创建了一个可重复的模型。

## **经验教训**

将身份确立为跨机构体验的支柱，对于构建共赢的协作体验大有裨益。具有灵活边缘的标准化使我们能够全球扩展：身份和会话处理的刚性核心确保了可靠性，而可适应的层次则适应了不同的银行实施方案。从第一天起就支持所有入口点，保持了用户体验的一致性和操作上的可观测性。

运营准备与技术设计同样重要。风险模型、支持工作流和分析框架需要与平台同步发展。产品领导力需要平衡技术严谨性与战略远见：在构建可观测性、回退和协调机制的同时，引导合作伙伴团队实现共同愿景。归根结底，弹性系统不仅取决于编写代码，更取决于对生态系统的编排。

## **结论**

交付一个全球可扩展的银行合作平台不仅仅需要工程技能；它还需要跨组织、跨系统和跨体验的协作。通过以身份为中心并设计出弹性与灵活性，我们将一个历来痛苦的开通流程转变为无缝、高影响的体验。这个平台展示了金融科技公司和银行如何携手合作，大规模地交付真实价值，为未来金融生态系统中的身份驱动集成设定了蓝图。