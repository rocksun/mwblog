<!doctype html><html lang="en"><head><title data-rh="true">Kubernetes Beyond RBAC - Make Your Own Authorization via Webhook | by Emre Savcı | Sep, 2024 | Medium</title><meta data-rh="true" charset="utf-8"/><meta data-rh="true" name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,maximum-scale=1"/><meta data-rh="true" name="theme-color" content="#000000"/><meta data-rh="true" name="twitter:app:name:iphone" content="Medium"/><meta data-rh="true" name="twitter:app:id:iphone" content="828256236"/><meta data-rh="true" property="al:ios:app_name" content="Medium"/><meta data-rh="true" property="al:ios:app_store_id" content="828256236"/><meta data-rh="true" property="al:android:package" content="com.medium.reader"/><meta data-rh="true" property="fb:app_id" content="542599432471018"/><meta data-rh="true" property="og:site_name" content="Medium"/><meta data-rh="true" property="og:type" content="article"/><meta data-rh="true" property="article:published_time" content="2024-09-10T11:44:30.429Z"/><meta data-rh="true" name="title" content="Kubernetes Beyond RBAC - Make Your Own Authorization via Webhook | by Emre Savcı | Sep, 2024 | Medium"/><meta data-rh="true" property="og:title" content="Kubernetes Beyond RBAC - Make Your Own Authorization via Webhook"/><meta data-rh="true" property="al:android:url" content="medium://p/6b901196591b"/><meta data-rh="true" property="al:ios:url" content="medium://p/6b901196591b"/><meta data-rh="true" property="al:android:app_name" content="Medium"/><meta data-rh="true" name="description" content="Kubernetes is a great container orchestration tool that gives you a lot of customization options. You can easily extend/replace many of its components like CNI, CSI, scheduler or even authorization…"/><meta data-rh="true" property="og:description" content="Kubernetes is a great container orchestration tool that gives you a lot of customization options. You can easily extend/replace many of its…"/><meta data-rh="true" property="og:url" content="https://mstryoda.medium.com/kubernetes-beyond-rbac-make-your-own-authorization-via-webhook-6b901196591b"/><meta data-rh="true" property="al:web:url" content="https://mstryoda.medium.com/kubernetes-beyond-rbac-make-your-own-authorization-via-webhook-6b901196591b"/><meta data-rh="true" property="og:image" content="https://miro.medium.com/v2/resize:fit:1200/1*mmHUTMaLLQRteqDVSfCPLA.png"/><meta data-rh="true" property="article:author" content="https://mstryoda.medium.com"/><meta data-rh="true" name="author" content="Emre Savcı"/><meta data-rh="true" name="robots" content="index,noarchive,follow,max-image-preview:large"/><meta data-rh="true" name="referrer" content="unsafe-url"/><meta data-rh="true" property="twitter:title" content="Kubernetes Beyond RBAC - Make Your Own Authorization via Webhook"/><meta data-rh="true" name="twitter:site" content="@Medium"/><meta data-rh="true" name="twitter:app:url:iphone" content="medium://p/6b901196591b"/><meta data-rh="true" property="twitter:description" content="Kubernetes is a great container orchestration tool that gives you a lot of customization options. You can easily extend/replace many of its…"/><meta data-rh="true" name="twitter:image:src" content="https://miro.medium.com/v2/resize:fit:1200/1*mmHUTMaLLQRteqDVSfCPLA.png"/><meta data-rh="true" name="twitter:card" content="summary_large_image"/><meta data-rh="true" name="twitter:label1" content="Reading time"/><meta data-rh="true" name="twitter:data1" content="10 min read"/><link data-rh="true" rel="icon" href="https://miro.medium.com/v2/5d8de952517e8160e40ef9841c781cdc14a5db313057fa3c3de41c6f5b494b19"/><link data-rh="true" rel="search" type="application/opensearchdescription+xml" title="Medium" href="/osd.xml"/><link data-rh="true" rel="apple-touch-icon" sizes="152x152" href="https://miro.medium.com/v2/resize:fill:304:304/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="apple-touch-icon" sizes="120x120" href="https://miro.medium.com/v2/resize:fill:240:240/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="apple-touch-icon" sizes="76x76" href="https://miro.medium.com/v2/resize:fill:152:152/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="apple-touch-icon" sizes="60x60" href="https://miro.medium.com/v2/resize:fill:120:120/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="mask-icon" href="https://miro.medium.com/v2/resize:fill:1000:1000/7*GAOKVe--MXbEJmV9230oOQ.png" color="#171717"/><link data-rh="true" rel="preconnect" href="https://glyph.medium.com" crossOrigin=""/><link data-rh="true" id="glyph_preload_link" rel="preload" as="style" type="text/css" href="https://glyph.medium.com/css/unbound.css"/><link data-rh="true" id="glyph_link" rel="stylesheet" type="text/css" href="https://glyph.medium.com/css/unbound.css"/><link data-rh="true" rel="author" href="https://mstryoda.medium.com"/><link data-rh="true" rel="canonical" href="https://mstryoda.medium.com/kubernetes-beyond-rbac-make-your-own-authorization-via-webhook-6b901196591b"/><link data-rh="true" rel="alternate" href="android-app://com.medium.reader/https/medium.com/p/6b901196591b"/><script data-rh="true" type="application/ld+json">{"@context":"http:\u002F\u002Fschema.org","@type":"NewsArticle","image":["https:\u002F\u002Fmiro.medium.com\u002Fv2\u002Fresize:fit:1200\u002F1*mmHUTMaLLQRteqDVSfCPLA.png"],"url":"https:\u002F\u002Fmstryoda.medium.com\u002Fkubernetes-beyond-rbac-make-your-own-authorization-via-webhook-6b901196591b","dateCreated":"2024-09-10T11:44:30.429Z","datePublished":"2024-09-10T11:44:30.429Z","dateModified":"2024-09-11T06:42:51.014Z","headline":"Kubernetes Beyond RBAC - Make Your Own Authorization via Webhook","name":"Kubernetes Beyond RBAC - Make Your Own Authorization via Webhook","description":"Kubernetes is a great container orchestration tool that gives you a lot of customization options. You can easily extend\u002Freplace many of its components like CNI, CSI, scheduler or even authorization…","identifier":"6b901196591b","author":{"@type":"Person","name":"Emre Savcı","url":"https:\u002F\u002Fmstryoda.medium.com"},"creator":["Emre Savcı"],"publisher":{"@type":"Organization","name":"Medium","url":"https:\u002F\u002Fmstryoda.medium.com\u002F","logo":{"@type":"ImageObject","width":272,"height":60,"url":"https:\u002F\u002Fmiro.medium.com\u002Fv2\u002Fresize:fit:544\u002F7*V1_7XP4snlmqrc_0Njontw.png"}},"mainEntityOfPage":"https:\u002F\u002Fmstryoda.medium.com\u002Fkubernetes-beyond-rbac-make-your-own-authorization-via-webhook-6b901196591b"}</script><style type="text/css" data-fela-rehydration="532" data-fela-type="STATIC">html{box-sizing:border-box;-webkit-text-size-adjust:100%}*, *:before, *:after{box-sizing:inherit}body{margin:0;padding:0;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;color:rgba(0,0,0,0.8);position:relative;min-height:100vh}h1, h2, h3, h4, h5, h6, dl, dd, ol, ul, menu, figure, blockquote, p, pre, form{margin:0}menu, ol, ul{padding:0;list-style:none;list-style-image:none}main{display:block}a{color:inherit;text-decoration:none}a, button, input{-webkit-tap-highlight-color:transparent}img, svg{vertical-align:middle}button{background:transparent;overflow:visible}button, input, optgroup, select, textarea{margin:0}:root{--reach-tabs:1;--reach-menu-button:1}#speechify-root{font-family:Sohne, sans-serif}div[data-popper-reference-hidden="true"]{visibility:hidden;pointer-events:none}.grecaptcha-badge{visibility:hidden}
/*XCode style (c) Angel Garcia <angelgarcia.mail@gmail.com>*/.hljs {background: #fff;color: black;
}/* Gray DOCTYPE selectors like WebKit */
.xml .hljs-meta {color: #c0c0c0;
}.hljs-comment,
.hljs-quote {color: #007400;
}.hljs-tag,
.hljs-attribute,
.hljs-keyword,
.hljs-selector-tag,
.hljs-literal,
.hljs-name {color: #aa0d91;
}.hljs-variable,
.hljs-template-variable {color: #3F6E74;
}.hljs-code,
.hljs-string,
.hljs-meta .hljs-string {color: #c41a16;
}.hljs-regexp,
.hljs-link {color: #0E0EFF;
}.hljs-title,
.hljs-symbol,
.hljs-bullet,
.hljs-number {color: #1c00cf;
}.hljs-section,
.hljs-meta {color: #643820;
}.hljs-title.class_,
.hljs-class .hljs-title,
.hljs-type,
.hljs-built_in,
.hljs-params {color: #5c2699;
}.hljs-attr {color: #836C28;
}.hljs-subst {color: #000;
}.hljs-formula {background-color: #eee;font-style: italic;
}.hljs-addition {background-color: #baeeba;
}.hljs-deletion {background-color: #ffc8bd;
}.hljs-selector-id,
.hljs-selector-class {color: #9b703f;
}.hljs-doctag,
.hljs-strong {font-weight: bold;
}.hljs-emphasis {font-style: italic;
}
</style><style type="text/css" data-fela-rehydration="532" data-fela-type="KEYFRAME">@-webkit-keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}@-moz-keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}@keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}</style><style type="text/css" data-fela-rehydration="532" data-fela-type="RULE">.a{font-family:medium-content-sans-serif-font, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif}.b{font-weight:400}.c{background-color:rgba(255, 255, 255, 1)}.l{display:block}.m{position:sticky}.n{top:0}.o{z-index:500}.p{padding:0 24px}.q{align-items:center}.r{border-bottom:solid 1px #F2F2F2}.y{height:41px}.z{line-height:20px}.ab{display:flex}.ac{height:57px}.ae{flex:1 0 auto}.af{color:inherit}.ag{fill:inherit}.ah{font-size:inherit}.ai{border:inherit}.aj{font-family:inherit}.ak{letter-spacing:inherit}.al{font-weight:inherit}.am{padding:0}.an{margin:0}.ao{cursor:pointer}.ap:disabled{cursor:not-allowed}.aq:disabled{color:#6B6B6B}.ar:disabled{fill:#6B6B6B}.au{width:auto}.av path{fill:#242424}.aw{height:25px}.ax{margin-left:16px}.ay{border:none}.az{border-radius:20px}.ba{width:240px}.bb{background:#F9F9F9}.bc path{fill:#6B6B6B}.be{outline:none}.bf{font-family:sohne, "Helvetica Neue", Helvetica, Arial, sans-serif}.bg{font-size:14px}.bh{width:100%}.bi{padding:10px 20px 10px 0}.bj{background-color:transparent}.bk{color:#242424}.bl::placeholder{color:#6B6B6B}.bm{display:inline-block}.bn{margin-left:12px}.bo{margin-right:12px}.bp{border-radius:4px}.bq{margin-left:24px}.br{height:24px}.bx{background-color:#F9F9F9}.by{border-radius:50%}.bz{height:32px}.ca{width:32px}.cb{justify-content:center}.ch{max-width:680px}.ci{min-width:0}.cj{animation:k1 1.2s ease-in-out infinite}.ck{height:100vh}.cl{margin-bottom:16px}.cm{margin-top:48px}.cn{align-items:flex-start}.co{flex-direction:column}.cp{justify-content:space-between}.cq{margin-bottom:24px}.cw{width:80%}.cx{background-color:#F2F2F2}.dd{height:44px}.de{width:44px}.df{margin:auto 0}.dg{margin-bottom:4px}.dh{height:16px}.di{width:120px}.dj{width:80px}.dp{margin-bottom:8px}.dq{width:96%}.dr{width:98%}.ds{width:81%}.dt{margin-left:8px}.du{color:#6B6B6B}.dv{font-size:13px}.dw{height:100%}.ep{color:#FFFFFF}.eq{fill:#FFFFFF}.er{background:#1A8917}.es{border-color:#1A8917}.ew:disabled{cursor:inherit !important}.ex:disabled{opacity:0.3}.ey:disabled:hover{background:#1A8917}.ez:disabled:hover{border-color:#1A8917}.fa{border-radius:99em}.fb{border-width:1px}.fc{border-style:solid}.fd{box-sizing:border-box}.fe{text-decoration:none}.ff{text-align:center}.fi{margin-right:32px}.fj{position:relative}.fk{fill:#6B6B6B}.fn{background:transparent}.fo svg{margin-left:4px}.fp svg{fill:#6B6B6B}.fr{box-shadow:inset 0 0 0 1px rgba(0, 0, 0, 0.05)}.fs{position:absolute}.fz{margin:0 24px}.gd{background:rgba(255, 255, 255, 1)}.ge{border:1px solid #F2F2F2}.gf{box-shadow:0 1px 4px #F2F2F2}.gg{max-height:100vh}.gh{overflow-y:auto}.gi{left:0}.gj{top:calc(100vh + 100px)}.gk{bottom:calc(100vh + 100px)}.gl{width:10px}.gm{pointer-events:none}.gn{word-break:break-word}.go{word-wrap:break-word}.gp:after{display:block}.gq:after{content:""}.gr:after{clear:both}.gs{line-height:1.23}.gt{letter-spacing:0}.gu{font-style:normal}.gv{font-weight:700}.ia{align-items:baseline}.ib{width:48px}.ic{height:48px}.id{border:2px solid rgba(255, 255, 255, 1)}.ie{z-index:0}.if{box-shadow:none}.ig{border:1px solid rgba(0, 0, 0, 0.05)}.ih{margin-bottom:2px}.ii{flex-wrap:nowrap}.ij{font-size:16px}.ik{line-height:24px}.im{margin:0 8px}.in{display:inline}.io{color:#1A8917}.ip{fill:#1A8917}.is{flex:0 0 auto}.iv{flex-wrap:wrap}.iw{padding-left:8px}.ix{padding-right:8px}.jy> *{flex-shrink:0}.jz{overflow-x:scroll}.ka::-webkit-scrollbar{display:none}.kb{scrollbar-width:none}.kc{-ms-overflow-style:none}.kd{width:74px}.ke{flex-direction:row}.kf{z-index:2}.kg{margin-right:4px}.kj{-webkit-user-select:none}.kk{border:0}.kl{fill:rgba(117, 117, 117, 1)}.ko{outline:0}.kp{user-select:none}.kq> svg{pointer-events:none}.kz{cursor:progress}.la{opacity:1}.lb{padding:4px 0}.le{margin-top:0px}.lf{width:16px}.lh{display:inline-flex}.ln{max-width:100%}.lo{padding:8px 2px}.lp svg{color:#6B6B6B}.mg{margin-left:auto}.mh{margin-right:auto}.mi{max-width:1880px}.mo{clear:both}.mq{cursor:zoom-in}.mr{z-index:auto}.mt{height:auto}.mu{margin-top:10px}.mv{max-width:728px}.my{text-decoration:underline}.mz{line-height:1.58}.na{letter-spacing:-0.004em}.nb{font-family:source-serif-pro, Georgia, Cambria, "Times New Roman", Times, serif}.nw{margin-bottom:-0.46em}.nx{box-shadow:inset 3px 0 0 0 #242424}.ny{padding-left:23px}.nz{margin-left:-20px}.oa{font-style:italic}.ob{margin-top:32px}.oc{margin-bottom:14px}.od{padding-top:24px}.oe{padding-bottom:10px}.of{background-color:#000000}.og{height:3px}.oh{width:3px}.oi{margin-right:20px}.oj{line-height:1.18}.ok{letter-spacing:-0.022em}.ol{font-weight:600}.pb{margin-bottom:-0.31em}.ph{max-width:1704px}.ps{box-shadow:inset 0 0 0 1px #F2F2F2}.pt{padding:0px}.pu{padding:16px 20px}.pv{flex:1 1 auto}.px{overflow:hidden}.py{max-height:40px}.pz{text-overflow:ellipsis}.qa{display:-webkit-box}.qb{-webkit-line-clamp:2}.qc{-webkit-box-orient:vertical}.qe{margin-top:8px}.qf{margin-top:12px}.qg{width:160px}.qh{background-image:url(https://miro.medium.com/v2/resize:fit:320/0*YAJ2Sf4Nl5DSH8j1.jpg)}.qi{background-origin:border-box}.qj{background-size:cover}.qk{height:167px}.ql{background-position:50% 50%}.qm{overflow-x:auto}.qn{font-family:source-code-pro, Menlo, Monaco, "Courier New", Courier, monospace}.qo{padding:32px}.qp{border:1px solid #E5E5E5}.qq{line-height:1.4}.qr{margin-top:-0.2em}.qs{margin-bottom:-0.2em}.qt{white-space:pre}.qu{min-width:fit-content}.qv{max-width:848px}.qw{padding:2px 4px}.qx{font-size:75%}.qy> strong{font-family:inherit}.qz{list-style-type:disc}.ra{margin-left:30px}.rb{padding-left:0px}.rc{margin-top:16px}.rd{background-image:url(https://miro.medium.com/v2/da:true/resize:fit:320/0*_W4e5TYwdLHLXjuR)}.re{background-image:url(https://miro.medium.com/v2/da:true/resize:fit:320/0*p7F0RX1rRRDjpedj)}.rf{background-image:url(https://miro.medium.com/v2/da:true/resize:fit:320/0*MmQkh-4Vx5EWIbKB)}.rg{margin-bottom:26px}.rh{margin-top:6px}.ri{margin-right:8px}.rj{padding:8px 16px}.rk{border-radius:100px}.rl{transition:background 300ms ease}.rn{white-space:nowrap}.ro{border-top:none}.ru{height:52px}.rv{max-height:52px}.rw{box-sizing:content-box}.rx{position:static}.ry{z-index:1}.sa{max-width:155px}.sl{align-items:flex-end}.sm{width:76px}.sn{height:76px}.so{border:2px solid #F9F9F9}.sp{height:72px}.sq{width:72px}.sr{stroke:#F2F2F2}.ss{height:36px}.st{width:36px}.su{color:#F2F2F2}.sv{fill:#F2F2F2}.sw{background:#F2F2F2}.sx{border-color:#F2F2F2}.td{font-weight:500}.te{font-size:24px}.tf{line-height:30px}.tg{letter-spacing:-0.016em}.th{height:0px}.ti{border-bottom:solid 1px #E5E5E5}.tj{margin-top:72px}.tk{padding:24px 0}.tl{margin-bottom:0px}.tm{margin-right:16px}.as:hover:not(:disabled){color:rgba(25, 25, 25, 1)}.at:hover:not(:disabled){fill:rgba(25, 25, 25, 1)}.et:hover{background:#156D12}.eu:hover{border-color:#156D12}.ev:hover{cursor:pointer}.fl:hover{color:#242424}.fm:hover{fill:#242424}.fq:hover svg{fill:#242424}.ft:hover{background-color:rgba(0, 0, 0, 0.1)}.il:hover{text-decoration:underline}.iq:hover:not(:disabled){color:#156D12}.ir:hover:not(:disabled){fill:#156D12}.kn:hover{fill:rgba(8, 8, 8, 1)}.lc:hover{fill:#000000}.ld:hover p{color:#000000}.lg:hover{color:#000000}.lq:hover svg{color:#000000}.rm:hover{background-color:#F2F2F2}.sy:hover{background:#F2F2F2}.sz:hover{border-color:#F2F2F2}.ta:hover{cursor:wait}.tb:hover{color:#F2F2F2}.tc:hover{fill:#F2F2F2}.bd:focus-within path{fill:#242424}.km:focus{fill:rgba(8, 8, 8, 1)}.lr:focus svg{color:#000000}.ms:focus{transform:scale(1.01)}.kr:active{border-style:none}</style><style type="text/css" data-fela-rehydration="532" data-fela-type="RULE" media="all and (min-width: 1080px)">.d{display:none}.bw{width:64px}.cg{margin:0 64px}.cv{height:48px}.dc{margin-bottom:52px}.do{margin-bottom:48px}.ef{font-size:14px}.eg{line-height:20px}.em{font-size:13px}.eo{padding:5px 12px}.fh{display:flex}.fy{margin-bottom:68px}.gc{max-width:680px}.hq{font-size:42px}.hr{margin-top:1.19em}.hs{margin-bottom:32px}.ht{line-height:52px}.hu{letter-spacing:-0.011em}.hz{align-items:center}.jk{border-top:solid 1px #F2F2F2}.jl{border-bottom:solid 1px #F2F2F2}.jm{margin:32px 0 0}.jn{padding:3px 8px}.jw> *{margin-right:24px}.jx> :last-child{margin-right:0}.ky{margin-top:0px}.lm{margin:0}.mn{margin-top:40px}.ns{font-size:20px}.nt{margin-top:2.14em}.nu{line-height:32px}.nv{letter-spacing:-0.003em}.oy{margin-top:1.72em}.oz{line-height:24px}.pa{letter-spacing:0}.pg{margin-top:0.94em}.pm{margin-top:56px}.pr{margin-top:32px}.rt{margin-bottom:88px}.sf{display:inline-block}.sk{padding-top:72px}</style><style type="text/css" data-fela-rehydration="532" data-fela-type="RULE" media="all and (max-width: 1079.98px)">.e{display:none}.kx{margin-top:0px}.mw{margin-left:auto}.mx{text-align:center}.se{display:inline-block}</style><style type="text/css" data-fela-rehydration="532" data-fela-type="RULE" media="all and (max-width: 903.98px)">.f{display:none}.kw{margin-top:0px}.sd{display:inline-block}</style><style type="text/css" data-fela-rehydration="532" data-fela-type="RULE" media="all and (max-width: 727.98px)">.g{display:none}.ku{margin-top:0px}.kv{margin-right:0px}.pw{padding:10px 12px 10px}.sc{display:inline-block}</style><style type="text/css" data-fela-rehydration="532" data-fela-type="RULE" media="all and (max-width: 551.98px)">.h{display:none}.s{display:flex}.t{justify-content:space-between}.bs{width:24px}.cc{margin:0 24px}.cr{height:40px}.cy{margin-bottom:44px}.dk{margin-bottom:32px}.dx{font-size:13px}.dy{line-height:20px}.eh{padding:0px 8px 1px}.fu{margin-bottom:4px}.gw{font-size:32px}.gx{margin-top:1.01em}.gy{margin-bottom:24px}.gz{line-height:38px}.ha{letter-spacing:-0.014em}.hv{align-items:flex-start}.it{flex-direction:column}.iy{margin:24px -24px 0}.iz{padding:0}.jo> *{margin-right:8px}.jp> :last-child{margin-right:24px}.kh{margin-left:0px}.ks{margin-top:0px}.kt{margin-right:0px}.li{margin:0}.ls{border:1px solid #F2F2F2}.lt{border-radius:99em}.lu{padding:0px 16px 0px 12px}.lv{height:38px}.lw{align-items:center}.ly svg{margin-right:8px}.mj{margin-top:32px}.nc{font-size:18px}.nd{margin-top:1.56em}.ne{line-height:28px}.nf{letter-spacing:-0.003em}.om{font-size:16px}.on{margin-top:1.23em}.oo{letter-spacing:0}.pc{margin-top:0.67em}.pi{margin-top:40px}.pn{margin-top:24px}.rp{margin-bottom:80px}.sb{display:inline-block}.sg{padding-top:48px}.lx:hover{border-color:#E5E5E5}</style><style type="text/css" data-fela-rehydration="532" data-fela-type="RULE" media="all and (min-width: 904px) and (max-width: 1079.98px)">.i{display:none}.bv{width:64px}.cf{margin:0 64px}.cu{height:48px}.db{margin-bottom:52px}.dn{margin-bottom:48px}.ed{font-size:14px}.ee{line-height:20px}.ek{font-size:13px}.el{padding:5px 12px}.fg{display:flex}.fx{margin-bottom:68px}.gb{max-width:680px}.hl{font-size:42px}.hm{margin-top:1.19em}.hn{margin-bottom:32px}.ho{line-height:52px}.hp{letter-spacing:-0.011em}.hy{align-items:center}.jg{border-top:solid 1px #F2F2F2}.jh{border-bottom:solid 1px #F2F2F2}.ji{margin:32px 0 0}.jj{padding:3px 8px}.ju> *{margin-right:24px}.jv> :last-child{margin-right:0}.ll{margin:0}.mm{margin-top:40px}.no{font-size:20px}.np{margin-top:2.14em}.nq{line-height:32px}.nr{letter-spacing:-0.003em}.ov{margin-top:1.72em}.ow{line-height:24px}.ox{letter-spacing:0}.pf{margin-top:0.94em}.pl{margin-top:56px}.pq{margin-top:32px}.rs{margin-bottom:88px}.sj{padding-top:72px}</style><style type="text/css" data-fela-rehydration="532" data-fela-type="RULE" media="all and (min-width: 728px) and (max-width: 903.98px)">.j{display:none}.w{display:flex}.x{justify-content:space-between}.bu{width:64px}.ce{margin:0 48px}.ct{height:48px}.da{margin-bottom:52px}.dm{margin-bottom:48px}.eb{font-size:13px}.ec{line-height:20px}.ej{padding:0px 8px 1px}.fw{margin-bottom:68px}.ga{max-width:680px}.hg{font-size:42px}.hh{margin-top:1.19em}.hi{margin-bottom:32px}.hj{line-height:52px}.hk{letter-spacing:-0.011em}.hx{align-items:center}.jc{border-top:solid 1px #F2F2F2}.jd{border-bottom:solid 1px #F2F2F2}.je{margin:32px 0 0}.jf{padding:3px 8px}.js> *{margin-right:24px}.jt> :last-child{margin-right:0}.lk{margin:0}.ml{margin-top:40px}.nk{font-size:20px}.nl{margin-top:2.14em}.nm{line-height:32px}.nn{letter-spacing:-0.003em}.os{margin-top:1.72em}.ot{line-height:24px}.ou{letter-spacing:0}.pe{margin-top:0.94em}.pk{margin-top:56px}.pp{margin-top:32px}.rr{margin-bottom:88px}.si{padding-top:72px}</style><style type="text/css" data-fela-rehydration="532" data-fela-type="RULE" media="all and (min-width: 552px) and (max-width: 727.98px)">.k{display:none}.u{display:flex}.v{justify-content:space-between}.bt{width:24px}.cd{margin:0 24px}.cs{height:40px}.cz{margin-bottom:44px}.dl{margin-bottom:32px}.dz{font-size:13px}.ea{line-height:20px}.ei{padding:0px 8px 1px}.fv{margin-bottom:4px}.hb{font-size:32px}.hc{margin-top:1.01em}.hd{margin-bottom:24px}.he{line-height:38px}.hf{letter-spacing:-0.014em}.hw{align-items:flex-start}.iu{flex-direction:column}.ja{margin:24px 0 0}.jb{padding:0}.jq> *{margin-right:8px}.jr> :last-child{margin-right:8px}.ki{margin-left:0px}.lj{margin:0}.lz{border:1px solid #F2F2F2}.ma{border-radius:99em}.mb{padding:0px 16px 0px 12px}.mc{height:38px}.md{align-items:center}.mf svg{margin-right:8px}.mk{margin-top:32px}.ng{font-size:18px}.nh{margin-top:1.56em}.ni{line-height:28px}.nj{letter-spacing:-0.003em}.op{font-size:16px}.oq{margin-top:1.23em}.or{letter-spacing:0}.pd{margin-top:0.67em}.pj{margin-top:40px}.po{margin-top:24px}.rq{margin-bottom:80px}.sh{padding-top:48px}.me:hover{border-color:#E5E5E5}</style><style type="text/css" data-fela-rehydration="532" data-fela-type="RULE" media="print">.rz{display:none}</style><style type="text/css" data-fela-rehydration="532" data-fela-type="RULE" media="(prefers-reduced-motion: no-preference)">.mp{transition:transform 300ms cubic-bezier(0.2, 0, 0.2, 1)}</style><style type="text/css" data-fela-rehydration="532" data-fela-type="RULE" media="(orientation: landscape) and (max-width: 903.98px)">.qd{max-height:none}</style></head><body><div id="root"><div class="a b c"><div class="d e f g h i j k"></div><script>document.domain = document.domain;</script><div class="l c"><div class="l m n o c"><div class="p q r s t u v w x i d y z"><a class="du ag dv bf ak b am an ao ap aq ar as at s u w i d q dw z" href="https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F6b901196591b&amp;%7Efeature=LoOpenInAppButton&amp;%7Echannel=ShowPostUnderUser&amp;source=---two_column_layout_nav----------------------------------" rel="noopener follow">Open in app<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="none" viewBox="0 0 10 10" class="dt"><path fill="currentColor" d="M.985 8.485a.375.375 0 1 0 .53.53zM8.75 1.25h.375A.375.375 0 0 0 8.75.875zM8.375 6.5a.375.375 0 1 0 .75 0zM3.5.875a.375.375 0 1 0 0 .75zm-1.985 8.14 7.5-7.5-.53-.53-7.5 7.5zm6.86-7.765V6.5h.75V1.25zM3.5 1.625h5.25v-.75H3.5z"></path></svg></a><div class="ab q"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span><button class="bf b dx dy eh dz ea ei eb ec ej ek ee el em eg eo ep eq er es et eu ev ew ex ey ez fa fb fc fd bm fe ff" data-testid="headerSignUpButton">Sign up</button></span></p><div class="ax l"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSignInButton" href="https://medium.com/m/signin?operation=login&amp;redirect=https%3A%2F%2Fmstryoda.medium.com%2Fkubernetes-beyond-rbac-make-your-own-authorization-via-webhook-6b901196591b&amp;source=post_page---two_column_layout_nav-----------------------global_nav-----------" rel="noopener follow">Sign in</a></span></p></div></div></div><div class="p q r ab ac"><div class="ab q ae"><a class="af ag ah ai aj ak al am an ao ap aq ar as at ab" aria-label="Homepage" data-testid="headerMediumLogo" href="https://medium.com/?source=---two_column_layout_nav----------------------------------" rel="noopener follow"><svg xmlns="http://www.w3.org/2000/svg" width="719" height="160" fill="none" viewBox="0 0 719 160" class="au av aw"><path fill="#242424" d="m174.104 9.734.215-.047V8.02H130.39L89.6 103.89 48.81 8.021H1.472v1.666l.212.047c8.018 1.81 12.09 4.509 12.09 14.242V137.93c0 9.734-4.087 12.433-12.106 14.243l-.212.047v1.671h32.118v-1.665l-.213-.048c-8.018-1.809-12.089-4.509-12.089-14.242V30.586l52.399 123.305h2.972l53.925-126.743V140.75c-.687 7.688-4.721 10.062-11.982 11.701l-.215.05v1.652h55.948v-1.652l-.215-.05c-7.269-1.639-11.4-4.013-12.087-11.701l-.037-116.774h.037c0-9.733 4.071-12.432 12.087-14.242m25.555 75.488c.915-20.474 8.268-35.252 20.606-35.507 3.806.063 6.998 1.312 9.479 3.714 5.272 5.118 7.751 15.812 7.368 31.793zm-.553 5.77h65.573v-.275c-.186-15.656-4.721-27.834-13.466-36.196-7.559-7.227-18.751-11.203-30.507-11.203h-.263c-6.101 0-13.584 1.48-18.909 4.16-6.061 2.807-11.407 7.003-15.855 12.511-7.161 8.874-11.499 20.866-12.554 34.343q-.05.606-.092 1.212a50 50 0 0 0-.065 1.151 85.807 85.807 0 0 0-.094 5.689c.71 30.524 17.198 54.917 46.483 54.917 25.705 0 40.675-18.791 44.407-44.013l-1.886-.664c-6.557 13.556-18.334 21.771-31.738 20.769-18.297-1.369-32.314-19.922-31.042-42.395m139.722 41.359c-2.151 5.101-6.639 7.908-12.653 7.908s-11.513-4.129-15.418-11.63c-4.197-8.053-6.405-19.436-6.405-32.92 0-28.067 8.729-46.22 22.24-46.22 5.657 0 10.111 2.807 12.236 7.704zm43.499 20.008c-8.019-1.897-12.089-4.722-12.089-14.951V1.309l-48.716 14.353v1.757l.299-.024c6.72-.543 11.278.386 13.925 2.83 2.072 1.915 3.082 4.853 3.082 8.987v18.66c-4.803-3.067-10.516-4.56-17.448-4.56-14.059 0-26.909 5.92-36.176 16.672-9.66 11.205-14.767 26.518-14.767 44.278-.003 31.72 15.612 53.039 38.851 53.039 13.595 0 24.533-7.449 29.54-20.013v16.865h43.711v-1.746zM424.1 19.819c0-9.904-7.468-17.374-17.375-17.374-9.859 0-17.573 7.632-17.573 17.374s7.721 17.374 17.573 17.374c9.907 0 17.375-7.47 17.375-17.374m11.499 132.546c-8.019-1.897-12.089-4.722-12.089-14.951h-.035V43.635l-43.714 12.551v1.705l.263.024c9.458.842 12.047 4.1 12.047 15.152v81.086h43.751v-1.746zm112.013 0c-8.018-1.897-12.089-4.722-12.089-14.951V43.635l-41.621 12.137v1.71l.246.026c7.733.813 9.967 4.257 9.967 15.36v59.279c-2.578 5.102-7.415 8.131-13.274 8.336-9.503 0-14.736-6.419-14.736-18.073V43.638l-43.714 12.55v1.703l.262.024c9.459.84 12.05 4.097 12.05 15.152v50.17a56.3 56.3 0 0 0 .91 10.444l.787 3.423c3.701 13.262 13.398 20.197 28.59 20.197 12.868 0 24.147-7.966 29.115-20.43v17.311h43.714v-1.747zm169.818 1.788v-1.749l-.213-.05c-8.7-2.006-12.089-5.789-12.089-13.49v-63.79c0-19.89-11.171-31.761-29.883-31.761-13.64 0-25.141 7.882-29.569 20.16-3.517-13.01-13.639-20.16-28.606-20.16-13.146 0-23.449 6.938-27.869 18.657V43.643L545.487 55.68v1.715l.263.024c9.345.829 12.047 4.181 12.047 14.95v81.784h40.787v-1.746l-.215-.053c-6.941-1.631-9.181-4.606-9.181-12.239V66.998c1.836-4.289 5.537-9.37 12.853-9.37 9.086 0 13.692 6.296 13.692 18.697v77.828h40.797v-1.746l-.215-.053c-6.94-1.631-9.18-4.606-9.18-12.239V75.066a42 42 0 0 0-.578-7.26c1.947-4.661 5.86-10.177 13.475-10.177 9.214 0 13.691 6.114 13.691 18.696v77.828z"></path></svg></a><div class="ax h"><div class="ab ay az ba bb q bc bd"><div class="bm" aria-hidden="false" aria-describedby="searchResults" aria-labelledby="searchResults"></div><div class="bn bo ab"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.092 11.06a6.95 6.95 0 1 1 13.9 0 6.95 6.95 0 0 1-13.9 0m6.95-8.05a8.05 8.05 0 1 0 5.13 14.26l3.75 3.75a.56.56 0 1 0 .79-.79l-3.73-3.73A8.05 8.05 0 0 0 11.042 3z" clip-rule="evenodd"></path></svg></div><input role="combobox" aria-controls="searchResults" aria-expanded="false" aria-label="search" data-testid="headerSearchInput" tabindex="0" class="ay be bf bg z bh bi bj bk bl" placeholder="Search" value=""/></div></div></div><div class="h k w fg fh"><div class="fi ab"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerWriteButton" href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fnew-story&amp;source=---two_column_layout_nav-----------------------new_post_topnav-----------" rel="noopener follow"><div class="bf b bg z du fj fk ab q fl fm"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-label="Write"><path fill="currentColor" d="M14 4a.5.5 0 0 0 0-1zm7 6a.5.5 0 0 0-1 0zm-7-7H4v1h10zM3 4v16h1V4zm1 17h16v-1H4zm17-1V10h-1v10zm-1 1a1 1 0 0 0 1-1h-1zM3 20a1 1 0 0 0 1 1v-1zM4 3a1 1 0 0 0-1 1h1z"></path><path stroke="currentColor" d="m17.5 4.5-8.458 8.458a.25.25 0 0 0-.06.098l-.824 2.47a.25.25 0 0 0 .316.316l2.47-.823a.25.25 0 0 0 .098-.06L19.5 6.5m-2-2 2.323-2.323a.25.25 0 0 1 .354 0l1.646 1.646a.25.25 0 0 1 0 .354L19.5 6.5m-2-2 2 2"></path></svg><div class="dt l">Write</div></div></a></span></div></div><div class="k j i d"><div class="fi ab"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSearchButton" href="https://medium.com/search?source=---two_column_layout_nav----------------------------------" rel="noopener follow"><div class="bf b bg z du fj fk ab q fl fm"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-label="Search"><path fill="currentColor" fill-rule="evenodd" d="M4.092 11.06a6.95 6.95 0 1 1 13.9 0 6.95 6.95 0 0 1-13.9 0m6.95-8.05a8.05 8.05 0 1 0 5.13 14.26l3.75 3.75a.56.56 0 1 0 .79-.79l-3.73-3.73A8.05 8.05 0 0 0 11.042 3z" clip-rule="evenodd"></path></svg></div></a></div></div><div class="fi h k j"><div class="ab q"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span><button class="bf b dx dy eh dz ea ei eb ec ej ek ee el em eg eo ep eq er es et eu ev ew ex ey ez fa fb fc fd bm fe ff" data-testid="headerSignUpButton">Sign up</button></span></p><div class="ax l"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSignInButton" href="https://medium.com/m/signin?operation=login&amp;redirect=https%3A%2F%2Fmstryoda.medium.com%2Fkubernetes-beyond-rbac-make-your-own-authorization-via-webhook-6b901196591b&amp;source=post_page---two_column_layout_nav-----------------------global_nav-----------" rel="noopener follow">Sign in</a></span></p></div></div></div><div class="l" aria-hidden="false"><button class="ay fn am ab q ao fo fp fq" aria-label="user options menu" data-testid="headerUserIcon"><div class="l fj"><img alt="" class="l fd by bz ca cx" src="https://miro.medium.com/v2/resize:fill:64:64/1*dmbNkD5D-u45r44go_cf0g.png" width="32" height="32" loading="lazy" role="presentation"/><div class="fr by l bz ca fs n ay ft"></div></div></button></div></div></div><div class="l"><div class="fu fv fw fx fy l"><div class="ab cb"><div class="ci bh fz ga gb gc"></div></div><article><div class="l"><div class="l"><span class="l"></span><section><div><div class="fs gi gj gk gl gm"></div><div class="gn go gp gq gr"><div class="ab cb"><div class="ci bh fz ga gb gc"><div><h1 id="206a" class="pw-post-title gs gt gu bf gv gw gx gy gz ha hb hc hd he hf hg hh hi hj hk hl hm hn ho hp hq hr hs ht hu bk" data-testid="storyTitle">Kubernetes Beyond RBAC - Make Your Own Authorization via Webhook</h1><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="hv hw hx hy hz ab"><div><div class="ab ia"><a rel="noopener follow" href="/?source=post_page-----6b901196591b--------------------------------"><div><div class="bm" aria-hidden="false"><div class="l ib ic by id ie"><div class="l fj"><img alt="Emre Savcı" class="l fd by dd de cx" src="https://miro.medium.com/v2/resize:fill:88:88/1*FT9XsHGlbCsKvWgeX8lE4A.jpeg" width="44" height="44" loading="lazy" data-testid="authorPhoto"/><div class="if by l dd de fs n ig ft"></div></div></div></div></div></a></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="ih ab q"><div class="ab q ii"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b ij ik bk"><a class="af ag ah ai aj ak al am an ao ap aq ar il" data-testid="authorName" rel="noopener follow" href="/?source=post_page-----6b901196591b--------------------------------">Emre Savcı</a></p></div></div></div><span class="im in" aria-hidden="true"><span class="bf b bg z du">·</span></span><p class="bf b ij ik du"><span><a class="io ip ah ai aj ak al am an ao ap aq ar ex iq ir" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fc50c70d779e7&amp;operation=register&amp;redirect=https%3A%2F%2Fmstryoda.medium.com%2Fkubernetes-beyond-rbac-make-your-own-authorization-via-webhook-6b901196591b&amp;user=Emre+Savc%C4%B1&amp;userId=c50c70d779e7&amp;source=post_page-c50c70d779e7----6b901196591b---------------------post_header-----------" rel="noopener follow">Follow</a></span></p></div></div></span></div></div><div class="l is"><span class="bf b bg z du"><div class="ab cn it iu iv"><span class="bf b bg z du"><div class="ab ae"><span data-testid="storyReadTime">10 min read</span><div class="iw ix l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z du">·</span></span></div>1 day ago</div></span></div></span></div></div></div><div class="ab cp iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn"><div class="h k w fg fh q"><div class="kd l"><div class="ab q ke kf"><div class="pw-multi-vote-icon fj kg kh ki kj"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerClapButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fp%2F6b901196591b&amp;operation=register&amp;redirect=https%3A%2F%2Fmstryoda.medium.com%2Fkubernetes-beyond-rbac-make-your-own-authorization-via-webhook-6b901196591b&amp;user=Emre+Savc%C4%B1&amp;userId=c50c70d779e7&amp;source=-----6b901196591b---------------------clap_footer-----------" rel="noopener follow"><div><div class="bm" aria-hidden="false"><div class="kk ao kl km kn ko am kp kq kr kj"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM13.916 3.953l1.523-2.112-1.184-.39zM8.589 1.84l1.522 2.112-.337-2.501zM18.523 18.92c-.86.86-1.75 1.246-2.62 1.33a6 6 0 0 0 .407-.372c2.388-2.389 2.86-4.951 1.399-7.623l-.912-1.603-.79-1.672c-.26-.56-.194-.98.203-1.288a.7.7 0 0 1 .546-.132c.283.046.546.231.728.5l2.363 4.157c.976 1.624 1.141 4.237-1.324 6.702m-10.999-.438L3.37 14.328a.828.828 0 0 1 .585-1.408.83.83 0 0 1 .585.242l2.158 2.157a.365.365 0 0 0 .516-.516l-2.157-2.158-1.449-1.449a.826.826 0 0 1 1.167-1.17l3.438 3.44a.363.363 0 0 0 .516 0 .364.364 0 0 0 0-.516L5.293 9.513l-.97-.97a.826.826 0 0 1 0-1.166.84.84 0 0 1 1.167 0l.97.968 3.437 3.436a.36.36 0 0 0 .517 0 .366.366 0 0 0 0-.516L6.977 7.83a.82.82 0 0 1-.241-.584.82.82 0 0 1 .824-.826c.219 0 .43.087.584.242l5.787 5.787a.366.366 0 0 0 .587-.415l-1.117-2.363c-.26-.56-.194-.98.204-1.289a.7.7 0 0 1 .546-.132c.283.046.545.232.727.501l2.193 3.86c1.302 2.38.883 4.59-1.277 6.75-1.156 1.156-2.602 1.627-4.19 1.367-1.418-.236-2.866-1.033-4.079-2.246M10.75 5.971l2.12 2.12c-.41.502-.465 1.17-.128 1.89l.22.465-3.523-3.523a.8.8 0 0 1-.097-.368c0-.22.086-.428.241-.584a.847.847 0 0 1 1.167 0m7.355 1.705c-.31-.461-.746-.758-1.23-.837a1.44 1.44 0 0 0-1.11.275c-.312.24-.505.543-.59.881a1.74 1.74 0 0 0-.906-.465 1.47 1.47 0 0 0-.82.106l-2.182-2.182a1.56 1.56 0 0 0-2.2 0 1.54 1.54 0 0 0-.396.701 1.56 1.56 0 0 0-2.21-.01 1.55 1.55 0 0 0-.416.753c-.624-.624-1.649-.624-2.237-.037a1.557 1.557 0 0 0 0 2.2c-.239.1-.501.238-.715.453a1.56 1.56 0 0 0 0 2.2l.516.515a1.556 1.556 0 0 0-.753 2.615L7.01 19c1.32 1.319 2.909 2.189 4.475 2.449q.482.08.971.08c.85 0 1.653-.198 2.393-.579.231.033.46.054.686.054 1.266 0 2.457-.52 3.505-1.567 2.763-2.763 2.552-5.734 1.439-7.586z" clip-rule="evenodd"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l ks kt ku kv kw kx ky"><p class="bf b dv z du"><span class="kz">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao kk la lb ab q fk lc ld" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="le"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"></path></svg></button></div></div></div><div class="ab q jo jp jq jr js jt ju jv jw jx jy jz ka kb kc"><div class="lf k j i d"></div><div class="h k"><div><div class="bm" aria-hidden="false"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerBookmarkButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6b901196591b&amp;operation=register&amp;redirect=https%3A%2F%2Fmstryoda.medium.com%2Fkubernetes-beyond-rbac-make-your-own-authorization-via-webhook-6b901196591b&amp;source=-----6b901196591b---------------------bookmark_footer-----------" rel="noopener follow"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none" viewBox="0 0 25 25" class="du lg" aria-label="Add to list bookmark button"><path fill="currentColor" d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .805.396L12.5 17l5.695 4.396A.5.5 0 0 0 19 21v-8.5a.5.5 0 0 0-1 0v7.485l-5.195-4.012a.5.5 0 0 0-.61 0L7 19.985z"></path></svg></a></span></div></div></div><div class="fd lh cn"><div class="l ae"><div class="ab cb"><div class="li lj lk ll lm ln ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af fk ah ai aj ak al lo an ao ap ex lp lq ld lr ls lt lu lv s lw lx ly lz ma mb mc u md me mf"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"></path></svg><div class="j i d"><p class="bf b bg z du">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af fk ah ai aj ak al lo an ao ap ex lp lq ld lr ls lt lu lv s lw lx ly lz ma mb mc u md me mf"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"></path></svg><div class="j i d"><p class="bf b bg z du">Share</p></div></button></div></div></div></div></div></div></div></div></div><figure class="mj mk ml mm mn mo mg mh paragraph-image"><div role="button" tabindex="0" class="mp mq fj mr bh ms"><div class="mg mh mi"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*GGJnah7Q5C7mdic8Y3PfcQ.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*GGJnah7Q5C7mdic8Y3PfcQ.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*GGJnah7Q5C7mdic8Y3PfcQ.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*GGJnah7Q5C7mdic8Y3PfcQ.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*GGJnah7Q5C7mdic8Y3PfcQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*GGJnah7Q5C7mdic8Y3PfcQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GGJnah7Q5C7mdic8Y3PfcQ.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*GGJnah7Q5C7mdic8Y3PfcQ.png 640w, https://miro.medium.com/v2/resize:fit:720/1*GGJnah7Q5C7mdic8Y3PfcQ.png 720w, https://miro.medium.com/v2/resize:fit:750/1*GGJnah7Q5C7mdic8Y3PfcQ.png 750w, https://miro.medium.com/v2/resize:fit:786/1*GGJnah7Q5C7mdic8Y3PfcQ.png 786w, https://miro.medium.com/v2/resize:fit:828/1*GGJnah7Q5C7mdic8Y3PfcQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*GGJnah7Q5C7mdic8Y3PfcQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*GGJnah7Q5C7mdic8Y3PfcQ.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh ln mt c" width="700" height="175" loading="eager" role="presentation"/></picture></div></div><figcaption class="mu ff mv mg mh mw mx bf b bg z du"><a class="af my" href="https://kubernetes.io" rel="noopener ugc nofollow" target="_blank">https://kubernetes.io</a></figcaption></figure><p id="b2be" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">Kubernetes is a great container orchestration tool that gives you a lot of customization options. You can easily extend/replace many of its components like CNI, CSI, scheduler or even authorization components.</p><p id="3c81" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">In this article, you will see how to write your own authorization webhook that works on Kubernetes to extend RBAC functionalities or remove it at all.</p><p id="edfe" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">We will take a look at the following topics:</p><blockquote class="nx ny nz"><p id="07a3" class="mz na oa nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">- Kubernetes Authorization Flow<br/>- Configuring Kubernetes API Server for Authorization Webhook<br/>- What an Authorization Request Looks Like<br/>- Writing Authorization Webhook<br/>- Generating Self Signed Certificate<br/>- What About Kubectl Auth<br/>- Show Time - Running All<br/>- Where to Use<br/>- References</p></blockquote></div></div></div><div class="ab cb ob oc od oe" role="separator"><span class="of by bm og oh oi"></span><span class="of by bm og oh oi"></span><span class="of by bm og oh"></span></div><div class="gn go gp gq gr"><div class="ab cb"><div class="ci bh fz ga gb gc"><h2 id="edce" class="oj ok gu bf ol om on dy oo op oq ea or nk os ot ou no ov ow ox ns oy oz pa pb bk">Kubernetes Authorization Flow</h2><p id="8114" class="pw-post-body-paragraph mz na gu nb b nc pc ne nf ng pd ni nj nk pe nm nn no pf nq nr ns pg nu nv nw gn bk">Let’s start with explaining the internal authorization flow of Kubernetes.</p><figure class="pi pj pk pl pm mo mg mh paragraph-image"><div role="button" tabindex="0" class="mp mq fj mr bh ms"><div class="mg mh ph"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*mmHUTMaLLQRteqDVSfCPLA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*mmHUTMaLLQRteqDVSfCPLA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*mmHUTMaLLQRteqDVSfCPLA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*mmHUTMaLLQRteqDVSfCPLA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*mmHUTMaLLQRteqDVSfCPLA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*mmHUTMaLLQRteqDVSfCPLA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mmHUTMaLLQRteqDVSfCPLA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*mmHUTMaLLQRteqDVSfCPLA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*mmHUTMaLLQRteqDVSfCPLA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*mmHUTMaLLQRteqDVSfCPLA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*mmHUTMaLLQRteqDVSfCPLA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*mmHUTMaLLQRteqDVSfCPLA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*mmHUTMaLLQRteqDVSfCPLA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*mmHUTMaLLQRteqDVSfCPLA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh ln mt c" width="700" height="327" loading="eager" role="presentation"/></picture></div></div><figcaption class="mu ff mv mg mh mw mx bf b bg z du"><a class="af my" href="https://kubernetes.io/docs/concepts/security/controlling-access/" rel="noopener ugc nofollow" target="_blank">https://kubernetes.io/docs/concepts/security/controlling-access/</a></figcaption></figure><p id="b76f" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">A request that arrives at the API server goes through the flow shown in the above image.</p><p id="aa7d" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">Every request that goes to Kubernetes cluster is authenticated by the API server, and then a couple of authorization flows start. After that authorization flow, the API server calls admission control webhooks. Finally, if everything goes well, the request will be accomplished by querying or modifying the state of etcd.</p><p id="9cef" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">Thanks to the extensible architecture of Kubernetes, we can extend every step described above. We can integrate our custom authentication solutions. We can write our own authorization server. Or we can interfere with every resource creation or modification.</p><p id="9ba2" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">If you would like to learn authorization using RBAC in Kubernetes please take a look my previous article about configuring RBAC 👇</p><div class="pn po pp pq pr ps"><a href="https://medium.com/trendyol-tech/configure-rbac-in-kubernetes-like-a-boss-665e2a8665dd?source=post_page-----6b901196591b--------------------------------" rel="noopener follow" target="_blank"><div class="pt ab is"><div class="pu ab co cb pv pw"><h2 class="bf gv ij z px py pz qa qb qc qd gt bk">Configure RBAC in Kubernetes Like a Boss</h2><div class="qe l"><h3 class="bf b ij z px py pz qa qb qc qd du">In this post I will explain how to configure RBAC in kubernetes. Also we will see an example before and after rbac…</h3></div><div class="qf l"><p class="bf b dv z px py pz qa qb qc qd du">medium.com</p></div></div><div class="qg l"><div class="qh l qi qj qk qg ql ln ps"></div></div></div></a></div></div></div></div><div class="ab cb ob oc od oe" role="separator"><span class="of by bm og oh oi"></span><span class="of by bm og oh oi"></span><span class="of by bm og oh"></span></div><div class="gn go gp gq gr"><div class="ab cb"><div class="ci bh fz ga gb gc"><h2 id="8878" class="oj ok gu bf ol om on dy oo op oq ea or nk os ot ou no ov ow ox ns oy oz pa pb bk">Configuring Kubernetes API Server for Authorization Webhook</h2><p id="98a3" class="pw-post-body-paragraph mz na gu nb b nc pc ne nf ng pd ni nj nk pe nm nn no pf nq nr ns pg nu nv nw gn bk">You need to configure the API server to specify your authorization webhook address.</p><p id="a56c" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">Personally, I am using Kind to test Kubernetes locally. The following configuration enables Webhook authorization on the API server for Kubernetes. Let’s put this configuration in a file named “kind-cp.yaml”.</p><pre class="pi pj pk pl pm qm qn qo bp qp bb bk"><span id="7b6b" class="qq ok gu qn b bg qr qs l qt qu">kind: Cluster<br/>apiVersion: kind.x-k8s.io/v1alpha4<br/>nodes:<br/>- role: control-plane<br/>  extraMounts:<br/>  - hostPath: /Users/emre.savci/Desktop/kube-authz<br/>    containerPath: /files<br/>  kubeadmConfigPatches:<br/>  - |<br/>    kind: ClusterConfiguration<br/>    apiServer:<br/>        extraArgs:<br/>          enable-admission-plugins: NodeRestriction,MutatingAdmissionWebhook,ValidatingAdmissionWebhook<br/>          authorization-mode: Webhook, RBAC<br/>          authorization-webhook-version: v1<br/>          authorization-webhook-config-file: /files/authz-webhook.yaml<br/>          authorization-webhook-cache-authorized-ttl: 120s<br/>          authorization-webhook-cache-unauthorized-ttl: 30s<br/>        extraVolumes:<br/>        - name: api-server-basic-auth-files<br/>          hostPath: &quot;/files&quot;<br/>          mountPath: &quot;/files&quot;<br/>          readOnly: true</span></pre><p id="1ebc" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">If you take a closer look at the configuration file, you will face authorization-related arguments.</p><p id="46bf" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">The following line specifies that our authorization mode uses both native RBAC and our custom-written authorization webhook:</p><pre class="pi pj pk pl pm qm qn qo bp qp bb bk"><span id="25e5" class="qq ok gu qn b bg qr qs l qt qu">authorization-mode: Webhook, RBAC</span></pre><p id="753f" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">The following line specifies the configuration file of our authorization webhook:</p><pre class="pi pj pk pl pm qm qn qo bp qp bb bk"><span id="e066" class="qq ok gu qn b bg qr qs l qt qu">authorization-webhook-config-file: /files/authz-webhook.yaml</span></pre><p id="d619" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">Here is our authorization webhook configuration file:</p><pre class="pi pj pk pl pm qm qn qo bp qp bb bk"><span id="d4d8" class="qq ok gu qn b bg qr qs l qt qu">clusters:<br/>- name: my-cluster<br/>  cluster:<br/>    certificate-authority: /files/webhook.crt<br/>    server: https://authz-webhook/authorize<br/>users:<br/>- name: api-server<br/>  user:<br/>    token: test-token<br/>current-context: my-cluster<br/>contexts:<br/>- context:<br/>    cluster: my-cluster<br/>    user: api-server<br/>  name: my-cluster</span></pre><p id="f050" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">Now we can create a cluster using those configurations.</p><pre class="pi pj pk pl pm qm qn qo bp qp bb bk"><span id="9804" class="qq ok gu qn b bg qr qs l qt qu">kind create cluster --retain --config kind-cp.yaml</span></pre><figure class="pi pj pk pl pm mo mg mh paragraph-image"><div role="button" tabindex="0" class="mp mq fj mr bh ms"><div class="mg mh qv"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*Pi4ttamV9hHCZa4O5qiyqQ.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*Pi4ttamV9hHCZa4O5qiyqQ.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*Pi4ttamV9hHCZa4O5qiyqQ.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*Pi4ttamV9hHCZa4O5qiyqQ.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*Pi4ttamV9hHCZa4O5qiyqQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*Pi4ttamV9hHCZa4O5qiyqQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pi4ttamV9hHCZa4O5qiyqQ.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*Pi4ttamV9hHCZa4O5qiyqQ.png 640w, https://miro.medium.com/v2/resize:fit:720/1*Pi4ttamV9hHCZa4O5qiyqQ.png 720w, https://miro.medium.com/v2/resize:fit:750/1*Pi4ttamV9hHCZa4O5qiyqQ.png 750w, https://miro.medium.com/v2/resize:fit:786/1*Pi4ttamV9hHCZa4O5qiyqQ.png 786w, https://miro.medium.com/v2/resize:fit:828/1*Pi4ttamV9hHCZa4O5qiyqQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*Pi4ttamV9hHCZa4O5qiyqQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*Pi4ttamV9hHCZa4O5qiyqQ.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh ln mt c" width="700" height="280" loading="lazy" role="presentation"/></picture></div></div></figure></div></div></div><div class="ab cb ob oc od oe" role="separator"><span class="of by bm og oh oi"></span><span class="of by bm og oh oi"></span><span class="of by bm og oh"></span></div><div class="gn go gp gq gr"><div class="ab cb"><div class="ci bh fz ga gb gc"><h2 id="de7f" class="oj ok gu bf ol om on dy oo op oq ea or nk os ot ou no ov ow ox ns oy oz pa pb bk">What an Authorization Request Looks Like</h2><p id="1dae" class="pw-post-body-paragraph mz na gu nb b nc pc ne nf ng pd ni nj nk pe nm nn no pf nq nr ns pg nu nv nw gn bk">Before writing a custom authorization webhook, let’s take a look at authorization request that send by Kubernetes.</p><p id="b789" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">You can always define a custom type for incoming requests but thanks to Kubernetes api we have that request type for Golang.</p><p id="b311" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">We can install the Kubernetes api package by the following command:</p><pre class="pi pj pk pl pm qm qn qo bp qp bb bk"><span id="04f1" class="qq ok gu qn b bg qr qs l qt qu">go get &quot;k8s.io/api/authorization/v1&quot;</span></pre><p id="9237" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">After that, we have our authorization request object: <code class="cx qw qx qy qn b">SubjectAccessReview</code>.</p><pre class="pi pj pk pl pm qm qn qo bp qp bb bk"><span id="62d2" class="qq ok gu qn b bg qr qs l qt qu">// SubjectAccessReview checks whether or not a user or group can perform an action.<br/>type SubjectAccessReview struct {<br/> metav1.TypeMeta `json:&quot;,inline&quot;`<br/> // Standard list metadata.<br/> // More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata<br/> // +optional<br/> metav1.ObjectMeta `json:&quot;metadata,omitempty&quot; protobuf:&quot;bytes,1,opt,name=metadata&quot;`<br/><br/> // Spec holds information about the request being evaluated<br/> Spec SubjectAccessReviewSpec `json:&quot;spec&quot; protobuf:&quot;bytes,2,opt,name=spec&quot;`<br/><br/> // Status is filled in by the server and indicates whether the request is allowed or not<br/> // +optional<br/> Status SubjectAccessReviewStatus `json:&quot;status,omitempty&quot; protobuf:&quot;bytes,3,opt,name=status&quot;`<br/>}</span></pre><p id="28cb" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">In this struct we have two important fields:</p><ul class=""><li id="0e9d" class="mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw qz ra rb bk"><code class="cx qw qx qy qn b">SubjectAccessReviewSpec</code>: It contains request details like resource attributes and user group information.</li></ul><p id="f26f" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">In this type there are two important fields: <strong class="nb gv">ResourceAttributes</strong> and <strong class="nb gv">NonResourceAttributes</strong>.</p><p id="3576" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk"><strong class="nb gv">ResourceAttributes: </strong>This field is non-nil when access is requested to a Kubernetes resource like pod, service, etc.</p><p id="275e" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk"><strong class="nb gv">NonResourceAttributes: </strong>This field is non-nil when you try to check permissions via <strong class="nb gv">kubectl auth can-i</strong>.</p><pre class="pi pj pk pl pm qm qn qo bp qp bb bk"><span id="db99" class="qq ok gu qn b bg qr qs l qt qu">// SubjectAccessReviewSpec is a description of the access request.  Exactly one of ResourceAuthorizationAttributes<br/>// and NonResourceAuthorizationAttributes must be set<br/>type SubjectAccessReviewSpec struct {<br/> // ResourceAuthorizationAttributes describes information for a resource access request<br/> // +optional<br/> ResourceAttributes *ResourceAttributes `json:&quot;resourceAttributes,omitempty&quot; protobuf:&quot;bytes,1,opt,name=resourceAttributes&quot;`<br/> // NonResourceAttributes describes information for a non-resource access request<br/> // +optional<br/> NonResourceAttributes *NonResourceAttributes `json:&quot;nonResourceAttributes,omitempty&quot; protobuf:&quot;bytes,2,opt,name=nonResourceAttributes&quot;`<br/><br/> // User is the user you&#x27;re testing for.<br/> // If you specify &quot;User&quot; but not &quot;Groups&quot;, then is it interpreted as &quot;What if User were not a member of any groups<br/> // +optional<br/> User string `json:&quot;user,omitempty&quot; protobuf:&quot;bytes,3,opt,name=user&quot;`<br/> // Groups is the groups you&#x27;re testing for.<br/> // +optional<br/> Groups []string `json:&quot;groups,omitempty&quot; protobuf:&quot;bytes,4,rep,name=groups&quot;`<br/> // Extra corresponds to the user.Info.GetExtra() method from the authenticator.  Since that is input to the authorizer<br/> // it needs a reflection here.<br/> // +optional<br/> Extra map[string]ExtraValue `json:&quot;extra,omitempty&quot; protobuf:&quot;bytes,5,rep,name=extra&quot;`<br/> // UID information about the requesting user.<br/> // +optional<br/> UID string `json:&quot;uid,omitempty&quot; protobuf:&quot;bytes,6,opt,name=uid&quot;`<br/>}</span></pre><pre class="rc qm qn qo bp qp bb bk"><span id="c98a" class="qq ok gu qn b bg qr qs l qt qu">// ResourceAttributes includes the authorization attributes available for resource requests to the Authorizer interface<br/>type ResourceAttributes struct {<br/> // Namespace is the namespace of the action being requested.  Currently, there is no distinction between no namespace and all namespaces<br/> // &quot;&quot; (empty) is defaulted for LocalSubjectAccessReviews<br/> // &quot;&quot; (empty) is empty for cluster-scoped resources<br/> // &quot;&quot; (empty) means &quot;all&quot; for namespace scoped resources from a SubjectAccessReview or SelfSubjectAccessReview<br/> // +optional<br/> Namespace string `json:&quot;namespace,omitempty&quot; protobuf:&quot;bytes,1,opt,name=namespace&quot;`<br/> // Verb is a kubernetes resource API verb, like: get, list, watch, create, update, delete, proxy.  &quot;*&quot; means all.<br/> // +optional<br/> Verb string `json:&quot;verb,omitempty&quot; protobuf:&quot;bytes,2,opt,name=verb&quot;`<br/> // Group is the API Group of the Resource.  &quot;*&quot; means all.<br/> // +optional<br/> Group string `json:&quot;group,omitempty&quot; protobuf:&quot;bytes,3,opt,name=group&quot;`<br/> // Version is the API Version of the Resource.  &quot;*&quot; means all.<br/> // +optional<br/> Version string `json:&quot;version,omitempty&quot; protobuf:&quot;bytes,4,opt,name=version&quot;`<br/> // Resource is one of the existing resource types.  &quot;*&quot; means all.<br/> // +optional<br/> Resource string `json:&quot;resource,omitempty&quot; protobuf:&quot;bytes,5,opt,name=resource&quot;`<br/> // Subresource is one of the existing resource types.  &quot;&quot; means none.<br/> // +optional<br/> Subresource string `json:&quot;subresource,omitempty&quot; protobuf:&quot;bytes,6,opt,name=subresource&quot;`<br/> // Name is the name of the resource being requested for a &quot;get&quot; or deleted for a &quot;delete&quot;. &quot;&quot; (empty) means all.<br/> // +optional<br/> Name string `json:&quot;name,omitempty&quot; protobuf:&quot;bytes,7,opt,name=name&quot;`<br/>}</span></pre><ul class=""><li id="3ed5" class="mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw qz ra rb bk"><code class="cx qw qx qy qn b">SubjectAccessReviewStatus</code>: This field contains authorization response for the request is wether allowed or denied.</li></ul><pre class="pi pj pk pl pm qm qn qo bp qp bb bk"><span id="7617" class="qq ok gu qn b bg qr qs l qt qu">// SubjectAccessReviewStatus<br/>type SubjectAccessReviewStatus struct {<br/> // Allowed is required. True if the action would be allowed, false otherwise.<br/> Allowed bool `json:&quot;allowed&quot; protobuf:&quot;varint,1,opt,name=allowed&quot;`<br/> // Denied is optional. True if the action would be denied, otherwise<br/> // false. If both allowed is false and denied is false, then the<br/> // authorizer has no opinion on whether to authorize the action. Denied<br/> // may not be true if Allowed is true.<br/> // +optional<br/> Denied bool `json:&quot;denied,omitempty&quot; protobuf:&quot;varint,4,opt,name=denied&quot;`<br/> // Reason is optional.  It indicates why a request was allowed or denied.<br/> // +optional<br/> Reason string `json:&quot;reason,omitempty&quot; protobuf:&quot;bytes,2,opt,name=reason&quot;`<br/> // EvaluationError is an indication that some error occurred during the authorization check.<br/> // It is entirely possible to get an error and be able to continue determine authorization status in spite of it.<br/> // For instance, RBAC can be missing a role, but enough roles are still present and bound to reason about the request.<br/> // +optional<br/> EvaluationError string `json:&quot;evaluationError,omitempty&quot; protobuf:&quot;bytes,3,opt,name=evaluationError&quot;`<br/>}</span></pre><p id="5f7a" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">For more detailed explanation you can take a look to <a class="af my" href="https://kubernetes.io/docs/reference/kubernetes-api/authorization-resources/subject-access-review-v1/" rel="noopener ugc nofollow" target="_blank">Kubernetes Subject Access Review</a>.</p></div></div></div><div class="ab cb ob oc od oe" role="separator"><span class="of by bm og oh oi"></span><span class="of by bm og oh oi"></span><span class="of by bm og oh"></span></div><div class="gn go gp gq gr"><div class="ab cb"><div class="ci bh fz ga gb gc"><h2 id="53dd" class="oj ok gu bf ol om on dy oo op oq ea or nk os ot ou no ov ow ox ns oy oz pa pb bk">Writing Authorization Webhook</h2><p id="1a0e" class="pw-post-body-paragraph mz na gu nb b nc pc ne nf ng pd ni nj nk pe nm nn no pf nq nr ns pg nu nv nw gn bk">Do not fear from the title. It is a dead simple thing to create an authorization webhook. Actually, a webhook is a simple HTTP server.</p><p id="1f93" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">Here is a simple authorization webhook that allows <strong class="nb gv">list and get</strong> operations but forbids <strong class="nb gv">delete</strong> operation for the service account named “test-user”:</p><pre class="pi pj pk pl pm qm qn qo bp qp bb bk"><span id="6fcd" class="qq ok gu qn b bg qr qs l qt qu">package main<br/><br/>import (<br/> &quot;fmt&quot;<br/><br/> &quot;github.com/gofiber/fiber/v2&quot;<br/> authorizationv1 &quot;k8s.io/api/authorization/v1&quot;<br/>)<br/><br/>func main() {<br/> app := fiber.New()<br/><br/> app.Post(&quot;/authorize&quot;, func(ctx *fiber.Ctx) error {<br/>  var req authorizationv1.SubjectAccessReview<br/>  ctx.BodyParser(&amp;req)<br/><br/>  req.Status.Allowed = true<br/><br/>  if req.Spec.User == &quot;system:serviceaccount:default:test-user&quot; {<br/>   if req.Spec.ResourceAttributes != nil {<br/>    if req.Spec.ResourceAttributes.Verb == &quot;get&quot; || req.Spec.ResourceAttributes.Verb == &quot;list&quot; {<br/>     req.Status.Allowed = true<br/>    }<br/><br/>    if req.Spec.ResourceAttributes.Verb == &quot;delete&quot; {<br/>     req.Status.Allowed = false<br/>    }<br/>   }<br/><br/>   if req.Spec.NonResourceAttributes != nil {<br/>    if req.Spec.NonResourceAttributes.Verb == &quot;get&quot; || req.Spec.NonResourceAttributes.Verb == &quot;list&quot; {<br/>     req.Status.Allowed = true<br/>    }<br/><br/>    if req.Spec.NonResourceAttributes.Verb == &quot;delete&quot; {<br/>     req.Status.Allowed = false<br/>    }<br/>   }<br/>  }<br/>  return ctx.JSON(req)<br/> })<br/><br/> app.Get(&quot;/healthz&quot;, func(ctx *fiber.Ctx) error {<br/>  fmt.Println(&quot;healthz&quot;)<br/>  return ctx.SendStatus(200)<br/> })<br/><br/> if err := app.ListenTLS(&quot;:443&quot;, &quot;/app/webhook.crt&quot;, &quot;/app/webhook.key&quot;); err != nil {<br/>  fmt.Println(err)<br/> }<br/>}</span></pre><p id="211d" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">The following configuration is for our authorization webhook. It specifies our webhook server address and certificate authority.</p><pre class="pi pj pk pl pm qm qn qo bp qp bb bk"><span id="8b6f" class="qq ok gu qn b bg qr qs l qt qu">clusters:<br/>- name: devx-webhooks<br/>  cluster:<br/>    certificate-authority: /files/webhook.crt<br/>    server: https://devx-webhooks/authorize<br/>users:<br/>- name: api-server<br/>  user:<br/>    token: test-token<br/>current-context: devx-webhooks<br/>contexts:<br/>- context:<br/>    cluster: devx-webhooks<br/>    user: api-server<br/>  name: devx-webhooks</span></pre><p id="247b" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">Let’s run our webhook. Remember that we run our Kubernetes cluster via kind, we will run webhook with Docker in <strong class="nb gv">kind</strong> network.</p><pre class="pi pj pk pl pm qm qn qo bp qp bb bk"><span id="f1e0" class="qq ok gu qn b bg qr qs l qt qu">docker build -t go-kube-authz .<br/>docker run -it -d --name devx-webhooks --network kind -p 443:443 go-kube-authz</span></pre></div></div></div><div class="ab cb ob oc od oe" role="separator"><span class="of by bm og oh oi"></span><span class="of by bm og oh oi"></span><span class="of by bm og oh"></span></div><div class="gn go gp gq gr"><div class="ab cb"><div class="ci bh fz ga gb gc"><h2 id="5514" class="oj ok gu bf ol om on dy oo op oq ea or nk os ot ou no ov ow ox ns oy oz pa pb bk">Webhook Self Signed Certificate</h2><p id="0e69" class="pw-post-body-paragraph mz na gu nb b nc pc ne nf ng pd ni nj nk pe nm nn no pf nq nr ns pg nu nv nw gn bk">We need to create a self signed certificate for the api-server to communicate securely with our webhook. We will use the generated webhook.cert and webhook.key in our authorization webhook server. Also we will pass webhook.cert to Kubernete api server in the webhook configuration file.</p><pre class="pi pj pk pl pm qm qn qo bp qp bb bk"><span id="1f1d" class="qq ok gu qn b bg qr qs l qt qu">openssl genrsa -out webhook.key 2048</span></pre><p id="7629" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">Let’s create a file named <strong class="nb gv">webook.csr.cnf</strong> and put following configuration in it:</p><pre class="pi pj pk pl pm qm qn qo bp qp bb bk"><span id="6533" class="qq ok gu qn b bg qr qs l qt qu">[req]<br/>default_bits = 2048<br/>prompt = no<br/>default_md = sha256<br/>distinguished_name = dn<br/>req_extensions = req_ext<br/><br/>[dn]<br/>CN = devx-webhooks<br/><br/>[req_ext]<br/>subjectAltName = @alt_names<br/><br/>[alt_names]<br/>DNS.1 = devx-webhooks</span></pre><pre class="rc qm qn qo bp qp bb bk"><span id="2ddd" class="qq ok gu qn b bg qr qs l qt qu">openssl req -new -key webhook.key -out webhook.csr -config webhook.csr.cnf</span></pre><p id="4867" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">Now create another file named and put following lines in</p><pre class="pi pj pk pl pm qm qn qo bp qp bb bk"><span id="8fda" class="qq ok gu qn b bg qr qs l qt qu">authorityKeyIdentifier=keyid,issuer<br/>basicConstraints=CA:FALSE<br/>keyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment<br/>extendedKeyUsage = serverAuth<br/>subjectAltName = @alt_names<br/><br/>[alt_names]<br/>DNS.1 = devx-webhooks</span></pre><pre class="rc qm qn qo bp qp bb bk"><span id="60f2" class="qq ok gu qn b bg qr qs l qt qu">openssl x509 -req -in webhook.csr -signkey webhook.key -out webhook.crt -days 365 -extfile webhook.ext</span></pre><p id="84e0" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">Our webhook.key and webhook.cert files are ready to use now 🚀</p></div></div></div><div class="ab cb ob oc od oe" role="separator"><span class="of by bm og oh oi"></span><span class="of by bm og oh oi"></span><span class="of by bm og oh"></span></div><div class="gn go gp gq gr"><div class="ab cb"><div class="ci bh fz ga gb gc"><h2 id="3115" class="oj ok gu bf ol om on dy oo op oq ea or nk os ot ou no ov ow ox ns oy oz pa pb bk">What About kubectl Auth</h2><p id="624e" class="pw-post-body-paragraph mz na gu nb b nc pc ne nf ng pd ni nj nk pe nm nn no pf nq nr ns pg nu nv nw gn bk">As most of you know, there is a kubectl command called <code class="cx qw qx qy qn b">auth.</code> With the help of this command, you can check whether a ServiceAccount or your current <code class="cx qw qx qy qn b">kubeconfig</code> setting has access to specific resources on Kubernetes.</p><p id="305e" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">The basic usage of the auth command is like below:</p><pre class="pi pj pk pl pm qm qn qo bp qp bb bk"><span id="bde9" class="qq ok gu qn b bg qr qs l qt qu">kubectl auth can-i get pods/logs</span></pre><p id="5f6f" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">Simply, it gives answers to the authorization questions. There is also another feature of auth command, which is to list your authorized operations on a specific resource.</p><p id="ee24" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">For example, following command lists your all permissions on Kubernetes resources:</p><pre class="pi pj pk pl pm qm qn qo bp qp bb bk"><span id="71ab" class="qq ok gu qn b bg qr qs l qt qu">kubectl auth can-i --list</span></pre></div></div></div><div class="ab cb ob oc od oe" role="separator"><span class="of by bm og oh oi"></span><span class="of by bm og oh oi"></span><span class="of by bm og oh"></span></div><div class="gn go gp gq gr"><div class="ab cb"><div class="ci bh fz ga gb gc"><h2 id="963a" class="oj ok gu bf ol om on dy oo op oq ea or nk os ot ou no ov ow ox ns oy oz pa pb bk">Show Time - Running All Together</h2><p id="fd4a" class="pw-post-body-paragraph mz na gu nb b nc pc ne nf ng pd ni nj nk pe nm nn no pf nq nr ns pg nu nv nw gn bk">Now it is time to run our webhook in a Kubernetes cluster. We already created a local cluster using <a class="af my" href="https://github.com/kubernetes-sigs/kind/" rel="noopener ugc nofollow" target="_blank">Kind</a>.</p><p id="8db8" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">Now let’s try our authorization rules by creating a deployment. Remember that we allow our user to create deployments but not delete them.</p><p id="dd38" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">Let’s create a deployment:</p><pre class="pi pj pk pl pm qm qn qo bp qp bb bk"><span id="78dc" class="qq ok gu qn b bg qr qs l qt qu">&gt;kubectl create deployment nginx --image=nginx -n default<br/>deployment.apps/nginx created</span></pre><p id="0a52" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">Let’s get pods:</p><pre class="pi pj pk pl pm qm qn qo bp qp bb bk"><span id="1292" class="qq ok gu qn b bg qr qs l qt qu">&gt;kubectl get pods<br/>NAME                     READY   STATUS    RESTARTS   AGE<br/>nginx-77b4fdf86c-zjwhr   1/1     Running   0          52m</span></pre><p id="0646" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">Our authorization webhook works well so far.</p><p id="dc3b" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">Now test it with the restricted service-account. To do so, we need to create a service account named <strong class="nb gv">test-user</strong>.</p><pre class="pi pj pk pl pm qm qn qo bp qp bb bk"><span id="457b" class="qq ok gu qn b bg qr qs l qt qu">kubectl create sa test-user</span></pre><p id="9589" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">Now we can use kubectl auth can-i command to check our service-account’s permissions.</p><p id="be4c" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">First let’s check for list and get operations:</p><pre class="pi pj pk pl pm qm qn qo bp qp bb bk"><span id="7a43" class="qq ok gu qn b bg qr qs l qt qu">&gt;kubectl auth can-i list pods --as=system:serviceaccount:default:test-user<br/>yes</span></pre><pre class="rc qm qn qo bp qp bb bk"><span id="f15b" class="qq ok gu qn b bg qr qs l qt qu">&gt;kubectl auth can-i get pods --as=system:serviceaccount:default:test-user<br/>yes</span></pre><p id="6803" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">And then check for the delete operation:</p><pre class="pi pj pk pl pm qm qn qo bp qp bb bk"><span id="8345" class="qq ok gu qn b bg qr qs l qt qu">&gt;kubectl auth can-i delete pods --as=system:serviceaccount:default:test-user<br/>no</span></pre><p id="06f8" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">As we see here, with our service account we can list and get pods but could not delete pods according to restrictions on our authorization webhook.</p><p id="fac6" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">You can take a look at my demonstration repository.</p><div class="pn po pp pq pr ps"><a href="https://github.com/mstrYoda/kubernetes-custom-authorization?source=post_page-----6b901196591b--------------------------------" rel="noopener  ugc nofollow" target="_blank"><div class="pt ab is"><div class="pu ab co cb pv pw"><h2 class="bf gv ij z px py pz qa qb qc qd gt bk">GitHub - mstrYoda/kubernetes-custom-authorization: It is an example repository to demonstrate…</h2><div class="qe l"><h3 class="bf b ij z px py pz qa qb qc qd du">You can&#x27;t perform that action at this time. You signed in with another tab or window. You signed out in another tab or…</h3></div><div class="qf l"><p class="bf b dv z px py pz qa qb qc qd du">github.com</p></div></div><div class="qg l"><div class="rd l qi qj qk qg ql ln ps"></div></div></div></a></div></div></div></div><div class="ab cb ob oc od oe" role="separator"><span class="of by bm og oh oi"></span><span class="of by bm og oh oi"></span><span class="of by bm og oh"></span></div><div class="gn go gp gq gr"><div class="ab cb"><div class="ci bh fz ga gb gc"><h2 id="f317" class="oj ok gu bf ol om on dy oo op oq ea or nk os ot ou no ov ow ox ns oy oz pa pb bk">Where to Use</h2><p id="69dd" class="pw-post-body-paragraph mz na gu nb b nc pc ne nf ng pd ni nj nk pe nm nn no pf nq nr ns pg nu nv nw gn bk">It is obvious that you can use it whenever you want to go beyond native solutions. But I think I could mention a couple of use cases.</p><p id="3127" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">Imagine that you have hundreds or thousands of developers/devops/SREs in your organization. And you want to dynamically change permissions of Kubernetes cluster users. It can be a quite cumbersome to do it via native RBAC.</p><p id="85c3" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">👉 You may need to give permissions to users for a specific <strong class="nb gv">time period<br/></strong>👉 You may want to add <strong class="nb gv">review&amp;approve process</strong> to grand permissions to users<br/>👉 You may want to keep <strong class="nb gv">authorization rules in sync</strong> across different Kubernetes clusters<br/>👉 You may also want to sync authorization rules from <strong class="nb gv">another source like LDAP</strong> or other <strong class="nb gv">identity providers<br/></strong>👉 You may want to use a custom policy engine for your authorization rules</p><p id="4ddd" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">Of course we can create a long list that changes according to specific use cases. In this post, as an example, we restricted a specific user’s/service account’s permissions.</p></div></div></div><div class="ab cb ob oc od oe" role="separator"><span class="of by bm og oh oi"></span><span class="of by bm og oh oi"></span><span class="of by bm og oh"></span></div><div class="gn go gp gq gr"><div class="ab cb"><div class="ci bh fz ga gb gc"><h2 id="1bf2" class="oj ok gu bf ol om on dy oo op oq ea or nk os ot ou no ov ow ox ns oy oz pa pb bk">References</h2><div class="pn po pp pq pr ps"><a href="https://kubernetes.io/docs/reference/access-authn-authz/webhook/?source=post_page-----6b901196591b--------------------------------" rel="noopener  ugc nofollow" target="_blank"><div class="pt ab is"><div class="pu ab co cb pv pw"><h2 class="bf gv ij z px py pz qa qb qc qd gt bk">Webhook Mode</h2><div class="qe l"><h3 class="bf b ij z px py pz qa qb qc qd du">A WebHook is an HTTP callback: an HTTP POST that occurs when something happens; a simple event-notification via HTTP…</h3></div><div class="qf l"><p class="bf b dv z px py pz qa qb qc qd du">kubernetes.io</p></div></div><div class="qg l"><div class="re l qi qj qk qg ql ln ps"></div></div></div></a></div><div class="pn po pp pq pr ps"><a href="https://kubernetes.io/docs/concepts/security/controlling-access/?source=post_page-----6b901196591b--------------------------------" rel="noopener  ugc nofollow" target="_blank"><div class="pt ab is"><div class="pu ab co cb pv pw"><h2 class="bf gv ij z px py pz qa qb qc qd gt bk">Controlling Access to the Kubernetes API</h2><div class="qe l"><h3 class="bf b ij z px py pz qa qb qc qd du">This page provides an overview of controlling access to the Kubernetes API. Users access the Kubernetes API using…</h3></div><div class="qf l"><p class="bf b dv z px py pz qa qb qc qd du">kubernetes.io</p></div></div><div class="qg l"><div class="rf l qi qj qk qg ql ln ps"></div></div></div></a></div><p id="c400" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">I hope this article informed you about how authorization works in Kubernetes in general and how can we go beyond it.</p><p id="7653" class="pw-post-body-paragraph mz na gu nb b nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw gn bk">See you on the next article. Till then, may the bug free code with you 🙏</p></div></div></div></div></section></div></div></article></div><div class="ab cb"><div class="ci bh fz ga gb gc"><div class="rg rh ab iv"><div class="qe ab"><a class="ri ay am ao" href="https://medium.com/tag/kubernetes?source=post_page-----6b901196591b--------------------------------" rel="noopener follow"><div class="rj fj cx rk ge rl rm bf b bg z bk rn">Kubernetes</div></a></div><div class="qe ab"><a class="ri ay am ao" href="https://medium.com/tag/golang?source=post_page-----6b901196591b--------------------------------" rel="noopener follow"><div class="rj fj cx rk ge rl rm bf b bg z bk rn">Golang</div></a></div><div class="qe ab"><a class="ri ay am ao" href="https://medium.com/tag/cloud-native?source=post_page-----6b901196591b--------------------------------" rel="noopener follow"><div class="rj fj cx rk ge rl rm bf b bg z bk rn">Cloud Native</div></a></div><div class="qe ab"><a class="ri ay am ao" href="https://medium.com/tag/authentication?source=post_page-----6b901196591b--------------------------------" rel="noopener follow"><div class="rj fj cx rk ge rl rm bf b bg z bk rn">Authentication</div></a></div><div class="qe ab"><a class="ri ay am ao" href="https://medium.com/tag/containers?source=post_page-----6b901196591b--------------------------------" rel="noopener follow"><div class="rj fj cx rk ge rl rm bf b bg z bk rn">Containers</div></a></div></div></div></div><div class="l"></div><footer class="ro rp rq rr rs rt ru rv rw ab q rx ry c"><div class="l ae"><div class="ab cb"><div class="ci bh fz ga gb gc"><div class="ab cp rz"><div class="ab q ke"><div class="sa l"><span class="l sb sc sd e d"><div class="ab q ke kf"><div class="pw-multi-vote-icon fj kg kh ki kj"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerClapButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fp%2F6b901196591b&amp;operation=register&amp;redirect=https%3A%2F%2Fmstryoda.medium.com%2Fkubernetes-beyond-rbac-make-your-own-authorization-via-webhook-6b901196591b&amp;user=Emre+Savc%C4%B1&amp;userId=c50c70d779e7&amp;source=-----6b901196591b---------------------clap_footer-----------" rel="noopener follow"><div><div class="bm" aria-hidden="false"><div class="kk ao kl km kn ko am kp kq kr kj"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM13.916 3.953l1.523-2.112-1.184-.39zM8.589 1.84l1.522 2.112-.337-2.501zM18.523 18.92c-.86.86-1.75 1.246-2.62 1.33a6 6 0 0 0 .407-.372c2.388-2.389 2.86-4.951 1.399-7.623l-.912-1.603-.79-1.672c-.26-.56-.194-.98.203-1.288a.7.7 0 0 1 .546-.132c.283.046.546.231.728.5l2.363 4.157c.976 1.624 1.141 4.237-1.324 6.702m-10.999-.438L3.37 14.328a.828.828 0 0 1 .585-1.408.83.83 0 0 1 .585.242l2.158 2.157a.365.365 0 0 0 .516-.516l-2.157-2.158-1.449-1.449a.826.826 0 0 1 1.167-1.17l3.438 3.44a.363.363 0 0 0 .516 0 .364.364 0 0 0 0-.516L5.293 9.513l-.97-.97a.826.826 0 0 1 0-1.166.84.84 0 0 1 1.167 0l.97.968 3.437 3.436a.36.36 0 0 0 .517 0 .366.366 0 0 0 0-.516L6.977 7.83a.82.82 0 0 1-.241-.584.82.82 0 0 1 .824-.826c.219 0 .43.087.584.242l5.787 5.787a.366.366 0 0 0 .587-.415l-1.117-2.363c-.26-.56-.194-.98.204-1.289a.7.7 0 0 1 .546-.132c.283.046.545.232.727.501l2.193 3.86c1.302 2.38.883 4.59-1.277 6.75-1.156 1.156-2.602 1.627-4.19 1.367-1.418-.236-2.866-1.033-4.079-2.246M10.75 5.971l2.12 2.12c-.41.502-.465 1.17-.128 1.89l.22.465-3.523-3.523a.8.8 0 0 1-.097-.368c0-.22.086-.428.241-.584a.847.847 0 0 1 1.167 0m7.355 1.705c-.31-.461-.746-.758-1.23-.837a1.44 1.44 0 0 0-1.11.275c-.312.24-.505.543-.59.881a1.74 1.74 0 0 0-.906-.465 1.47 1.47 0 0 0-.82.106l-2.182-2.182a1.56 1.56 0 0 0-2.2 0 1.54 1.54 0 0 0-.396.701 1.56 1.56 0 0 0-2.21-.01 1.55 1.55 0 0 0-.416.753c-.624-.624-1.649-.624-2.237-.037a1.557 1.557 0 0 0 0 2.2c-.239.1-.501.238-.715.453a1.56 1.56 0 0 0 0 2.2l.516.515a1.556 1.556 0 0 0-.753 2.615L7.01 19c1.32 1.319 2.909 2.189 4.475 2.449q.482.08.971.08c.85 0 1.653-.198 2.393-.579.231.033.46.054.686.054 1.266 0 2.457-.52 3.505-1.567 2.763-2.763 2.552-5.734 1.439-7.586z" clip-rule="evenodd"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l ks kt ku kv kw kx ky"><p class="bf b dv z du"><span class="kz">--</span></p></div></div></span><span class="l h g f se sf"><div class="ab q ke kf"><div class="pw-multi-vote-icon fj kg kh ki kj"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerClapButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fp%2F6b901196591b&amp;operation=register&amp;redirect=https%3A%2F%2Fmstryoda.medium.com%2Fkubernetes-beyond-rbac-make-your-own-authorization-via-webhook-6b901196591b&amp;user=Emre+Savc%C4%B1&amp;userId=c50c70d779e7&amp;source=-----6b901196591b---------------------clap_footer-----------" rel="noopener follow"><div><div class="bm" aria-hidden="false"><div class="kk ao kl km kn ko am kp kq kr kj"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM13.916 3.953l1.523-2.112-1.184-.39zM8.589 1.84l1.522 2.112-.337-2.501zM18.523 18.92c-.86.86-1.75 1.246-2.62 1.33a6 6 0 0 0 .407-.372c2.388-2.389 2.86-4.951 1.399-7.623l-.912-1.603-.79-1.672c-.26-.56-.194-.98.203-1.288a.7.7 0 0 1 .546-.132c.283.046.546.231.728.5l2.363 4.157c.976 1.624 1.141 4.237-1.324 6.702m-10.999-.438L3.37 14.328a.828.828 0 0 1 .585-1.408.83.83 0 0 1 .585.242l2.158 2.157a.365.365 0 0 0 .516-.516l-2.157-2.158-1.449-1.449a.826.826 0 0 1 1.167-1.17l3.438 3.44a.363.363 0 0 0 .516 0 .364.364 0 0 0 0-.516L5.293 9.513l-.97-.97a.826.826 0 0 1 0-1.166.84.84 0 0 1 1.167 0l.97.968 3.437 3.436a.36.36 0 0 0 .517 0 .366.366 0 0 0 0-.516L6.977 7.83a.82.82 0 0 1-.241-.584.82.82 0 0 1 .824-.826c.219 0 .43.087.584.242l5.787 5.787a.366.366 0 0 0 .587-.415l-1.117-2.363c-.26-.56-.194-.98.204-1.289a.7.7 0 0 1 .546-.132c.283.046.545.232.727.501l2.193 3.86c1.302 2.38.883 4.59-1.277 6.75-1.156 1.156-2.602 1.627-4.19 1.367-1.418-.236-2.866-1.033-4.079-2.246M10.75 5.971l2.12 2.12c-.41.502-.465 1.17-.128 1.89l.22.465-3.523-3.523a.8.8 0 0 1-.097-.368c0-.22.086-.428.241-.584a.847.847 0 0 1 1.167 0m7.355 1.705c-.31-.461-.746-.758-1.23-.837a1.44 1.44 0 0 0-1.11.275c-.312.24-.505.543-.59.881a1.74 1.74 0 0 0-.906-.465 1.47 1.47 0 0 0-.82.106l-2.182-2.182a1.56 1.56 0 0 0-2.2 0 1.54 1.54 0 0 0-.396.701 1.56 1.56 0 0 0-2.21-.01 1.55 1.55 0 0 0-.416.753c-.624-.624-1.649-.624-2.237-.037a1.557 1.557 0 0 0 0 2.2c-.239.1-.501.238-.715.453a1.56 1.56 0 0 0 0 2.2l.516.515a1.556 1.556 0 0 0-.753 2.615L7.01 19c1.32 1.319 2.909 2.189 4.475 2.449q.482.08.971.08c.85 0 1.653-.198 2.393-.579.231.033.46.054.686.054 1.266 0 2.457-.52 3.505-1.567 2.763-2.763 2.552-5.734 1.439-7.586z" clip-rule="evenodd"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l ks kt ku kv kw kx ky"><p class="bf b dv z du"><span class="kz">--</span></p></div></div></span></div><div class="bq ab"><div><div class="bm" aria-hidden="false"><button class="ao kk la lb ab q fk lc ld" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="le"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"></path></svg></button></div></div></div></div><div class="ab q"><div class="oi l is"><div><div class="bm" aria-hidden="false"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerBookmarkButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F6b901196591b&amp;operation=register&amp;redirect=https%3A%2F%2Fmstryoda.medium.com%2Fkubernetes-beyond-rbac-make-your-own-authorization-via-webhook-6b901196591b&amp;source=--------------------------bookmark_footer-----------" rel="noopener follow"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none" viewBox="0 0 25 25" class="du lg" aria-label="Add to list bookmark button"><path fill="currentColor" d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .805.396L12.5 17l5.695 4.396A.5.5 0 0 0 19 21v-8.5a.5.5 0 0 0-1 0v7.485l-5.195-4.012a.5.5 0 0 0-.61 0L7 19.985z"></path></svg></a></span></div></div></div><div class="oi l is"><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="footerSocialShareButton" class="af fk ah ai aj ak al lo an ao ap ex lp lq ld lr"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"></path></svg></button></div></div></div></div></div></div></div></div></div></footer><div class="sg sh si sj sk l bx"><div class="ab cb"><div class="ci bh fz ga gb gc"><div class="cl ab sl cp"><div class="ab ia"><a rel="noopener follow" href="/?source=post_page-----6b901196591b--------------------------------"><div class="l sm sn by so ie"><div class="l fj"><img alt="Emre Savcı" class="l fd by sp sq cx" src="https://miro.medium.com/v2/resize:fill:144:144/1*FT9XsHGlbCsKvWgeX8lE4A.jpeg" width="72" height="72" loading="lazy"/><div class="if by l sp sq fs n ig ft"></div></div></div></a></div><div class="j i d"><div class="ab"><span><button class="bf b bg z ep rj eq er es et eu ev ew ex ey ez fa au fb fc fd bm fe ff">Follow</button></span><div class="dt l"><div><div><div class="bm" aria-hidden="false"><div class="l"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fc27f384b248e&amp;operation=register&amp;redirect=https%3A%2F%2Fmstryoda.medium.com%2Fkubernetes-beyond-rbac-make-your-own-authorization-via-webhook-6b901196591b&amp;newsletterV3=c50c70d779e7&amp;newsletterV3Id=c27f384b248e&amp;user=Emre+Savc%C4%B1&amp;userId=c50c70d779e7&amp;source=-----6b901196591b---------------------subscribe_user-----------" rel="noopener follow"><button class="bf b bg z su am sv sw sx sy sz ta tb tc ew ex ey ez fa fb fc fd bm fe ff" aria-label="Subscribe"><svg xmlns="http://www.w3.org/2000/svg" width="38" height="38" fill="none" viewBox="0 0 38 38" class="sr ss st"><rect width="0.5" height="6.5" x="26.25" y="9.25" rx="0.25"></rect><rect width="0.5" height="6.5" x="29.75" y="12.25" rx="0.25" transform="rotate(90 29.75 12.25)"></rect><path d="M19.5 12.5h-7a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-5"></path><path d="M11.5 14.5 19 20l4-3"></path></svg></button></a></span></div></div></div></div></div></div></div></div><div class="ab cn cp"><div class="l"><div class="ab q"><a class="af ag ah ai aj ak al am an ao ap aq ar as at ab q" rel="noopener follow" href="/?source=post_page-----6b901196591b--------------------------------"><h2 class="pw-author-name bf td te tf tg bk"><span class="gn ix">Written by <!-- -->Emre Savcı</span></h2></a></div><div class="qe ab"><div class="l is"><span class="pw-follower-count bf b bg z bk"><a class="af ag ah ai aj ak al am an ao ap aq ar il" rel="noopener follow" href="/followers?source=post_page-----6b901196591b--------------------------------">1.8K Followers</a></span></div></div><div class="rc l"><p class="bf b bg z bk"><span class="gn">Tech. Lead @Trendyol &amp; Couchbase Ambassador | Go Türkiye, Kubernetes, Istio, CNCF, Scalability. Open Source Contributor.</span></p></div></div><div class="h k"><div class="ab"><span><button class="bf b bg z ep rj eq er es et eu ev ew ex ey ez fa au fb fc fd bm fe ff">Follow</button></span><div class="dt l"><div><div><div class="bm" aria-hidden="false"><div class="l"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fc27f384b248e&amp;operation=register&amp;redirect=https%3A%2F%2Fmstryoda.medium.com%2Fkubernetes-beyond-rbac-make-your-own-authorization-via-webhook-6b901196591b&amp;newsletterV3=c50c70d779e7&amp;newsletterV3Id=c27f384b248e&amp;user=Emre+Savc%C4%B1&amp;userId=c50c70d779e7&amp;source=-----6b901196591b---------------------subscribe_user-----------" rel="noopener follow"><button class="bf b bg z su am sv sw sx sy sz ta tb tc ew ex ey ez fa fb fc fd bm fe ff" aria-label="Subscribe"><svg xmlns="http://www.w3.org/2000/svg" width="38" height="38" fill="none" viewBox="0 0 38 38" class="sr ss st"><rect width="0.5" height="6.5" x="26.25" y="9.25" rx="0.25"></rect><rect width="0.5" height="6.5" x="29.75" y="12.25" rx="0.25" transform="rotate(90 29.75 12.25)"></rect><path d="M19.5 12.5h-7a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-5"></path><path d="M11.5 14.5 19 20l4-3"></path></svg></button></a></span></div></div></div></div></div></div></div></div><div class="th bh ti mj mk ml mm mn"></div></div></div><div class="h k j"><div class="th bh ti tj"></div><div class="ab cb"><div class="ci bh fz ga gb gc"><div class="tk ab ke iv"><div class="tl tm l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://help.medium.com/hc/en-us?source=post_page-----6b901196591b--------------------------------" rel="noopener follow"><p class="bf b dv z du">Help</p></a></div><div class="tl tm l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.statuspage.io/?source=post_page-----6b901196591b--------------------------------" rel="noopener follow"><p class="bf b dv z du">Status</p></a></div><div class="tl tm l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/about?autoplay=1&amp;source=post_page-----6b901196591b--------------------------------" rel="noopener follow"><p class="bf b dv z du">About</p></a></div><div class="tl tm l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=post_page-----6b901196591b--------------------------------" rel="noopener follow"><p class="bf b dv z du">Careers</p></a></div><div class="tl tm l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="pressinquiries@medium.com?source=post_page-----6b901196591b--------------------------------" rel="noopener follow"><p class="bf b dv z du">Press</p></a></div><div class="tl tm l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://blog.medium.com/?source=post_page-----6b901196591b--------------------------------" rel="noopener follow"><p class="bf b dv z du">Blog</p></a></div><div class="tl tm l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----6b901196591b--------------------------------" rel="noopener follow"><p class="bf b dv z du">Privacy</p></a></div><div class="tl tm l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----6b901196591b--------------------------------" rel="noopener follow"><p class="bf b dv z du">Terms</p></a></div><div class="tl tm l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://speechify.com/medium?source=post_page-----6b901196591b--------------------------------" rel="noopener follow"><p class="bf b dv z du">Text to speech</p></a></div><div class="tl l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/business?source=post_page-----6b901196591b--------------------------------" rel="noopener follow"><p class="bf b dv z du">Teams</p></a></div></div></div></div></div></div></div></div></div></div><script>window.__BUILD_ID__="main-20240910-162003-cd86cd0750"</script><script>window.__GRAPHQL_URI__ = "https://mstryoda.medium.com/_/graphql"</script><script>window.__PRELOADED_STATE__ = {"algolia":{"queries":{}},"cache":{"experimentGroupSet":true,"reason":"","group":"enabled","tags":["group-edgeCachePosts","post-6b901196591b","user-c50c70d779e7"],"serverVariantState":"44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a","middlewareEnabled":true,"cacheStatus":"DYNAMIC","shouldUseCache":true,"vary":[],"lohpSummerUpsellEnabled":false,"logoUpdatePhase3Enabled":true},"client":{"hydrated":false,"isUs":false,"isNativeMedium":false,"isSafariMobile":false,"isSafari":false,"isFirefox":false,"routingEntity":{"type":"USER","id":"c50c70d779e7","explicit":true},"viewerIsBot":false},"debug":{"requestId":"8d51a121-cb44-4b1d-a65a-d1165d090715","hybridDevServices":[],"originalSpanCarrier":{"traceparent":"00-bb3d88e31c82cce658a1fcb53a844cb0-ac640e825c750183-01"}},"multiVote":{"clapsPerPost":{}},"navigation":{"branch":{"show":null,"hasRendered":null,"blockedByCTA":false},"hideGoogleOneTap":false,"hasRenderedAlternateUserBanner":null,"currentLocation":"https:\u002F\u002Fmstryoda.medium.com\u002Fkubernetes-beyond-rbac-make-your-own-authorization-via-webhook-6b901196591b","host":"mstryoda.medium.com","hostname":"mstryoda.medium.com","referrer":"","hasSetReferrer":false,"susiModal":{"step":null,"operation":"register"},"postRead":false,"partnerProgram":{"selectedCountryCode":null},"queryString":"","currentHash":""},"config":{"nodeEnv":"production","version":"main-20240910-162003-cd86cd0750","target":"production","productName":"Medium","publicUrl":"https:\u002F\u002Fcdn-client.medium.com\u002Flite","authDomain":"medium.com","authGoogleClientId":"216296035834-k1k6qe060s2tp2a2jam4ljdcms00sttg.apps.googleusercontent.com","favicon":"production","glyphUrl":"https:\u002F\u002Fglyph.medium.com","branchKey":"key_live_ofxXr2qTrrU9NqURK8ZwEhknBxiI6KBm","algolia":{"appId":"MQ57UUUQZ2","apiKeySearch":"394474ced050e3911ae2249ecc774921","indexPrefix":"medium_","host":"-dsn.algolia.net"},"recaptchaKey":"6Lfc37IUAAAAAKGGtC6rLS13R1Hrw_BqADfS1LRk","recaptcha3Key":"6Lf8R9wUAAAAABMI_85Wb8melS7Zj6ziuf99Yot5","recaptchaEnterpriseKeyId":"6Le-uGgpAAAAAPprRaokM8AKthQ9KNGdoxaGUvVp","datadog":{"applicationId":"6702d87d-a7e0-42fe-bbcb-95b469547ea0","clientToken":"pub853ea8d17ad6821d9f8f11861d23dfed","rumToken":"pubf9cc52896502b9413b68ba36fc0c7162","context":{"deployment":{"target":"production","tag":"main-20240910-162003-cd86cd0750","commit":"cd86cd075040b9a598e9dae0a3feea7e46c1a470"}},"datacenter":"us"},"googleAnalyticsCode":"G-7JY7T788PK","googlePay":{"apiVersion":"2","apiVersionMinor":"0","merchantId":"BCR2DN6TV7EMTGBM","merchantName":"Medium","instanceMerchantId":"13685562959212738550"},"applePay":{"version":3},"signInWallCustomDomainCollectionIds":["3a8144eabfe3","336d898217ee","61061eb0c96b","138adf9c44c","819cc2aaeee0"],"mediumMastodonDomainName":"me.dm","mediumOwnedAndOperatedCollectionIds":["8a9336e5bb4","b7e45b22fec3","193b68bd4fba","8d6b8a439e32","54c98c43354d","3f6ecf56618","d944778ce714","92d2092dc598","ae2a65f35510","1285ba81cada","544c7006046e","fc8964313712","40187e704f1c","88d9857e584e","7b6769f2748b","bcc38c8f6edf","cef6983b292","cb8577c9149e","444d13b52878","713d7dbc99b0","ef8e90590e66","191186aaafa0","55760f21cdc5","9dc80918cc93","bdc4052bbdba","8ccfed20cbb2"],"tierOneDomains":["medium.com","thebolditalic.com","arcdigital.media","towardsdatascience.com","uxdesign.cc","codeburst.io","psiloveyou.xyz","writingcooperative.com","entrepreneurshandbook.co","prototypr.io","betterhumans.coach.me","theascent.pub"],"topicsToFollow":["d61cf867d93f","8a146bc21b28","1eca0103fff3","4d562ee63426","aef1078a3ef5","e15e46793f8d","6158eb913466","55f1c20aba7a","3d18b94f6858","4861fee224fd","63c6f1f93ee","1d98b3a9a871","decb52b64abf","ae5d4995e225","830cded25262"],"topicToTagMappings":{"accessibility":"accessibility","addiction":"addiction","android-development":"android-development","art":"art","artificial-intelligence":"artificial-intelligence","astrology":"astrology","basic-income":"basic-income","beauty":"beauty","biotech":"biotech","blockchain":"blockchain","books":"books","business":"business","cannabis":"cannabis","cities":"cities","climate-change":"climate-change","comics":"comics","coronavirus":"coronavirus","creativity":"creativity","cryptocurrency":"cryptocurrency","culture":"culture","cybersecurity":"cybersecurity","data-science":"data-science","design":"design","digital-life":"digital-life","disability":"disability","economy":"economy","education":"education","equality":"equality","family":"family","feminism":"feminism","fiction":"fiction","film":"film","fitness":"fitness","food":"food","freelancing":"freelancing","future":"future","gadgets":"gadgets","gaming":"gaming","gun-control":"gun-control","health":"health","history":"history","humor":"humor","immigration":"immigration","ios-development":"ios-development","javascript":"javascript","justice":"justice","language":"language","leadership":"leadership","lgbtqia":"lgbtqia","lifestyle":"lifestyle","machine-learning":"machine-learning","makers":"makers","marketing":"marketing","math":"math","media":"media","mental-health":"mental-health","mindfulness":"mindfulness","money":"money","music":"music","neuroscience":"neuroscience","nonfiction":"nonfiction","outdoors":"outdoors","parenting":"parenting","pets":"pets","philosophy":"philosophy","photography":"photography","podcasts":"podcast","poetry":"poetry","politics":"politics","privacy":"privacy","product-management":"product-management","productivity":"productivity","programming":"programming","psychedelics":"psychedelics","psychology":"psychology","race":"race","relationships":"relationships","religion":"religion","remote-work":"remote-work","san-francisco":"san-francisco","science":"science","self":"self","self-driving-cars":"self-driving-cars","sexuality":"sexuality","social-media":"social-media","society":"society","software-engineering":"software-engineering","space":"space","spirituality":"spirituality","sports":"sports","startups":"startup","style":"style","technology":"technology","transportation":"transportation","travel":"travel","true-crime":"true-crime","tv":"tv","ux":"ux","venture-capital":"venture-capital","visual-design":"visual-design","work":"work","world":"world","writing":"writing"},"defaultImages":{"avatar":{"imageId":"1*dmbNkD5D-u45r44go_cf0g.png","height":150,"width":150},"orgLogo":{"imageId":"7*V1_7XP4snlmqrc_0Njontw.png","height":110,"width":500},"postLogo":{"imageId":"bd978bb536350a710e8efb012513429cabdc4c28700604261aeda246d0f980b7","height":810,"width":1440},"postPreviewImage":{"imageId":"1*hn4v1tCaJy7cWMyb0bpNpQ.png","height":386,"width":579}},"collectionStructuredData":{"8d6b8a439e32":{"name":"Elemental","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F980\u002F1*9ygdqoKprhwuTVKUM0DLPA@2x.png","width":980,"height":159}}},"3f6ecf56618":{"name":"Forge","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F596\u002F1*uULpIlImcO5TDuBZ6lm7Lg@2x.png","width":596,"height":183}}},"ae2a65f35510":{"name":"GEN","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F264\u002F1*RdVZMdvfV3YiZTw6mX7yWA.png","width":264,"height":140}}},"88d9857e584e":{"name":"LEVEL","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*JqYMhNX6KNNb2UlqGqO2WQ.png","width":540,"height":108}}},"7b6769f2748b":{"name":"Marker","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F383\u002F1*haCUs0wF6TgOOvfoY-jEoQ@2x.png","width":383,"height":92}}},"444d13b52878":{"name":"OneZero","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*cw32fIqCbRWzwJaoQw6BUg.png","width":540,"height":123}}},"8ccfed20cbb2":{"name":"Zora","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*tZUQqRcCCZDXjjiZ4bDvgQ.png","width":540,"height":106}}}},"embeddedPostIds":{"coronavirus":"cd3010f9d81f"},"sharedCdcMessaging":{"COVID_APPLICABLE_TAG_SLUGS":[],"COVID_APPLICABLE_TOPIC_NAMES":[],"COVID_APPLICABLE_TOPIC_NAMES_FOR_TOPIC_PAGE":[],"COVID_MESSAGES":{"tierA":{"text":"For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":66,"end":73,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"tierB":{"text":"Anyone can publish on Medium per our Policies, but we don’t fact-check every story. For more info about the coronavirus, see cdc.gov.","markups":[{"start":37,"end":45,"href":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Fcategories\u002F201931128-Policies-Safety"},{"start":125,"end":132,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"paywall":{"text":"This article has been made free for everyone, thanks to Medium Members. For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":56,"end":70,"href":"https:\u002F\u002Fmedium.com\u002Fmembership"},{"start":138,"end":145,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"unbound":{"text":"This article is free for everyone, thanks to Medium Members. For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":45,"end":59,"href":"https:\u002F\u002Fmedium.com\u002Fmembership"},{"start":127,"end":134,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]}},"COVID_BANNER_POST_ID_OVERRIDE_WHITELIST":["3b31a67bff4a"]},"sharedVoteMessaging":{"TAGS":["politics","election-2020","government","us-politics","election","2020-presidential-race","trump","donald-trump","democrats","republicans","congress","republican-party","democratic-party","biden","joe-biden","maga"],"TOPICS":["politics","election"],"MESSAGE":{"text":"Find out more about the U.S. election results here.","markups":[{"start":46,"end":50,"href":"https:\u002F\u002Fcookpolitical.com\u002F2020-national-popular-vote-tracker"}]},"EXCLUDE_POSTS":["397ef29e3ca5"]},"embedPostRules":[],"recircOptions":{"v1":{"limit":3},"v2":{"limit":8}},"braintreeClientKey":"production_zjkj96jm_m56f8fqpf7ngnrd4","braintree":{"enabled":true,"merchantId":"m56f8fqpf7ngnrd4","merchantAccountId":{"usd":"AMediumCorporation_instant","eur":"amediumcorporation_EUR","cad":"amediumcorporation_CAD"},"publicKey":"ds2nn34bg2z7j5gd","braintreeEnvironment":"production","dashboardUrl":"https:\u002F\u002Fwww.braintreegateway.com\u002Fmerchants","gracePeriodDurationInDays":14,"mediumMembershipPlanId":{"monthly":"ce105f8c57a3","monthlyV2":"e8a5e126-792b-4ee6-8fba-d574c1b02fc5","monthlyWithTrial":"d5ee3dbe3db8","monthlyPremium":"fa741a9b47a2","yearly":"a40ad4a43185","yearlyV2":"3815d7d6-b8ca-4224-9b8c-182f9047866e","yearlyStaff":"d74fb811198a","yearlyWithTrial":"b3bc7350e5c7","yearlyPremium":"e21bd2c12166","monthlyOneYearFree":"e6c0637a-2bad-4171-ab4f-3c268633d83c","monthly25PercentOffFirstYear":"235ecc62-0cdb-49ae-9378-726cd21c504b","monthly20PercentOffFirstYear":"ba518864-9c13-4a99-91ca-411bf0cac756","monthly15PercentOffFirstYear":"594c029b-9f89-43d5-88f8-8173af4e070e","monthly10PercentOffFirstYear":"c6c7bc9a-40f2-4b51-8126-e28511d5bdb0","monthlyForStudents":"629ebe51-da7d-41fd-8293-34cd2f2030a8","yearlyOneYearFree":"78ba7be9-0d9f-4ece-aa3e-b54b826f2bf1","yearly25PercentOffFirstYear":"2dbb010d-bb8f-4eeb-ad5c-a08509f42d34","yearly20PercentOffFirstYear":"47565488-435b-47f8-bf93-40d5fbe0ebc8","yearly15PercentOffFirstYear":"8259809b-0881-47d9-acf7-6c001c7f720f","yearly10PercentOffFirstYear":"9dd694fb-96e1-472c-8d9e-3c868d5c1506","yearlyForStudents":"e29345ef-ab1c-4234-95c5-70e50fe6bc23","monthlyCad":"p52orjkaceei","yearlyCad":"h4q9g2up9ktt"},"braintreeDiscountId":{"oneMonthFree":"MONTHS_FREE_01","threeMonthsFree":"MONTHS_FREE_03","sixMonthsFree":"MONTHS_FREE_06","fiftyPercentOffOneYear":"FIFTY_PERCENT_OFF_ONE_YEAR"},"3DSecureVersion":"2","defaultCurrency":"usd","providerPlanIdCurrency":{"4ycw":"usd","rz3b":"usd","3kqm":"usd","jzw6":"usd","c2q2":"usd","nnsw":"usd","q8qw":"usd","d9y6":"usd","fx7w":"cad","nwf2":"cad"}},"paypalClientId":"AXj1G4fotC2GE8KzWX9mSxCH1wmPE3nJglf4Z2ig_amnhvlMVX87otaq58niAg9iuLktVNF_1WCMnN7v","paypal":{"host":"https:\u002F\u002Fapi.paypal.com:443","clientMode":"production","serverMode":"live","webhookId":"4G466076A0294510S","monthlyPlan":{"planId":"P-9WR0658853113943TMU5FDQA","name":"Medium Membership (Monthly) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"yearlyPlan":{"planId":"P-7N8963881P8875835MU5JOPQ","name":"Medium Membership (Annual) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"oneYearGift":{"name":"Medium Membership (1 Year, Digital Gift Code)","description":"Unlimited access to the best and brightest stories on Medium. Gift codes can be redeemed at medium.com\u002Fredeem.","price":"50.00","currency":"USD","sku":"membership-gift-1-yr"},"oldMonthlyPlan":{"planId":"P-96U02458LM656772MJZUVH2Y","name":"Medium Membership (Monthly)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"oldYearlyPlan":{"planId":"P-59P80963JF186412JJZU3SMI","name":"Medium Membership (Annual)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"monthlyPlanWithTrial":{"planId":"P-66C21969LR178604GJPVKUKY","name":"Medium Membership (Monthly) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"yearlyPlanWithTrial":{"planId":"P-6XW32684EX226940VKCT2MFA","name":"Medium Membership (Annual) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"oldMonthlyPlanNoSetupFee":{"planId":"P-4N046520HR188054PCJC7LJI","name":"Medium Membership (Monthly)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"oldYearlyPlanNoSetupFee":{"planId":"P-7A4913502Y5181304CJEJMXQ","name":"Medium Membership (Annual)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"sdkUrl":"https:\u002F\u002Fwww.paypal.com\u002Fsdk\u002Fjs"},"stripePublishableKey":"pk_live_7FReX44VnNIInZwrIIx6ghjl","log":{"json":true,"level":"info"},"imageUploadMaxSizeMb":25,"staffPicks":{"title":"Staff Picks","catalogId":"c7bc6e1ee00f"}},"session":{"xsrf":""}}</script><script>window.__APOLLO_STATE__ = {"ROOT_QUERY":{"__typename":"Query","viewer":null,"collectionByDomainOrSlug({\"domainOrSlug\":\"mstryoda.medium.com\"})":null,"postResult({\"id\":\"6b901196591b\"})":{"__ref":"Post:6b901196591b"}},"LinkedAccounts:c50c70d779e7":{"__typename":"LinkedAccounts","mastodon":null,"id":"c50c70d779e7"},"UserViewerEdge:userId:c50c70d779e7-viewerId:lo_717c0c5580fa":{"__typename":"UserViewerEdge","id":"userId:c50c70d779e7-viewerId:lo_717c0c5580fa","isFollowing":false,"isUser":false,"isMuting":false},"NewsletterV3:c27f384b248e":{"__typename":"NewsletterV3","id":"c27f384b248e","type":"NEWSLETTER_TYPE_AUTHOR","slug":"c50c70d779e7","name":"c50c70d779e7","collection":null,"user":{"__ref":"User:c50c70d779e7"}},"User:c50c70d779e7":{"__typename":"User","id":"c50c70d779e7","name":"Emre Savcı","username":"mstryoda","newsletterV3":{"__ref":"NewsletterV3:c27f384b248e"},"linkedAccounts":{"__ref":"LinkedAccounts:c50c70d779e7"},"isSuspended":false,"imageId":"1*FT9XsHGlbCsKvWgeX8lE4A.jpeg","mediumMemberAt":1702243891000,"verifications":{"__typename":"VerifiedInfo","isBookAuthor":false},"socialStats":{"__typename":"SocialStats","followerCount":1858},"customDomainState":{"__typename":"CustomDomainState","live":{"__typename":"CustomDomain","domain":"mstryoda.medium.com"}},"hasSubdomain":true,"bio":"Tech. Lead @Trendyol & Couchbase Ambassador | Go Türkiye, Kubernetes, Istio, CNCF, Scalability. Open Source Contributor.","isPartnerProgramEnrolled":false,"viewerEdge":{"__ref":"UserViewerEdge:userId:c50c70d779e7-viewerId:lo_717c0c5580fa"},"viewerIsUser":false,"postSubscribeMembershipUpsellShownAt":0,"allowNotes":true,"twitterScreenName":"","membership":{"__ref":"Membership:823fa798c1fc"}},"Paragraph:87b0b471ddab_0":{"__typename":"Paragraph","id":"87b0b471ddab_0","name":"206a","type":"H3","href":null,"layout":null,"metadata":null,"text":"Kubernetes Beyond RBAC - Make Your Own Authorization via Webhook","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*GGJnah7Q5C7mdic8Y3PfcQ.png":{"__typename":"ImageMetadata","id":"1*GGJnah7Q5C7mdic8Y3PfcQ.png","originalHeight":468,"originalWidth":1880,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:87b0b471ddab_1":{"__typename":"Paragraph","id":"87b0b471ddab_1","name":"8d2f","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*GGJnah7Q5C7mdic8Y3PfcQ.png"},"text":"https:\u002F\u002Fkubernetes.io","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":21,"href":"https:\u002F\u002Fkubernetes.io","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_2":{"__typename":"Paragraph","id":"87b0b471ddab_2","name":"b2be","type":"P","href":null,"layout":null,"metadata":null,"text":"Kubernetes is a great container orchestration tool that gives you a lot of customization options. You can easily extend\u002Freplace many of its components like CNI, CSI, scheduler or even authorization components.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_3":{"__typename":"Paragraph","id":"87b0b471ddab_3","name":"3c81","type":"P","href":null,"layout":null,"metadata":null,"text":"In this article, you will see how to write your own authorization webhook that works on Kubernetes to extend RBAC functionalities or remove it at all.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_4":{"__typename":"Paragraph","id":"87b0b471ddab_4","name":"edfe","type":"P","href":null,"layout":null,"metadata":null,"text":"We will take a look at the following topics:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_5":{"__typename":"Paragraph","id":"87b0b471ddab_5","name":"07a3","type":"BQ","href":null,"layout":null,"metadata":null,"text":"- Kubernetes Authorization Flow\n- Configuring Kubernetes API Server for Authorization Webhook\n- What an Authorization Request Looks Like\n- Writing Authorization Webhook\n- Generating Self Signed Certificate\n- What About Kubectl Auth\n- Show Time - Running All\n- Where to Use\n- References","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_6":{"__typename":"Paragraph","id":"87b0b471ddab_6","name":"edce","type":"H4","href":null,"layout":null,"metadata":null,"text":"Kubernetes Authorization Flow","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_7":{"__typename":"Paragraph","id":"87b0b471ddab_7","name":"8114","type":"P","href":null,"layout":null,"metadata":null,"text":"Let’s start with explaining the internal authorization flow of Kubernetes.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*mmHUTMaLLQRteqDVSfCPLA.png":{"__typename":"ImageMetadata","id":"1*mmHUTMaLLQRteqDVSfCPLA.png","originalHeight":795,"originalWidth":1704,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:87b0b471ddab_8":{"__typename":"Paragraph","id":"87b0b471ddab_8","name":"3d45","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*mmHUTMaLLQRteqDVSfCPLA.png"},"text":"https:\u002F\u002Fkubernetes.io\u002Fdocs\u002Fconcepts\u002Fsecurity\u002Fcontrolling-access\u002F","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":64,"href":"https:\u002F\u002Fkubernetes.io\u002Fdocs\u002Fconcepts\u002Fsecurity\u002Fcontrolling-access\u002F","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_9":{"__typename":"Paragraph","id":"87b0b471ddab_9","name":"b76f","type":"P","href":null,"layout":null,"metadata":null,"text":"A request that arrives at the API server goes through the flow shown in the above image.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_10":{"__typename":"Paragraph","id":"87b0b471ddab_10","name":"aa7d","type":"P","href":null,"layout":null,"metadata":null,"text":"Every request that goes to Kubernetes cluster is authenticated by the API server, and then a couple of authorization flows start. After that authorization flow, the API server calls admission control webhooks. Finally, if everything goes well, the request will be accomplished by querying or modifying the state of etcd.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_11":{"__typename":"Paragraph","id":"87b0b471ddab_11","name":"9cef","type":"P","href":null,"layout":null,"metadata":null,"text":"Thanks to the extensible architecture of Kubernetes, we can extend every step described above. We can integrate our custom authentication solutions. We can write our own authorization server. Or we can interfere with every resource creation or modification.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_12":{"__typename":"Paragraph","id":"87b0b471ddab_12","name":"9ba2","type":"P","href":null,"layout":null,"metadata":null,"text":"If you would like to learn authorization using RBAC in Kubernetes please take a look my previous article about configuring RBAC 👇","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_13":{"__typename":"Paragraph","id":"87b0b471ddab_13","name":"5bab","type":"MIXTAPE_EMBED","href":null,"layout":null,"metadata":null,"text":"Configure RBAC in Kubernetes Like a Boss\nIn this post I will explain how to configure RBAC in kubernetes. Also we will see an example before and after rbac…medium.com","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":166,"href":"https:\u002F\u002Fmedium.com\u002Ftrendyol-tech\u002Fconfigure-rbac-in-kubernetes-like-a-boss-665e2a8665dd","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":40,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":41,"end":156,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":{"__typename":"MixtapeMetadata","href":"https:\u002F\u002Fmedium.com\u002Ftrendyol-tech\u002Fconfigure-rbac-in-kubernetes-like-a-boss-665e2a8665dd","mediaResource":{"__typename":"MediaResource","mediumCatalog":null},"thumbnailImageId":"0*YAJ2Sf4Nl5DSH8j1.jpg"}},"Paragraph:87b0b471ddab_14":{"__typename":"Paragraph","id":"87b0b471ddab_14","name":"8878","type":"H4","href":null,"layout":null,"metadata":null,"text":"Configuring Kubernetes API Server for Authorization Webhook","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_15":{"__typename":"Paragraph","id":"87b0b471ddab_15","name":"98a3","type":"P","href":null,"layout":null,"metadata":null,"text":"You need to configure the API server to specify your authorization webhook address.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_16":{"__typename":"Paragraph","id":"87b0b471ddab_16","name":"a56c","type":"P","href":null,"layout":null,"metadata":null,"text":"Personally, I am using Kind to test Kubernetes locally. The following configuration enables Webhook authorization on the API server for Kubernetes. Let’s put this configuration in a file named “kind-cp.yaml”.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_17":{"__typename":"Paragraph","id":"87b0b471ddab_17","name":"7b6b","type":"PRE","href":null,"layout":null,"metadata":null,"text":"kind: Cluster\napiVersion: kind.x-k8s.io\u002Fv1alpha4\nnodes:\n- role: control-plane\n  extraMounts:\n  - hostPath: \u002FUsers\u002Femre.savci\u002FDesktop\u002Fkube-authz\n    containerPath: \u002Ffiles\n  kubeadmConfigPatches:\n  - |\n    kind: ClusterConfiguration\n    apiServer:\n        extraArgs:\n          enable-admission-plugins: NodeRestriction,MutatingAdmissionWebhook,ValidatingAdmissionWebhook\n          authorization-mode: Webhook, RBAC\n          authorization-webhook-version: v1\n          authorization-webhook-config-file: \u002Ffiles\u002Fauthz-webhook.yaml\n          authorization-webhook-cache-authorized-ttl: 120s\n          authorization-webhook-cache-unauthorized-ttl: 30s\n        extraVolumes:\n        - name: api-server-basic-auth-files\n          hostPath: \"\u002Ffiles\"\n          mountPath: \"\u002Ffiles\"\n          readOnly: true","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"yaml"},"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_18":{"__typename":"Paragraph","id":"87b0b471ddab_18","name":"1ebc","type":"P","href":null,"layout":null,"metadata":null,"text":"If you take a closer look at the configuration file, you will face authorization-related arguments.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_19":{"__typename":"Paragraph","id":"87b0b471ddab_19","name":"46bf","type":"P","href":null,"layout":null,"metadata":null,"text":"The following line specifies that our authorization mode uses both native RBAC and our custom-written authorization webhook:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_20":{"__typename":"Paragraph","id":"87b0b471ddab_20","name":"25e5","type":"PRE","href":null,"layout":null,"metadata":null,"text":"authorization-mode: Webhook, RBAC","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"makefile"},"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_21":{"__typename":"Paragraph","id":"87b0b471ddab_21","name":"753f","type":"P","href":null,"layout":null,"metadata":null,"text":"The following line specifies the configuration file of our authorization webhook:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_22":{"__typename":"Paragraph","id":"87b0b471ddab_22","name":"e066","type":"PRE","href":null,"layout":null,"metadata":null,"text":"authorization-webhook-config-file: \u002Ffiles\u002Fauthz-webhook.yaml","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"bash"},"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_23":{"__typename":"Paragraph","id":"87b0b471ddab_23","name":"d619","type":"P","href":null,"layout":null,"metadata":null,"text":"Here is our authorization webhook configuration file:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_24":{"__typename":"Paragraph","id":"87b0b471ddab_24","name":"d4d8","type":"PRE","href":null,"layout":null,"metadata":null,"text":"clusters:\n- name: my-cluster\n  cluster:\n    certificate-authority: \u002Ffiles\u002Fwebhook.crt\n    server: https:\u002F\u002Fauthz-webhook\u002Fauthorize\nusers:\n- name: api-server\n  user:\n    token: test-token\ncurrent-context: my-cluster\ncontexts:\n- context:\n    cluster: my-cluster\n    user: api-server\n  name: my-cluster","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"yaml"},"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_25":{"__typename":"Paragraph","id":"87b0b471ddab_25","name":"f050","type":"P","href":null,"layout":null,"metadata":null,"text":"Now we can create a cluster using those configurations.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_26":{"__typename":"Paragraph","id":"87b0b471ddab_26","name":"9804","type":"PRE","href":null,"layout":null,"metadata":null,"text":"kind create cluster --retain --config kind-cp.yaml","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"bash"},"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*Pi4ttamV9hHCZa4O5qiyqQ.png":{"__typename":"ImageMetadata","id":"1*Pi4ttamV9hHCZa4O5qiyqQ.png","originalHeight":338,"originalWidth":848,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:87b0b471ddab_27":{"__typename":"Paragraph","id":"87b0b471ddab_27","name":"a40b","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*Pi4ttamV9hHCZa4O5qiyqQ.png"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_28":{"__typename":"Paragraph","id":"87b0b471ddab_28","name":"de7f","type":"H4","href":null,"layout":null,"metadata":null,"text":"What an Authorization Request Looks Like","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_29":{"__typename":"Paragraph","id":"87b0b471ddab_29","name":"1dae","type":"P","href":null,"layout":null,"metadata":null,"text":"Before writing a custom authorization webhook, let’s take a look at authorization request that send by Kubernetes.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_30":{"__typename":"Paragraph","id":"87b0b471ddab_30","name":"b789","type":"P","href":null,"layout":null,"metadata":null,"text":"You can always define a custom type for incoming requests but thanks to Kubernetes api we have that request type for Golang.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_31":{"__typename":"Paragraph","id":"87b0b471ddab_31","name":"b311","type":"P","href":null,"layout":null,"metadata":null,"text":"We can install the Kubernetes api package by the following command:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_32":{"__typename":"Paragraph","id":"87b0b471ddab_32","name":"04f1","type":"PRE","href":null,"layout":null,"metadata":null,"text":"go get \"k8s.io\u002Fapi\u002Fauthorization\u002Fv1\"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"csharp"},"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_33":{"__typename":"Paragraph","id":"87b0b471ddab_33","name":"9237","type":"P","href":null,"layout":null,"metadata":null,"text":"After that, we have our authorization request object: SubjectAccessReview.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":54,"end":73,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_34":{"__typename":"Paragraph","id":"87b0b471ddab_34","name":"62d2","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F SubjectAccessReview checks whether or not a user or group can perform an action.\ntype SubjectAccessReview struct {\n metav1.TypeMeta `json:\",inline\"`\n \u002F\u002F Standard list metadata.\n \u002F\u002F More info: https:\u002F\u002Fgit.k8s.io\u002Fcommunity\u002Fcontributors\u002Fdevel\u002Fsig-architecture\u002Fapi-conventions.md#metadata\n \u002F\u002F +optional\n metav1.ObjectMeta `json:\"metadata,omitempty\" protobuf:\"bytes,1,opt,name=metadata\"`\n\n \u002F\u002F Spec holds information about the request being evaluated\n Spec SubjectAccessReviewSpec `json:\"spec\" protobuf:\"bytes,2,opt,name=spec\"`\n\n \u002F\u002F Status is filled in by the server and indicates whether the request is allowed or not\n \u002F\u002F +optional\n Status SubjectAccessReviewStatus `json:\"status,omitempty\" protobuf:\"bytes,3,opt,name=status\"`\n}","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"go"},"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_35":{"__typename":"Paragraph","id":"87b0b471ddab_35","name":"28cb","type":"P","href":null,"layout":null,"metadata":null,"text":"In this struct we have two important fields:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_36":{"__typename":"Paragraph","id":"87b0b471ddab_36","name":"0e9d","type":"ULI","href":null,"layout":null,"metadata":null,"text":"SubjectAccessReviewSpec: It contains request details like resource attributes and user group information.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":0,"end":23,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_37":{"__typename":"Paragraph","id":"87b0b471ddab_37","name":"f26f","type":"P","href":null,"layout":null,"metadata":null,"text":"In this type there are two important fields: ResourceAttributes and NonResourceAttributes.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":45,"end":63,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":68,"end":89,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_38":{"__typename":"Paragraph","id":"87b0b471ddab_38","name":"3576","type":"P","href":null,"layout":null,"metadata":null,"text":"ResourceAttributes: This field is non-nil when access is requested to a Kubernetes resource like pod, service, etc.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":20,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_39":{"__typename":"Paragraph","id":"87b0b471ddab_39","name":"275e","type":"P","href":null,"layout":null,"metadata":null,"text":"NonResourceAttributes: This field is non-nil when you try to check permissions via kubectl auth can-i.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":23,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":83,"end":101,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_40":{"__typename":"Paragraph","id":"87b0b471ddab_40","name":"db99","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F SubjectAccessReviewSpec is a description of the access request.  Exactly one of ResourceAuthorizationAttributes\n\u002F\u002F and NonResourceAuthorizationAttributes must be set\ntype SubjectAccessReviewSpec struct {\n \u002F\u002F ResourceAuthorizationAttributes describes information for a resource access request\n \u002F\u002F +optional\n ResourceAttributes *ResourceAttributes `json:\"resourceAttributes,omitempty\" protobuf:\"bytes,1,opt,name=resourceAttributes\"`\n \u002F\u002F NonResourceAttributes describes information for a non-resource access request\n \u002F\u002F +optional\n NonResourceAttributes *NonResourceAttributes `json:\"nonResourceAttributes,omitempty\" protobuf:\"bytes,2,opt,name=nonResourceAttributes\"`\n\n \u002F\u002F User is the user you're testing for.\n \u002F\u002F If you specify \"User\" but not \"Groups\", then is it interpreted as \"What if User were not a member of any groups\n \u002F\u002F +optional\n User string `json:\"user,omitempty\" protobuf:\"bytes,3,opt,name=user\"`\n \u002F\u002F Groups is the groups you're testing for.\n \u002F\u002F +optional\n Groups []string `json:\"groups,omitempty\" protobuf:\"bytes,4,rep,name=groups\"`\n \u002F\u002F Extra corresponds to the user.Info.GetExtra() method from the authenticator.  Since that is input to the authorizer\n \u002F\u002F it needs a reflection here.\n \u002F\u002F +optional\n Extra map[string]ExtraValue `json:\"extra,omitempty\" protobuf:\"bytes,5,rep,name=extra\"`\n \u002F\u002F UID information about the requesting user.\n \u002F\u002F +optional\n UID string `json:\"uid,omitempty\" protobuf:\"bytes,6,opt,name=uid\"`\n}","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"go"},"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_41":{"__typename":"Paragraph","id":"87b0b471ddab_41","name":"c98a","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F ResourceAttributes includes the authorization attributes available for resource requests to the Authorizer interface\ntype ResourceAttributes struct {\n \u002F\u002F Namespace is the namespace of the action being requested.  Currently, there is no distinction between no namespace and all namespaces\n \u002F\u002F \"\" (empty) is defaulted for LocalSubjectAccessReviews\n \u002F\u002F \"\" (empty) is empty for cluster-scoped resources\n \u002F\u002F \"\" (empty) means \"all\" for namespace scoped resources from a SubjectAccessReview or SelfSubjectAccessReview\n \u002F\u002F +optional\n Namespace string `json:\"namespace,omitempty\" protobuf:\"bytes,1,opt,name=namespace\"`\n \u002F\u002F Verb is a kubernetes resource API verb, like: get, list, watch, create, update, delete, proxy.  \"*\" means all.\n \u002F\u002F +optional\n Verb string `json:\"verb,omitempty\" protobuf:\"bytes,2,opt,name=verb\"`\n \u002F\u002F Group is the API Group of the Resource.  \"*\" means all.\n \u002F\u002F +optional\n Group string `json:\"group,omitempty\" protobuf:\"bytes,3,opt,name=group\"`\n \u002F\u002F Version is the API Version of the Resource.  \"*\" means all.\n \u002F\u002F +optional\n Version string `json:\"version,omitempty\" protobuf:\"bytes,4,opt,name=version\"`\n \u002F\u002F Resource is one of the existing resource types.  \"*\" means all.\n \u002F\u002F +optional\n Resource string `json:\"resource,omitempty\" protobuf:\"bytes,5,opt,name=resource\"`\n \u002F\u002F Subresource is one of the existing resource types.  \"\" means none.\n \u002F\u002F +optional\n Subresource string `json:\"subresource,omitempty\" protobuf:\"bytes,6,opt,name=subresource\"`\n \u002F\u002F Name is the name of the resource being requested for a \"get\" or deleted for a \"delete\". \"\" (empty) means all.\n \u002F\u002F +optional\n Name string `json:\"name,omitempty\" protobuf:\"bytes,7,opt,name=name\"`\n}","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"go"},"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_42":{"__typename":"Paragraph","id":"87b0b471ddab_42","name":"3ed5","type":"ULI","href":null,"layout":null,"metadata":null,"text":"SubjectAccessReviewStatus: This field contains authorization response for the request is wether allowed or denied.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":0,"end":25,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_43":{"__typename":"Paragraph","id":"87b0b471ddab_43","name":"7617","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F SubjectAccessReviewStatus\ntype SubjectAccessReviewStatus struct {\n \u002F\u002F Allowed is required. True if the action would be allowed, false otherwise.\n Allowed bool `json:\"allowed\" protobuf:\"varint,1,opt,name=allowed\"`\n \u002F\u002F Denied is optional. True if the action would be denied, otherwise\n \u002F\u002F false. If both allowed is false and denied is false, then the\n \u002F\u002F authorizer has no opinion on whether to authorize the action. Denied\n \u002F\u002F may not be true if Allowed is true.\n \u002F\u002F +optional\n Denied bool `json:\"denied,omitempty\" protobuf:\"varint,4,opt,name=denied\"`\n \u002F\u002F Reason is optional.  It indicates why a request was allowed or denied.\n \u002F\u002F +optional\n Reason string `json:\"reason,omitempty\" protobuf:\"bytes,2,opt,name=reason\"`\n \u002F\u002F EvaluationError is an indication that some error occurred during the authorization check.\n \u002F\u002F It is entirely possible to get an error and be able to continue determine authorization status in spite of it.\n \u002F\u002F For instance, RBAC can be missing a role, but enough roles are still present and bound to reason about the request.\n \u002F\u002F +optional\n EvaluationError string `json:\"evaluationError,omitempty\" protobuf:\"bytes,3,opt,name=evaluationError\"`\n}","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"go"},"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_44":{"__typename":"Paragraph","id":"87b0b471ddab_44","name":"5f7a","type":"P","href":null,"layout":null,"metadata":null,"text":"For more detailed explanation you can take a look to Kubernetes Subject Access Review.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":53,"end":85,"href":"https:\u002F\u002Fkubernetes.io\u002Fdocs\u002Freference\u002Fkubernetes-api\u002Fauthorization-resources\u002Fsubject-access-review-v1\u002F","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_45":{"__typename":"Paragraph","id":"87b0b471ddab_45","name":"53dd","type":"H4","href":null,"layout":null,"metadata":null,"text":"Writing Authorization Webhook","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_46":{"__typename":"Paragraph","id":"87b0b471ddab_46","name":"1a0e","type":"P","href":null,"layout":null,"metadata":null,"text":"Do not fear from the title. It is a dead simple thing to create an authorization webhook. Actually, a webhook is a simple HTTP server.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_47":{"__typename":"Paragraph","id":"87b0b471ddab_47","name":"1f93","type":"P","href":null,"layout":null,"metadata":null,"text":"Here is a simple authorization webhook that allows list and get operations but forbids delete operation for the service account named “test-user”:","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":51,"end":63,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":87,"end":93,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_48":{"__typename":"Paragraph","id":"87b0b471ddab_48","name":"6fcd","type":"PRE","href":null,"layout":null,"metadata":null,"text":"package main\n\nimport (\n \"fmt\"\n\n \"github.com\u002Fgofiber\u002Ffiber\u002Fv2\"\n authorizationv1 \"k8s.io\u002Fapi\u002Fauthorization\u002Fv1\"\n)\n\nfunc main() {\n app := fiber.New()\n\n app.Post(\"\u002Fauthorize\", func(ctx *fiber.Ctx) error {\n  var req authorizationv1.SubjectAccessReview\n  ctx.BodyParser(&req)\n\n  req.Status.Allowed = true\n\n  if req.Spec.User == \"system:serviceaccount:default:test-user\" {\n   if req.Spec.ResourceAttributes != nil {\n    if req.Spec.ResourceAttributes.Verb == \"get\" || req.Spec.ResourceAttributes.Verb == \"list\" {\n     req.Status.Allowed = true\n    }\n\n    if req.Spec.ResourceAttributes.Verb == \"delete\" {\n     req.Status.Allowed = false\n    }\n   }\n\n   if req.Spec.NonResourceAttributes != nil {\n    if req.Spec.NonResourceAttributes.Verb == \"get\" || req.Spec.NonResourceAttributes.Verb == \"list\" {\n     req.Status.Allowed = true\n    }\n\n    if req.Spec.NonResourceAttributes.Verb == \"delete\" {\n     req.Status.Allowed = false\n    }\n   }\n  }\n  return ctx.JSON(req)\n })\n\n app.Get(\"\u002Fhealthz\", func(ctx *fiber.Ctx) error {\n  fmt.Println(\"healthz\")\n  return ctx.SendStatus(200)\n })\n\n if err := app.ListenTLS(\":443\", \"\u002Fapp\u002Fwebhook.crt\", \"\u002Fapp\u002Fwebhook.key\"); err != nil {\n  fmt.Println(err)\n }\n}","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"go"},"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_49":{"__typename":"Paragraph","id":"87b0b471ddab_49","name":"211d","type":"P","href":null,"layout":null,"metadata":null,"text":"The following configuration is for our authorization webhook. It specifies our webhook server address and certificate authority.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_50":{"__typename":"Paragraph","id":"87b0b471ddab_50","name":"8b6f","type":"PRE","href":null,"layout":null,"metadata":null,"text":"clusters:\n- name: devx-webhooks\n  cluster:\n    certificate-authority: \u002Ffiles\u002Fwebhook.crt\n    server: https:\u002F\u002Fdevx-webhooks\u002Fauthorize\nusers:\n- name: api-server\n  user:\n    token: test-token\ncurrent-context: devx-webhooks\ncontexts:\n- context:\n    cluster: devx-webhooks\n    user: api-server\n  name: devx-webhooks","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"yaml"},"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_51":{"__typename":"Paragraph","id":"87b0b471ddab_51","name":"247b","type":"P","href":null,"layout":null,"metadata":null,"text":"Let’s run our webhook. Remember that we run our Kubernetes cluster via kind, we will run webhook with Docker in kind network.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":112,"end":116,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_52":{"__typename":"Paragraph","id":"87b0b471ddab_52","name":"f1e0","type":"PRE","href":null,"layout":null,"metadata":null,"text":"docker build -t go-kube-authz .\ndocker run -it -d --name devx-webhooks --network kind -p 443:443 go-kube-authz","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"bash"},"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_53":{"__typename":"Paragraph","id":"87b0b471ddab_53","name":"5514","type":"H4","href":null,"layout":null,"metadata":null,"text":"Webhook Self Signed Certificate","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_54":{"__typename":"Paragraph","id":"87b0b471ddab_54","name":"0e69","type":"P","href":null,"layout":null,"metadata":null,"text":"We need to create a self signed certificate for the api-server to communicate securely with our webhook. We will use the generated webhook.cert and webhook.key in our authorization webhook server. Also we will pass webhook.cert to Kubernete api server in the webhook configuration file.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_55":{"__typename":"Paragraph","id":"87b0b471ddab_55","name":"1f1d","type":"PRE","href":null,"layout":null,"metadata":null,"text":"openssl genrsa -out webhook.key 2048","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"bash"},"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_56":{"__typename":"Paragraph","id":"87b0b471ddab_56","name":"7629","type":"P","href":null,"layout":null,"metadata":null,"text":"Let’s create a file named webook.csr.cnf and put following configuration in it:","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":26,"end":40,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_57":{"__typename":"Paragraph","id":"87b0b471ddab_57","name":"6533","type":"PRE","href":null,"layout":null,"metadata":null,"text":"[req]\ndefault_bits = 2048\nprompt = no\ndefault_md = sha256\ndistinguished_name = dn\nreq_extensions = req_ext\n\n[dn]\nCN = devx-webhooks\n\n[req_ext]\nsubjectAltName = @alt_names\n\n[alt_names]\nDNS.1 = devx-webhooks","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"ini"},"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_58":{"__typename":"Paragraph","id":"87b0b471ddab_58","name":"2ddd","type":"PRE","href":null,"layout":null,"metadata":null,"text":"openssl req -new -key webhook.key -out webhook.csr -config webhook.csr.cnf","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"bash"},"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_59":{"__typename":"Paragraph","id":"87b0b471ddab_59","name":"4867","type":"P","href":null,"layout":null,"metadata":null,"text":"Now create another file named and put following lines in","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_60":{"__typename":"Paragraph","id":"87b0b471ddab_60","name":"8fda","type":"PRE","href":null,"layout":null,"metadata":null,"text":"authorityKeyIdentifier=keyid,issuer\nbasicConstraints=CA:FALSE\nkeyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment\nextendedKeyUsage = serverAuth\nsubjectAltName = @alt_names\n\n[alt_names]\nDNS.1 = devx-webhooks","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"ini"},"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_61":{"__typename":"Paragraph","id":"87b0b471ddab_61","name":"60f2","type":"PRE","href":null,"layout":null,"metadata":null,"text":"openssl x509 -req -in webhook.csr -signkey webhook.key -out webhook.crt -days 365 -extfile webhook.ext","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"bash"},"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_62":{"__typename":"Paragraph","id":"87b0b471ddab_62","name":"84e0","type":"P","href":null,"layout":null,"metadata":null,"text":"Our webhook.key and webhook.cert files are ready to use now 🚀","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_63":{"__typename":"Paragraph","id":"87b0b471ddab_63","name":"3115","type":"H4","href":null,"layout":null,"metadata":null,"text":"What About kubectl Auth","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_64":{"__typename":"Paragraph","id":"87b0b471ddab_64","name":"624e","type":"P","href":null,"layout":null,"metadata":null,"text":"As most of you know, there is a kubectl command called auth. With the help of this command, you can check whether a ServiceAccount or your current kubeconfig setting has access to specific resources on Kubernetes.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":55,"end":60,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":147,"end":157,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_65":{"__typename":"Paragraph","id":"87b0b471ddab_65","name":"305e","type":"P","href":null,"layout":null,"metadata":null,"text":"The basic usage of the auth command is like below:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_66":{"__typename":"Paragraph","id":"87b0b471ddab_66","name":"bde9","type":"PRE","href":null,"layout":null,"metadata":null,"text":"kubectl auth can-i get pods\u002Flogs","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"bash"},"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_67":{"__typename":"Paragraph","id":"87b0b471ddab_67","name":"5f6f","type":"P","href":null,"layout":null,"metadata":null,"text":"Simply, it gives answers to the authorization questions. There is also another feature of auth command, which is to list your authorized operations on a specific resource.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_68":{"__typename":"Paragraph","id":"87b0b471ddab_68","name":"ee24","type":"P","href":null,"layout":null,"metadata":null,"text":"For example, following command lists your all permissions on Kubernetes resources:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_69":{"__typename":"Paragraph","id":"87b0b471ddab_69","name":"71ab","type":"PRE","href":null,"layout":null,"metadata":null,"text":"kubectl auth can-i --list","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"DISABLED","lang":null},"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_70":{"__typename":"Paragraph","id":"87b0b471ddab_70","name":"963a","type":"H4","href":null,"layout":null,"metadata":null,"text":"Show Time - Running All Together","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_71":{"__typename":"Paragraph","id":"87b0b471ddab_71","name":"fd4a","type":"P","href":null,"layout":null,"metadata":null,"text":"Now it is time to run our webhook in a Kubernetes cluster. We already created a local cluster using Kind.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":100,"end":104,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes-sigs\u002Fkind\u002F","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_72":{"__typename":"Paragraph","id":"87b0b471ddab_72","name":"8db8","type":"P","href":null,"layout":null,"metadata":null,"text":"Now let’s try our authorization rules by creating a deployment. Remember that we allow our user to create deployments but not delete them.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_73":{"__typename":"Paragraph","id":"87b0b471ddab_73","name":"dd38","type":"P","href":null,"layout":null,"metadata":null,"text":"Let’s create a deployment:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_74":{"__typename":"Paragraph","id":"87b0b471ddab_74","name":"78dc","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u003Ekubectl create deployment nginx --image=nginx -n default\ndeployment.apps\u002Fnginx created","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"lua"},"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_75":{"__typename":"Paragraph","id":"87b0b471ddab_75","name":"0a52","type":"P","href":null,"layout":null,"metadata":null,"text":"Let’s get pods:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_76":{"__typename":"Paragraph","id":"87b0b471ddab_76","name":"1292","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u003Ekubectl get pods\nNAME                     READY   STATUS    RESTARTS   AGE\nnginx-77b4fdf86c-zjwhr   1\u002F1     Running   0          52m","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"sql"},"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_77":{"__typename":"Paragraph","id":"87b0b471ddab_77","name":"0646","type":"P","href":null,"layout":null,"metadata":null,"text":"Our authorization webhook works well so far.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_78":{"__typename":"Paragraph","id":"87b0b471ddab_78","name":"dc3b","type":"P","href":null,"layout":null,"metadata":null,"text":"Now test it with the restricted service-account. To do so, we need to create a service account named test-user.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":101,"end":110,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_79":{"__typename":"Paragraph","id":"87b0b471ddab_79","name":"457b","type":"PRE","href":null,"layout":null,"metadata":null,"text":"kubectl create sa test-user","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"sql"},"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_80":{"__typename":"Paragraph","id":"87b0b471ddab_80","name":"9589","type":"P","href":null,"layout":null,"metadata":null,"text":"Now we can use kubectl auth can-i command to check our service-account’s permissions.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_81":{"__typename":"Paragraph","id":"87b0b471ddab_81","name":"be4c","type":"P","href":null,"layout":null,"metadata":null,"text":"First let’s check for list and get operations:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_82":{"__typename":"Paragraph","id":"87b0b471ddab_82","name":"7a43","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u003Ekubectl auth can-i list pods --as=system:serviceaccount:default:test-user\nyes","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"sql"},"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_83":{"__typename":"Paragraph","id":"87b0b471ddab_83","name":"f15b","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u003Ekubectl auth can-i get pods --as=system:serviceaccount:default:test-user\nyes","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"EXPLICIT","lang":"sql"},"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_84":{"__typename":"Paragraph","id":"87b0b471ddab_84","name":"6803","type":"P","href":null,"layout":null,"metadata":null,"text":"And then check for the delete operation:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_85":{"__typename":"Paragraph","id":"87b0b471ddab_85","name":"8345","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u003Ekubectl auth can-i delete pods --as=system:serviceaccount:default:test-user\nno","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"perl"},"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_86":{"__typename":"Paragraph","id":"87b0b471ddab_86","name":"06f8","type":"P","href":null,"layout":null,"metadata":null,"text":"As we see here, with our service account we can list and get pods but could not delete pods according to restrictions on our authorization webhook.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_87":{"__typename":"Paragraph","id":"87b0b471ddab_87","name":"fac6","type":"P","href":null,"layout":null,"metadata":null,"text":"You can take a look at my demonstration repository.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_88":{"__typename":"Paragraph","id":"87b0b471ddab_88","name":"6fb1","type":"MIXTAPE_EMBED","href":null,"layout":null,"metadata":null,"text":"GitHub - mstrYoda\u002Fkubernetes-custom-authorization: It is an example repository to demonstrate…\nYou can't perform that action at this time. You signed in with another tab or window. You signed out in another tab or…github.com","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":224,"href":"https:\u002F\u002Fgithub.com\u002FmstrYoda\u002Fkubernetes-custom-authorization","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":94,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":95,"end":214,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":{"__typename":"MixtapeMetadata","href":"https:\u002F\u002Fgithub.com\u002FmstrYoda\u002Fkubernetes-custom-authorization","mediaResource":{"__typename":"MediaResource","mediumCatalog":null},"thumbnailImageId":"0*_W4e5TYwdLHLXjuR"}},"Paragraph:87b0b471ddab_89":{"__typename":"Paragraph","id":"87b0b471ddab_89","name":"f317","type":"H4","href":null,"layout":null,"metadata":null,"text":"Where to Use","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_90":{"__typename":"Paragraph","id":"87b0b471ddab_90","name":"69dd","type":"P","href":null,"layout":null,"metadata":null,"text":"It is obvious that you can use it whenever you want to go beyond native solutions. But I think I could mention a couple of use cases.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_91":{"__typename":"Paragraph","id":"87b0b471ddab_91","name":"3127","type":"P","href":null,"layout":null,"metadata":null,"text":"Imagine that you have hundreds or thousands of developers\u002Fdevops\u002FSREs in your organization. And you want to dynamically change permissions of Kubernetes cluster users. It can be a quite cumbersome to do it via native RBAC.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_92":{"__typename":"Paragraph","id":"87b0b471ddab_92","name":"85c3","type":"P","href":null,"layout":null,"metadata":null,"text":"👉 You may need to give permissions to users for a specific time period\n👉 You may want to add review&approve process to grand permissions to users\n👉 You may want to keep authorization rules in sync across different Kubernetes clusters\n👉 You may also want to sync authorization rules from another source like LDAP or other identity providers\n👉 You may want to use a custom policy engine for your authorization rules","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":60,"end":72,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":95,"end":117,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":172,"end":199,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":291,"end":315,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":325,"end":344,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_93":{"__typename":"Paragraph","id":"87b0b471ddab_93","name":"4ddd","type":"P","href":null,"layout":null,"metadata":null,"text":"Of course we can create a long list that changes according to specific use cases. In this post, as an example, we restricted a specific user’s\u002Fservice account’s permissions.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_94":{"__typename":"Paragraph","id":"87b0b471ddab_94","name":"1bf2","type":"H4","href":null,"layout":null,"metadata":null,"text":"References","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_95":{"__typename":"Paragraph","id":"87b0b471ddab_95","name":"98f9","type":"MIXTAPE_EMBED","href":null,"layout":null,"metadata":null,"text":"Webhook Mode\nA WebHook is an HTTP callback: an HTTP POST that occurs when something happens; a simple event-notification via HTTP…kubernetes.io","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":143,"href":"https:\u002F\u002Fkubernetes.io\u002Fdocs\u002Freference\u002Faccess-authn-authz\u002Fwebhook\u002F","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":12,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":13,"end":130,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":{"__typename":"MixtapeMetadata","href":"https:\u002F\u002Fkubernetes.io\u002Fdocs\u002Freference\u002Faccess-authn-authz\u002Fwebhook\u002F","mediaResource":{"__typename":"MediaResource","mediumCatalog":null},"thumbnailImageId":"0*p7F0RX1rRRDjpedj"}},"Paragraph:87b0b471ddab_96":{"__typename":"Paragraph","id":"87b0b471ddab_96","name":"0287","type":"MIXTAPE_EMBED","href":null,"layout":null,"metadata":null,"text":"Controlling Access to the Kubernetes API\nThis page provides an overview of controlling access to the Kubernetes API. Users access the Kubernetes API using…kubernetes.io","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":168,"href":"https:\u002F\u002Fkubernetes.io\u002Fdocs\u002Fconcepts\u002Fsecurity\u002Fcontrolling-access\u002F","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":40,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":41,"end":155,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":{"__typename":"MixtapeMetadata","href":"https:\u002F\u002Fkubernetes.io\u002Fdocs\u002Fconcepts\u002Fsecurity\u002Fcontrolling-access\u002F","mediaResource":{"__typename":"MediaResource","mediumCatalog":null},"thumbnailImageId":"0*MmQkh-4Vx5EWIbKB"}},"Paragraph:87b0b471ddab_97":{"__typename":"Paragraph","id":"87b0b471ddab_97","name":"c400","type":"P","href":null,"layout":null,"metadata":null,"text":"I hope this article informed you about how authorization works in Kubernetes in general and how can we go beyond it.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:87b0b471ddab_98":{"__typename":"Paragraph","id":"87b0b471ddab_98","name":"7653","type":"P","href":null,"layout":null,"metadata":null,"text":"See you on the next article. Till then, may the bug free code with you 🙏","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"PostViewerEdge:postId:6b901196591b-viewerId:lo_717c0c5580fa":{"__typename":"PostViewerEdge","shouldIndexPostForExternalSearch":true,"id":"postId:6b901196591b-viewerId:lo_717c0c5580fa"},"Tag:kubernetes":{"__typename":"Tag","id":"kubernetes","displayTitle":"Kubernetes","normalizedTagSlug":"kubernetes"},"Tag:golang":{"__typename":"Tag","id":"golang","displayTitle":"Golang","normalizedTagSlug":"golang"},"Tag:cloud-native":{"__typename":"Tag","id":"cloud-native","displayTitle":"Cloud Native","normalizedTagSlug":"cloud-native"},"Tag:authentication":{"__typename":"Tag","id":"authentication","displayTitle":"Authentication","normalizedTagSlug":"authentication"},"Tag:containers":{"__typename":"Tag","id":"containers","displayTitle":"Containers","normalizedTagSlug":"containers"},"Membership:823fa798c1fc":{"__typename":"Membership","tier":"MEMBER","id":"823fa798c1fc"},"Post:6b901196591b":{"__typename":"Post","id":"6b901196591b","collection":null,"content({\"postMeteringOptions\":{}})":{"__typename":"PostContent","isLockedPreviewOnly":false,"bodyModel":{"__typename":"RichText","sections":[{"__typename":"Section","name":"662d","startIndex":0,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"89e6","startIndex":6,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"9463","startIndex":14,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"ff5c","startIndex":28,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"d321","startIndex":45,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"d9f0","startIndex":53,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"1282","startIndex":63,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"5dc1","startIndex":70,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"2672","startIndex":89,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"f547","startIndex":94,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null}],"paragraphs":[{"__ref":"Paragraph:87b0b471ddab_0"},{"__ref":"Paragraph:87b0b471ddab_1"},{"__ref":"Paragraph:87b0b471ddab_2"},{"__ref":"Paragraph:87b0b471ddab_3"},{"__ref":"Paragraph:87b0b471ddab_4"},{"__ref":"Paragraph:87b0b471ddab_5"},{"__ref":"Paragraph:87b0b471ddab_6"},{"__ref":"Paragraph:87b0b471ddab_7"},{"__ref":"Paragraph:87b0b471ddab_8"},{"__ref":"Paragraph:87b0b471ddab_9"},{"__ref":"Paragraph:87b0b471ddab_10"},{"__ref":"Paragraph:87b0b471ddab_11"},{"__ref":"Paragraph:87b0b471ddab_12"},{"__ref":"Paragraph:87b0b471ddab_13"},{"__ref":"Paragraph:87b0b471ddab_14"},{"__ref":"Paragraph:87b0b471ddab_15"},{"__ref":"Paragraph:87b0b471ddab_16"},{"__ref":"Paragraph:87b0b471ddab_17"},{"__ref":"Paragraph:87b0b471ddab_18"},{"__ref":"Paragraph:87b0b471ddab_19"},{"__ref":"Paragraph:87b0b471ddab_20"},{"__ref":"Paragraph:87b0b471ddab_21"},{"__ref":"Paragraph:87b0b471ddab_22"},{"__ref":"Paragraph:87b0b471ddab_23"},{"__ref":"Paragraph:87b0b471ddab_24"},{"__ref":"Paragraph:87b0b471ddab_25"},{"__ref":"Paragraph:87b0b471ddab_26"},{"__ref":"Paragraph:87b0b471ddab_27"},{"__ref":"Paragraph:87b0b471ddab_28"},{"__ref":"Paragraph:87b0b471ddab_29"},{"__ref":"Paragraph:87b0b471ddab_30"},{"__ref":"Paragraph:87b0b471ddab_31"},{"__ref":"Paragraph:87b0b471ddab_32"},{"__ref":"Paragraph:87b0b471ddab_33"},{"__ref":"Paragraph:87b0b471ddab_34"},{"__ref":"Paragraph:87b0b471ddab_35"},{"__ref":"Paragraph:87b0b471ddab_36"},{"__ref":"Paragraph:87b0b471ddab_37"},{"__ref":"Paragraph:87b0b471ddab_38"},{"__ref":"Paragraph:87b0b471ddab_39"},{"__ref":"Paragraph:87b0b471ddab_40"},{"__ref":"Paragraph:87b0b471ddab_41"},{"__ref":"Paragraph:87b0b471ddab_42"},{"__ref":"Paragraph:87b0b471ddab_43"},{"__ref":"Paragraph:87b0b471ddab_44"},{"__ref":"Paragraph:87b0b471ddab_45"},{"__ref":"Paragraph:87b0b471ddab_46"},{"__ref":"Paragraph:87b0b471ddab_47"},{"__ref":"Paragraph:87b0b471ddab_48"},{"__ref":"Paragraph:87b0b471ddab_49"},{"__ref":"Paragraph:87b0b471ddab_50"},{"__ref":"Paragraph:87b0b471ddab_51"},{"__ref":"Paragraph:87b0b471ddab_52"},{"__ref":"Paragraph:87b0b471ddab_53"},{"__ref":"Paragraph:87b0b471ddab_54"},{"__ref":"Paragraph:87b0b471ddab_55"},{"__ref":"Paragraph:87b0b471ddab_56"},{"__ref":"Paragraph:87b0b471ddab_57"},{"__ref":"Paragraph:87b0b471ddab_58"},{"__ref":"Paragraph:87b0b471ddab_59"},{"__ref":"Paragraph:87b0b471ddab_60"},{"__ref":"Paragraph:87b0b471ddab_61"},{"__ref":"Paragraph:87b0b471ddab_62"},{"__ref":"Paragraph:87b0b471ddab_63"},{"__ref":"Paragraph:87b0b471ddab_64"},{"__ref":"Paragraph:87b0b471ddab_65"},{"__ref":"Paragraph:87b0b471ddab_66"},{"__ref":"Paragraph:87b0b471ddab_67"},{"__ref":"Paragraph:87b0b471ddab_68"},{"__ref":"Paragraph:87b0b471ddab_69"},{"__ref":"Paragraph:87b0b471ddab_70"},{"__ref":"Paragraph:87b0b471ddab_71"},{"__ref":"Paragraph:87b0b471ddab_72"},{"__ref":"Paragraph:87b0b471ddab_73"},{"__ref":"Paragraph:87b0b471ddab_74"},{"__ref":"Paragraph:87b0b471ddab_75"},{"__ref":"Paragraph:87b0b471ddab_76"},{"__ref":"Paragraph:87b0b471ddab_77"},{"__ref":"Paragraph:87b0b471ddab_78"},{"__ref":"Paragraph:87b0b471ddab_79"},{"__ref":"Paragraph:87b0b471ddab_80"},{"__ref":"Paragraph:87b0b471ddab_81"},{"__ref":"Paragraph:87b0b471ddab_82"},{"__ref":"Paragraph:87b0b471ddab_83"},{"__ref":"Paragraph:87b0b471ddab_84"},{"__ref":"Paragraph:87b0b471ddab_85"},{"__ref":"Paragraph:87b0b471ddab_86"},{"__ref":"Paragraph:87b0b471ddab_87"},{"__ref":"Paragraph:87b0b471ddab_88"},{"__ref":"Paragraph:87b0b471ddab_89"},{"__ref":"Paragraph:87b0b471ddab_90"},{"__ref":"Paragraph:87b0b471ddab_91"},{"__ref":"Paragraph:87b0b471ddab_92"},{"__ref":"Paragraph:87b0b471ddab_93"},{"__ref":"Paragraph:87b0b471ddab_94"},{"__ref":"Paragraph:87b0b471ddab_95"},{"__ref":"Paragraph:87b0b471ddab_96"},{"__ref":"Paragraph:87b0b471ddab_97"},{"__ref":"Paragraph:87b0b471ddab_98"}]},"validatedShareKey":"","shareKeyCreator":null},"creator":{"__ref":"User:c50c70d779e7"},"inResponseToEntityType":null,"isLocked":false,"isMarkedPaywallOnly":false,"lockedSource":"LOCKED_POST_SOURCE_NONE","mediumUrl":"https:\u002F\u002Fmstryoda.medium.com\u002Fkubernetes-beyond-rbac-make-your-own-authorization-via-webhook-6b901196591b","primaryTopic":null,"topics":[{"__typename":"Topic","slug":"programming"}],"isPublished":true,"latestPublishedVersion":"87b0b471ddab","visibility":"PUBLIC","postResponses":{"__typename":"PostResponses","count":0},"clapCount":18,"allowResponses":true,"isLimitedState":false,"title":"Kubernetes Beyond RBAC - Make Your Own Authorization via Webhook","isSeries":false,"sequence":null,"uniqueSlug":"kubernetes-beyond-rbac-make-your-own-authorization-via-webhook-6b901196591b","socialTitle":"","socialDek":"","canonicalUrl":"","metaDescription":"","latestPublishedAt":1725968670429,"readingTime":9.04433962264151,"previewContent":{"__typename":"PreviewContent","subtitle":"Kubernetes is a great container orchestration tool that gives you a lot of customization options. You can easily extend\u002Freplace many of its…"},"previewImage":{"__ref":"ImageMetadata:1*mmHUTMaLLQRteqDVSfCPLA.png"},"isShortform":false,"seoTitle":"","firstPublishedAt":1725968670429,"updatedAt":1726036971014,"shortformType":"SHORTFORM_TYPE_LINK","seoDescription":"","viewerEdge":{"__ref":"PostViewerEdge:postId:6b901196591b-viewerId:lo_717c0c5580fa"},"isSuspended":false,"license":"ALL_RIGHTS_RESERVED","tags":[{"__ref":"Tag:kubernetes"},{"__ref":"Tag:golang"},{"__ref":"Tag:cloud-native"},{"__ref":"Tag:authentication"},{"__ref":"Tag:containers"}],"isNewsletter":false,"statusForCollection":null,"pendingCollection":null,"detectedLanguage":"en","wordCount":2251,"layerCake":0}}</script><script>window.__MIDDLEWARE_STATE__={"session":{"xsrf":""},"cache":{"cacheStatus":"HIT"}}</script><script src="https://cdn-client.medium.com/lite/static/js/manifest.187759ed.js"></script><script src="https://cdn-client.medium.com/lite/static/js/9865.1496d74a.js"></script><script src="https://cdn-client.medium.com/lite/static/js/main.e85f1799.js"></script><script src="https://cdn-client.medium.com/lite/static/js/instrumentation.d9108df7.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/reporting.ff22a7a5.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5049.d1ead72d.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/4810.6318add7.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6618.db187378.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/1386.014e2ad3.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/9977.343f5002.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5250.fc15c18c.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/8261.80c0631e.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/7975.b019beb1.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2648.a582e725.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2712.0f6c85f5.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2793.01d2b056.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/1530.2779d8ee.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/3735.ca2f95e3.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5642.0ebb50fd.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6546.ef575ba6.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6834.f2d3924e.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2420.0330d157.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2106.21ff89d3.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6696.92b2dfc3.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5832.a567559e.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/3366.1571a1d5.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6040.6ceb7f43.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/4391.fd55a702.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/PostPage.MainContent.747f9545.chunk.js"></script><script>window.main();</script><script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'8c1b84207f15ac48',t:'MTcyNjA5ODE2NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body></html>