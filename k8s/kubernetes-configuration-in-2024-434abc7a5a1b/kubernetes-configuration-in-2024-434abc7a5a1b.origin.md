# Kubernetes Configuration in 2024
I wrote [an overview](https://github.com/kubernetes/design-proposals-archive/blob/main/architecture/declarative-application-management.md) of the declarative configuration problem space and available tools in 2017 when I was [ideating around kustomize](https://github.com/kubernetes/kubectl/pull/65). There were good overviews by others in [2018](https://leebriggs.co.uk/blog/2018/05/08/kubernetes-config-mgmt) and [2019](https://blog.argoproj.io/the-state-of-kubernetes-configuration-management-d8b06c1205). I recently revisited [the list that I assembled](https://docs.google.com/spreadsheets/d/1FCgqz1Ci7_VCz_wdh8vBitZ3giBtac_H8SBw4uxnrsE/edit#gid=0) back in 2017. Unsurprisingly, not all of those tools are still maintained. I looked at the number of Github stars (for lack of other data sources) of open-source tools I was aware of that seemed somewhat popular, and pruned those with less than 1000 stars or were no longer maintained.

As far as I can tell, [Helm](https://github.com/helm/helm) (26100 stars) and [Kustomize](https://kustomize.io/) (10600 stars) are the most popular, most widely integrated tools, such as in CD tools, [GitOps](https://medium.com/@bgrant0607/is-gitops-actually-useful-a1c851ba99d8) tools, wrapper tools like [Helmfile](https://github.com/helmfile/helmfile) (3300 stars) and [Helmsman](https://github.com/Praqma/helmsman) (1400 stars), and Infrastructure as Code (IaC) tools like Terraform ([Terraform Helm provider](https://github.com/hashicorp/terraform-provider-helm), [Terraform Kustomize provider](https://registry.terraform.io/providers/kbst/kustomization/latest/docs)) and [Pulumi](https://github.com/pulumi/pulumi-kubernetes?tab=readme-ov-file#deploying-a-helm-chart). Once a tool reaches critical mass, the ecosystem around it becomes a primary motivation to adopt it. For Helm, the large number of available Helm charts makes it essential for many Kubernetes users. That makes the choice of another tool more of an “AND” than an “OR”, so it needs to be easy to adopt and/or provide significant benefits over Helm or attract users from an adjacent ecosystem.

What are the other top tools?

[Kompose](https://github.com/kubernetes/kompose)([compose spec](https://compose-spec.io/)): 9200 stars[Cdk8s](http://cdk8s.io)(Typescript, JavaScript, Python, Java, Go): 4200 stars[Tanka](https://github.com/grafana/tanka)([jsonnet](https://jsonnet.org/)): 2300 stars[Kapitan](https://github.com/kapicorp/kapitan)(multi-language): 1800 stars[Ytt](https://github.com/carvel-dev/ytt)([starlark](https://github.com/bazelbuild/starlark), part of[carvel.dev](https://carvel.dev/)— note[recent project changes](https://www.youtube.com/watch?v=6Fp_ysDd-z0)): 1600 stars[Terraform kubernetes provider](https://github.com/hashicorp/terraform-provider-kubernetes): 1500 stars[Timoni](http://timoni.sh)([CUE](http://cuelang.org)): 1400 stars[KCL](https://github.com/kcl-lang/kcl): 1300 stars
If I missed a popular tool, let me know!

Kompose enables interoperability between [Docker compose](https://docs.docker.com/compose/) ([32600 stars](https://github.com/docker/compose)) and Kubernetes, either so Docker can be used during local development or for migration purposes. It’s popularity is not surprising given the number of Docker compose users.

Similarly, part of the popularity of cdk8s is likely due to [AWS CDK](https://aws.amazon.com/cdk/) users. Overall, from the data available, use of general-purpose-programming-language-based configuration generation tools still appears to be less than that of non-GPPL-based tools. OTOH, GPPL-based tools may be preferred over restricted dialects, like Starlark, which appears to have been used in fewer new tools recently.

Only time will tell whether the benefits of the new tool-independent domain-specific languages like CUE, KCL, or Pkl will ever be large enough to compete with YAML and/or other languages and approaches to configuration given the ubiquity of YAML and the disadvantages of new languages (lack of familiarity, lack of tool and library support, lack of ecosystem integrations, etc.).

Kapitan is interesting as a mechanism to [manage input variables values across multiple tools](https://kapitan.dev/pages/blog/04/12/2022/kapitan-logo-5-years-of-kapitan/#with-kapitan), which repurposed a [mechanism built to manage nodes independently of configuration management tools](https://reclass.pantsfullofunix.net/) like Puppet, Salt, and Ansible.

Users appear to be split on whether [using Terraform to manage Kubernetes resources](https://www.reddit.com/r/Terraform/comments/120g6l5/to_terraform_or_not_to_terraform_kubernetes/) is a good idea. On one hand, using the Helm provider could make sense for installing components after creating a cluster, but users have [encountered issues](https://www.reddit.com/r/kubernetes/comments/cq5bof/anyone_using_terraformhelmprovider_to_deploy/) with that. Since I don’t imagine that clusters will become immutable in the way that VMs did, I’d recommend using GitOps tools to configure resources in clusters instead.

I also [recently asked on Twitter/X](https://twitter.com/bgrant0607/status/1787702594229707119) what tools people were using besides the tools above. What other tools did respondents mention?

Kubernetes-specific:

[qbec](https://github.com/splunk/qbec)(Jsonnet)[StackSet Controller](https://github.com/zalando-incubator/stackset-controller)+ mustache
Not Kubernetes-specific:

The relatively large number of tools validates that creating Kubernetes configuration tools and integrating Kubernetes into existing tools is relatively easy, because [Kubernetes resources can be serialized as data](https://medium.com/@bgrant0607/on-using-the-kubernetes-resource-model-for-declarative-configuration-a5dd11b99546). This makes it feasible to use your favorite IaC tool, programming language, data serialization language, or templating tool to generate your Kubernetes configuration at build or deployment time, or to manage it dynamically by building a [controller](https://kubernetes.io/docs/concepts/architecture/controller/), as in the case of the StackSet controller.

But also a number of users clearly run into challenges and friction with the leading tool, Helm, many of which center around the complexity of Helm charts and the template syntax. Some examples, in no particular order, including some from people who created or used alternative tools:

[https://grafana.com/blog/2020/01/09/introducing-tanka-our-way-of-deploying-to-kubernetes/](https://grafana.com/blog/2020/01/09/introducing-tanka-our-way-of-deploying-to-kubernetes/)[https://news.ycombinator.com/item?id=22011251](https://news.ycombinator.com/item?id=22011251)[https://medium.com/kapitan-blog/why-your-kubernetes-configuration-strategy-is-broken-c54ff3fdf9c3](https://medium.com/kapitan-blog/why-your-kubernetes-configuration-strategy-is-broken-c54ff3fdf9c3)[https://leebriggs.co.uk/blog/2019/02/07/why-are-we-templating-yaml](https://leebriggs.co.uk/blog/2019/02/07/why-are-we-templating-yaml)[https://learnk8s.io/templating-yaml-with-code#why-not-helm-](https://learnk8s.io/templating-yaml-with-code#why-not-helm-)[https://banzaicloud.com/blog/helm3-the-good-the-bad-and-the-ugly/](https://banzaicloud.com/blog/helm3-the-good-the-bad-and-the-ugly/)[https://www.reddit.com/r/kubernetes/comments/gukx1c/helm_3_the_good_the_bad_and_the_ugly/](https://www.reddit.com/r/kubernetes/comments/gukx1c/helm_3_the_good_the_bad_and_the_ugly/)[https://blog.container-solutions.com/using-helm-and-kustomize-to-build-more-declarative-kubernetes-workloads](https://blog.container-solutions.com/using-helm-and-kustomize-to-build-more-declarative-kubernetes-workloads)[https://itnext.io/helm-is-not-enough-you-also-need-kustomize-82bae896816e](/helm-is-not-enough-you-also-need-kustomize-82bae896816e)[https://foghornconsulting.com/2022/01/25/helm-versus-kustomize/](https://foghornconsulting.com/2022/01/25/helm-versus-kustomize/)[https://harness.io/blog/helm-vs-kustomize/](https://harness.io/blog/helm-vs-kustomize/)[https://www.giantswarm.io/blog/application-configuration-management-helm](https://www.giantswarm.io/blog/application-configuration-management-helm)[https://news.ycombinator.com/item?id=16714984](https://news.ycombinator.com/item?id=16714984)[https://news.ycombinator.com/item?id=20355405](https://news.ycombinator.com/item?id=20355405)[https://news.ycombinator.com/item?id=21526894](https://news.ycombinator.com/item?id=21526894)[https://news.ycombinator.com/item?id=24419441](https://news.ycombinator.com/item?id=24419441)[https://youtu.be/xZgoPNVjDHE?list=PLj6h78yzYM2O_aoiru-ZeyVT0VHdWglfZ&t=729](https://youtu.be/xZgoPNVjDHE?list=PLj6h78yzYM2O_aoiru-ZeyVT0VHdWglfZ&t=729)[https://blog.smartive.ch/how-we-simplified-our-kubernetes-deployments-with-an-alternative-to-helm-aafedcfd4cce](https://blog.smartive.ch/how-we-simplified-our-kubernetes-deployments-with-an-alternative-to-helm-aafedcfd4cce)[https://www.youtube.com/watch?v=h4kJleNo24E&t=1160s](https://www.youtube.com/watch?v=h4kJleNo24E&t=1160s)[https://kubernate.dev/](https://kubernate.dev/)[https://gist.github.com/tamalsaha/41ec43dd2e4fc5dc41505a7172a60202](https://gist.github.com/tamalsaha/41ec43dd2e4fc5dc41505a7172a60202)[https://www.gitpod.io/blog/gitpod-installer](https://www.gitpod.io/blog/gitpod-installer)[https://www.reddit.com/r/kubernetes/comments/1be15b8/helm_templating_language_was_a_mistake_90_of_helm/](https://www.reddit.com/r/kubernetes/comments/1be15b8/helm_templating_language_was_a_mistake_90_of_helm/)
At least some of the complexity is intrinsic to the model and the objectives. If one wants to provide off-the-shelf parameter-driven configuration generators that enable users to configure anything and everything, the resulting generator code and interface will be large, similar to struct constructors. This is the [simplicity vs flexibility tradeoff](https://medium.com/@bgrant0607/the-tension-between-flexibility-and-simplicity-in-infrastructure-as-code-6cec841e3d16). It applies to generic configuration generators for bespoke applications as well, such as [Ticketmaster’s one chart to rule them all](https://youtu.be/HzJ9ycX1h0c) and [Gimlet’s OneChart](https://github.com/gimlet-io/onechart). Similar challenges were encountered with jsonnet-based templates for Kubernetes in the very early days.

Since a number of the complaints are about YAML indentation, I’ve wondered if it would be broadly feasible to take advantage of [JSON list and map syntax](https://helm.sh/docs/chart_template_guide/yaml_techniques/#yaml-is-a-superset-of-json) so as [not to be reliant on indentation](https://medium.com/@kasunbg/write-yaml-without-indentation-via-curly-braces-3c05ae8700ce) like [this example on stackoverflow](https://stackoverflow.com/questions/72314961/helm-convert-map-type-data-into-json-object), unlike this example from the [Jenkins helm chart](https://github.com/jenkinsci/helm-charts/blob/main/charts/jenkins/templates/jenkins-controller-ingress.yaml):

`{{- if .Values.controller.ingress.labels }}`
{{ toYaml .Values.controller.ingress.labels | indent 4 }}
{{- end }}
So what has changed since my 2017 writeup?

- Helm became a top-level project in CNCF, fixed a number of issues with v3, and advanced the
[use of container registries](https://github.com/oras-project/oras)for configuration packages. Some have[raised concerns](https://www.youtube.com/watch?v=-ny_SXusAks)about the health of the project, though. - Kustomize was implemented, adopted by Kubernetes SIG CLI, integrated into kubectl, and became the 2nd most popular tool.
- Hashicorp implemented a new
[Terraform Kubernetes provider based on server-side apply](https://www.hashicorp.com/blog/deploy-any-resource-with-the-new-kubernetes-provider-for-hashicorp-terraform). - Generating configuration with general-purpose programming languages is somewhat more prevalent and the tools (cdk8s, Pulumi) are more advanced.
- New tools and languages have continued to emerge, but there also has been a fair amount of consolidation.
- GitOps emerged as a popular pattern, especially for
[deploying to multiple clusters](https://medium.com/@bgrant0607/is-gitops-actually-useful-a1c851ba99d8).
Overall, my sense is that the tools have matured, but the user experience has not changed dramatically over the past 7 years.

Kubernetes is now 10 years old. Is there still room for evolution in this area, or are the current configuration tools good enough? Is it feasible at this point for a new tool to become as widely adopted as Helm? Is it feasible for a broader IaC tool to become widely used for Kubernetes? What would be the motivation for users to adopt something new? Do configuration languages matter now in the age of AI? Or will new platforms just paper over the low-level configuration tools?

I hope there is demand and incentives for new, better tools. There is definitely still [room for innovation in the space](https://medium.com/@bgrant0607/reflections-on-declarative-configuration-c2fe1c1e50d5).

What tools do you prefer, and why?

Feel free to reply here, or send me a message on [LinkedIn](https://www.linkedin.com/in/bgrant0607/) or [X/Twitter](https://x.com/bgrant0607), where I plan to crosspost this.

If you found this interesting, you may be interested in other posts in my [Infrastructure as Code and Declarative Configuration series](https://medium.com/@bgrant0607/list/infrastructure-as-code-and-declarative-configuration-8c441ae74836).