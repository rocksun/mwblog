
<!--
title: 如何在Kubernetes中更好地管理有状态应用
cover: https://cdn.thenewstack.io/media/2024/02/07f20e60-improve-stateful-apps-reliability-kubernetes.jpg
-->

将机器学习、人工智能、实时迁移和 Kubernetes 相结合，以增强云和有状态应用程序的弹性。

> 译自 [How to Better Manage Stateful Applications in Kubernetes](https://thenewstack.io/how-to-better-manage-stateful-applications-in-kubernetes/)，作者 Nayan Lad。

在以基于容器的微服务为特征的云原生计算的动态世界中，[Kubernetes](https://roadmap.sh/kubernetes) 已成为编排容器化应用程序的标准。它在管理无状态应用程序方面的灵活性得到了广泛认可。然而，它在有状态应用程序方面存在 [挑战](https://thenewstack.io/stateful-workloads-on-kubernetes-are-a-thing-but-there-is-a-twist/)——这些应用程序在会话中维护状态，并且本质上无法容忍中断。

## 有状态工作负载的挑战

Kubernetes 在确保有状态工作负载的服务级别可用性（因此也是可靠性）方面面临多项挑战。

- 有状态应用程序（如数据库或 DevOps 系统）需要持久存储和稳定的网络连接才能正常运行。Kubernetes 最初[设计](https://thenewstack.io/the-growth-of-state-in-kubernetes/)时考虑的是无状态应用程序，但已发展到可以容纳有状态工作负载——但并非没有挑战。
- 持久数据管理是一个问题，因为有状态应用程序需要可靠的数据持久性。Kubernetes 提供了持久卷 (PV) 和有状态集等解决方案，但除非应用程序设计为检查点其内存状态，否则无法确保容错性。
- 这些应用程序通常需要稳定的网络连接，这使得网络可靠性成为一个潜在问题。Kubernetes 通过 Istio 服务网格等设施提供粘性会话，但如果有状态集服务端点重新启动或故障转移，会话仍然可能中断。
- 除非自动扩缩器参与状态管理，否则扩展或更新有状态应用程序是一项微妙而复杂的任务。

## 可靠性-耐用性二分法

虽然 Kubernetes 提供了用于维护有状态应用程序耐用性的功能——通过各种中断维护对持久卷的访问——但它在“[高九](https://thenewstack.io/qa-how-enterprisedb-brings-five-nines-to-postgresql/)”可用性和性能一致性方面难以实现可靠性。

这种二分法对有状态应用程序构成了重大挑战，因为传统故障转移、重新启动和恢复策略并未完全解决它们对中断的敏感性。这种不足可能会造成运营和财务影响，例如糟糕的用户体验、交易失败造成的收入损失、更高的紧急运营成本以及对品牌声誉和市场竞争力的潜在长期损害。

## 在 Kubernetes 中增强可靠性的策略

有几种方法可以尝试提高 Kubernetes 在有状态应用程序中的可靠性：

- **高级可观察性和自动化**：实施强大的[可观察性](https://thenewstack.io/observability/)工具并自动化修复可以帮助预先解决和解决可能影响应用程序可用性的问题。
- **优化资源管理**：高效的资源分配和管理（包括 CPU、内存和存储）对于维护有状态应用程序的性能和可靠性至关重要。
- **灾难恢复计划**：定期备份和有效的灾难恢复策略对于维持有状态应用程序的连续性至关重要。

尽管取得了进步，但这些策略可能无法完全解决检测不可预见的问题、缓解外部依赖和网络不稳定性或确保高需求操作的接近零停机时间和数据完整性的复杂性。这凸显了对更全面的方法的必要性，该方法可以增强有状态应用程序在动态[云原生环境](https://thenewstack.io/cloud-native/)中的弹性和可靠性，确保依赖 Kubernetes 进行关键操作的企业持续可用和性能。

## 新兴技术的作用

包括机器学习和人工智能在内的新兴技术有望通过预测故障和自动化工作负载管理来彻底改变 Kubernetes 中有状态应用程序的可靠性，从而最大程度地减少停机时间。

![插图显示了 ML/AI、Kubernetes 和实时迁移如何提高有状态应用程序的可靠性](https://cdn.thenewstack.io/media/2024/02/d838fc0b-reliability-stateful-apps.png)

*改编自[Freepik](https://www.freepik.com/free-vector/business-characters-sharing-information_1189634.htm)*

同样具有变革意义的是实时迁移技术的进步，它使正在运行的应用程序能够在不中断的情况下无缝地重新部署。这对于在基础设施变更或维护期间维持持续运营至关重要，有助于确保有状态应用程序的高可用性和弹性。

实时迁移（很快将被认为是 Kubernetes 的必需品）通过提供一种动态的解决方案来进行工作负载编排和资源优化，而不会中断服务，从而补充了人工智能驱动的策略。这些技术共同代表了一种整体方法，用于提高云原生应用程序的运营效率和可靠性，标志着云计算演进中的重大飞跃。随着 Kubernetes 持续成熟，集成此类创新可以帮助应对有状态应用程序管理的挑战，并为云基础设施设定新的弹性标准。

## 机器学习、人工智能和实时迁移的未开发潜力

在 Kubernetes 生态系统中集成机器学习、人工智能和实时迁移技术代表着解决管理有状态工作负载的固有挑战的重大转变。这些进步不仅仅是渐进式的改进，而是关键性的变化，有望显著提高有状态应用程序的服务连续性和运营效率。通过利用这些技术，Kubernetes 可以提供更强大的解决方案，以确保高可用性和性能一致性，标志着云计算的重大演进并增强有状态应用程序的弹性。

在管理有状态应用程序工作负载时，专注于机器学习和人工智能、实时迁移和 Kubernetes 强调了向更智能、更动态的云原生环境迈进的更广泛运动。这些技术为组织提供了工具，即使在基础设施变更或维护活动中，也可以预先避免故障、自动化工作负载管理和维持持续运营。因此，Kubernetes 在云原生生态系统中的作用正在从编排容器化应用程序的平台演变为更全面的解决方案，有助于确保关键有状态服务的可靠性和可用性。

## 结论

通过机器学习、人工智能、实时迁移和 Kubernetes 增强云弹性的旅程代表了云计算中的战略性枢纽，其目标不仅仅是管理应用程序，而是确保其不间断的性能和可靠性。随着这项技术的成熟，鼓励组织探索和采用这些创新，将自己定位于云原生计算新时代的领先地位。这种演变不仅仅是适应变化，而是引领重新定义 Kubernetes 环境中无状态应用程序的性能和可靠性标准，在云基础设施弹性方面可能实现的目标。

*要了解有关 Kubernetes 和云原生生态系统的更多信息，请于 2024 年 3 月 19 日至 22 日在巴黎加入我们参加 KubeCon + CloudNativeCon Europe。*
