<!doctype html><html lang="en"><head><title data-rh="true">The Technical History of Kubernetes | by Brian Grant | ITNEXT</title><meta data-rh="true" charset="utf-8"/><meta data-rh="true" name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,maximum-scale=1"/><meta data-rh="true" name="theme-color" content="#000000"/><meta data-rh="true" name="twitter:app:name:iphone" content="Medium"/><meta data-rh="true" name="twitter:app:id:iphone" content="828256236"/><meta data-rh="true" property="al:ios:app_name" content="Medium"/><meta data-rh="true" property="al:ios:app_store_id" content="828256236"/><meta data-rh="true" property="al:android:package" content="com.medium.reader"/><meta data-rh="true" property="fb:app_id" content="542599432471018"/><meta data-rh="true" property="og:site_name" content="Medium"/><meta data-rh="true" property="og:type" content="article"/><meta data-rh="true" property="article:published_time" content="2024-11-06T09:33:12.156Z"/><meta data-rh="true" name="title" content="The Technical History of Kubernetes | by Brian Grant | ITNEXT"/><meta data-rh="true" property="og:title" content="The Technical History of Kubernetes"/><meta data-rh="true" property="al:android:url" content="medium://p/2fe1988b522a"/><meta data-rh="true" property="al:ios:url" content="medium://p/2fe1988b522a"/><meta data-rh="true" property="al:android:app_name" content="Medium"/><meta data-rh="true" name="description" content="I wasn’t able to attend Kubecon in 2024, but the 10th anniversary of Kubernetes was commemorated at KubeconEU and again in June, where I talked about the Road to 1.0. You may also be interested in…"/><meta data-rh="true" property="og:description" content="Ideas and learnings from Borg and Omega that made their way into Kubernetes."/><meta data-rh="true" property="og:url" content="https://itnext.io/the-technical-history-of-kubernetes-2fe1988b522a"/><meta data-rh="true" property="al:web:url" content="https://itnext.io/the-technical-history-of-kubernetes-2fe1988b522a"/><meta data-rh="true" property="og:image" content="https://miro.medium.com/v2/da:true/resize:fit:1200/0*VKpP9zjO1Yc21_C8"/><meta data-rh="true" property="article:author" content="https://medium.com/@bgrant0607"/><meta data-rh="true" name="author" content="Brian Grant"/><meta data-rh="true" name="robots" content="index,noarchive,follow,max-image-preview:large"/><meta data-rh="true" name="referrer" content="unsafe-url"/><meta data-rh="true" property="twitter:title" content="The Technical History of Kubernetes"/><meta data-rh="true" name="twitter:site" content="@itnext_io"/><meta data-rh="true" name="twitter:app:url:iphone" content="medium://p/2fe1988b522a"/><meta data-rh="true" property="twitter:description" content="Ideas and learnings from Borg and Omega that made their way into Kubernetes."/><meta data-rh="true" name="twitter:image:src" content="https://miro.medium.com/v2/da:true/resize:fit:1200/0*VKpP9zjO1Yc21_C8"/><meta data-rh="true" name="twitter:card" content="summary_large_image"/><meta data-rh="true" name="twitter:label1" content="Reading time"/><meta data-rh="true" name="twitter:data1" content="25 min read"/><link data-rh="true" rel="icon" href="https://miro.medium.com/v2/resize:fill:256:256/1*SiXeRxgOt0pAYlYhwZIu3g.png"/><link data-rh="true" rel="search" type="application/opensearchdescription+xml" title="Medium" href="/osd.xml"/><link data-rh="true" rel="apple-touch-icon" sizes="152x152" href="https://miro.medium.com/v2/resize:fill:304:304/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="apple-touch-icon" sizes="120x120" href="https://miro.medium.com/v2/resize:fill:240:240/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="apple-touch-icon" sizes="76x76" href="https://miro.medium.com/v2/resize:fill:152:152/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="apple-touch-icon" sizes="60x60" href="https://miro.medium.com/v2/resize:fill:120:120/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="mask-icon" href="https://miro.medium.com/v2/resize:fill:1000:1000/7*GAOKVe--MXbEJmV9230oOQ.png" color="#171717"/><link data-rh="true" id="glyph_preload_link" rel="preload" as="style" type="text/css" href="https://glyph.medium.com/css/unbound.css"/><link data-rh="true" id="glyph_link" rel="stylesheet" type="text/css" href="https://glyph.medium.com/css/unbound.css"/><link data-rh="true" rel="author" href="https://medium.com/@bgrant0607"/><link data-rh="true" rel="canonical" href="https://itnext.io/the-technical-history-of-kubernetes-2fe1988b522a"/><link data-rh="true" rel="alternate" href="android-app://com.medium.reader/https/medium.com/p/2fe1988b522a"/><script data-rh="true" type="application/ld+json">{"@context":"http:\u002F\u002Fschema.org","@type":"NewsArticle","image":["https:\u002F\u002Fmiro.medium.com\u002Fv2\u002Fda:true\u002Fresize:fit:1200\u002F0*VKpP9zjO1Yc21_C8"],"url":"https:\u002F\u002Fitnext.io\u002Fthe-technical-history-of-kubernetes-2fe1988b522a","dateCreated":"2024-03-22T16:07:42.686Z","datePublished":"2024-03-22T16:07:42.686Z","dateModified":"2024-11-06T09:33:12.240Z","headline":"The Technical History of Kubernetes - ITNEXT","name":"The Technical History of Kubernetes - ITNEXT","description":"I wasn’t able to attend Kubecon in 2024, but the 10th anniversary of Kubernetes was commemorated at KubeconEU and again in June, where I talked about the Road to 1.0. You may also be interested in…","identifier":"2fe1988b522a","author":{"@type":"Person","name":"Brian Grant","url":"https:\u002F\u002Fitnext.io\u002F@bgrant0607"},"creator":["Brian Grant"],"publisher":{"@type":"Organization","name":"ITNEXT","url":"itnext.io","logo":{"@type":"ImageObject","width":315,"height":60,"url":"https:\u002F\u002Fmiro.medium.com\u002Fv2\u002Fresize:fit:630\u002F1*jWhTrIoYwTUdKuVXycqAaw.png"}},"mainEntityOfPage":"https:\u002F\u002Fitnext.io\u002Fthe-technical-history-of-kubernetes-2fe1988b522a"}</script><style type="text/css" data-fela-rehydration="465" data-fela-type="STATIC">html{box-sizing:border-box;-webkit-text-size-adjust:100%}*, *:before, *:after{box-sizing:inherit}body{margin:0;padding:0;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;color:rgba(0,0,0,0.8);position:relative;min-height:100vh}h1, h2, h3, h4, h5, h6, dl, dd, ol, ul, menu, figure, blockquote, p, pre, form{margin:0}menu, ol, ul{padding:0;list-style:none;list-style-image:none}main{display:block}a{color:inherit;text-decoration:none}a, button, input{-webkit-tap-highlight-color:transparent}img, svg{vertical-align:middle}button{background:transparent;overflow:visible}button, input, optgroup, select, textarea{margin:0}:root{--reach-tabs:1;--reach-menu-button:1}#speechify-root{font-family:Sohne, sans-serif}div[data-popper-reference-hidden="true"]{visibility:hidden;pointer-events:none}.grecaptcha-badge{visibility:hidden}
/*XCode style (c) Angel Garcia <angelgarcia.mail@gmail.com>*/.hljs {background: #fff;color: black;
}/* Gray DOCTYPE selectors like WebKit */
.xml .hljs-meta {color: #c0c0c0;
}.hljs-comment,
.hljs-quote {color: #007400;
}.hljs-tag,
.hljs-attribute,
.hljs-keyword,
.hljs-selector-tag,
.hljs-literal,
.hljs-name {color: #aa0d91;
}.hljs-variable,
.hljs-template-variable {color: #3F6E74;
}.hljs-code,
.hljs-string,
.hljs-meta .hljs-string {color: #c41a16;
}.hljs-regexp,
.hljs-link {color: #0E0EFF;
}.hljs-title,
.hljs-symbol,
.hljs-bullet,
.hljs-number {color: #1c00cf;
}.hljs-section,
.hljs-meta {color: #643820;
}.hljs-title.class_,
.hljs-class .hljs-title,
.hljs-type,
.hljs-built_in,
.hljs-params {color: #5c2699;
}.hljs-attr {color: #836C28;
}.hljs-subst {color: #000;
}.hljs-formula {background-color: #eee;font-style: italic;
}.hljs-addition {background-color: #baeeba;
}.hljs-deletion {background-color: #ffc8bd;
}.hljs-selector-id,
.hljs-selector-class {color: #9b703f;
}.hljs-doctag,
.hljs-strong {font-weight: bold;
}.hljs-emphasis {font-style: italic;
}
</style><style type="text/css" data-fela-rehydration="465" data-fela-type="KEYFRAME">@-webkit-keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}@-moz-keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}@keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}</style><style type="text/css" data-fela-rehydration="465" data-fela-type="RULE">.a{font-family:medium-content-sans-serif-font, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif}.b{font-weight:400}.c{background-color:rgba(255, 255, 255, 1)}.l{display:block}.m{position:sticky}.n{top:0}.o{z-index:500}.p{padding:0 24px}.q{align-items:center}.r{border-bottom:solid 1px #F2F2F2}.y{height:41px}.z{line-height:20px}.ab{display:flex}.ac{height:57px}.ae{flex:1 0 auto}.af{color:inherit}.ag{fill:inherit}.ah{font-size:inherit}.ai{border:inherit}.aj{font-family:inherit}.ak{letter-spacing:inherit}.al{font-weight:inherit}.am{padding:0}.an{margin:0}.ao{cursor:pointer}.ap:disabled{cursor:not-allowed}.aq:disabled{color:#6B6B6B}.ar:disabled{fill:#6B6B6B}.au{width:auto}.av path{fill:#242424}.aw{height:25px}.ax{margin-left:16px}.ay{border:none}.az{border-radius:20px}.ba{width:240px}.bb{background:#F9F9F9}.bc path{fill:#6B6B6B}.be{outline:none}.bf{font-family:sohne, "Helvetica Neue", Helvetica, Arial, sans-serif}.bg{font-size:14px}.bh{width:100%}.bi{padding:10px 20px 10px 0}.bj{background-color:transparent}.bk{color:#242424}.bl::placeholder{color:#6B6B6B}.bm{display:inline-block}.bn{margin-left:12px}.bo{margin-right:12px}.bp{border-radius:4px}.bq{margin-left:24px}.br{height:24px}.bx{background-color:#F9F9F9}.by{border-radius:50%}.bz{height:32px}.ca{width:32px}.cb{justify-content:center}.ch{max-width:680px}.ci{min-width:0}.cj{animation:k1 1.2s ease-in-out infinite}.ck{height:100vh}.cl{margin-bottom:16px}.cm{margin-top:48px}.cn{align-items:flex-start}.co{flex-direction:column}.cp{justify-content:space-between}.cq{margin-bottom:24px}.cw{width:80%}.cx{background-color:#F2F2F2}.dd{height:44px}.de{width:44px}.df{margin:auto 0}.dg{margin-bottom:4px}.dh{height:16px}.di{width:120px}.dj{width:80px}.dp{margin-bottom:8px}.dq{width:96%}.dr{width:98%}.ds{width:81%}.dt{margin-left:8px}.du{color:#6B6B6B}.dv{font-size:13px}.dw{height:100%}.ep{color:#FFFFFF}.eq{fill:#FFFFFF}.er{background:rgba(63, 141, 206, 1)}.es{border-color:rgba(63, 141, 206, 1)}.ew:disabled{cursor:inherit !important}.ex:disabled{opacity:0.3}.ey:disabled:hover{background:rgba(63, 141, 206, 1)}.ez:disabled:hover{border-color:rgba(63, 141, 206, 1)}.fa{border-radius:99em}.fb{border-width:1px}.fc{border-style:solid}.fd{box-sizing:border-box}.fe{text-decoration:none}.ff{text-align:center}.fi{margin-right:32px}.fj{position:relative}.fk{fill:#6B6B6B}.fn{background:transparent}.fo svg{margin-left:4px}.fp svg{fill:#6B6B6B}.fr{box-shadow:inset 0 0 0 1px rgba(0, 0, 0, 0.05)}.fs{position:absolute}.fz{margin:0 24px}.gd{background:rgba(255, 255, 255, 1)}.ge{border:1px solid #F2F2F2}.gf{box-shadow:0 1px 4px #F2F2F2}.gg{max-height:100vh}.gh{overflow-y:auto}.gi{left:0}.gj{top:calc(100vh + 100px)}.gk{bottom:calc(100vh + 100px)}.gl{width:10px}.gm{pointer-events:none}.gn{word-break:break-word}.go{word-wrap:break-word}.gp:after{display:block}.gq:after{content:""}.gr:after{clear:both}.gs{line-height:1.23}.gt{letter-spacing:0}.gu{font-style:normal}.gv{font-weight:700}.ia{align-items:baseline}.ib{width:48px}.ic{height:48px}.id{border:2px solid rgba(255, 255, 255, 1)}.ie{z-index:0}.if{box-shadow:none}.ig{border:1px solid rgba(0, 0, 0, 0.05)}.ih{margin-left:-12px}.ii{width:28px}.ij{height:28px}.ik{z-index:1}.il{width:24px}.im{margin-bottom:2px}.in{flex-wrap:nowrap}.io{font-size:16px}.ip{line-height:24px}.ir{margin:0 8px}.is{display:inline}.it{color:rgba(63, 141, 206, 1)}.iu{fill:rgba(63, 141, 206, 1)}.ix{flex:0 0 auto}.ja{flex-wrap:wrap}.jd{white-space:pre-wrap}.je{margin-right:4px}.jf{overflow:hidden}.jg{max-height:20px}.jh{text-overflow:ellipsis}.ji{display:-webkit-box}.jj{-webkit-line-clamp:1}.jk{-webkit-box-orient:vertical}.jl{word-break:break-all}.jn{padding-left:8px}.jo{padding-right:8px}.kp> *{flex-shrink:0}.kq{overflow-x:scroll}.kr::-webkit-scrollbar{display:none}.ks{scrollbar-width:none}.kt{-ms-overflow-style:none}.ku{width:74px}.kv{flex-direction:row}.kw{z-index:2}.kz{-webkit-user-select:none}.la{border:0}.lb{fill:rgba(117, 117, 117, 1)}.le{outline:0}.lf{user-select:none}.lg> svg{pointer-events:none}.lp{cursor:progress}.lq{opacity:1}.lr{padding:4px 0}.lu{margin-top:0px}.lv{width:16px}.lx{display:inline-flex}.md{max-width:100%}.me{padding:8px 2px}.mf svg{color:#6B6B6B}.mw{line-height:1.58}.mx{letter-spacing:-0.004em}.my{font-family:source-serif-pro, Georgia, Cambria, "Times New Roman", Times, serif}.nt{margin-bottom:-0.46em}.nu{text-decoration:underline}.nv{margin-left:auto}.nw{margin-right:auto}.nx{max-width:1920px}.od{clear:both}.of{cursor:zoom-in}.og{z-index:auto}.oi{height:auto}.oj{margin-bottom:26px}.ok{margin-top:6px}.ol{margin-top:8px}.om{margin-right:8px}.on{padding:8px 16px}.oo{border-radius:100px}.op{transition:background 300ms ease}.or{white-space:nowrap}.os{border-top:none}.oy{height:52px}.oz{max-height:52px}.pa{box-sizing:content-box}.pb{position:static}.pd{max-width:155px}.pj{margin-right:20px}.pp{align-items:flex-end}.pq{width:76px}.pr{height:76px}.ps{border:2px solid #F9F9F9}.pt{height:72px}.pu{width:72px}.pv{margin-left:-16px}.pw{width:36px}.px{height:36px}.py{stroke:#F2F2F2}.pz{color:#F2F2F2}.qa{fill:#F2F2F2}.qb{background:#F2F2F2}.qc{border-color:#F2F2F2}.qi{font-weight:500}.qj{font-size:24px}.qk{line-height:30px}.ql{letter-spacing:-0.016em}.qm{margin-top:16px}.qn{height:0px}.qo{border-bottom:solid 1px #E5E5E5}.qu{margin-top:72px}.qv{padding:24px 0}.qw{margin-bottom:0px}.qx{margin-right:16px}.as:hover:not(:disabled){color:rgba(25, 25, 25, 1)}.at:hover:not(:disabled){fill:rgba(25, 25, 25, 1)}.et:hover{background:rgba(61, 121, 173, 1)}.eu:hover{border-color:rgba(61, 121, 173, 1)}.ev:hover{cursor:pointer}.fl:hover{color:#242424}.fm:hover{fill:#242424}.fq:hover svg{fill:#242424}.ft:hover{background-color:rgba(0, 0, 0, 0.1)}.iq:hover{text-decoration:underline}.iv:hover:not(:disabled){color:rgba(61, 121, 173, 1)}.iw:hover:not(:disabled){fill:rgba(61, 121, 173, 1)}.ld:hover{fill:rgba(8, 8, 8, 1)}.ls:hover{fill:#000000}.lt:hover p{color:#000000}.lw:hover{color:#000000}.mg:hover svg{color:#000000}.oq:hover{background-color:#F2F2F2}.qd:hover{background:#F2F2F2}.qe:hover{border-color:#F2F2F2}.qf:hover{cursor:wait}.qg:hover{color:#F2F2F2}.qh:hover{fill:#F2F2F2}.bd:focus-within path{fill:#242424}.lc:focus{fill:rgba(8, 8, 8, 1)}.mh:focus svg{color:#000000}.oh:focus{transform:scale(1.01)}.lh:active{border-style:none}</style><style type="text/css" data-fela-rehydration="465" data-fela-type="RULE" media="all and (min-width: 1080px)">.d{display:none}.bw{width:64px}.cg{margin:0 64px}.cv{height:48px}.dc{margin-bottom:52px}.do{margin-bottom:48px}.ef{font-size:14px}.eg{line-height:20px}.em{font-size:13px}.eo{padding:5px 12px}.fh{display:flex}.fy{margin-bottom:68px}.gc{max-width:680px}.hq{font-size:42px}.hr{margin-top:1.19em}.hs{margin-bottom:32px}.ht{line-height:52px}.hu{letter-spacing:-0.011em}.hz{align-items:center}.kb{border-top:solid 1px #F2F2F2}.kc{border-bottom:solid 1px #F2F2F2}.kd{margin:32px 0 0}.ke{padding:3px 8px}.kn> *{margin-right:24px}.ko> :last-child{margin-right:0}.lo{margin-top:0px}.mc{margin:0}.np{font-size:20px}.nq{margin-top:2.14em}.nr{line-height:32px}.ns{letter-spacing:-0.003em}.oc{margin-top:56px}.ox{margin-bottom:88px}.pi{display:inline-block}.po{padding-top:72px}.qt{margin-top:40px}</style><style type="text/css" data-fela-rehydration="465" data-fela-type="RULE" media="all and (max-width: 1079.98px)">.e{display:none}.ln{margin-top:0px}.ph{display:inline-block}</style><style type="text/css" data-fela-rehydration="465" data-fela-type="RULE" media="all and (max-width: 903.98px)">.f{display:none}.lm{margin-top:0px}.pg{display:inline-block}</style><style type="text/css" data-fela-rehydration="465" data-fela-type="RULE" media="all and (max-width: 727.98px)">.g{display:none}.lk{margin-top:0px}.ll{margin-right:0px}.pf{display:inline-block}</style><style type="text/css" data-fela-rehydration="465" data-fela-type="RULE" media="all and (max-width: 551.98px)">.h{display:none}.s{display:flex}.t{justify-content:space-between}.bs{width:24px}.cc{margin:0 24px}.cr{height:40px}.cy{margin-bottom:44px}.dk{margin-bottom:32px}.dx{font-size:13px}.dy{line-height:20px}.eh{padding:0px 8px 1px}.fu{margin-bottom:4px}.gw{font-size:32px}.gx{margin-top:1.01em}.gy{margin-bottom:24px}.gz{line-height:38px}.ha{letter-spacing:-0.014em}.hv{align-items:flex-start}.iy{flex-direction:column}.jb{margin-bottom:2px}.jp{margin:24px -24px 0}.jq{padding:0}.kf> *{margin-right:8px}.kg> :last-child{margin-right:24px}.kx{margin-left:0px}.li{margin-top:0px}.lj{margin-right:0px}.ly{margin:0}.mi{border:1px solid #F2F2F2}.mj{border-radius:99em}.mk{padding:0px 16px 0px 12px}.ml{height:38px}.mm{align-items:center}.mo svg{margin-right:8px}.mz{font-size:18px}.na{margin-top:1.56em}.nb{line-height:28px}.nc{letter-spacing:-0.003em}.ny{margin-top:40px}.ot{margin-bottom:80px}.pe{display:inline-block}.pk{padding-top:48px}.qp{margin-top:32px}.mn:hover{border-color:#E5E5E5}</style><style type="text/css" data-fela-rehydration="465" data-fela-type="RULE" media="all and (min-width: 904px) and (max-width: 1079.98px)">.i{display:none}.bv{width:64px}.cf{margin:0 64px}.cu{height:48px}.db{margin-bottom:52px}.dn{margin-bottom:48px}.ed{font-size:14px}.ee{line-height:20px}.ek{font-size:13px}.el{padding:5px 12px}.fg{display:flex}.fx{margin-bottom:68px}.gb{max-width:680px}.hl{font-size:42px}.hm{margin-top:1.19em}.hn{margin-bottom:32px}.ho{line-height:52px}.hp{letter-spacing:-0.011em}.hy{align-items:center}.jx{border-top:solid 1px #F2F2F2}.jy{border-bottom:solid 1px #F2F2F2}.jz{margin:32px 0 0}.ka{padding:3px 8px}.kl> *{margin-right:24px}.km> :last-child{margin-right:0}.mb{margin:0}.nl{font-size:20px}.nm{margin-top:2.14em}.nn{line-height:32px}.no{letter-spacing:-0.003em}.ob{margin-top:56px}.ow{margin-bottom:88px}.pn{padding-top:72px}.qs{margin-top:40px}</style><style type="text/css" data-fela-rehydration="465" data-fela-type="RULE" media="all and (min-width: 728px) and (max-width: 903.98px)">.j{display:none}.w{display:flex}.x{justify-content:space-between}.bu{width:64px}.ce{margin:0 48px}.ct{height:48px}.da{margin-bottom:52px}.dm{margin-bottom:48px}.eb{font-size:13px}.ec{line-height:20px}.ej{padding:0px 8px 1px}.fw{margin-bottom:68px}.ga{max-width:680px}.hg{font-size:42px}.hh{margin-top:1.19em}.hi{margin-bottom:32px}.hj{line-height:52px}.hk{letter-spacing:-0.011em}.hx{align-items:center}.jt{border-top:solid 1px #F2F2F2}.ju{border-bottom:solid 1px #F2F2F2}.jv{margin:32px 0 0}.jw{padding:3px 8px}.kj> *{margin-right:24px}.kk> :last-child{margin-right:0}.ma{margin:0}.nh{font-size:20px}.ni{margin-top:2.14em}.nj{line-height:32px}.nk{letter-spacing:-0.003em}.oa{margin-top:56px}.ov{margin-bottom:88px}.pm{padding-top:72px}.qr{margin-top:40px}</style><style type="text/css" data-fela-rehydration="465" data-fela-type="RULE" media="all and (min-width: 552px) and (max-width: 727.98px)">.k{display:none}.u{display:flex}.v{justify-content:space-between}.bt{width:24px}.cd{margin:0 24px}.cs{height:40px}.cz{margin-bottom:44px}.dl{margin-bottom:32px}.dz{font-size:13px}.ea{line-height:20px}.ei{padding:0px 8px 1px}.fv{margin-bottom:4px}.hb{font-size:32px}.hc{margin-top:1.01em}.hd{margin-bottom:24px}.he{line-height:38px}.hf{letter-spacing:-0.014em}.hw{align-items:flex-start}.iz{flex-direction:column}.jc{margin-bottom:2px}.jr{margin:24px 0 0}.js{padding:0}.kh> *{margin-right:8px}.ki> :last-child{margin-right:8px}.ky{margin-left:0px}.lz{margin:0}.mp{border:1px solid #F2F2F2}.mq{border-radius:99em}.mr{padding:0px 16px 0px 12px}.ms{height:38px}.mt{align-items:center}.mv svg{margin-right:8px}.nd{font-size:18px}.ne{margin-top:1.56em}.nf{line-height:28px}.ng{letter-spacing:-0.003em}.nz{margin-top:40px}.ou{margin-bottom:80px}.pl{padding-top:48px}.qq{margin-top:32px}.mu:hover{border-color:#E5E5E5}</style><style type="text/css" data-fela-rehydration="465" data-fela-type="RULE" media="print">.pc{display:none}</style><style type="text/css" data-fela-rehydration="465" data-fela-type="RULE" media="(orientation: landscape) and (max-width: 903.98px)">.jm{max-height:none}</style><style type="text/css" data-fela-rehydration="465" data-fela-type="RULE" media="(prefers-reduced-motion: no-preference)">.oe{transition:transform 300ms cubic-bezier(0.2, 0, 0.2, 1)}</style></head><body><div id="root"><div class="a b c"><div class="d e f g h i j k"></div><script>document.domain = document.domain;</script><div class="l c"><div class="l m n o c"><div class="p q r s t u v w x i d y z"><a class="du ag dv bf ak b am an ao ap aq ar as at s u w i d q dw z" href="https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F2fe1988b522a&amp;%7Efeature=LoOpenInAppButton&amp;%7Echannel=ShowPostUnderCollection&amp;source=---top_nav_layout_nav----------------------------------" rel="noopener follow">Open in app<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="none" viewBox="0 0 10 10" class="dt"><path fill="currentColor" d="M.985 8.485a.375.375 0 1 0 .53.53zM8.75 1.25h.375A.375.375 0 0 0 8.75.875zM8.375 6.5a.375.375 0 1 0 .75 0zM3.5.875a.375.375 0 1 0 0 .75zm-1.985 8.14 7.5-7.5-.53-.53-7.5 7.5zm6.86-7.765V6.5h.75V1.25zM3.5 1.625h5.25v-.75H3.5z"></path></svg></a><div class="ab q"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span><a class="bf b dx dy eh dz ea ei eb ec ej ek ee el em eg eo ep eq er es et eu ev ew ex ey ez fa fb fc fd bm fe ff" data-testid="headerSignUpButton" href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fthe-technical-history-of-kubernetes-2fe1988b522a&amp;source=post_page---top_nav_layout_nav-----------------------global_nav-----------" rel="noopener follow">Sign up</a></span></p><div class="ax l"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSignInButton" href="https://medium.com/m/signin?operation=login&amp;redirect=https%3A%2F%2Fitnext.io%2Fthe-technical-history-of-kubernetes-2fe1988b522a&amp;source=post_page---top_nav_layout_nav-----------------------global_nav-----------" rel="noopener follow">Sign in</a></span></p></div></div></div><div class="p q r ab ac"><div class="ab q ae"><a class="af ag ah ai aj ak al am an ao ap aq ar as at ab" aria-label="Homepage" data-testid="headerMediumLogo" href="https://medium.com/?source=---top_nav_layout_nav----------------------------------" rel="noopener follow"><svg xmlns="http://www.w3.org/2000/svg" width="719" height="160" fill="none" viewBox="0 0 719 160" class="au av aw"><path fill="#242424" d="m174.104 9.734.215-.047V8.02H130.39L89.6 103.89 48.81 8.021H1.472v1.666l.212.047c8.018 1.81 12.09 4.509 12.09 14.242V137.93c0 9.734-4.087 12.433-12.106 14.243l-.212.047v1.671h32.118v-1.665l-.213-.048c-8.018-1.809-12.089-4.509-12.089-14.242V30.586l52.399 123.305h2.972l53.925-126.743V140.75c-.687 7.688-4.721 10.062-11.982 11.701l-.215.05v1.652h55.948v-1.652l-.215-.05c-7.269-1.639-11.4-4.013-12.087-11.701l-.037-116.774h.037c0-9.733 4.071-12.432 12.087-14.242m25.555 75.488c.915-20.474 8.268-35.252 20.606-35.507 3.806.063 6.998 1.312 9.479 3.714 5.272 5.118 7.751 15.812 7.368 31.793zm-.553 5.77h65.573v-.275c-.186-15.656-4.721-27.834-13.466-36.196-7.559-7.227-18.751-11.203-30.507-11.203h-.263c-6.101 0-13.584 1.48-18.909 4.16-6.061 2.807-11.407 7.003-15.855 12.511-7.161 8.874-11.499 20.866-12.554 34.343q-.05.606-.092 1.212a50 50 0 0 0-.065 1.151 85.807 85.807 0 0 0-.094 5.689c.71 30.524 17.198 54.917 46.483 54.917 25.705 0 40.675-18.791 44.407-44.013l-1.886-.664c-6.557 13.556-18.334 21.771-31.738 20.769-18.297-1.369-32.314-19.922-31.042-42.395m139.722 41.359c-2.151 5.101-6.639 7.908-12.653 7.908s-11.513-4.129-15.418-11.63c-4.197-8.053-6.405-19.436-6.405-32.92 0-28.067 8.729-46.22 22.24-46.22 5.657 0 10.111 2.807 12.236 7.704zm43.499 20.008c-8.019-1.897-12.089-4.722-12.089-14.951V1.309l-48.716 14.353v1.757l.299-.024c6.72-.543 11.278.386 13.925 2.83 2.072 1.915 3.082 4.853 3.082 8.987v18.66c-4.803-3.067-10.516-4.56-17.448-4.56-14.059 0-26.909 5.92-36.176 16.672-9.66 11.205-14.767 26.518-14.767 44.278-.003 31.72 15.612 53.039 38.851 53.039 13.595 0 24.533-7.449 29.54-20.013v16.865h43.711v-1.746zM424.1 19.819c0-9.904-7.468-17.374-17.375-17.374-9.859 0-17.573 7.632-17.573 17.374s7.721 17.374 17.573 17.374c9.907 0 17.375-7.47 17.375-17.374m11.499 132.546c-8.019-1.897-12.089-4.722-12.089-14.951h-.035V43.635l-43.714 12.551v1.705l.263.024c9.458.842 12.047 4.1 12.047 15.152v81.086h43.751v-1.746zm112.013 0c-8.018-1.897-12.089-4.722-12.089-14.951V43.635l-41.621 12.137v1.71l.246.026c7.733.813 9.967 4.257 9.967 15.36v59.279c-2.578 5.102-7.415 8.131-13.274 8.336-9.503 0-14.736-6.419-14.736-18.073V43.638l-43.714 12.55v1.703l.262.024c9.459.84 12.05 4.097 12.05 15.152v50.17a56.3 56.3 0 0 0 .91 10.444l.787 3.423c3.701 13.262 13.398 20.197 28.59 20.197 12.868 0 24.147-7.966 29.115-20.43v17.311h43.714v-1.747zm169.818 1.788v-1.749l-.213-.05c-8.7-2.006-12.089-5.789-12.089-13.49v-63.79c0-19.89-11.171-31.761-29.883-31.761-13.64 0-25.141 7.882-29.569 20.16-3.517-13.01-13.639-20.16-28.606-20.16-13.146 0-23.449 6.938-27.869 18.657V43.643L545.487 55.68v1.715l.263.024c9.345.829 12.047 4.181 12.047 14.95v81.784h40.787v-1.746l-.215-.053c-6.941-1.631-9.181-4.606-9.181-12.239V66.998c1.836-4.289 5.537-9.37 12.853-9.37 9.086 0 13.692 6.296 13.692 18.697v77.828h40.797v-1.746l-.215-.053c-6.94-1.631-9.18-4.606-9.18-12.239V75.066a42 42 0 0 0-.578-7.26c1.947-4.661 5.86-10.177 13.475-10.177 9.214 0 13.691 6.114 13.691 18.696v77.828z"></path></svg></a><div class="ax h"><div class="ab ay az ba bb q bc bd"><div class="bm" aria-hidden="false" aria-describedby="searchResults" aria-labelledby="searchResults"></div><div class="bn bo ab"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.092 11.06a6.95 6.95 0 1 1 13.9 0 6.95 6.95 0 0 1-13.9 0m6.95-8.05a8.05 8.05 0 1 0 5.13 14.26l3.75 3.75a.56.56 0 1 0 .79-.79l-3.73-3.73A8.05 8.05 0 0 0 11.042 3z" clip-rule="evenodd"></path></svg></div><input role="combobox" aria-controls="searchResults" aria-expanded="false" aria-label="search" data-testid="headerSearchInput" tabindex="0" class="ay be bf bg z bh bi bj bk bl" placeholder="Search" value=""/></div></div></div><div class="h k w fg fh"><div class="fi ab"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerWriteButton" href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fnew-story&amp;source=---top_nav_layout_nav-----------------------new_post_topnav-----------" rel="noopener follow"><div class="bf b bg z du fj fk ab q fl fm"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-label="Write"><path fill="currentColor" d="M14 4a.5.5 0 0 0 0-1zm7 6a.5.5 0 0 0-1 0zm-7-7H4v1h10zM3 4v16h1V4zm1 17h16v-1H4zm17-1V10h-1v10zm-1 1a1 1 0 0 0 1-1h-1zM3 20a1 1 0 0 0 1 1v-1zM4 3a1 1 0 0 0-1 1h1z"></path><path stroke="currentColor" d="m17.5 4.5-8.458 8.458a.25.25 0 0 0-.06.098l-.824 2.47a.25.25 0 0 0 .316.316l2.47-.823a.25.25 0 0 0 .098-.06L19.5 6.5m-2-2 2.323-2.323a.25.25 0 0 1 .354 0l1.646 1.646a.25.25 0 0 1 0 .354L19.5 6.5m-2-2 2 2"></path></svg><div class="dt l">Write</div></div></a></span></div></div><div class="k j i d"><div class="fi ab"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSearchButton" href="https://medium.com/search?source=---top_nav_layout_nav----------------------------------" rel="noopener follow"><div class="bf b bg z du fj fk ab q fl fm"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-label="Search"><path fill="currentColor" fill-rule="evenodd" d="M4.092 11.06a6.95 6.95 0 1 1 13.9 0 6.95 6.95 0 0 1-13.9 0m6.95-8.05a8.05 8.05 0 1 0 5.13 14.26l3.75 3.75a.56.56 0 1 0 .79-.79l-3.73-3.73A8.05 8.05 0 0 0 11.042 3z" clip-rule="evenodd"></path></svg></div></a></div></div><div class="fi h k j"><div class="ab q"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span><a class="bf b dx dy eh dz ea ei eb ec ej ek ee el em eg eo ep eq er es et eu ev ew ex ey ez fa fb fc fd bm fe ff" data-testid="headerSignUpButton" href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fthe-technical-history-of-kubernetes-2fe1988b522a&amp;source=post_page---top_nav_layout_nav-----------------------global_nav-----------" rel="noopener follow">Sign up</a></span></p><div class="ax l"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSignInButton" href="https://medium.com/m/signin?operation=login&amp;redirect=https%3A%2F%2Fitnext.io%2Fthe-technical-history-of-kubernetes-2fe1988b522a&amp;source=post_page---top_nav_layout_nav-----------------------global_nav-----------" rel="noopener follow">Sign in</a></span></p></div></div></div><div class="l" aria-hidden="false"><button class="ay fn am ab q ao fo fp fq" aria-label="user options menu" data-testid="headerUserIcon"><div class="l fj"><img alt="" class="l fd by bz ca cx" src="https://miro.medium.com/v2/resize:fill:64:64/1*dmbNkD5D-u45r44go_cf0g.png" width="32" height="32" loading="lazy" role="presentation"/><div class="fr by l bz ca fs n ay ft"></div></div></button></div></div></div><div class="l"><div class="fu fv fw fx fy l"><div class="ab cb"><div class="ci bh fz ga gb gc"></div></div><article><div class="l"><div class="l"><span class="l"></span><section><div><div class="fs gi gj gk gl gm"></div><div class="gn go gp gq gr"><div class="ab cb"><div class="ci bh fz ga gb gc"><div><h1 id="96f2" class="pw-post-title gs gt gu bf gv gw gx gy gz ha hb hc hd he hf hg hh hi hj hk hl hm hn ho hp hq hr hs ht hu bk" data-testid="storyTitle">The Technical History of Kubernetes</h1><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="hv hw hx hy hz ab"><div><div class="ab ia"><div><div class="bm" aria-hidden="false"><a href="https://medium.com/@bgrant0607?source=post_page---byline--2fe1988b522a--------------------------------" rel="noopener follow"><div class="l ib ic by id ie"><div class="l fj"><img alt="Brian Grant" class="l fd by dd de cx" src="https://miro.medium.com/v2/resize:fill:88:88/1*IswKlFXcN7a_0bsXVi8l9A.jpeg" width="44" height="44" loading="lazy" data-testid="authorPhoto"/><div class="if by l dd de fs n ig ft"></div></div></div></a></div></div><div class="ih ab fj"><div><div class="bm" aria-hidden="false"><a href="https://itnext.io/?source=post_page---byline--2fe1988b522a--------------------------------" rel="noopener  ugc nofollow"><div class="l ii ij by id ik"><div class="l fj"><img alt="ITNEXT" class="l fd by br il cx" src="https://miro.medium.com/v2/resize:fill:48:48/1*yAqDFIFA5F_NXalOJKz4TA.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto"/><div class="if by l br il fs n ig ft"></div></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="im ab q"><div class="ab q in"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b io ip bk"><a class="af ag ah ai aj ak al am an ao ap aq ar iq" data-testid="authorName" href="https://medium.com/@bgrant0607?source=post_page---byline--2fe1988b522a--------------------------------" rel="noopener follow">Brian Grant</a></p></div></div></div><span class="ir is" aria-hidden="true"><span class="bf b bg z du">·</span></span><p class="bf b io ip du"><span><a class="it iu ah ai aj ak al am an ao ap aq ar ex iv iw" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fccdbe9a99319&amp;operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fthe-technical-history-of-kubernetes-2fe1988b522a&amp;user=Brian+Grant&amp;userId=ccdbe9a99319&amp;source=post_page-ccdbe9a99319--byline--2fe1988b522a---------------------post_header-----------" rel="noopener follow">Follow</a></span></p></div></div></span></div></div><div class="l ix"><span class="bf b bg z du"><div class="ab cn iy iz ja"><div class="jb jc ab"><div class="bf b bg z du ab jd"><span class="je l ix">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar iq ab q" data-testid="publicationName" href="https://itnext.io/?source=post_page---byline--2fe1988b522a--------------------------------" rel="noopener  ugc nofollow"><p class="bf b bg z jf jg jh ji jj jk jl jm bk">ITNEXT</p></a></div></div></div><div class="h k"><span class="ir is" aria-hidden="true"><span class="bf b bg z du">·</span></span></div></div><span class="bf b bg z du"><div class="ab ae"><span data-testid="storyReadTime">25 min read</span><div class="jn jo l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z du">·</span></span></div><span data-testid="storyPublishDate">Mar 22, 2024</span></div></span></div></span></div></div></div><div class="ab cp jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke"><div class="h k w fg fh q"><div class="ku l"><div class="ab q kv kw"><div class="pw-multi-vote-icon fj je kx ky kz"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerClapButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fitnext%2F2fe1988b522a&amp;operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fthe-technical-history-of-kubernetes-2fe1988b522a&amp;user=Brian+Grant&amp;userId=ccdbe9a99319&amp;source=---header_actions--2fe1988b522a---------------------clap_footer-----------" rel="noopener follow"><div><div class="bm" aria-hidden="false"><div class="la ao lb lc ld le am lf lg lh kz"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM13.916 3.953l1.523-2.112-1.184-.39zM8.589 1.84l1.522 2.112-.337-2.501zM18.523 18.92c-.86.86-1.75 1.246-2.62 1.33a6 6 0 0 0 .407-.372c2.388-2.389 2.86-4.951 1.399-7.623l-.912-1.603-.79-1.672c-.26-.56-.194-.98.203-1.288a.7.7 0 0 1 .546-.132c.283.046.546.231.728.5l2.363 4.157c.976 1.624 1.141 4.237-1.324 6.702m-10.999-.438L3.37 14.328a.828.828 0 0 1 .585-1.408.83.83 0 0 1 .585.242l2.158 2.157a.365.365 0 0 0 .516-.516l-2.157-2.158-1.449-1.449a.826.826 0 0 1 1.167-1.17l3.438 3.44a.363.363 0 0 0 .516 0 .364.364 0 0 0 0-.516L5.293 9.513l-.97-.97a.826.826 0 0 1 0-1.166.84.84 0 0 1 1.167 0l.97.968 3.437 3.436a.36.36 0 0 0 .517 0 .366.366 0 0 0 0-.516L6.977 7.83a.82.82 0 0 1-.241-.584.82.82 0 0 1 .824-.826c.219 0 .43.087.584.242l5.787 5.787a.366.366 0 0 0 .587-.415l-1.117-2.363c-.26-.56-.194-.98.204-1.289a.7.7 0 0 1 .546-.132c.283.046.545.232.727.501l2.193 3.86c1.302 2.38.883 4.59-1.277 6.75-1.156 1.156-2.602 1.627-4.19 1.367-1.418-.236-2.866-1.033-4.079-2.246M10.75 5.971l2.12 2.12c-.41.502-.465 1.17-.128 1.89l.22.465-3.523-3.523a.8.8 0 0 1-.097-.368c0-.22.086-.428.241-.584a.847.847 0 0 1 1.167 0m7.355 1.705c-.31-.461-.746-.758-1.23-.837a1.44 1.44 0 0 0-1.11.275c-.312.24-.505.543-.59.881a1.74 1.74 0 0 0-.906-.465 1.47 1.47 0 0 0-.82.106l-2.182-2.182a1.56 1.56 0 0 0-2.2 0 1.54 1.54 0 0 0-.396.701 1.56 1.56 0 0 0-2.21-.01 1.55 1.55 0 0 0-.416.753c-.624-.624-1.649-.624-2.237-.037a1.557 1.557 0 0 0 0 2.2c-.239.1-.501.238-.715.453a1.56 1.56 0 0 0 0 2.2l.516.515a1.556 1.556 0 0 0-.753 2.615L7.01 19c1.32 1.319 2.909 2.189 4.475 2.449q.482.08.971.08c.85 0 1.653-.198 2.393-.579.231.033.46.054.686.054 1.266 0 2.457-.52 3.505-1.567 2.763-2.763 2.552-5.734 1.439-7.586z" clip-rule="evenodd"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l li lj lk ll lm ln lo"><p class="bf b dv z du"><span class="lp">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao la lq lr ab q fk ls lt" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="lu"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"></path></svg></button></div></div></div><div class="ab q kf kg kh ki kj kk kl km kn ko kp kq kr ks kt"><div class="lv k j i d"></div><div class="h k"><div><div class="bm" aria-hidden="false"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerBookmarkButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2fe1988b522a&amp;operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fthe-technical-history-of-kubernetes-2fe1988b522a&amp;source=---header_actions--2fe1988b522a---------------------bookmark_footer-----------" rel="noopener follow"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none" viewBox="0 0 25 25" class="du lw" aria-label="Add to list bookmark button"><path fill="currentColor" d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .805.396L12.5 17l5.695 4.396A.5.5 0 0 0 19 21v-8.5a.5.5 0 0 0-1 0v7.485l-5.195-4.012a.5.5 0 0 0-.61 0L7 19.985z"></path></svg></a></span></div></div></div><div class="fd lx cn"><div class="l ae"><div class="ab cb"><div class="ly lz ma mb mc md ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af fk ah ai aj ak al me an ao ap ex mf mg lt mh mi mj mk ml s mm mn mo mp mq mr ms u mt mu mv"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"></path></svg><div class="j i d"><p class="bf b bg z du">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af fk ah ai aj ak al me an ao ap ex mf mg lt mh mi mj mk ml s mm mn mo mp mq mr ms u mt mu mv"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"></path></svg><div class="j i d"><p class="bf b bg z du">Share</p></div></button></div></div></div></div></div></div></div></div></div><p id="39c0" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">I wasn’t able to attend Kubecon in 2024, but the 10th anniversary of Kubernetes was commemorated at KubeconEU and again <a class="af nu" href="https://www.youtube.com/watch?v=jYjEWlnY25M&amp;t=8777s" rel="noopener ugc nofollow" target="_blank">in June</a>, where I talked about <a class="af nu" rel="noopener ugc nofollow" target="_blank" href="/kubernetes-the-road-to-1-0-525a9420fdf0">the Road to 1.0</a>. You may also be interested in some of <a class="af nu" href="https://medium.com/@bgrant0607/list/kubernetes-8b0b8930195b" rel="noopener">my other Kubernetes-related posts</a>.</p><p id="951f" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">We actually started work on Kubernetes back in 2013, and Kubernetes was based fairly directly on R&amp;D that was done over the few years leading up to that. Of course, there were precursors farther back, including Linux Containers, Borg, Workqueue, and Babysitter, but I’m going to focus on efforts I was directly involved with. Five years ago I wrote a series of threads on Twitter for the 5th anniversary. I finally made the time to post a blog based on those threads (still with Twitter-sized paragraphs). I updated some of the links and added some punctuation, but otherwise didn’t edit it much. Hopefully this makes it easier to find than dozens of separate Twitter posts.</p><p id="7e45" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk"><a class="af nu" href="https://twitter.com/bgrant0607/status/1102292629465661440" rel="noopener ugc nofollow" target="_blank"><strong class="my gv">Kubernetes Borg/Omega history topic 1</strong></a>: Pods. In Borg, Job Tasks were scheduled into Alloc instances, but almost everyone pinned groups of tasks into each instance. Often these were sidecars, such as for logging or caching.</p><p id="e059" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">It was clear that using such groups as the explicit primitive would be simpler. We called these “Scheduling Units”. They were prototyped in Borg, but it was too hard to introduce new concepts. They became “SUnits” in Omega, and then Pods, as in a pod of peas or of whales, in K8s.</p><p id="42b7" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">We debated whether to embrace the containers-as-lightweight-VMs trend early in Kubernetes and just support one container per pod (initially called Tasks in the code), but I’m glad we didn’t. One app per container unlocks the potential for more intelligent management.</p><p id="79d8" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">It enables Kubernetes and other systems to observe which apps are running (from their images), when and why they fail, how much CPU and RAM they are using, etc. And, importantly, enables images to be generated as part of the build process rather than during deployment.</p><p id="8213" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">And, something that’s often overlooked, a Pod shares a network identity, storage volumes, and other OS and machine resources. This makes it easier to migrate to from VMs.</p><p id="ec60" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">We started to work on what became the Kubernetes API in October 2013, before we had settled on Open Source or just a hosted/managed cloud project. Exploration intensified in early 2014, a few team members started to work on libcontainer, and the container-agent was released in May 2014.</p><p id="51bb" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk"><a class="af nu" href="https://twitter.com/bgrant0607/status/1104435451757125633" rel="noopener ugc nofollow" target="_blank"><strong class="my gv">Kubernetes Borg/Omega history topic 2</strong></a>: Labels. Borg had Machine key/value attributes that could be used in scheduling constraints. Borgmon had target labels to convey application topology, environment, and locale. But Jobs themselves didn’t originally have k/v labels.</p><p id="a395" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">So Borg users would embed attribute values in Job names, separated by dots and dashes, up to 180 characters long, and then parse them out in other systems and tools using complex regular expressions.</p><p id="2b47" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">It was clear that load balancers, monitoring systems, and release, rollout, and configuration tools needed common support for identifying attributes that could flow through the entire lifecycle of an application. However, single-value tags, as in gmail and GCE, were missing types.</p><p id="8b25" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Thus, in mid 2013, we proposed key/value labels, for both Borg and Google Cloud, to facilitate higher-level application management. Of course, it was much easier to incorporate them into a greenfield project like Kubernetes, which had labels from the beginning.</p><p id="768a" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Label selector semantics were designed originally for the monitoring system. Monitoring and load-balancing systems wanted to ensure that non-overlapping queries could be constructed. Without disjunction, a common key with different values ensures two selectors don’t overlap.</p><p id="7d7e" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Selectors are also simple enough they could be reverse-indexed, which could be used by watch to find outstanding queries matching labels of a new/changed resource instance. But we haven’t implemented this yet in K8s (<a class="af nu" href="https://github.com/kubernetes/kubernetes/issues/4817" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/kubernetes/issues/4817</a>).</p><p id="7b33" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Another thing we haven’t implemented yet that SREs asked for in the original design is a way to default, require, prohibit, and validate label keys and values: <a class="af nu" href="https://github.com/kubernetes/kubernetes/issues/15390" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/kubernetes/issues/15390</a>.</p><p id="7b3e" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk"><a class="af nu" href="https://twitter.com/bgrant0607/status/1106651847962443776" rel="noopener ugc nofollow" target="_blank"><strong class="my gv">Kubernetes Borg/Omega history topic 3</strong></a>: Annotations. Borg’s Job type had a single notes field. Like the DNS TXT record, that proved insufficient. For example, layers of client libraries and tools wanted to attach additional information.</p><p id="85d8" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Some users found other creative places to carry information, such as scheduling preferences, in which arbitrary key/value strings could be stored. Arbitrary protobuf extensions were eventually supported.</p><p id="69b0" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">That’s a common theme in many parts of the Kubernetes API: consider when multiple values or key/value pairs may be needed rather than just singleton values. I proposed annotations in <a class="af nu" href="https://github.com/kubernetes/kubernetes/issues/1201" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/kubernetes/issues/1201</a>.</p><p id="3d5b" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Annotations provided a place to store the configured state for apply, as discussed in <a class="af nu" href="https://github.com/kubernetes/kubernetes/issues/1178" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/kubernetes/issues/1178</a> and <a class="af nu" href="https://github.com/kubernetes/kubernetes/issues/1702" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/kubernetes/issues/1702</a>, and subsumed Openshift’s description field, in the v1beta3 API overhaul (<a class="af nu" href="http://prs.k8s.io/1225" rel="noopener ugc nofollow" target="_blank">http://prs.k8s.io/1225</a>).</p><p id="af1c" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Some believed that having 2 kinds of key/value string metadata, labels and annotations, would be confusing, so I put some effort into clarifying the distinction in documentation early on, such as in <a class="af nu" href="https://github.com/kubernetes/kubernetes/pull/1817" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/kubernetes/pull/1817</a>. I think unifying them would have reduced usability.</p><p id="0858" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk"><a class="af nu" href="https://twitter.com/bgrant0607/status/1109121268534505472" rel="noopener ugc nofollow" target="_blank"><strong class="my gv">Kubernetes Borg/Omega history topic 4</strong></a>: Workload controllers. Before I get into the history, some conceptual background may be useful, since the underpinnings come up in many Cloud Native contexts. The key is to explicitly model state such that it can be externally manipulated.</p><p id="538e" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Around the time Kubernetes was open sourced, there were a number of libraries and tools created to start containers on multiple machines. The original libswarm was one. The problem with such imperative, client-side approaches was that it was hard to add automation.</p><p id="9f65" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">One could inject a scheduler in between, by emulating a single machine’s remote API, but that would still lack an explicit model of what the user was trying to instantiate, the equivalent of the Pod template in Kubernetes.</p><p id="f182" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">That was added by some other tools, but the lack of also modeling the set of instances, with an explicit replica count, was an obstacle to higher-level automation, such as horizontal autoscaling and progressive rolling updates, both of which Kubernetes added in 1.1 and 1.2.</p><p id="9b86" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Kubernetes originally just supported one workload controller, the ReplicationController, which was designed for elastic stateless workloads with fungible replicas. Shortly after we open-sourced Kubernetes we started to discuss how to add support for additional kinds of workloads.</p><p id="bbec" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">In <a class="af nu" href="https://github.com/kubernetes/kubernetes/issues/1518" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/kubernetes/issues/1518</a>, we started to discuss what became DaemonSet. The key decision was whether to add more functionality to ReplicationController or to create new resource types. Users of other systems were concerned about the complexity of using multiple types.</p><p id="2a4f" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Borg had supported just one workload “controller”, the Job. (I’ll address the differences between Borg’s synchronous state machine and the Kubernetes async controllers later.) It’s described well by the Borg paper: <a class="af nu" href="https://ai.google/research/pubs/pub43438" rel="noopener ugc nofollow" target="_blank">https://ai.google/research/pubs/pub43438</a>.</p><p id="aaff" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Job, an array of Tasks, is used for elastic services, agents that ran on every node, batch workloads, and stateful workloads. Consequently, it has a large number of settings, and additional, external controllers are needed in order to support these different workloads.</p><p id="69d9" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">For instance, for the daemon use case, a special controller / autoscaler is needed to ensure that the Job has a sufficient number of Tasks to cover all the machines, and cases where machines are removed from the middle of the array require special handling.</p><p id="07ea" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">And not only is Job is the first-class primitive rather than Tasks, but each Task has a stable identity, as with StatefulSet in Kubernetes. That overly constraining not just for daemons, but also for autoscaled workloads, CI workloads, graceful termination, debugging, etc.</p><p id="2b1d" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Job also includes published BNS records for tasks, which is the rough equivalent of Endpoints in Kubernetes. BNS records are stored in Chubby, where they can be watched. (I’ll cover watch in K8s more generally later.)</p><p id="f0b3" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">The decoupling of Pod, workload controllers, and Endpoints, and a precedent for multiple workload controllers in Kubernetes has proven very flexible, for supporting many, many types of workloads. There are now many application-specific workload controllers (aka Operators).</p><p id="3eb0" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Explicitly representing the PodTemplate as a separate object, as proposed in <a class="af nu" href="http://issues.k8s.io/170" rel="noopener ugc nofollow" target="_blank">http://issues.k8s.io/170</a>, may also have been useful for these third-party controllers, but in practice the lack of support for that hasn’t been a huge obstacle. (Well, the API exists, but is unused.)</p><p id="7a75" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">I proposed the idea of modeling workload controllers as loosely coupled sets of instances grouped using a label selector in June 2013, based on an 11-page analysis of Borg Job use cases, around the same timeframe as the original labels proposal.</p><p id="7766" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">That partly inspired replicapool.googleapis.com also, though the lack of labels in GCE at the time made implementing the full model infeasible.<br/>Aside on “template”: a “template” is a pattern used to make copies of the same shape. I think the Kubernetes “Pod template” usage is true to that colloquial definition, but typical CS usage implies parameterization and/or macro expansion, so maybe “prototype” would be better.</p><p id="13d2" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">The idea of explicitly modeling state so that it can be externally controlled and observed is a key principle of Cloud Native. I originally included it in a longer form of the definition I wrote for CNCF: <a class="af nu" href="https://github.com/cncf/toc/blob/master/DEFINITION.md" rel="noopener ugc nofollow" target="_blank">https://github.com/cncf/toc/blob/master/DEFINITION.md</a>.</p><p id="0fac" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">The principle can also be applied to workflow systems and configuration management (e.g., see <a class="af nu" href="https://github.com/kubernetes/design-proposals-archive/blob/main/architecture/declarative-application-management.md" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/design-proposals-archive/blob/main/architecture/declarative-application-management.md</a>). Embodying these as code is powerful, but with great power comes great responsibility, since it obstructs external tooling and automation.</p><p id="5165" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk"><a class="af nu" href="https://twitter.com/bgrant0607/status/1111469578603778048" rel="noopener ugc nofollow" target="_blank"><strong class="my gv">Kubernetes Borg/Omega history topic 5</strong></a>: Asynchronous controllers. Borgmaster had synchronous, transactional, edge-triggered state machines. We had challenges scaling, evolving, and extending them.</p><p id="2acd" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">High-cardinality resource instances could exceed what could be done in a single transaction. Addition of new states broke clients. Unobserved changes could cause unexpected state transitions. Adding new resource types was hard, and would have had to be added to monolithic files.</p><p id="9a1e" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">As a result, when new teams worked on new functionality, such as batch scheduling and autoscaling, they built it into external components, which were asynchronous. Ingestion of status from nodes (Borglets) was asynchronous, as well. Omega embraced asynchronous controllers.</p><p id="4b1c" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Omega represented desired state and observed state in separate records in its transactional Paxos store. This made it harder to assemble a picture of what was going on. In Kubernetes, we decided to represent status in the same object as spec, in v1beta3: <a class="af nu" href="http://issues.k8s.io/1225" rel="noopener ugc nofollow" target="_blank">http://issues.k8s.io/1225</a>.</p><p id="031d" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">We also fully embraced the controller model, even for Kubelet, by making Kubelets report back to apiserver (<a class="af nu" href="http://issues.k8s.io/156" rel="noopener ugc nofollow" target="_blank">http://issues.k8s.io/156</a>) and patch status (<a class="af nu" href="https://github.com/kubernetes/kubernetes/issues/2726" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/kubernetes/issues/2726</a>) so that the API could be used as the source of truth by other controllers.</p><p id="4e3b" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Rather than rigid fine-grained state enumerations that couldn’t be evolved, we initially adopted simple basic states that could report open-ended reasons for being in each state (<a class="af nu" href="https://github.com/kubernetes/kubernetes/issues/1146" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/kubernetes/issues/1146</a>), and later non-orthogonal, extensible conditions (<a class="af nu" href="http://issues.k8s.io/7856" rel="noopener ugc nofollow" target="_blank">http://issues.k8s.io/7856</a>).</p><p id="8b31" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">The entire system can now be described as an unbounded number of independent asynchronous control loops reading and writing from/to a schematized resource store as the source of truth. This model has proven to be very resilient, evolvable, and extensible.</p><p id="8ab9" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk"><a class="af nu" href="https://twitter.com/bgrant0607/status/1118268924250869760" rel="noopener ugc nofollow" target="_blank"><strong class="my gv">Kubernetes Borg/Omega history topic 6</strong></a>: Watch. This is a deep topic. It’s a follow-up to the controller topic. I realized that I forgot to link to the doc about Kubernetes controllers: <a class="af nu" href="https://github.com/kubernetes/community/blob/master/contributors/devel/sig-api-machinery/controllers.md" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/community/blob/master/contributors/devel/sig-api-machinery/controllers.md</a>.</p><p id="02c0" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Borgmaster had 2 models: built-in logic used synchronous edge-triggered state machines, while external components were asynchronous and level-based. More on level vs. edge triggering: <a class="af nu" href="https://hackernoon.com/level-triggering-and-reconciliation-in-kubernetes-1f17fe30333d" rel="noopener ugc nofollow" target="_blank">https://hackernoon.com/level-triggering-and-reconciliation-in-kubernetes-1f17fe30333d</a>.</p><p id="5d1d" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">One of the first things I did when joining the Borgmaster team back in 2009 was to parallelize the handling of read requests. Something like 99% of requests were reads, primarily from polling external controllers and monitoring systems.</p><p id="1e1d" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Only BNS (analogous to K8s Endpoints) was written to Chubby, which enabled replicated caching and update notification. That enabled it to scale to much larger numbers of readers (~every container in Borg) and reduced latency, which for polling could be tens of seconds.</p><p id="3927" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Watch-like notification APIs (aka sync and tail) were common for storage systems such as Chubby, Colossus, and Bigtable. In 2013, a generalized Watch API was designed so that each system wouldn’t need to reinvent the wheel. A variant “Observe” added per-entity sequencing.</p><p id="a111" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">We built Kubernetes upon Etcd due to its similarities to Chubby and to the Omega store. When we exposed Etcd’s watch (<a class="af nu" href="https://coreos.com/etcd/docs/latest/learning/api.html" rel="noopener ugc nofollow" target="_blank">https://coreos.com/etcd/docs/latest/learning/api.html</a>) through the K8s API, we let more Etcd details bleed through than originally intended. We need to clean up some of those details soon.</p><p id="5b22" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">The Kubernetes model is described here: <a class="af nu" href="https://github.com/kubernetes/design-proposals-archive/blob/main/architecture/resource-management.md#declarative-control" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/design-proposals-archive/blob/main/architecture/resource-management.md#declarative-control</a>.</p><p id="58e4" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Some other systems use message buses for notifications. Why didn’t we? Controllers need to start from the initial state, we also don’t want them to fall behind or operate on state that’s too stale, and they need to be able to handle “missed” events — the level-based rationale.</p><p id="179a" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">We also wanted Kubernetes to run with a small number of dependencies, and with bounded compute and storage capacity: if we assumed a managed message bus that could store a week of events and an elastic compute platform to process them in parallel, the design would be different.</p><p id="e906" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Watch works well for our typical scenario of mostly active entities with high rates of change per entity, and not a vast number of inactive entities (as opposed to, say, sales catalog entries), since it assumes access to all the relevant state. At some point, we’ll need to shard.</p><p id="9edc" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Systems that require a key/value store for leader election and configuration, a database for persistence, an out-of-process cache for performance, a message bus for eventing, and a store for message bus persistence (3–5 stateful components) can be painful to operate.</p><p id="aa7f" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk"><a class="af nu" href="https://twitter.com/bgrant0607/status/1121054924979064832" rel="noopener ugc nofollow" target="_blank"><strong class="my gv">Kubernetes Borg/Omega history topic 7</strong></a>: The Kubernetes Resource Model: why we (eventually) made it uniform and declarative. A topic even deeper than watch. More details can be found here: <a class="af nu" href="https://github.com/kubernetes/design-proposals-archive/blob/main/architecture/resource-management.md" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/design-proposals-archive/blob/main/architecture/resource-management.md</a>.</p><p id="8ec6" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Like most internal Google services, Borgmaster had an imperative, unversioned, monolithic RPC API built using the precursor to grpc.io, Stubby. It exposed an ad hoc collection of operations, like CreateJob, LookupPackage, StartAllocUpdate, and SetMachineAttributes.</p><p id="52b8" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Hundreds to thousands of clients interfaced with this API. Many of them were asynchronous controllers or monitoring agents, as discussed in previous threads, and there was a simple command-line tool, and two widely used configuration CLIs.</p><p id="7f0c" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">The APIs were manually mapped into the two Turing-complete configuration languages, and there was also a hand-crafted diff library for comparing the previous and new desired states. The sets of concepts, RPC operations, and configurable resource types were not easily extended.</p><p id="e9a5" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Some extensions of the core functionality, such as for batch scheduling and vertical autoscaling, used the Borgmaster as a configuration store by manually adding substructures stored with Job objects, which were then retrieved by polling Jobs.</p><p id="aff9" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Others, such as for load balancing, built independent services with their own service APIs and configuration mechanisms. This enabled teams to evolve their services independently, but created a heterogeneous, inconsistent management surface.</p><p id="bc51" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Omega supported an extensible object model, and <a class="af nu" href="http://twitter.com/davidopp" rel="noopener ugc nofollow" target="_blank">@davidopp</a> had proposed putting an API in front of the persistent store, as we later did in Kubernetes, but it wasn’t declarative. Separate work on a common configuration store was discontinued as Google Cloud became the focus.</p><p id="7668" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">GCP was comprised of independent services, with some common standards, such as the org hierarchy and authz. They used REST APIs, as the rest of the industry, and gRPC didn’t exist yet. But, GCP’s APIs were not natively declarative, and Terraform didn’t exist, either.</p><p id="02f5" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk"><a class="af nu" href="http://twitter.com/jbeda" rel="noopener ugc nofollow" target="_blank">@jbeda</a> proposed layering an aggregated config store/service with consistent, declarative CRUD REST APIs over underlying GCP and third-party service APIs. This sort of later evolved into Deployment Manager.</p><p id="3eec" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">We folded learnings from these 5+ systems into the Kubernetes Resource Model, which now supports arbitrarily many built-in types, aggregated APIs, and centralized storage (CRDs), and can be used to configure 1st-party and 3rd-party services, including GCP: <a class="af nu" href="https://youtu.be/s_hiFuRDJSE" rel="noopener ugc nofollow" target="_blank">https://youtu.be/s_hiFuRDJSE</a>.</p><p id="8d0e" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">KRM is consistent and declarative. Metadata and verbs are uniform. Spec and status are distinctly separated. Resource identifiers, modeled closely after Borgmaster’s (<a class="af nu" href="http://issues.k8s.io/148" rel="noopener ugc nofollow" target="_blank">http://issues.k8s.io/148</a>), provide declarative names. Label selectors enable declarative sets.</p><p id="6bae" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">For the most part, controllers know which fields to propagate from one resource instance to another and wait gracefully on declarative object (rather than field) references, without assuming referential integrity, which enables relaxed operation ordering.</p><p id="daa6" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">There are some gaps in the model (e.g., <a class="af nu" href="http://issues.k8s.io/34363" rel="noopener ugc nofollow" target="_blank">http://issues.k8s.io/34363</a>, <a class="af nu" href="http://issues.k8s.io/30698" rel="noopener ugc nofollow" target="_blank">http://issues.k8s.io/30698</a>, <a class="af nu" href="http://issues.k8s.io/1698" rel="noopener ugc nofollow" target="_blank">http://issues.k8s.io/1698</a>, <a class="af nu" href="http://issues.k8s.io/22675" rel="noopener ugc nofollow" target="_blank">http://issues.k8s.io/22675</a>), but for the most part it facilitates generic operations on arbitrary resource types.</p><p id="215b" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">In the next thread, I’ll cover more about configuration itself, such as the origin of kubectl apply.</p><p id="9beb" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">BTW, when I was digging through old docs/decks, I found a diagram from the Dec 2013 API proposal. Sunit-&gt;Pod, SunitPrototype-&gt;PodTemplate, Replicate-&gt;ReplicaSet, Autoscale-&gt;HorizontalPodAutoscaler.</p><figure class="ny nz oa ob oc od nv nw paragraph-image"><div role="button" tabindex="0" class="oe of fj og bh oh"><div class="nv nw nx"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/0*VKpP9zjO1Yc21_C8 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/0*VKpP9zjO1Yc21_C8 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/0*VKpP9zjO1Yc21_C8 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/0*VKpP9zjO1Yc21_C8 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/0*VKpP9zjO1Yc21_C8 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/0*VKpP9zjO1Yc21_C8 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VKpP9zjO1Yc21_C8 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/0*VKpP9zjO1Yc21_C8 640w, https://miro.medium.com/v2/resize:fit:720/0*VKpP9zjO1Yc21_C8 720w, https://miro.medium.com/v2/resize:fit:750/0*VKpP9zjO1Yc21_C8 750w, https://miro.medium.com/v2/resize:fit:786/0*VKpP9zjO1Yc21_C8 786w, https://miro.medium.com/v2/resize:fit:828/0*VKpP9zjO1Yc21_C8 828w, https://miro.medium.com/v2/resize:fit:1100/0*VKpP9zjO1Yc21_C8 1100w, https://miro.medium.com/v2/resize:fit:1400/0*VKpP9zjO1Yc21_C8 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh md oi c" width="700" height="362" loading="eager" role="presentation"/></picture></div></div></figure><p id="397a" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk"><a class="af nu" href="https://twitter.com/bgrant0607/status/1123620689930358786" rel="noopener ugc nofollow" target="_blank"><strong class="my gv">Kubernetes Borg/Omega history topic 8</strong></a>: Declarative configuration and Apply. Inside Google, the most used configuration approach for Borg is the Turing-complete Borg Configuration Language (BCL). You can see a snippet of BCL on slide 7 in this deck: <a class="af nu" href="https://www.inf.ed.ac.uk/teaching/courses/exc/slides/Wilkes.pdf" rel="noopener ugc nofollow" target="_blank">inf.ed.ac.uk/teaching/cours…</a></p><p id="4c61" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Millions of lines of BCL have been written. A fair amount of BCL was devoted to configuring application command-line flags, which was the most common way to figure server binaries, which is crazy IMO, but the practice sadly carried over to Kubernetes components.</p><p id="f6d9" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">BCL was evaluated and instantiated using the borgcfg CLI, which supports commands like up, down, and update. Logic to diff and merge, perform rolling updates, and otherwise update the live state was embedded in the tool. Logic for common generation functions was written in BCL.</p><p id="d4bb" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">This created a monolithic configuration and tool ecosystem. Even frameworks like mapreduce and services on top of Borg like BorgCron had to use BCL and borgcfg to interact with Borg. Getting-started tools generated BCL.</p><p id="a75a" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">A Python-based language was later developed, also. It interfaced with the update logic via a protobuf that wasn’t quite the same as Borgmaster’s. Other languages, such as Ruby, weren’t used in Google. Several new Borg config languages were developed, but none were approved.</p><p id="3bbf" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Not specifically developed for Borg use, <a class="af nu" href="https://jsonnet.org/articles/design.html" rel="noopener ugc nofollow" target="_blank">jsonnet.org/articles/desig…</a> and <a class="af nu" href="https://github.com/cuelang/cue/" rel="noopener ugc nofollow" target="_blank">https://github.com/cuelang/cue/</a> were inspired by BCL. <a class="af nu" href="https://aurora.apache.org/documentation/latest/reference/configuration-templating/" rel="noopener ugc nofollow" target="_blank">aurora.apache.org/documentation/…</a> and <a class="af nu" href="https://github.com/stripe/skycfg" rel="noopener ugc nofollow" target="_blank">https://github.com/stripe/skycfg</a> were inspired by the Python language.</p><p id="6d8d" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Borgcfg didn’t provide configuration packages. Shared templates were unversioned and directly imported from their homes in the monorepo, which inflicted churn on their consumers. There were also no “stacks” or lifecycle directives, so a number of imperative updates were needed.</p><p id="288f" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">In Kubernetes, we wanted to decouple configuration authoring and generation from updates to the desired state via the API, so that users could express configuration using languages and tools familiar to them: Jinja, Python, Ruby, Javascript, Terraform, Ansible, whatever.</p><p id="72d1" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">I wrote about this in <a class="af nu" href="http://prs.k8s.io/1007" rel="noopener ugc nofollow" target="_blank">http://prs.k8s.io/1007</a>. I also felt it needed to be possible for automation to write directly to the API and not need to update some arbitrary configuration language. To do that, we needed to be able to merge user intent and automated changes.</p><p id="cd0d" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">My initial proposal, in <a class="af nu" href="http://issues.k8s.io/1178" rel="noopener ugc nofollow" target="_blank">http://issues.k8s.io/1178</a>, was to maintain and merge 2 separate layers of desired state in the server. Resistance to that idea led to my client-side Apply proposal in <a class="af nu" href="http://issues.k8s.io/1702" rel="noopener ugc nofollow" target="_blank">http://issues.k8s.io/1702</a>. We’re finally getting server-side apply: <a class="af nu" href="https://github.com/kubernetes/enhancements/blob/master/keps/sig-api-machinery/0006-apply.md" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/enhancements/blob/master/keps/sig-api-machinery/0006-apply.md</a>.</p><p id="2681" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">A gotcha we ran into early in the Apply implementation was complex schema topology. Merging 2 flat maps is easy, but we unfortunately had associative lists: <a class="af nu" href="https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#lists-of-named-subobjects-preferred-over-maps" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#lists-of-named-subobjects-preferred-over-maps</a>. And also sets and undiscriminated unions (being addressed: <a class="af nu" href="https://github.com/kubernetes/enhancements/blob/master/keps/sig-api-machinery/20190325-unions.md" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/enhancements/blob/master/keps/sig-api-machinery/20190325-unions.md</a>).</p><p id="24fc" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Strategic merge patch was developed so that we could diff and merge two objects containing associative lists (non-ordinal lists with index keys in values of fields within list elements): <a class="af nu" href="https://github.com/kubernetes/community/blob/master/contributors/devel/sig-api-machinery/strategic-merge-patch.md" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/community/blob/master/contributors/devel/sig-api-machinery/strategic-merge-patch.md</a>.</p><p id="dab6" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">I wrote an overview of the motivation and principles for the configuration design in <a class="af nu" href="https://github.com/kubernetes/design-proposals-archive/blob/main/architecture/declarative-application-management.md" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/design-proposals-archive/blob/main/architecture/declarative-application-management.md</a>. The original draft of that also contained sketches of what became <a class="af nu" href="https://github.com/kubernetes-sigs/application" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes-sigs/application</a> and <a class="af nu" href="https://github.com/kubernetes-sigs/kustomize" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes-sigs/kustomize</a>.</p><p id="1a0c" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Whereas Apply facilitates collaborative config authoring between humans and machines (thanks to <a class="af nu" href="http://twitter.com/originalavalamp" rel="noopener ugc nofollow" target="_blank">@originalavalamp</a> for that description), kustomize enables collaboration among humans, by facilitating modification of unchanged base prototype/seed configurations.</p><p id="88f9" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">The declarative API, Apply, and kustomize facilitate maintaining configuration as YAML or JSON or proto, amenable to manipulation by tools, rather than as YAML marked up with macros, complex configuration languages, or scripts written in general-purpose programming language.</p><p id="3226" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">On one hand, the ~100 tools that have been developed show that the decoupling of config format and the API has worked. OTOH, it shows there are still gaps. With work like diff and dry run (<a class="af nu" href="https://github.com/kubernetes/enhancements/pull/893" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/enhancements/pull/893</a>) and prune (<a class="af nu" href="https://github.com/kubernetes/enhancements/pull/810" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/enhancements/pull/810</a>), we’re working to close them.</p><p id="0975" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">A list of tools can be found here: <a class="af nu" href="https://docs.google.com/spreadsheets/d/1FCgqz1Ci7_VCz_wdh8vBitZ3giBtac_H8SBw4uxnrsE/edit#gid=0" rel="noopener ugc nofollow" target="_blank">https://docs.google.com/spreadsheets/d/1FCgqz1Ci7_VCz_wdh8vBitZ3giBtac_H8SBw4uxnrsE/edit#gid=0</a>. I just added another 20 or so that I’ve seen.<br/>This thread is already the longest yet, so I’ll start another later with configuration terminology: declarative vs intent, macros vs config languages, packages vs stacks, prototypes vs templates, whitebox vs blackbox, overlays, lifecycle directives, etc.</p><p id="6b78" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">I’ve worked with <a class="af nu" href="http://twitter.com/eric_brewer" rel="noopener ugc nofollow" target="_blank">@eric_brewer</a> for several years at Google, including on configuration, between work Omega and Kubernetes. In the second half of this podcast, Eric also briefly discusses declarative configuration: <a class="af nu" href="https://softwareengineeringdaily.com/2019/04/26/cloud-with-eric-brewer/" rel="noopener ugc nofollow" target="_blank">https://softwareengineeringdaily.com/2019/04/26/cloud-with-eric-brewer/</a>.</p><p id="8245" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">BTW, eventually a “production database” called <a class="af nu" href="https://www.usenix.org/publications/loginonline/prodspec-and-annealing-intent-based-actuation-google-production" rel="noopener ugc nofollow" target="_blank">ProdSpec</a>, did succeed and rolled out. Borg has converged towards a model similar to the Kubernetes Resource Model and “GitOps” (though our internal VCS isn’t git), described here: <a class="af nu" href="https://youtu.be/b4PFHj9s5F8" rel="noopener ugc nofollow" target="_blank">https://youtu.be/b4PFHj9s5F8</a>.</p><p id="911b" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk"><a class="af nu" href="https://twitter.com/bgrant0607/status/1126153226523267073" rel="noopener ugc nofollow" target="_blank"><strong class="my gv">Kubernetes Borg/Omega history topic 9</strong></a>: Scheduling constraints. I have volumes more to write about configuration, but will move on with history topics for now. Borg’s set of constraints grew organically over time. It started with just required memory, before multicore and NPTL.</p><p id="5eb4" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Other resources were added: cpu, disks. Hard and soft constraints on key/value machine attributes, and “attribute limits” to limit the number of tasks per failure domain. Automatically injected anti-constraints were used to implement dedicated machines.</p><p id="8f6d" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">In Omega (<a class="af nu" href="https://ai.google/research/pubs/pub41684" rel="noopener ugc nofollow" target="_blank">https://ai.google/research/pubs/pub41684</a>), we added the concepts of taints and tolerations in order to subsume a number of ad hoc means to prevent scheduling of most tasks and/or evict them from certain machines, and forgiveness to defer eviction.</p><p id="ecca" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">These scheduling features made their way pretty directly into Kubernetes: <a class="af nu" href="http://issues.k8s.io/168" rel="noopener ugc nofollow" target="_blank">http://issues.k8s.io/168</a>, <a class="af nu" href="http://issues.k8s.io/367" rel="noopener ugc nofollow" target="_blank">http://issues.k8s.io/367</a>, <a class="af nu" href="http://issues.k8s.io/1574" rel="noopener ugc nofollow" target="_blank">http://issues.k8s.io/1574</a>, <a class="af nu" href="http://issues.k8s.io/17190" rel="noopener ugc nofollow" target="_blank">http://issues.k8s.io/17190</a>. <a class="af nu" href="http://twitter.com/davidopp" rel="noopener ugc nofollow" target="_blank">@davidopp</a>, who was the TL of scheduling in Borg and Omega, worked on a number of these features in K8s too.</p><p id="a575" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">A scheduling braindump I wrote in early 2015 (<a class="af nu" href="https://github.com/kubernetes/kubernetes/issues/4301#issuecomment-74355529" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/kubernetes/issues/4301#issuecomment-74355529</a>) possibly helped to convince some that Google really was fully sharing its experience with the project. The scheduling design docs can be found in <a class="af nu" href="https://github.com/kubernetes/design-proposals-archive/tree/main/scheduling" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/design-proposals-archive/tree/main/scheduling</a>.</p><p id="ec64" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">These mechanisms can be used to manage how workloads are binpacked for efficiency, spread for availability, isolated from one another for performance or reliability or security, colocated with required resources, matched with desired configurations, and manage node drains.</p><p id="f2b3" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">These scheduling primitives are pretty flexible, but if there are constraints or other policies or criteria that can’t be represented, users can use their own schedulers. In order to do that in Borg, one would have to add a constraint to a task to pin it to a specific machine.</p><p id="c992" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">The Omega paper compared performance of 2-level scheduling with information hiding, but one issue it didn’t mention is that the lower-level scheduler needs to implement all of the same constraints as all the upper-level schedulers, or it may never satisfy their requirements.</p><p id="d398" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Anyway, while resource optimization is an important concern, there are many other considerations in decisions, such as whether container images already resident, which facilitates faster start time.</p><p id="735f" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk"><a class="af nu" href="https://twitter.com/bgrant0607/status/1131202013411176448" rel="noopener ugc nofollow" target="_blank"><strong class="my gv">Kubernetes Borg/Omega history topic 10</strong></a>: In honor of #KubeConEU and the 5th anniversary of open-sourcing Kubernetes, I’ll add more perspective from the Borg and Omega teams to the origin story.</p><p id="d1cd" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Internally, Google puts a lot of emphasis on both resource efficiency and engineering efficiency. For both reasons, back in June 2013, a few months before GCE was ready to GA (<a class="af nu" href="https://cloudplatform.googleblog.com/2013/12/google-compute-engine-is-now-generally-available.html" rel="noopener ugc nofollow" target="_blank">https://cloudplatform.googleblog.com/2013/12/google-compute-engine-is-now-generally-available.html</a>), the Borg and GCE teams started to work more closely to improve both.</p><p id="ecde" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">The initial focus gravitated towards directly supporting features needed by Cloud in Borg so that Cloud wouldn’t need to work around the the lack of those features (see my previous comment on 2-level scheduling: <a class="af nu" href="https://twitter.com/bgrant0607/status/1126153859041087488" rel="noopener ugc nofollow" target="_blank">https://twitter.com/bgrant0607/status/1126153859041087488</a>).</p><p id="fb8d" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Google also spends a lot of energy constantly mitigating entropy in its internal software and infrastructure. The monorepo is one mechanism for this. It also launches many efforts to “unify” or “converge” multiple systems that co-evolve to do similar things.</p><p id="dc3f" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">In that context, 2 months later, the Unified Compute Working Group was formed by Google Cloud and Google’s internal infrastructure group, “TI”, which included Borg. The goal was to develop a proposal for a “compute platform” that could be used by both Cloud and internal customers.</p><p id="f6c7" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">It was obvious that VMs would be too cumbersome and inefficient and App Engine wasn’t versatile enough to run a wide range of internal services, such as web search and Gmail. We needed a platform that was more like Borg, that was based on containers.</p><p id="33cc" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">There were discussions regarding how compatible it should be with App Engine and with Borg. Docker, buildpacks, and Omlet (a new node agent under development to replace Borglet) were compared. Early discussions presumed a managed service, like GCE, GAE, and Borg.</p><p id="5cdf" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">In September 2013, viewpoints of 9+ WG participants were collected and composed into a “Unified Compute PRD”, focused on serving workloads (e.g., rather than batch). That was the first time I was aware of the term “Container as a Service” being used.</p><p id="f50d" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">In October, subgroups of the WG were formed to focus on key problems, including a container management API subgroup. In November, we pulled in more people from Borg and from Cloud to hash out a number of API details. In December, an API proposal was presented to the full WG.</p><p id="6002" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">At the same meeting, a proposal was made for what became the App Engine Flexible Environment (<a class="af nu" href="https://cloud.google.com/appengine/docs/flexible/" rel="noopener ugc nofollow" target="_blank">https://cloud.google.com/appengine/docs/flexible/</a>), and a proposal to build an open-source container platform, so that we wouldn’t be “Hadooped” by other OSS projects.</p><p id="ea4d" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">That OSS container platform was Project 7. Afterward, there were several proposals from both the Borg side and Cloud side to build products with compatible APIs. Collaboration with the Borg team deepened. Borglet team members started to work on libcontainer for Docker in April 2014.</p><p id="0ca8" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">It soon became clear that other Borg team members (me <a class="af nu" href="http://twitter.com/thockin" rel="noopener ugc nofollow" target="_blank">@thockin</a> <a class="af nu" href="http://twitter.com/erictune4" rel="noopener ugc nofollow" target="_blank">@erictune4</a> Dawn Chen <a class="af nu" href="http://twitter.com/originalavalamp" rel="noopener ugc nofollow" target="_blank">@originalavalamp</a> <a class="af nu" href="http://twitter.com/davidopp" rel="noopener ugc nofollow" target="_blank">@davidopp</a> <a class="af nu" href="http://twitter.com/vishnukanan" rel="noopener ugc nofollow" target="_blank">@vishnukanan</a>) should work on the open-source project to design and develop the Borg-like functionality. We deeply believed in the potential value to external users<br/>So we created Kubernetes because we needed it to exist, and we believed others needed it to exist also. Looking at the other solutions available at the time (e.g., <a class="af nu" href="https://github.com/tsuru/docker-cluster" rel="noopener ugc nofollow" target="_blank">https://github.com/tsuru/docker-cluster</a>, <a class="af nu" href="https://github.com/signalfx/maestro-ng" rel="noopener ugc nofollow" target="_blank">https://github.com/signalfx/maestro-ng</a>) and since, we made the right call.</p><p id="3733" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk"><a class="af nu" href="https://twitter.com/bgrant0607/status/1134536364823699457" rel="noopener ugc nofollow" target="_blank"><strong class="my gv">Kubernetes Borg/Omega history topic 11</strong></a>: PodDisruptionBudget. Google constantly performs software and hardware maintenance in its datacenters: firmware updates, kernel and image updates, disk repairs, switch updates, battery tests, etc. etc. More and more kinds over time.<br/>Even though Borg tasks are designed to be resilient, this could get pretty disruptive. Rate-limiting maintenance tasks independently isn’t efficient if you have dozens of them, and it’s not always feasible to perform all types of maintenance at the same time.</p><p id="1c8a" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Even if rate-limiting machine disruptions, it’s also possible for the same task to get disrupted over and over again, like a can being kicked down the road. Hence, the Safe Removal Service (aka SRSly — pronounced seriously) was developed by SRE. SRE builds lots of automation.</p><p id="165c" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">SRSly kept track of how often tasks of the same Borg Job were disrupted (aka evicted). Maintenance automation queried SRSly regarding all tasks scheduled on a machine before taking it out of service. This enabled Borg to provide a SLO on task disruption.</p><p id="2933" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Borgmaster, however, did not know about SRSly. Instead, all critical/production workloads were changed to run with the same priority so that they wouldn’t preempt each other. Doing that for every Borg Job in the company was extremely painful — more on priority/preemption later<br/>For Omega, we developed a model that could be applied both during task preemption to run a higher-priority task and eviction for maintenance — disruption counters. There was a time dimension that ended up not being effective due to constant changes, so we dropped it in K8s.</p><p id="d264" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">I think I first mentioned this in Kubernetes in my big scheduling braindump comment: <a class="af nu" href="https://github.com/kubernetes/kubernetes/issues/4301#issuecomment-74355529" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/kubernetes/issues/4301#issuecomment-74355529</a>. It came up again when I proposed maxUnavailable to moderate concurrent disruptions caused by updates during the design of Deployment:<br/><a class="af nu" href="https://github.com/kubernetes/kubernetes/pull/12236#discussion_r36501373" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/kubernetes/pull/12236#discussion_r36501373</a>.</p><p id="d281" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">That discussion was forked into <a class="af nu" href="https://github.com/kubernetes/kubernetes/issues/12611" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/kubernetes/issues/12611</a>. Around that time, Matt Liggett (<a class="af nu" href="https://github.com/kubernetes/kubernetes/pulls?q=is%3Apr+author%3Amml+is%3Aclosed" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/kubernetes/pulls?q=is%3Apr+author%3Amml+is%3Aclosed</a>) joined the GKE team from Borg SRE (woo hoo!). One of the first things Matt worked on was improving node drains: <a class="af nu" href="https://github.com/kubernetes/kubernetes/issues/6080" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/kubernetes/issues/6080</a>.</p><p id="b5fa" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Together with <a class="af nu" href="http://twitter.com/davidopp" rel="noopener ugc nofollow" target="_blank">@davidopp</a> and <a class="af nu" href="http://twitter.com/erictune4" rel="noopener ugc nofollow" target="_blank">@erictune4</a>, we folded disruption budgets into the rescheduling design proposal: <a class="af nu" href="https://github.com/kubernetes/community/blob/master/contributors/design-proposals/scheduling/rescheduling.md#disruption-budget" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/community/blob/master/contributors/design-proposals/scheduling/rescheduling.md#disruption-budget</a>. (Rescheduling deserves its own thread — I’ll do that one next.)</p><p id="ef30" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Implementation began in <a class="af nu" href="https://github.com/kubernetes/kubernetes/pull/24697" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/kubernetes/pull/24697</a> and <a class="af nu" href="https://github.com/kubernetes/kubernetes/pull/25551" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/kubernetes/pull/25551</a><br/>PodDisruptionBudget is now documented: <a class="af nu" href="https://kubernetes.io/docs/concepts/workloads/pods/disruptions/" rel="noopener ugc nofollow" target="_blank">https://kubernetes.io/docs/concepts/workloads/pods/disruptions/</a> and <a class="af nu" href="https://kubernetes.io/docs/tasks/run-application/configure-pdb/" rel="noopener ugc nofollow" target="_blank">https://kubernetes.io/docs/tasks/run-application/configure-pdb/</a>. Try it out and give us feedback on how well it works for you. We’re looking to advance it from beta to GA: <a class="af nu" href="https://github.com/kubernetes/enhancements/issues/85" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/enhancements/issues/85</a>.</p><p id="2594" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">You can safely drain a node with kubetctl drain: <a class="af nu" href="https://kubernetes.io/docs/tasks/administer-cluster/safely-drain-node/" rel="noopener ugc nofollow" target="_blank">https://kubernetes.io/docs/tasks/administer-cluster/safely-drain-node/</a>. Node upgrades and the cluster autoscaler in Google Kubernetes Engine (GKE) also respect PodDisruptionBudget. The latter is documented here: <a class="af nu" href="https://cloud.google.com/kubernetes-engine/docs/concepts/cluster-autoscaler" rel="noopener ugc nofollow" target="_blank">https://cloud.google.com/kubernetes-engine/docs/concepts/cluster-autoscaler</a>.</p><p id="1f61" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Node upgrade behavior is documented here: <a class="af nu" href="https://t.co/eyWfp2TZn3" rel="noopener ugc nofollow" target="_blank">https://t.co/eyWfp2TZn3</a><br/>And more about the Google SRE philosophy behind automation can be found in the SRE book: <a class="af nu" href="https://sre.google/sre-book/automation-at-google/" rel="noopener ugc nofollow" target="_blank">https://sre.google/sre-book/automation-at-google/</a>.<br/>And the Safe Removal Service was also mentioned in Google’s “VM Live Migration at Scale” paper in VEE 2018: <a class="af nu" href="https://dl.acm.org/doi/10.1145/3296975.3186415" rel="noopener ugc nofollow" target="_blank">https://dl.acm.org/doi/10.1145/3296975.3186415</a>.</p><p id="f435" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk"><a class="af nu" href="https://twitter.com/bgrant0607/status/1140592824947109888" rel="noopener ugc nofollow" target="_blank"><strong class="my gv">Kubernetes Borg/Omega history topic 12</strong></a>: A follow-on to the PodDisruptionBudget topic: the descheduler (<a class="af nu" href="https://github.com/kubernetes-incubator/descheduler" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes-incubator/descheduler</a>). Descheduler is more appropriate than the original term “rescheduler”, because its job is to decide which pods to kill, not to replace or schedule them.</p><p id="ed61" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">In Kubernetes, when running on a cloud provider such as in GKE, in the case of pending pods with no existing available space to be placed, either cluster autoscaling or even node autoprovisioning (<a class="af nu" href="https://github.com/kubernetes/autoscaler/blob/master/cluster-autoscaler/proposals/node_autoprovisioning.md" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/autoscaler/blob/master/cluster-autoscaler/proposals/node_autoprovisioning.md</a>, <a class="af nu" href="https://cloud.google.com/kubernetes-engine/docs/how-to/node-auto-provisioning" rel="noopener ugc nofollow" target="_blank">https://cloud.google.com/kubernetes-engine/docs/how-to/node-auto-provisioning</a>) can create new nodes for them.</p><p id="b08a" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">In Borg, the rescheduler was created to defragment nodes to make room. It selected tasks to evict so that the new tasks could schedule, while also ensuring the replacements for the evicted tasks could also find new homes so as not to just cause unnecessary churn.</p><p id="4d47" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">In K8s, the purpose of the descheduler is mainly to reshuffle pods to improve the overall distribution of pods across nodes. After some churn in a cluster due to pod terminations due to pod autoscaling, pod updates, pods for batch/CI tasks, etc., pod layout can become uneven.</p><p id="bb4c" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">A simple example: Say the cluster autoscaler (<a class="af nu" href="https://github.com/kubernetes/autoscaler/tree/master/cluster-autoscaler" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/autoscaler/tree/master/cluster-autoscaler</a>) added a new node for new pods. If those pods were due to creation of a new Deployment or ReplicaSet, they could all land on the new node if there weren’t enough space on existing nodes.</p><p id="2ddd" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">From the experience in Borg, we knew the descheduler would be needed from the beginning of the Kubernetes project. I think it was first mentioned when discussing the addition of liveness and readiness probes: <a class="af nu" href="https://github.com/kubernetes/kubernetes/issues/620#issuecomment-50110653" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/kubernetes/issues/620#issuecomment-50110653</a>.</p><p id="1576" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">This enabled us to establish a clear separation of concerns between pod creation and replacement by workload controllers, horizontal scaling by HPA, placement by the scheduler, and rebalancing across nodes and failure domains by the descheduler, which would respect PDB.</p><p id="a28a" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">That division was discussed when designing eviction for unresponsive nodes (<a class="af nu" href="https://github.com/kubernetes/kubernetes/issues/3885#issuecomment-71984989" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/kubernetes/issues/3885#issuecomment-71984989</a>) and then in issues.k8s.io/12140. The design docs can be found at <a class="af nu" href="https://github.com/kubernetes/community/blob/master/contributors/design-proposals/scheduling/rescheduler.md" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/community/blob/master/contributors/design-proposals/scheduling/rescheduler.md</a> and <a class="af nu" href="https://github.com/kubernetes/community/blob/master/contributors/design-proposals/scheduling/rescheduling.md" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/community/blob/master/contributors/design-proposals/scheduling/rescheduling.md</a>.</p><p id="d597" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Note that if churn in the cluster is sufficiently high and eviction is highly constrained due to PodDisruptionBudgets, it may not be possible for the descheduler to keep up. This is one reason why it may not be possible to achieve an “optimal” layout.</p><p id="b689" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk"><a class="af nu" href="https://twitter.com/bgrant0607/status/1145696550959509504" rel="noopener ugc nofollow" target="_blank"><strong class="my gv">Kubernetes Borg/Omega history topic 13</strong></a>: Priority and preemption. Some work is more important and/or urgent than other work. Borg represented this as an integer value: priority. A higher value meant a task was more important than a lower value, and should be able to displace it.</p><p id="7d2e" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">When choosing a machine for a task, the scheduler ignored lower-priority tasks for determining whether/where a task would fit, but considered the number of tasks that would have to be preempted as part of the ranking function for choosing the best machine.</p><p id="2598" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Disruption budgets were never added to the scheduler, which would have been hard, but there were also concerns about performance and priority inversion. Higher-priority tasks could specify how long they would wait for lower-priority ones to gracefully terminate.</p><p id="50ae" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Priorities were used to ensure production/critical serving workloads could always get the resources they needed. This was essential to enabling mixed workloads to run together in the same clusters. Batch and experimental workloads ran at lower priorities, infrastructure at higher.</p><p id="0c33" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">For a while, users tried spreading their workloads across multiple priority bands in order to be nice to other tenants — crude kind of fairness in the case of resource crunches. That resulted in preemption cascades of higher-priority tasks preempting lower-priority ones .</p><p id="c230" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Batch workloads, many of which were continuous automatically submitted, primarily preempted other batch tasks, causing significant amounts of lost work. So, priorities were “collapsed” into bands such that everything in the same band was treated as the same priority.</p><p id="c6f7" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">The collapse reduced preemption, but other mechanisms were needed to ensure timely and efficient scheduling. The rescheduler ensured that pending production-priority tasks could schedule by choosing others to displace. It verified that both tasks would schedule, to avoid cascades.</p><p id="1f28" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Groups of batch tasks were queued and admitted to the cluster when enough resources became available to schedule them. Resource quota by priority prevented priority inflation over time. Space was left between the bands in case new bands were needed — like BASIC line numbering.</p><p id="32dd" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Eventually the priority values of virtually all tasks were changed to rationalize them with the new scheme, across thousands of jobs, in their configuration files, through a painstaking process. This reiterated the importance of abstracting the operational intent.</p><p id="e473" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Borg’s approach is described in the Borg paper: <a class="af nu" href="https://ai.google/research/pubs/pub43438" rel="noopener ugc nofollow" target="_blank">https://ai.google/research/pubs/pub43438</a>. K8s design proposals were in <a class="af nu" href="https://github.com/kubernetes/design-proposals-archive/blob/main/scheduling/pod-preemption.md" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/design-proposals-archive/blob/main/scheduling/pod-preemption.md</a> and <a class="af nu" href="https://github.com/kubernetes/design-proposals-archive/blob/main/scheduling/pod-priority-api.md" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/design-proposals-archive/blob/main/scheduling/pod-priority-api.md</a>. Priority in resource quota: <a class="af nu" href="https://github.com/kubernetes/enhancements/blob/master/keps/sig-scheduling/20190409-resource-quota-ga.md" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/enhancements/blob/master/keps/sig-scheduling/20190409-resource-quota-ga.md</a>. Coscheduling: <a class="af nu" href="https://github.com/kubernetes/enhancements/blob/master/keps/sig-scheduling/34-20180703-coscheduling.md" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/enhancements/blob/master/keps/sig-scheduling/34-20180703-coscheduling.md</a>.</p><p id="ff32" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Priority in Kubernetes is relatively new, and it’s still evolving. For instance, there’s an open proposal to add a preemption policy, <a class="af nu" href="https://github.com/kubernetes/enhancements/pull/1096" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/enhancements/pull/1096</a>, primarily to avoid preempting other pods. Borg has a similar mechanism. I’ll discuss why when covering QoS.</p><p id="4e00" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Waiting for preempted pods to terminate gracefully before starting newly scheduled pods creates significant complexity in the design. The scheduler then needs to model the future state, and some controller needs to watch for the space to become before starting the new pod.</p><p id="aa2c" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">The complexity of priority and preemption is primarily what drove the change for the DaemonSet controller to rely on the default scheduler to bind pods to nodes, as well as the scheduler framework proposal <a class="af nu" href="https://github.com/kubernetes/enhancements/issues/624" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/enhancements/issues/624</a>, so the code could be reused in custom schedulers.</p><p id="44a0" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">I’ll cover Quality of Service (QoS) and oversubscription next. Over time, priority bands in Borg (specific hardcoded integer values) came to be used as part of the determination of QoS level, for reasons I’ll go into in that thread.</p><p id="014a" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk"><a class="af nu" href="https://twitter.com/bgrant0607/status/1153341109692588032" rel="noopener ugc nofollow" target="_blank"><strong class="my gv">Kubernetes Borg/Omega history topic 14</strong></a>: Computational Quality of Service (QoS) and oversubscription. What are they, why would you want them, and how is QoS different than priority? On the last point, it’s distinguishing importance and urgency.</p><p id="a9ae" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">QoS is something that wouldn’t matter if just one process were running per host system or if all the processes steadily used a constant amount of cpu, memory, and other resources. Because they vary, reserving max capacity needed for each would leave systems poorly utilized.</p><p id="4038" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Oversubscription mitigates that by packing more applications onto a system than could all fit at their peak requirements. It’s kind of like a bank: not everyone can withdraw at the same time. The question is then: what happens when apps demand more resources than they can get?</p><p id="c587" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">With time-division multiplexing, many CPU threads can be interleaved. They can be blocked and queued by the OS, typically at the cost of context switches and waiting a few time slices. Thus there is no fixed limit to how many can be packed onto a machine. CPU is compressible.</p><p id="8089" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">OTOH, swapping memory pages, even to local SSD, is painfully expensive. This is why systems hosting services that need to respond with subsecond latency disable swap. Memory is considered an incompressible resource.</p><p id="78e6" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">For simplicity, I’ll ignore resources other than CPU and memory<br/>Compressible resources like CPU can be made available quickly by the kernel with low impact to the threads that were interrupted, provided it knows which threads urgently need the resources and which ones don’t. We call this latency sensitive and latency tolerant respectively.</p><p id="1684" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Borg used an explicit attribute to indicate this, called appclass, which is described by the Borg paper: <a class="af nu" href="https://ai.google/research/pubs/pub43438" rel="noopener ugc nofollow" target="_blank">https://ai.google/research/pubs/pub43438</a>. This was translated to scheduling latency in LMCTFY: <a class="af nu" href="https://github.com/google/lmctfy/blob/master/include/lmctfy.proto#L142" rel="noopener ugc nofollow" target="_blank">https://github.com/google/lmctfy/blob/master/include/lmctfy.proto#L142</a>.</p><p id="85ac" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">In Kubernetes, it’s inferred from resource requests and limits<br/>In order to reallocate incompressible resources quickly, threads need to be killed, which is obviously not low impact. (For memory, in Linux this is done by the OOM killer.) This was why Borg used priority (production priority vs not) to make memory oversubscription decisions.</p><p id="e4c9" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Borg’s resource reclamation approach is described by the paper: reservations based on observed usage were computed and oversubscribed resources (latency-tolerant cpu and non-production memory) were tallied against reservations whereas guaranteed ones used limits. Complicated.<br/>Vertical autoscaling (VA) added even more complexity. VA changed limits, but left its own padding to provide slack for reaction time and observation of demand. Ad hoc mechanisms were added to disable limit enforcement for each resource, creating a notion similar to request in K8s.</p><p id="4e5b" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">In K8s, I wanted something simpler, to directly convey the desire for oversubscription and bursting flexibility. The discussion started way back in issues.k8s.io/147 and issues.k8s.io/168. The model we settled on was determined by looking at limits and requests.</p><p id="96d0" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Request==Limit implies guaranteed resources (not oversubscribed). Request&lt;Limit implies burstable (oversubscribed). Zero request implies best effort. Borg scheduled best effort using reservation, but no throughput guarantees could be made in practice.</p><p id="95f2" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">This is described in the resource model design (<a class="af nu" href="https://github.com/kubernetes/design-proposals-archive/blob/main/scheduling/resources.md" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/design-proposals-archive/blob/main/scheduling/resources.md</a>) and the QoS proposal (<a class="af nu" href="https://github.com/kubernetes/design-proposals-archive/blob/main/node/resource-qos.md" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/design-proposals-archive/blob/main/node/resource-qos.md</a>), including the mapping to OOM scores. The mapping to cgroup cpu shares is described in the pod resource design (<a class="af nu" href="https://github.com/kubernetes/community/blob/master/contributors/design-proposals/node/pod-resource-management.md" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/community/blob/master/contributors/design-proposals/node/pod-resource-management.md</a>).</p><p id="35b9" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Some work on Vertical Pod Autoscaling for Kubernetes has started: <a class="af nu" href="https://github.com/kubernetes/community/blob/master/contributors/design-proposals/autoscaling/vertical-pod-autoscaler.md" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/community/blob/master/contributors/design-proposals/autoscaling/vertical-pod-autoscaler.md</a>. There have been proposals to implement oversubscription also (<a class="af nu" href="https://github.com/kubernetes/enhancements/issues/355" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/enhancements/issues/355</a>). As for horizontal scaling, resource monitoring infrastructure is a prerequisite.</p><p id="db58" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">If managing cluster-level sharing using ResourceQuota and LimitRange, oversubscription can be done at that level also. The original designs were described by <a class="af nu" href="https://github.com/kubernetes/design-proposals-archive/blob/main/resource-management/admission_control_limit_range.md" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/design-proposals-archive/blob/main/resource-management/admission_control_limit_range.md</a> and <a class="af nu" href="https://github.com/kubernetes/design-proposals-archive/blob/main/resource-management/admission_control_resource_quota.md" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/design-proposals-archive/blob/main/resource-management/admission_control_resource_quota.md</a>, with improvements in <a class="af nu" href="https://github.com/kubernetes/design-proposals-archive/blob/main/resource-management/resource-quota-scoping.md" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/design-proposals-archive/blob/main/resource-management/resource-quota-scoping.md</a>.</p><p id="f4c5" class="pw-post-body-paragraph mw mx gu my b mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt gn bk">Ok, this topic doesn’t fit into a Twitter form factor very well. Maybe some day I’ll get around to writing this up more in long form. For now, that’s about all I have time for, but questions are welcome.</p></div></div></div></div></section></div></div></article></div><div class="ab cb"><div class="ci bh fz ga gb gc"><div class="oj ok ab ja"><div class="ol ab"><a class="om ay am ao" href="https://medium.com/tag/kubernetes?source=post_page-----2fe1988b522a--------------------------------" rel="noopener follow"><div class="on fj cx oo ge op oq bf b bg z bk or">Kubernetes</div></a></div></div></div></div><div class="l"></div><footer class="os ot ou ov ow ox oy oz pa ab q pb ik c"><div class="l ae"><div class="ab cb"><div class="ci bh fz ga gb gc"><div class="ab cp pc"><div class="ab q kv"><div class="pd l"><span class="l pe pf pg e d"><div class="ab q kv kw"><div class="pw-multi-vote-icon fj je kx ky kz"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerClapButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fitnext%2F2fe1988b522a&amp;operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fthe-technical-history-of-kubernetes-2fe1988b522a&amp;user=Brian+Grant&amp;userId=ccdbe9a99319&amp;source=---footer_actions--2fe1988b522a---------------------clap_footer-----------" rel="noopener follow"><div><div class="bm" aria-hidden="false"><div class="la ao lb lc ld le am lf lg lh kz"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM13.916 3.953l1.523-2.112-1.184-.39zM8.589 1.84l1.522 2.112-.337-2.501zM18.523 18.92c-.86.86-1.75 1.246-2.62 1.33a6 6 0 0 0 .407-.372c2.388-2.389 2.86-4.951 1.399-7.623l-.912-1.603-.79-1.672c-.26-.56-.194-.98.203-1.288a.7.7 0 0 1 .546-.132c.283.046.546.231.728.5l2.363 4.157c.976 1.624 1.141 4.237-1.324 6.702m-10.999-.438L3.37 14.328a.828.828 0 0 1 .585-1.408.83.83 0 0 1 .585.242l2.158 2.157a.365.365 0 0 0 .516-.516l-2.157-2.158-1.449-1.449a.826.826 0 0 1 1.167-1.17l3.438 3.44a.363.363 0 0 0 .516 0 .364.364 0 0 0 0-.516L5.293 9.513l-.97-.97a.826.826 0 0 1 0-1.166.84.84 0 0 1 1.167 0l.97.968 3.437 3.436a.36.36 0 0 0 .517 0 .366.366 0 0 0 0-.516L6.977 7.83a.82.82 0 0 1-.241-.584.82.82 0 0 1 .824-.826c.219 0 .43.087.584.242l5.787 5.787a.366.366 0 0 0 .587-.415l-1.117-2.363c-.26-.56-.194-.98.204-1.289a.7.7 0 0 1 .546-.132c.283.046.545.232.727.501l2.193 3.86c1.302 2.38.883 4.59-1.277 6.75-1.156 1.156-2.602 1.627-4.19 1.367-1.418-.236-2.866-1.033-4.079-2.246M10.75 5.971l2.12 2.12c-.41.502-.465 1.17-.128 1.89l.22.465-3.523-3.523a.8.8 0 0 1-.097-.368c0-.22.086-.428.241-.584a.847.847 0 0 1 1.167 0m7.355 1.705c-.31-.461-.746-.758-1.23-.837a1.44 1.44 0 0 0-1.11.275c-.312.24-.505.543-.59.881a1.74 1.74 0 0 0-.906-.465 1.47 1.47 0 0 0-.82.106l-2.182-2.182a1.56 1.56 0 0 0-2.2 0 1.54 1.54 0 0 0-.396.701 1.56 1.56 0 0 0-2.21-.01 1.55 1.55 0 0 0-.416.753c-.624-.624-1.649-.624-2.237-.037a1.557 1.557 0 0 0 0 2.2c-.239.1-.501.238-.715.453a1.56 1.56 0 0 0 0 2.2l.516.515a1.556 1.556 0 0 0-.753 2.615L7.01 19c1.32 1.319 2.909 2.189 4.475 2.449q.482.08.971.08c.85 0 1.653-.198 2.393-.579.231.033.46.054.686.054 1.266 0 2.457-.52 3.505-1.567 2.763-2.763 2.552-5.734 1.439-7.586z" clip-rule="evenodd"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l li lj lk ll lm ln lo"><p class="bf b dv z du"><span class="lp">--</span></p></div></div></span><span class="l h g f ph pi"><div class="ab q kv kw"><div class="pw-multi-vote-icon fj je kx ky kz"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerClapButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fitnext%2F2fe1988b522a&amp;operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fthe-technical-history-of-kubernetes-2fe1988b522a&amp;user=Brian+Grant&amp;userId=ccdbe9a99319&amp;source=---footer_actions--2fe1988b522a---------------------clap_footer-----------" rel="noopener follow"><div><div class="bm" aria-hidden="false"><div class="la ao lb lc ld le am lf lg lh kz"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM13.916 3.953l1.523-2.112-1.184-.39zM8.589 1.84l1.522 2.112-.337-2.501zM18.523 18.92c-.86.86-1.75 1.246-2.62 1.33a6 6 0 0 0 .407-.372c2.388-2.389 2.86-4.951 1.399-7.623l-.912-1.603-.79-1.672c-.26-.56-.194-.98.203-1.288a.7.7 0 0 1 .546-.132c.283.046.546.231.728.5l2.363 4.157c.976 1.624 1.141 4.237-1.324 6.702m-10.999-.438L3.37 14.328a.828.828 0 0 1 .585-1.408.83.83 0 0 1 .585.242l2.158 2.157a.365.365 0 0 0 .516-.516l-2.157-2.158-1.449-1.449a.826.826 0 0 1 1.167-1.17l3.438 3.44a.363.363 0 0 0 .516 0 .364.364 0 0 0 0-.516L5.293 9.513l-.97-.97a.826.826 0 0 1 0-1.166.84.84 0 0 1 1.167 0l.97.968 3.437 3.436a.36.36 0 0 0 .517 0 .366.366 0 0 0 0-.516L6.977 7.83a.82.82 0 0 1-.241-.584.82.82 0 0 1 .824-.826c.219 0 .43.087.584.242l5.787 5.787a.366.366 0 0 0 .587-.415l-1.117-2.363c-.26-.56-.194-.98.204-1.289a.7.7 0 0 1 .546-.132c.283.046.545.232.727.501l2.193 3.86c1.302 2.38.883 4.59-1.277 6.75-1.156 1.156-2.602 1.627-4.19 1.367-1.418-.236-2.866-1.033-4.079-2.246M10.75 5.971l2.12 2.12c-.41.502-.465 1.17-.128 1.89l.22.465-3.523-3.523a.8.8 0 0 1-.097-.368c0-.22.086-.428.241-.584a.847.847 0 0 1 1.167 0m7.355 1.705c-.31-.461-.746-.758-1.23-.837a1.44 1.44 0 0 0-1.11.275c-.312.24-.505.543-.59.881a1.74 1.74 0 0 0-.906-.465 1.47 1.47 0 0 0-.82.106l-2.182-2.182a1.56 1.56 0 0 0-2.2 0 1.54 1.54 0 0 0-.396.701 1.56 1.56 0 0 0-2.21-.01 1.55 1.55 0 0 0-.416.753c-.624-.624-1.649-.624-2.237-.037a1.557 1.557 0 0 0 0 2.2c-.239.1-.501.238-.715.453a1.56 1.56 0 0 0 0 2.2l.516.515a1.556 1.556 0 0 0-.753 2.615L7.01 19c1.32 1.319 2.909 2.189 4.475 2.449q.482.08.971.08c.85 0 1.653-.198 2.393-.579.231.033.46.054.686.054 1.266 0 2.457-.52 3.505-1.567 2.763-2.763 2.552-5.734 1.439-7.586z" clip-rule="evenodd"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l li lj lk ll lm ln lo"><p class="bf b dv z du"><span class="lp">--</span></p></div></div></span></div><div class="bq ab"><div><div class="bm" aria-hidden="false"><button class="ao la lq lr ab q fk ls lt" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="lu"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"></path></svg></button></div></div></div></div><div class="ab q"><div class="pj l ix"><div><div class="bm" aria-hidden="false"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerBookmarkButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2fe1988b522a&amp;operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fthe-technical-history-of-kubernetes-2fe1988b522a&amp;source=---footer_actions--2fe1988b522a---------------------bookmark_footer-----------" rel="noopener follow"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none" viewBox="0 0 25 25" class="du lw" aria-label="Add to list bookmark button"><path fill="currentColor" d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .805.396L12.5 17l5.695 4.396A.5.5 0 0 0 19 21v-8.5a.5.5 0 0 0-1 0v7.485l-5.195-4.012a.5.5 0 0 0-.61 0L7 19.985z"></path></svg></a></span></div></div></div><div class="pj l ix"><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="footerSocialShareButton" class="af fk ah ai aj ak al me an ao ap ex mf mg lt mh"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"></path></svg></button></div></div></div></div></div></div></div></div></div></footer><div class="pk pl pm pn po l bx"><div class="ab cb"><div class="ci bh fz ga gb gc"><div class="cl ab pp cp"><div class="ab ia"><a href="https://medium.com/@bgrant0607?source=post_page---post_author_info--2fe1988b522a--------------------------------" rel="noopener follow"><div class="l pq pr by ps ie"><div class="l fj"><img alt="Brian Grant" class="l fd by pt pu cx" src="https://miro.medium.com/v2/resize:fill:144:144/1*IswKlFXcN7a_0bsXVi8l9A.jpeg" width="72" height="72" loading="lazy"/><div class="if by l pt pu fs n ig ft"></div></div></div></a><div class="pv ab fj"><div><div class="bm" aria-hidden="false"><a href="https://itnext.io/?source=post_page---post_author_info--2fe1988b522a--------------------------------" rel="noopener follow"><div class="l pw px by ps ik"><div class="l fj"><img alt="ITNEXT" class="l fd by bz ca cx" src="https://miro.medium.com/v2/resize:fill:64:64/1*yAqDFIFA5F_NXalOJKz4TA.png" width="32" height="32" loading="lazy"/><div class="if by l bz ca fs n ig ft"></div></div></div></a></div></div></div></div><div class="j i d"><div class="ab"><span><a class="bf b bg z ep on eq er es et eu ev ew ex ey ez fa au fb fc fd bm fe ff" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fccdbe9a99319&amp;operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fthe-technical-history-of-kubernetes-2fe1988b522a&amp;user=Brian+Grant&amp;userId=ccdbe9a99319&amp;source=post_page-ccdbe9a99319--post_author_info--2fe1988b522a---------------------follow_profile-----------" rel="noopener follow">Follow</a></span><div class="dt l"><div><div><div class="bm" aria-hidden="false"><div class="l"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Ff12ebbd40acf&amp;operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fthe-technical-history-of-kubernetes-2fe1988b522a&amp;newsletterV3=ccdbe9a99319&amp;newsletterV3Id=f12ebbd40acf&amp;user=Brian+Grant&amp;userId=ccdbe9a99319&amp;source=---post_author_info--2fe1988b522a---------------------subscribe_user-----------" rel="noopener follow"><button class="bf b bg z pz am qa qb qc qd qe qf qg qh ew ex ey ez fa fb fc fd bm fe ff" aria-label="Subscribe"><svg xmlns="http://www.w3.org/2000/svg" width="38" height="38" fill="none" viewBox="0 0 38 38" class="py px pw"><rect width="0.5" height="6.5" x="26.25" y="9.25" rx="0.25"></rect><rect width="0.5" height="6.5" x="29.75" y="12.25" rx="0.25" transform="rotate(90 29.75 12.25)"></rect><path d="M19.5 12.5h-7a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-5"></path><path d="M11.5 14.5 19 20l4-3"></path></svg></button></a></span></div></div></div></div></div></div></div></div><div class="ab cn cp"><div class="l"><div class="ab q"><a class="af ag ah ai aj ak al am an ao ap aq ar as at ab q" href="https://medium.com/@bgrant0607?source=post_page---post_author_info--2fe1988b522a--------------------------------" rel="noopener follow"><h2 class="pw-author-name bf qi qj qk ql bk"><span class="gn jo">Written by <!-- -->Brian Grant</span></h2></a></div><div class="ol ab"><div class="l ix"><span class="pw-follower-count bf b bg z bk"><a class="af ag ah ai aj ak al am an ao ap aq ar iq" href="https://medium.com/@bgrant0607/followers?source=post_page---post_author_info--2fe1988b522a--------------------------------" rel="noopener follow">1.1K Followers</a></span></div><div class="bf b bg z jf jg jh ab jj jk jl jm du jd"><span class="ir l" aria-hidden="true"><span class="bf b bg z du">·</span></span><span class="l ix">Writer for </span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar iq ab q" href="https://itnext.io/?source=post_page---post_author_info--2fe1988b522a--------------------------------" rel="noopener follow"><p class="bf b bg z jf jg jh ji jj jk jl jm bk">ITNEXT</p></a></div></div></div></div><div class="qm l"><p class="bf b bg z bk"><span class="gn">Original lead architect of Kubernetes and its declarative model. Former Uber Tech Lead of Google Cloud&#x27;s API standards, SDK, CLI, and Infrastructure as Code.</span></p></div></div><div class="h k"><div class="ab"><span><a class="bf b bg z ep on eq er es et eu ev ew ex ey ez fa au fb fc fd bm fe ff" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fccdbe9a99319&amp;operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fthe-technical-history-of-kubernetes-2fe1988b522a&amp;user=Brian+Grant&amp;userId=ccdbe9a99319&amp;source=post_page-ccdbe9a99319--post_author_info--2fe1988b522a---------------------follow_profile-----------" rel="noopener follow">Follow</a></span><div class="dt l"><div><div><div class="bm" aria-hidden="false"><div class="l"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Ff12ebbd40acf&amp;operation=register&amp;redirect=https%3A%2F%2Fitnext.io%2Fthe-technical-history-of-kubernetes-2fe1988b522a&amp;newsletterV3=ccdbe9a99319&amp;newsletterV3Id=f12ebbd40acf&amp;user=Brian+Grant&amp;userId=ccdbe9a99319&amp;source=---post_author_info--2fe1988b522a---------------------subscribe_user-----------" rel="noopener follow"><button class="bf b bg z pz am qa qb qc qd qe qf qg qh ew ex ey ez fa fb fc fd bm fe ff" aria-label="Subscribe"><svg xmlns="http://www.w3.org/2000/svg" width="38" height="38" fill="none" viewBox="0 0 38 38" class="py px pw"><rect width="0.5" height="6.5" x="26.25" y="9.25" rx="0.25"></rect><rect width="0.5" height="6.5" x="29.75" y="12.25" rx="0.25" transform="rotate(90 29.75 12.25)"></rect><path d="M19.5 12.5h-7a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-5"></path><path d="M11.5 14.5 19 20l4-3"></path></svg></button></a></span></div></div></div></div></div></div></div></div><div class="qn bh qo qp qq qr qs qt"></div></div></div><div class="h k j"><div class="qn bh qo qu"></div><div class="ab cb"><div class="ci bh fz ga gb gc"><div class="qv ab kv ja"><div class="qw qx l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://help.medium.com/hc/en-us?source=post_page-----2fe1988b522a--------------------------------" rel="noopener follow"><p class="bf b dv z du">Help</p></a></div><div class="qw qx l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.statuspage.io/?source=post_page-----2fe1988b522a--------------------------------" rel="noopener follow"><p class="bf b dv z du">Status</p></a></div><div class="qw qx l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/about?autoplay=1&amp;source=post_page-----2fe1988b522a--------------------------------" rel="noopener follow"><p class="bf b dv z du">About</p></a></div><div class="qw qx l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=post_page-----2fe1988b522a--------------------------------" rel="noopener follow"><p class="bf b dv z du">Careers</p></a></div><div class="qw qx l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="pressinquiries@medium.com?source=post_page-----2fe1988b522a--------------------------------" rel="noopener follow"><p class="bf b dv z du">Press</p></a></div><div class="qw qx l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://blog.medium.com/?source=post_page-----2fe1988b522a--------------------------------" rel="noopener follow"><p class="bf b dv z du">Blog</p></a></div><div class="qw qx l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----2fe1988b522a--------------------------------" rel="noopener follow"><p class="bf b dv z du">Privacy</p></a></div><div class="qw qx l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----2fe1988b522a--------------------------------" rel="noopener follow"><p class="bf b dv z du">Terms</p></a></div><div class="qw qx l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://speechify.com/medium?source=post_page-----2fe1988b522a--------------------------------" rel="noopener follow"><p class="bf b dv z du">Text to speech</p></a></div><div class="qw l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/business?source=post_page-----2fe1988b522a--------------------------------" rel="noopener follow"><p class="bf b dv z du">Teams</p></a></div></div></div></div></div></div></div></div></div></div><script>window.__BUILD_ID__="main-20241108-225703-80d976ded0"</script><script>window.__GRAPHQL_URI__ = "https://itnext.io/_/graphql"</script><script>window.__PRELOADED_STATE__ = {"algolia":{"queries":{}},"cache":{"experimentGroupSet":true,"reason":"This request is not using the cache middleware worker","group":"disabled","tags":["group-edgeCachePosts","post-2fe1988b522a","user-ccdbe9a99319","collection-5b301f10ddcd"],"serverVariantState":"","middlewareEnabled":false,"cacheStatus":"DYNAMIC","shouldUseCache":false,"vary":[],"lohpSummerUpsellEnabled":false,"publicationHierarchyEnabled":false},"client":{"hydrated":false,"isUs":true,"isNativeMedium":false,"isSafariMobile":false,"isSafari":false,"isFirefox":false,"routingEntity":{"type":"COLLECTION","id":"5b301f10ddcd","explicit":true},"viewerIsBot":false},"debug":{"requestId":"df403352-4159-47ec-a396-3b89f267dbe2","hybridDevServices":[],"originalSpanCarrier":{"traceparent":"00-bb61fdbefe070668a7cefa4d425c0a26-9473ba838d5a9ac7-01"}},"multiVote":{"clapsPerPost":{}},"navigation":{"branch":{"show":null,"hasRendered":null,"blockedByCTA":false},"hideGoogleOneTap":false,"hasRenderedAlternateUserBanner":null,"currentLocation":"https:\u002F\u002Fitnext.io\u002Fthe-technical-history-of-kubernetes-2fe1988b522a","host":"itnext.io","hostname":"itnext.io","referrer":"https:\u002F\u002Fwww.google.com","hasSetReferrer":false,"susiModal":{"step":null,"operation":"register"},"postRead":false,"partnerProgram":{"selectedCountryCode":null}},"config":{"nodeEnv":"production","version":"main-20241108-225703-80d976ded0","target":"production","productName":"Medium","publicUrl":"https:\u002F\u002Fcdn-client.medium.com\u002Flite","authDomain":"medium.com","authGoogleClientId":"216296035834-k1k6qe060s2tp2a2jam4ljdcms00sttg.apps.googleusercontent.com","favicon":"production","glyphUrl":"https:\u002F\u002Fglyph.medium.com","branchKey":"key_live_ofxXr2qTrrU9NqURK8ZwEhknBxiI6KBm","algolia":{"appId":"MQ57UUUQZ2","apiKeySearch":"394474ced050e3911ae2249ecc774921","indexPrefix":"medium_","host":"-dsn.algolia.net"},"recaptchaKey":"6Lfc37IUAAAAAKGGtC6rLS13R1Hrw_BqADfS1LRk","recaptcha3Key":"6Lf8R9wUAAAAABMI_85Wb8melS7Zj6ziuf99Yot5","recaptchaEnterpriseKeyId":"6Le-uGgpAAAAAPprRaokM8AKthQ9KNGdoxaGUvVp","datadog":{"applicationId":"6702d87d-a7e0-42fe-bbcb-95b469547ea0","clientToken":"pub853ea8d17ad6821d9f8f11861d23dfed","rumToken":"pubf9cc52896502b9413b68ba36fc0c7162","context":{"deployment":{"target":"production","tag":"main-20241108-225703-80d976ded0","commit":"80d976ded06ba0077f632e1b9fbbc057d3fd364b"}},"datacenter":"us"},"googleAnalyticsCode":"G-7JY7T788PK","googlePay":{"apiVersion":"2","apiVersionMinor":"0","merchantId":"BCR2DN6TV7EMTGBM","merchantName":"Medium","instanceMerchantId":"13685562959212738550"},"applePay":{"version":3},"signInWallCustomDomainCollectionIds":["3a8144eabfe3","336d898217ee","61061eb0c96b","138adf9c44c","819cc2aaeee0"],"mediumMastodonDomainName":"me.dm","mediumOwnedAndOperatedCollectionIds":["8a9336e5bb4","b7e45b22fec3","193b68bd4fba","8d6b8a439e32","54c98c43354d","3f6ecf56618","d944778ce714","92d2092dc598","ae2a65f35510","1285ba81cada","544c7006046e","fc8964313712","40187e704f1c","88d9857e584e","7b6769f2748b","bcc38c8f6edf","cef6983b292","cb8577c9149e","444d13b52878","713d7dbc99b0","ef8e90590e66","191186aaafa0","55760f21cdc5","9dc80918cc93","bdc4052bbdba","8ccfed20cbb2"],"tierOneDomains":["medium.com","thebolditalic.com","arcdigital.media","towardsdatascience.com","uxdesign.cc","codeburst.io","psiloveyou.xyz","writingcooperative.com","entrepreneurshandbook.co","prototypr.io","betterhumans.coach.me","theascent.pub"],"topicsToFollow":["d61cf867d93f","8a146bc21b28","1eca0103fff3","4d562ee63426","aef1078a3ef5","e15e46793f8d","6158eb913466","55f1c20aba7a","3d18b94f6858","4861fee224fd","63c6f1f93ee","1d98b3a9a871","decb52b64abf","ae5d4995e225","830cded25262"],"topicToTagMappings":{"accessibility":"accessibility","addiction":"addiction","android-development":"android-development","art":"art","artificial-intelligence":"artificial-intelligence","astrology":"astrology","basic-income":"basic-income","beauty":"beauty","biotech":"biotech","blockchain":"blockchain","books":"books","business":"business","cannabis":"cannabis","cities":"cities","climate-change":"climate-change","comics":"comics","coronavirus":"coronavirus","creativity":"creativity","cryptocurrency":"cryptocurrency","culture":"culture","cybersecurity":"cybersecurity","data-science":"data-science","design":"design","digital-life":"digital-life","disability":"disability","economy":"economy","education":"education","equality":"equality","family":"family","feminism":"feminism","fiction":"fiction","film":"film","fitness":"fitness","food":"food","freelancing":"freelancing","future":"future","gadgets":"gadgets","gaming":"gaming","gun-control":"gun-control","health":"health","history":"history","humor":"humor","immigration":"immigration","ios-development":"ios-development","javascript":"javascript","justice":"justice","language":"language","leadership":"leadership","lgbtqia":"lgbtqia","lifestyle":"lifestyle","machine-learning":"machine-learning","makers":"makers","marketing":"marketing","math":"math","media":"media","mental-health":"mental-health","mindfulness":"mindfulness","money":"money","music":"music","neuroscience":"neuroscience","nonfiction":"nonfiction","outdoors":"outdoors","parenting":"parenting","pets":"pets","philosophy":"philosophy","photography":"photography","podcasts":"podcast","poetry":"poetry","politics":"politics","privacy":"privacy","product-management":"product-management","productivity":"productivity","programming":"programming","psychedelics":"psychedelics","psychology":"psychology","race":"race","relationships":"relationships","religion":"religion","remote-work":"remote-work","san-francisco":"san-francisco","science":"science","self":"self","self-driving-cars":"self-driving-cars","sexuality":"sexuality","social-media":"social-media","society":"society","software-engineering":"software-engineering","space":"space","spirituality":"spirituality","sports":"sports","startups":"startup","style":"style","technology":"technology","transportation":"transportation","travel":"travel","true-crime":"true-crime","tv":"tv","ux":"ux","venture-capital":"venture-capital","visual-design":"visual-design","work":"work","world":"world","writing":"writing"},"defaultImages":{"avatar":{"imageId":"1*dmbNkD5D-u45r44go_cf0g.png","height":150,"width":150},"orgLogo":{"imageId":"7*V1_7XP4snlmqrc_0Njontw.png","height":110,"width":500},"postLogo":{"imageId":"bd978bb536350a710e8efb012513429cabdc4c28700604261aeda246d0f980b7","height":810,"width":1440},"postPreviewImage":{"imageId":"1*hn4v1tCaJy7cWMyb0bpNpQ.png","height":386,"width":579}},"collectionStructuredData":{"8d6b8a439e32":{"name":"Elemental","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F980\u002F1*9ygdqoKprhwuTVKUM0DLPA@2x.png","width":980,"height":159}}},"3f6ecf56618":{"name":"Forge","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F596\u002F1*uULpIlImcO5TDuBZ6lm7Lg@2x.png","width":596,"height":183}}},"ae2a65f35510":{"name":"GEN","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F264\u002F1*RdVZMdvfV3YiZTw6mX7yWA.png","width":264,"height":140}}},"88d9857e584e":{"name":"LEVEL","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*JqYMhNX6KNNb2UlqGqO2WQ.png","width":540,"height":108}}},"7b6769f2748b":{"name":"Marker","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F383\u002F1*haCUs0wF6TgOOvfoY-jEoQ@2x.png","width":383,"height":92}}},"444d13b52878":{"name":"OneZero","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*cw32fIqCbRWzwJaoQw6BUg.png","width":540,"height":123}}},"8ccfed20cbb2":{"name":"Zora","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*tZUQqRcCCZDXjjiZ4bDvgQ.png","width":540,"height":106}}}},"embeddedPostIds":{"coronavirus":"cd3010f9d81f"},"sharedCdcMessaging":{"COVID_APPLICABLE_TAG_SLUGS":[],"COVID_APPLICABLE_TOPIC_NAMES":[],"COVID_APPLICABLE_TOPIC_NAMES_FOR_TOPIC_PAGE":[],"COVID_MESSAGES":{"tierA":{"text":"For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":66,"end":73,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"tierB":{"text":"Anyone can publish on Medium per our Policies, but we don’t fact-check every story. For more info about the coronavirus, see cdc.gov.","markups":[{"start":37,"end":45,"href":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Fcategories\u002F201931128-Policies-Safety"},{"start":125,"end":132,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"paywall":{"text":"This article has been made free for everyone, thanks to Medium Members. For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":56,"end":70,"href":"https:\u002F\u002Fmedium.com\u002Fmembership"},{"start":138,"end":145,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"unbound":{"text":"This article is free for everyone, thanks to Medium Members. For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":45,"end":59,"href":"https:\u002F\u002Fmedium.com\u002Fmembership"},{"start":127,"end":134,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]}},"COVID_BANNER_POST_ID_OVERRIDE_WHITELIST":["3b31a67bff4a"]},"sharedVoteMessaging":{"TAGS":["politics","election-2020","government","us-politics","election","2020-presidential-race","trump","donald-trump","democrats","republicans","congress","republican-party","democratic-party","biden","joe-biden","maga"],"TOPICS":["politics","election"],"MESSAGE":{"text":"Find out more about the U.S. election results here.","markups":[{"start":46,"end":50,"href":"https:\u002F\u002Fcookpolitical.com\u002F2020-national-popular-vote-tracker"}]},"EXCLUDE_POSTS":["397ef29e3ca5"]},"embedPostRules":[],"recircOptions":{"v1":{"limit":3},"v2":{"limit":8}},"braintreeClientKey":"production_zjkj96jm_m56f8fqpf7ngnrd4","braintree":{"enabled":true,"merchantId":"m56f8fqpf7ngnrd4","merchantAccountId":{"usd":"AMediumCorporation_instant","eur":"amediumcorporation_EUR","cad":"amediumcorporation_CAD"},"publicKey":"ds2nn34bg2z7j5gd","braintreeEnvironment":"production","dashboardUrl":"https:\u002F\u002Fwww.braintreegateway.com\u002Fmerchants","gracePeriodDurationInDays":14,"mediumMembershipPlanId":{"monthly":"ce105f8c57a3","monthlyV2":"e8a5e126-792b-4ee6-8fba-d574c1b02fc5","monthlyWithTrial":"d5ee3dbe3db8","monthlyPremium":"fa741a9b47a2","yearly":"a40ad4a43185","yearlyV2":"3815d7d6-b8ca-4224-9b8c-182f9047866e","yearlyStaff":"d74fb811198a","yearlyWithTrial":"b3bc7350e5c7","yearlyPremium":"e21bd2c12166","monthlyOneYearFree":"e6c0637a-2bad-4171-ab4f-3c268633d83c","monthly25PercentOffFirstYear":"235ecc62-0cdb-49ae-9378-726cd21c504b","monthly20PercentOffFirstYear":"ba518864-9c13-4a99-91ca-411bf0cac756","monthly15PercentOffFirstYear":"594c029b-9f89-43d5-88f8-8173af4e070e","monthly10PercentOffFirstYear":"c6c7bc9a-40f2-4b51-8126-e28511d5bdb0","monthlyForStudents":"629ebe51-da7d-41fd-8293-34cd2f2030a8","yearlyOneYearFree":"78ba7be9-0d9f-4ece-aa3e-b54b826f2bf1","yearly25PercentOffFirstYear":"2dbb010d-bb8f-4eeb-ad5c-a08509f42d34","yearly20PercentOffFirstYear":"47565488-435b-47f8-bf93-40d5fbe0ebc8","yearly15PercentOffFirstYear":"8259809b-0881-47d9-acf7-6c001c7f720f","yearly10PercentOffFirstYear":"9dd694fb-96e1-472c-8d9e-3c868d5c1506","yearlyForStudents":"e29345ef-ab1c-4234-95c5-70e50fe6bc23","monthlyCad":"p52orjkaceei","yearlyCad":"h4q9g2up9ktt"},"braintreeDiscountId":{"oneMonthFree":"MONTHS_FREE_01","threeMonthsFree":"MONTHS_FREE_03","sixMonthsFree":"MONTHS_FREE_06","fiftyPercentOffOneYear":"FIFTY_PERCENT_OFF_ONE_YEAR"},"3DSecureVersion":"2","defaultCurrency":"usd","providerPlanIdCurrency":{"4ycw":"usd","rz3b":"usd","3kqm":"usd","jzw6":"usd","c2q2":"usd","nnsw":"usd","q8qw":"usd","d9y6":"usd","fx7w":"cad","nwf2":"cad"}},"paypalClientId":"AXj1G4fotC2GE8KzWX9mSxCH1wmPE3nJglf4Z2ig_amnhvlMVX87otaq58niAg9iuLktVNF_1WCMnN7v","paypal":{"host":"https:\u002F\u002Fapi.paypal.com:443","clientMode":"production","serverMode":"live","webhookId":"4G466076A0294510S","monthlyPlan":{"planId":"P-9WR0658853113943TMU5FDQA","name":"Medium Membership (Monthly) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"yearlyPlan":{"planId":"P-7N8963881P8875835MU5JOPQ","name":"Medium Membership (Annual) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"oneYearGift":{"name":"Medium Membership (1 Year, Digital Gift Code)","description":"Unlimited access to the best and brightest stories on Medium. Gift codes can be redeemed at medium.com\u002Fredeem.","price":"50.00","currency":"USD","sku":"membership-gift-1-yr"},"oldMonthlyPlan":{"planId":"P-96U02458LM656772MJZUVH2Y","name":"Medium Membership (Monthly)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"oldYearlyPlan":{"planId":"P-59P80963JF186412JJZU3SMI","name":"Medium Membership (Annual)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"monthlyPlanWithTrial":{"planId":"P-66C21969LR178604GJPVKUKY","name":"Medium Membership (Monthly) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"yearlyPlanWithTrial":{"planId":"P-6XW32684EX226940VKCT2MFA","name":"Medium Membership (Annual) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"oldMonthlyPlanNoSetupFee":{"planId":"P-4N046520HR188054PCJC7LJI","name":"Medium Membership (Monthly)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"oldYearlyPlanNoSetupFee":{"planId":"P-7A4913502Y5181304CJEJMXQ","name":"Medium Membership (Annual)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"sdkUrl":"https:\u002F\u002Fwww.paypal.com\u002Fsdk\u002Fjs"},"stripePublishableKey":"pk_live_7FReX44VnNIInZwrIIx6ghjl","log":{"json":true,"level":"info"},"imageUploadMaxSizeMb":25,"staffPicks":{"title":"Staff Picks","catalogId":"c7bc6e1ee00f"}},"session":{"xsrf":""}}</script><script>window.__APOLLO_STATE__ = {"ROOT_QUERY":{"__typename":"Query","variantFlags":[{"__typename":"VariantFlag","name":"enable_conversion_model_v2","valueType":{"__typename":"VariantFlagString","value":"group_2"}},{"__typename":"VariantFlag","name":"browsable_stream_config_bucket","valueType":{"__typename":"VariantFlagString","value":"curated-topics"}},{"__typename":"VariantFlag","name":"enable_abandoned_cart_promotion_email","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_footer_app_buttons","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_new_manage_membership_flow","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"reengagement_notification_duration","valueType":{"__typename":"VariantFlagNumber"}},{"__typename":"VariantFlag","name":"enable_braintree_trial_membership","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_import","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_intrinsic_automatic_actions","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_enable_friend_links_creation","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_enable_lock_responses","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_boost_nia_v01","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_author_cards_byline","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_enable_friend_links_creation","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_android_offline_reading","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_rex_reading_history","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_ios_offline_reading","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_enable_friend_links_postpage_banners","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_legacy_feed_in_iceland","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_moc_load_processor_c","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"allow_test_auth","valueType":{"__typename":"VariantFlagString","value":"disallow"}},{"__typename":"VariantFlag","name":"enable_billing_frequency_on_step2","valueType":{"__typename":"VariantFlagString","value":"control"}},{"__typename":"VariantFlag","name":"enable_conversion_ranker_v2","valueType":{"__typename":"VariantFlagString","value":"control"}},{"__typename":"VariantFlag","name":"enable_app_flirty_thirty","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_archive_page","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"redefined_top_posts","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_android_dynamic_aspirational_paywall","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_medium2_kbfd","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_members_only_audio","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"rex_generator_max_candidates","valueType":{"__typename":"VariantFlagNumber"}},{"__typename":"VariantFlag","name":"reader_fair_distribution_non_qp","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_deprecate_legacy_providers_v3","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_ml_rank_rex_anno","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_rito_upstream_deadlines","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_see_pronouns","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_indexeddb","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"allow_access","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"available_monthly_premium_plan","valueType":{"__typename":"VariantFlagString","value":"12a660186432"}},{"__typename":"VariantFlag","name":"enable_google_webhook","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_update_explore_wtf","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_rex_new_push_notification_endpoint","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_iceland_nux","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_android_miro_v2","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_ios_dynamic_paywall_aspiriational","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_new_stripe_customers","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_enable_home_post_menu","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_social_share_sheet","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_seamless_social_sharing","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_display_paywall_after_onboarding","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"can_receive_tips_v0","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_automod","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_braintree_google_pay","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_eventstats_event_processing","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_moc_load_processor_first_story","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"available_monthly_plan","valueType":{"__typename":"VariantFlagString","value":"60e220181034"}},{"__typename":"VariantFlag","name":"enable_entities_to_follow_v2","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_remove_twitter_onboarding_step","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"coronavirus_topic_recirc","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_tipping_v0_ios","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"limit_post_referrers","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_enable_friend_links_postpage_banners","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_premium_tier","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"onboarding_tags_from_top_views","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_auto_follow_on_subscribe","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_continue_this_thread","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"limit_user_follows","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_group_gifting","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_speechify_widget","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_updated_pub_recs_ui","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_recaptcha_enterprise","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_tag_recs","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_enable_image_sharer","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_rating_prompt_stories_read_threshold","valueType":{"__typename":"VariantFlagNumber"}},{"__typename":"VariantFlag","name":"available_annual_premium_plan","valueType":{"__typename":"VariantFlagString","value":"4a442ace1476"}},{"__typename":"VariantFlag","name":"enable_ios_dynamic_paywall_programming","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_pre_pp_v4","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_tribute_landing_page","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_diversification_rex","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_google_one_tap","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_susi_redesign_ios","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_explicit_signals","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_rex_aggregator_v2","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_sharer_create_post_share_key","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_newsletter_lo_flow_custom_domains","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_pp_country_expansion","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"skip_fs_cache_user_vals","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_enable_topic_portals","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_enable_verified_book_author","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_pill_based_home_feed","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_simplified_digest_v2_b","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_author_cards","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_braintree_paypal","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_enable_editor_new_publishing_flow","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_branch_io","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_mastodon_for_members","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_verifications_service","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"available_annual_plan","valueType":{"__typename":"VariantFlagString","value":"2c754bcc2995"}},{"__typename":"VariantFlag","name":"enable_recommended_publishers_query","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"disable_partner_program_enrollment","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_apple_webhook","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_aurora_pub_follower_page","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_explicit_signals_updated_post_previews","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_mastodon_avatar_upload","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_braintree_integration","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_iceland_forced_android","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_response_markup","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_ranker_v10","valueType":{"__typename":"VariantFlagString","value":"control"}},{"__typename":"VariantFlag","name":"enable_ios_autorefresh","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lo_homepage","valueType":{"__typename":"VariantFlagString","value":"control"}},{"__typename":"VariantFlag","name":"enable_sharer_validate_post_share_key","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_two_hour_refresh","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_ios_easy_resubscribe","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"allow_signup","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_enable_syntax_highlight","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_premium_tier_badge","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"price_smoke_test_monthly","valueType":{"__typename":"VariantFlagString","value":""}},{"__typename":"VariantFlag","name":"enable_android_dynamic_programming_paywall","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_tick_landing_page","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_maim_the_meter","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_mastodon_for_members_username_selection","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"signup_services","valueType":{"__typename":"VariantFlagString","value":"twitter,facebook,google,email,google-fastidv,google-one-tap,apple"}},{"__typename":"VariantFlag","name":"price_smoke_test_yearly","valueType":{"__typename":"VariantFlagString","value":""}},{"__typename":"VariantFlag","name":"enable_pp_v4","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_update_topic_portals_wtf","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_susi_redesign_android","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_in_app_free_trial","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_switch_plan_premium_tier","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"textshots_userid","valueType":{"__typename":"VariantFlagString","value":""}},{"__typename":"VariantFlag","name":"enable_moc_load_processor_all_recs_surfaces","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_bayesian_average_pub_search","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_cache_less_following_feed","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_configure_pronouns","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_marketing_emails","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_sprig","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"mobile_custom_app_icon","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_homepage","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"android_enable_lists_v2","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_recirc_model","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"goliath_externalsearch_enable_comment_deindexation","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"can_send_tips_v0","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_bg_post_post","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_braintree_apple_pay","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_android_verified_author","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_starspace","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_tipping_v0_android","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"signin_services","valueType":{"__typename":"VariantFlagString","value":"twitter,facebook,google,email,google-fastidv,google-one-tap,apple"}},{"__typename":"VariantFlag","name":"enable_braintree_client","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_braintree_webhook","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_speechify_ios","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"glyph_font_set","valueType":{"__typename":"VariantFlagString","value":"m2-unbound-source-serif-pro"}},{"__typename":"VariantFlag","name":"enable_lite_server_upstream_deadlines","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_creator_welcome_email","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_apple_sign_in","valueType":{"__typename":"VariantFlagBoolean","value":true}}],"viewer":null,"collectionByDomainOrSlug({\"domainOrSlug\":\"itnext.io\"})":{"__ref":"Collection:5b301f10ddcd"},"postResult({\"id\":\"2fe1988b522a\"})":{"__ref":"Post:2fe1988b522a"}},"ImageMetadata:1*SiXeRxgOt0pAYlYhwZIu3g.png":{"__typename":"ImageMetadata","id":"1*SiXeRxgOt0pAYlYhwZIu3g.png"},"Collection:5b301f10ddcd":{"__typename":"Collection","id":"5b301f10ddcd","favicon":{"__ref":"ImageMetadata:1*SiXeRxgOt0pAYlYhwZIu3g.png"},"customStyleSheet":null,"colorPalette":{"__typename":"ColorPalette","highlightSpectrum":{"__typename":"ColorSpectrum","backgroundColor":"#FFFFFFFF","colorPoints":[{"__typename":"ColorPoint","color":"#FFE6F5FF","point":0},{"__typename":"ColorPoint","color":"#FFE2F4FF","point":0.1},{"__typename":"ColorPoint","color":"#FFDDF2FF","point":0.2},{"__typename":"ColorPoint","color":"#FFD8F1FF","point":0.3},{"__typename":"ColorPoint","color":"#FFD3F0FF","point":0.4},{"__typename":"ColorPoint","color":"#FFCDEFFF","point":0.5},{"__typename":"ColorPoint","color":"#FFC8EDFF","point":0.6},{"__typename":"ColorPoint","color":"#FFC3ECFF","point":0.7},{"__typename":"ColorPoint","color":"#FFBDEBFF","point":0.8},{"__typename":"ColorPoint","color":"#FFB7E9FF","point":0.9},{"__typename":"ColorPoint","color":"#FFB1E8FF","point":1}]},"defaultBackgroundSpectrum":{"__typename":"ColorSpectrum","backgroundColor":"#FFFFFFFF","colorPoints":[{"__typename":"ColorPoint","color":"#FF3F8DCE","point":0},{"__typename":"ColorPoint","color":"#FF3F83BD","point":0.1},{"__typename":"ColorPoint","color":"#FF3D79AD","point":0.2},{"__typename":"ColorPoint","color":"#FF3B6E9C","point":0.3},{"__typename":"ColorPoint","color":"#FF38648B","point":0.4},{"__typename":"ColorPoint","color":"#FF34597A","point":0.5},{"__typename":"ColorPoint","color":"#FF2F4E6A","point":0.6},{"__typename":"ColorPoint","color":"#FF2A4259","point":0.7},{"__typename":"ColorPoint","color":"#FF233648","point":0.8},{"__typename":"ColorPoint","color":"#FF1B2937","point":0.9},{"__typename":"ColorPoint","color":"#FF121B25","point":1}]},"tintBackgroundSpectrum":{"__typename":"ColorSpectrum","backgroundColor":"#FF1A71B1","colorPoints":[{"__typename":"ColorPoint","color":"#FF1A71B1","point":0},{"__typename":"ColorPoint","color":"#FF3E82BC","point":0.1},{"__typename":"ColorPoint","color":"#FF5892C7","point":0.2},{"__typename":"ColorPoint","color":"#FF6EA1D1","point":0.3},{"__typename":"ColorPoint","color":"#FF84B0DB","point":0.4},{"__typename":"ColorPoint","color":"#FF98BEE4","point":0.5},{"__typename":"ColorPoint","color":"#FFACCCED","point":0.6},{"__typename":"ColorPoint","color":"#FFBFDAF6","point":0.7},{"__typename":"ColorPoint","color":"#FFD1E7FE","point":0.8},{"__typename":"ColorPoint","color":"#FFE4F4FF","point":0.9},{"__typename":"ColorPoint","color":"#FFF6FFFF","point":1}]}},"domain":"itnext.io","slug":"itnext","googleAnalyticsId":"UA-29035124-5","editors":[{"__typename":"CollectionMastheadUserItem","user":{"__ref":"User:bd28806f72a6"}},{"__typename":"CollectionMastheadUserItem","user":{"__ref":"User:a00cb31d6074"}},{"__typename":"CollectionMastheadUserItem","user":{"__ref":"User:5db23d2304f9"}},{"__typename":"CollectionMastheadUserItem","user":{"__ref":"User:cb3f1b710e82"}},{"__typename":"CollectionMastheadUserItem","user":{"__ref":"User:1d4bc2ae40a3"}}],"name":"ITNEXT","avatar":{"__ref":"ImageMetadata:1*yAqDFIFA5F_NXalOJKz4TA.png"},"description":"ITNEXT is a platform for IT developers & software engineers to share knowledge, connect, collaborate, learn and experience next-gen technologies.","subscriberCount":64334,"latestPostsConnection({\"paging\":{\"limit\":1}})":{"__typename":"PostConnection","posts":[{"__ref":"Post:47a528dfa28a"}]},"viewerEdge":{"__ref":"CollectionViewerEdge:collectionId:5b301f10ddcd-viewerId:lo_e155128c7aa7"},"twitterUsername":"itnext_io","facebookPageId":null,"logo":{"__ref":"ImageMetadata:1*jWhTrIoYwTUdKuVXycqAaw.png"}},"User:bd28806f72a6":{"__typename":"User","id":"bd28806f72a6"},"User:a00cb31d6074":{"__typename":"User","id":"a00cb31d6074"},"User:5db23d2304f9":{"__typename":"User","id":"5db23d2304f9"},"User:cb3f1b710e82":{"__typename":"User","id":"cb3f1b710e82"},"User:1d4bc2ae40a3":{"__typename":"User","id":"1d4bc2ae40a3"},"ImageMetadata:1*yAqDFIFA5F_NXalOJKz4TA.png":{"__typename":"ImageMetadata","id":"1*yAqDFIFA5F_NXalOJKz4TA.png"},"User:bf0d301d6f0":{"__typename":"User","id":"bf0d301d6f0","customDomainState":{"__typename":"CustomDomainState","live":{"__typename":"CustomDomain","domain":"ricardomlpereira.medium.com"}},"hasSubdomain":true,"username":"ricardomlpereira"},"Post:47a528dfa28a":{"__typename":"Post","id":"47a528dfa28a","firstPublishedAt":1731402735272,"creator":{"__ref":"User:bf0d301d6f0"},"collection":{"__ref":"Collection:5b301f10ddcd"},"isSeries":false,"mediumUrl":"https:\u002F\u002Fitnext.io\u002Fnormalizing-a-database-in-third-normal-form-in-outsystems-47a528dfa28a","sequence":null,"uniqueSlug":"normalizing-a-database-in-third-normal-form-in-outsystems-47a528dfa28a"},"LinkedAccounts:ccdbe9a99319":{"__typename":"LinkedAccounts","mastodon":null,"id":"ccdbe9a99319"},"UserViewerEdge:userId:ccdbe9a99319-viewerId:lo_e155128c7aa7":{"__typename":"UserViewerEdge","id":"userId:ccdbe9a99319-viewerId:lo_e155128c7aa7","isFollowing":false,"isUser":false,"isMuting":false},"NewsletterV3:f12ebbd40acf":{"__typename":"NewsletterV3","id":"f12ebbd40acf","type":"NEWSLETTER_TYPE_AUTHOR","slug":"ccdbe9a99319","name":"ccdbe9a99319","collection":null,"user":{"__ref":"User:ccdbe9a99319"}},"User:ccdbe9a99319":{"__typename":"User","id":"ccdbe9a99319","name":"Brian Grant","username":"bgrant0607","newsletterV3":{"__ref":"NewsletterV3:f12ebbd40acf"},"linkedAccounts":{"__ref":"LinkedAccounts:ccdbe9a99319"},"isSuspended":false,"imageId":"1*IswKlFXcN7a_0bsXVi8l9A.jpeg","mediumMemberAt":0,"verifications":{"__typename":"VerifiedInfo","isBookAuthor":false},"socialStats":{"__typename":"SocialStats","followerCount":1124,"followingCount":2,"collectionFollowingCount":1},"customDomainState":null,"hasSubdomain":false,"bio":"Original lead architect of Kubernetes and its declarative model. Former Uber Tech Lead of Google Cloud's API standards, SDK, CLI, and Infrastructure as Code.","isPartnerProgramEnrolled":false,"viewerEdge":{"__ref":"UserViewerEdge:userId:ccdbe9a99319-viewerId:lo_e155128c7aa7"},"viewerIsUser":false,"postSubscribeMembershipUpsellShownAt":0,"membership":null,"allowNotes":true,"twitterScreenName":""},"Paragraph:e5433ac93edd_0":{"__typename":"Paragraph","id":"e5433ac93edd_0","name":"96f2","type":"H3","href":null,"layout":null,"metadata":null,"text":"The Technical History of Kubernetes","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_1":{"__typename":"Paragraph","id":"e5433ac93edd_1","name":"39c0","type":"P","href":null,"layout":null,"metadata":null,"text":"I wasn’t able to attend Kubecon in 2024, but the 10th anniversary of Kubernetes was commemorated at KubeconEU and again in June, where I talked about the Road to 1.0. You may also be interested in some of my other Kubernetes-related posts.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":120,"end":127,"href":"https:\u002F\u002Fwww.youtube.com\u002Fwatch?v=jYjEWlnY25M&t=8777s","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":150,"end":165,"href":"https:\u002F\u002Fitnext.io\u002Fkubernetes-the-road-to-1-0-525a9420fdf0","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":205,"end":238,"href":"https:\u002F\u002Fmedium.com\u002F@bgrant0607\u002Flist\u002Fkubernetes-8b0b8930195b","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_2":{"__typename":"Paragraph","id":"e5433ac93edd_2","name":"951f","type":"P","href":null,"layout":null,"metadata":null,"text":"We actually started work on Kubernetes back in 2013, and Kubernetes was based fairly directly on R&D that was done over the few years leading up to that. Of course, there were precursors farther back, including Linux Containers, Borg, Workqueue, and Babysitter, but I’m going to focus on efforts I was directly involved with. Five years ago I wrote a series of threads on Twitter for the 5th anniversary. I finally made the time to post a blog based on those threads (still with Twitter-sized paragraphs). I updated some of the links and added some punctuation, but otherwise didn’t edit it much. Hopefully this makes it easier to find than dozens of separate Twitter posts.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_3":{"__typename":"Paragraph","id":"e5433ac93edd_3","name":"7e45","type":"P","href":null,"layout":null,"metadata":null,"text":"Kubernetes Borg\u002FOmega history topic 1: Pods. In Borg, Job Tasks were scheduled into Alloc instances, but almost everyone pinned groups of tasks into each instance. Often these were sidecars, such as for logging or caching.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":37,"href":"https:\u002F\u002Ftwitter.com\u002Fbgrant0607\u002Fstatus\u002F1102292629465661440","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":37,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_4":{"__typename":"Paragraph","id":"e5433ac93edd_4","name":"e059","type":"P","href":null,"layout":null,"metadata":null,"text":"It was clear that using such groups as the explicit primitive would be simpler. We called these “Scheduling Units”. They were prototyped in Borg, but it was too hard to introduce new concepts. They became “SUnits” in Omega, and then Pods, as in a pod of peas or of whales, in K8s.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_5":{"__typename":"Paragraph","id":"e5433ac93edd_5","name":"42b7","type":"P","href":null,"layout":null,"metadata":null,"text":"We debated whether to embrace the containers-as-lightweight-VMs trend early in Kubernetes and just support one container per pod (initially called Tasks in the code), but I’m glad we didn’t. One app per container unlocks the potential for more intelligent management.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_6":{"__typename":"Paragraph","id":"e5433ac93edd_6","name":"79d8","type":"P","href":null,"layout":null,"metadata":null,"text":"It enables Kubernetes and other systems to observe which apps are running (from their images), when and why they fail, how much CPU and RAM they are using, etc. And, importantly, enables images to be generated as part of the build process rather than during deployment.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_7":{"__typename":"Paragraph","id":"e5433ac93edd_7","name":"8213","type":"P","href":null,"layout":null,"metadata":null,"text":"And, something that’s often overlooked, a Pod shares a network identity, storage volumes, and other OS and machine resources. This makes it easier to migrate to from VMs.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_8":{"__typename":"Paragraph","id":"e5433ac93edd_8","name":"ec60","type":"P","href":null,"layout":null,"metadata":null,"text":"We started to work on what became the Kubernetes API in October 2013, before we had settled on Open Source or just a hosted\u002Fmanaged cloud project. Exploration intensified in early 2014, a few team members started to work on libcontainer, and the container-agent was released in May 2014.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_9":{"__typename":"Paragraph","id":"e5433ac93edd_9","name":"51bb","type":"P","href":null,"layout":null,"metadata":null,"text":"Kubernetes Borg\u002FOmega history topic 2: Labels. Borg had Machine key\u002Fvalue attributes that could be used in scheduling constraints. Borgmon had target labels to convey application topology, environment, and locale. But Jobs themselves didn’t originally have k\u002Fv labels.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":37,"href":"https:\u002F\u002Ftwitter.com\u002Fbgrant0607\u002Fstatus\u002F1104435451757125633","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":37,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_10":{"__typename":"Paragraph","id":"e5433ac93edd_10","name":"a395","type":"P","href":null,"layout":null,"metadata":null,"text":"So Borg users would embed attribute values in Job names, separated by dots and dashes, up to 180 characters long, and then parse them out in other systems and tools using complex regular expressions.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_11":{"__typename":"Paragraph","id":"e5433ac93edd_11","name":"2b47","type":"P","href":null,"layout":null,"metadata":null,"text":"It was clear that load balancers, monitoring systems, and release, rollout, and configuration tools needed common support for identifying attributes that could flow through the entire lifecycle of an application. However, single-value tags, as in gmail and GCE, were missing types.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_12":{"__typename":"Paragraph","id":"e5433ac93edd_12","name":"8b25","type":"P","href":null,"layout":null,"metadata":null,"text":"Thus, in mid 2013, we proposed key\u002Fvalue labels, for both Borg and Google Cloud, to facilitate higher-level application management. Of course, it was much easier to incorporate them into a greenfield project like Kubernetes, which had labels from the beginning.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_13":{"__typename":"Paragraph","id":"e5433ac93edd_13","name":"768a","type":"P","href":null,"layout":null,"metadata":null,"text":"Label selector semantics were designed originally for the monitoring system. Monitoring and load-balancing systems wanted to ensure that non-overlapping queries could be constructed. Without disjunction, a common key with different values ensures two selectors don’t overlap.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_14":{"__typename":"Paragraph","id":"e5433ac93edd_14","name":"7d7e","type":"P","href":null,"layout":null,"metadata":null,"text":"Selectors are also simple enough they could be reverse-indexed, which could be used by watch to find outstanding queries matching labels of a new\u002Fchanged resource instance. But we haven’t implemented this yet in K8s (https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fissues\u002F4817).","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":217,"end":269,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fissues\u002F4817","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_15":{"__typename":"Paragraph","id":"e5433ac93edd_15","name":"7b33","type":"P","href":null,"layout":null,"metadata":null,"text":"Another thing we haven’t implemented yet that SREs asked for in the original design is a way to default, require, prohibit, and validate label keys and values: https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fissues\u002F15390.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":160,"end":213,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fissues\u002F15390","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_16":{"__typename":"Paragraph","id":"e5433ac93edd_16","name":"7b3e","type":"P","href":null,"layout":null,"metadata":null,"text":"Kubernetes Borg\u002FOmega history topic 3: Annotations. Borg’s Job type had a single notes field. Like the DNS TXT record, that proved insufficient. For example, layers of client libraries and tools wanted to attach additional information.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":37,"href":"https:\u002F\u002Ftwitter.com\u002Fbgrant0607\u002Fstatus\u002F1106651847962443776","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":37,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_17":{"__typename":"Paragraph","id":"e5433ac93edd_17","name":"85d8","type":"P","href":null,"layout":null,"metadata":null,"text":"Some users found other creative places to carry information, such as scheduling preferences, in which arbitrary key\u002Fvalue strings could be stored. Arbitrary protobuf extensions were eventually supported.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_18":{"__typename":"Paragraph","id":"e5433ac93edd_18","name":"69b0","type":"P","href":null,"layout":null,"metadata":null,"text":"That’s a common theme in many parts of the Kubernetes API: consider when multiple values or key\u002Fvalue pairs may be needed rather than just singleton values. I proposed annotations in https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fissues\u002F1201.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":183,"end":235,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fissues\u002F1201","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_19":{"__typename":"Paragraph","id":"e5433ac93edd_19","name":"3d5b","type":"P","href":null,"layout":null,"metadata":null,"text":"Annotations provided a place to store the configured state for apply, as discussed in https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fissues\u002F1178 and https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fissues\u002F1702, and subsumed Openshift’s description field, in the v1beta3 API overhaul (http:\u002F\u002Fprs.k8s.io\u002F1225).","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":86,"end":138,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fissues\u002F1178","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":143,"end":195,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fissues\u002F1702","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":270,"end":292,"href":"http:\u002F\u002Fprs.k8s.io\u002F1225","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_20":{"__typename":"Paragraph","id":"e5433ac93edd_20","name":"af1c","type":"P","href":null,"layout":null,"metadata":null,"text":"Some believed that having 2 kinds of key\u002Fvalue string metadata, labels and annotations, would be confusing, so I put some effort into clarifying the distinction in documentation early on, such as in https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fpull\u002F1817. I think unifying them would have reduced usability.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":199,"end":249,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fpull\u002F1817","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_21":{"__typename":"Paragraph","id":"e5433ac93edd_21","name":"0858","type":"P","href":null,"layout":null,"metadata":null,"text":"Kubernetes Borg\u002FOmega history topic 4: Workload controllers. Before I get into the history, some conceptual background may be useful, since the underpinnings come up in many Cloud Native contexts. The key is to explicitly model state such that it can be externally manipulated.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":37,"href":"https:\u002F\u002Ftwitter.com\u002Fbgrant0607\u002Fstatus\u002F1109121268534505472","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":37,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_22":{"__typename":"Paragraph","id":"e5433ac93edd_22","name":"538e","type":"P","href":null,"layout":null,"metadata":null,"text":"Around the time Kubernetes was open sourced, there were a number of libraries and tools created to start containers on multiple machines. The original libswarm was one. The problem with such imperative, client-side approaches was that it was hard to add automation.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_23":{"__typename":"Paragraph","id":"e5433ac93edd_23","name":"9f65","type":"P","href":null,"layout":null,"metadata":null,"text":"One could inject a scheduler in between, by emulating a single machine’s remote API, but that would still lack an explicit model of what the user was trying to instantiate, the equivalent of the Pod template in Kubernetes.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_24":{"__typename":"Paragraph","id":"e5433ac93edd_24","name":"f182","type":"P","href":null,"layout":null,"metadata":null,"text":"That was added by some other tools, but the lack of also modeling the set of instances, with an explicit replica count, was an obstacle to higher-level automation, such as horizontal autoscaling and progressive rolling updates, both of which Kubernetes added in 1.1 and 1.2.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_25":{"__typename":"Paragraph","id":"e5433ac93edd_25","name":"9b86","type":"P","href":null,"layout":null,"metadata":null,"text":"Kubernetes originally just supported one workload controller, the ReplicationController, which was designed for elastic stateless workloads with fungible replicas. Shortly after we open-sourced Kubernetes we started to discuss how to add support for additional kinds of workloads.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_26":{"__typename":"Paragraph","id":"e5433ac93edd_26","name":"bbec","type":"P","href":null,"layout":null,"metadata":null,"text":"In https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fissues\u002F1518, we started to discuss what became DaemonSet. The key decision was whether to add more functionality to ReplicationController or to create new resource types. Users of other systems were concerned about the complexity of using multiple types.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":3,"end":55,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fissues\u002F1518","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_27":{"__typename":"Paragraph","id":"e5433ac93edd_27","name":"2a4f","type":"P","href":null,"layout":null,"metadata":null,"text":"Borg had supported just one workload “controller”, the Job. (I’ll address the differences between Borg’s synchronous state machine and the Kubernetes async controllers later.) It’s described well by the Borg paper: https:\u002F\u002Fai.google\u002Fresearch\u002Fpubs\u002Fpub43438.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":215,"end":255,"href":"https:\u002F\u002Fai.google\u002Fresearch\u002Fpubs\u002Fpub43438","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_28":{"__typename":"Paragraph","id":"e5433ac93edd_28","name":"aaff","type":"P","href":null,"layout":null,"metadata":null,"text":"Job, an array of Tasks, is used for elastic services, agents that ran on every node, batch workloads, and stateful workloads. Consequently, it has a large number of settings, and additional, external controllers are needed in order to support these different workloads.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_29":{"__typename":"Paragraph","id":"e5433ac93edd_29","name":"69d9","type":"P","href":null,"layout":null,"metadata":null,"text":"For instance, for the daemon use case, a special controller \u002F autoscaler is needed to ensure that the Job has a sufficient number of Tasks to cover all the machines, and cases where machines are removed from the middle of the array require special handling.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_30":{"__typename":"Paragraph","id":"e5433ac93edd_30","name":"07ea","type":"P","href":null,"layout":null,"metadata":null,"text":"And not only is Job is the first-class primitive rather than Tasks, but each Task has a stable identity, as with StatefulSet in Kubernetes. That overly constraining not just for daemons, but also for autoscaled workloads, CI workloads, graceful termination, debugging, etc.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_31":{"__typename":"Paragraph","id":"e5433ac93edd_31","name":"2b1d","type":"P","href":null,"layout":null,"metadata":null,"text":"Job also includes published BNS records for tasks, which is the rough equivalent of Endpoints in Kubernetes. BNS records are stored in Chubby, where they can be watched. (I’ll cover watch in K8s more generally later.)","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_32":{"__typename":"Paragraph","id":"e5433ac93edd_32","name":"f0b3","type":"P","href":null,"layout":null,"metadata":null,"text":"The decoupling of Pod, workload controllers, and Endpoints, and a precedent for multiple workload controllers in Kubernetes has proven very flexible, for supporting many, many types of workloads. There are now many application-specific workload controllers (aka Operators).","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_33":{"__typename":"Paragraph","id":"e5433ac93edd_33","name":"3eb0","type":"P","href":null,"layout":null,"metadata":null,"text":"Explicitly representing the PodTemplate as a separate object, as proposed in http:\u002F\u002Fissues.k8s.io\u002F170, may also have been useful for these third-party controllers, but in practice the lack of support for that hasn’t been a huge obstacle. (Well, the API exists, but is unused.)","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":77,"end":101,"href":"http:\u002F\u002Fissues.k8s.io\u002F170","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_34":{"__typename":"Paragraph","id":"e5433ac93edd_34","name":"7a75","type":"P","href":null,"layout":null,"metadata":null,"text":"I proposed the idea of modeling workload controllers as loosely coupled sets of instances grouped using a label selector in June 2013, based on an 11-page analysis of Borg Job use cases, around the same timeframe as the original labels proposal.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_35":{"__typename":"Paragraph","id":"e5433ac93edd_35","name":"7766","type":"P","href":null,"layout":null,"metadata":null,"text":"That partly inspired replicapool.googleapis.com also, though the lack of labels in GCE at the time made implementing the full model infeasible.\nAside on “template”: a “template” is a pattern used to make copies of the same shape. I think the Kubernetes “Pod template” usage is true to that colloquial definition, but typical CS usage implies parameterization and\u002For macro expansion, so maybe “prototype” would be better.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_36":{"__typename":"Paragraph","id":"e5433ac93edd_36","name":"13d2","type":"P","href":null,"layout":null,"metadata":null,"text":"The idea of explicitly modeling state so that it can be externally controlled and observed is a key principle of Cloud Native. I originally included it in a longer form of the definition I wrote for CNCF: https:\u002F\u002Fgithub.com\u002Fcncf\u002Ftoc\u002Fblob\u002Fmaster\u002FDEFINITION.md.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":205,"end":258,"href":"https:\u002F\u002Fgithub.com\u002Fcncf\u002Ftoc\u002Fblob\u002Fmaster\u002FDEFINITION.md","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_37":{"__typename":"Paragraph","id":"e5433ac93edd_37","name":"0fac","type":"P","href":null,"layout":null,"metadata":null,"text":"The principle can also be applied to workflow systems and configuration management (e.g., see https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fdesign-proposals-archive\u002Fblob\u002Fmain\u002Farchitecture\u002Fdeclarative-application-management.md). Embodying these as code is powerful, but with great power comes great responsibility, since it obstructs external tooling and automation.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":94,"end":209,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fdesign-proposals-archive\u002Fblob\u002Fmain\u002Farchitecture\u002Fdeclarative-application-management.md","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_38":{"__typename":"Paragraph","id":"e5433ac93edd_38","name":"5165","type":"P","href":null,"layout":null,"metadata":null,"text":"Kubernetes Borg\u002FOmega history topic 5: Asynchronous controllers. Borgmaster had synchronous, transactional, edge-triggered state machines. We had challenges scaling, evolving, and extending them.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":37,"href":"https:\u002F\u002Ftwitter.com\u002Fbgrant0607\u002Fstatus\u002F1111469578603778048","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":37,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_39":{"__typename":"Paragraph","id":"e5433ac93edd_39","name":"2acd","type":"P","href":null,"layout":null,"metadata":null,"text":"High-cardinality resource instances could exceed what could be done in a single transaction. Addition of new states broke clients. Unobserved changes could cause unexpected state transitions. Adding new resource types was hard, and would have had to be added to monolithic files.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_40":{"__typename":"Paragraph","id":"e5433ac93edd_40","name":"9a1e","type":"P","href":null,"layout":null,"metadata":null,"text":"As a result, when new teams worked on new functionality, such as batch scheduling and autoscaling, they built it into external components, which were asynchronous. Ingestion of status from nodes (Borglets) was asynchronous, as well. Omega embraced asynchronous controllers.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_41":{"__typename":"Paragraph","id":"e5433ac93edd_41","name":"4b1c","type":"P","href":null,"layout":null,"metadata":null,"text":"Omega represented desired state and observed state in separate records in its transactional Paxos store. This made it harder to assemble a picture of what was going on. In Kubernetes, we decided to represent status in the same object as spec, in v1beta3: http:\u002F\u002Fissues.k8s.io\u002F1225.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":255,"end":280,"href":"http:\u002F\u002Fissues.k8s.io\u002F1225","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_42":{"__typename":"Paragraph","id":"e5433ac93edd_42","name":"031d","type":"P","href":null,"layout":null,"metadata":null,"text":"We also fully embraced the controller model, even for Kubelet, by making Kubelets report back to apiserver (http:\u002F\u002Fissues.k8s.io\u002F156) and patch status (https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fissues\u002F2726) so that the API could be used as the source of truth by other controllers.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":108,"end":132,"href":"http:\u002F\u002Fissues.k8s.io\u002F156","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":152,"end":204,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fissues\u002F2726","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_43":{"__typename":"Paragraph","id":"e5433ac93edd_43","name":"4e3b","type":"P","href":null,"layout":null,"metadata":null,"text":"Rather than rigid fine-grained state enumerations that couldn’t be evolved, we initially adopted simple basic states that could report open-ended reasons for being in each state (https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fissues\u002F1146), and later non-orthogonal, extensible conditions (http:\u002F\u002Fissues.k8s.io\u002F7856).","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":179,"end":231,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fissues\u002F1146","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":283,"end":308,"href":"http:\u002F\u002Fissues.k8s.io\u002F7856","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_44":{"__typename":"Paragraph","id":"e5433ac93edd_44","name":"8b31","type":"P","href":null,"layout":null,"metadata":null,"text":"The entire system can now be described as an unbounded number of independent asynchronous control loops reading and writing from\u002Fto a schematized resource store as the source of truth. This model has proven to be very resilient, evolvable, and extensible.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_45":{"__typename":"Paragraph","id":"e5433ac93edd_45","name":"8ab9","type":"P","href":null,"layout":null,"metadata":null,"text":"Kubernetes Borg\u002FOmega history topic 6: Watch. This is a deep topic. It’s a follow-up to the controller topic. I realized that I forgot to link to the doc about Kubernetes controllers: https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fcommunity\u002Fblob\u002Fmaster\u002Fcontributors\u002Fdevel\u002Fsig-api-machinery\u002Fcontrollers.md.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":37,"href":"https:\u002F\u002Ftwitter.com\u002Fbgrant0607\u002Fstatus\u002F1118268924250869760","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":184,"end":287,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fcommunity\u002Fblob\u002Fmaster\u002Fcontributors\u002Fdevel\u002Fsig-api-machinery\u002Fcontrollers.md","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":37,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_46":{"__typename":"Paragraph","id":"e5433ac93edd_46","name":"02c0","type":"P","href":null,"layout":null,"metadata":null,"text":"Borgmaster had 2 models: built-in logic used synchronous edge-triggered state machines, while external components were asynchronous and level-based. More on level vs. edge triggering: https:\u002F\u002Fhackernoon.com\u002Flevel-triggering-and-reconciliation-in-kubernetes-1f17fe30333d.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":184,"end":269,"href":"https:\u002F\u002Fhackernoon.com\u002Flevel-triggering-and-reconciliation-in-kubernetes-1f17fe30333d","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_47":{"__typename":"Paragraph","id":"e5433ac93edd_47","name":"5d1d","type":"P","href":null,"layout":null,"metadata":null,"text":"One of the first things I did when joining the Borgmaster team back in 2009 was to parallelize the handling of read requests. Something like 99% of requests were reads, primarily from polling external controllers and monitoring systems.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_48":{"__typename":"Paragraph","id":"e5433ac93edd_48","name":"1e1d","type":"P","href":null,"layout":null,"metadata":null,"text":"Only BNS (analogous to K8s Endpoints) was written to Chubby, which enabled replicated caching and update notification. That enabled it to scale to much larger numbers of readers (~every container in Borg) and reduced latency, which for polling could be tens of seconds.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_49":{"__typename":"Paragraph","id":"e5433ac93edd_49","name":"3927","type":"P","href":null,"layout":null,"metadata":null,"text":"Watch-like notification APIs (aka sync and tail) were common for storage systems such as Chubby, Colossus, and Bigtable. In 2013, a generalized Watch API was designed so that each system wouldn’t need to reinvent the wheel. A variant “Observe” added per-entity sequencing.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_50":{"__typename":"Paragraph","id":"e5433ac93edd_50","name":"a111","type":"P","href":null,"layout":null,"metadata":null,"text":"We built Kubernetes upon Etcd due to its similarities to Chubby and to the Omega store. When we exposed Etcd’s watch (https:\u002F\u002Fcoreos.com\u002Fetcd\u002Fdocs\u002Flatest\u002Flearning\u002Fapi.html) through the K8s API, we let more Etcd details bleed through than originally intended. We need to clean up some of those details soon.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":118,"end":171,"href":"https:\u002F\u002Fcoreos.com\u002Fetcd\u002Fdocs\u002Flatest\u002Flearning\u002Fapi.html","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_51":{"__typename":"Paragraph","id":"e5433ac93edd_51","name":"5b22","type":"P","href":null,"layout":null,"metadata":null,"text":"The Kubernetes model is described here: https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fdesign-proposals-archive\u002Fblob\u002Fmain\u002Farchitecture\u002Fresource-management.md#declarative-control.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":40,"end":160,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fdesign-proposals-archive\u002Fblob\u002Fmain\u002Farchitecture\u002Fresource-management.md#declarative-control","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_52":{"__typename":"Paragraph","id":"e5433ac93edd_52","name":"58e4","type":"P","href":null,"layout":null,"metadata":null,"text":"Some other systems use message buses for notifications. Why didn’t we? Controllers need to start from the initial state, we also don’t want them to fall behind or operate on state that’s too stale, and they need to be able to handle “missed” events — the level-based rationale.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_53":{"__typename":"Paragraph","id":"e5433ac93edd_53","name":"179a","type":"P","href":null,"layout":null,"metadata":null,"text":"We also wanted Kubernetes to run with a small number of dependencies, and with bounded compute and storage capacity: if we assumed a managed message bus that could store a week of events and an elastic compute platform to process them in parallel, the design would be different.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_54":{"__typename":"Paragraph","id":"e5433ac93edd_54","name":"e906","type":"P","href":null,"layout":null,"metadata":null,"text":"Watch works well for our typical scenario of mostly active entities with high rates of change per entity, and not a vast number of inactive entities (as opposed to, say, sales catalog entries), since it assumes access to all the relevant state. At some point, we’ll need to shard.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_55":{"__typename":"Paragraph","id":"e5433ac93edd_55","name":"9edc","type":"P","href":null,"layout":null,"metadata":null,"text":"Systems that require a key\u002Fvalue store for leader election and configuration, a database for persistence, an out-of-process cache for performance, a message bus for eventing, and a store for message bus persistence (3–5 stateful components) can be painful to operate.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_56":{"__typename":"Paragraph","id":"e5433ac93edd_56","name":"aa7f","type":"P","href":null,"layout":null,"metadata":null,"text":"Kubernetes Borg\u002FOmega history topic 7: The Kubernetes Resource Model: why we (eventually) made it uniform and declarative. A topic even deeper than watch. More details can be found here: https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fdesign-proposals-archive\u002Fblob\u002Fmain\u002Farchitecture\u002Fresource-management.md.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":37,"href":"https:\u002F\u002Ftwitter.com\u002Fbgrant0607\u002Fstatus\u002F1121054924979064832","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":187,"end":287,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fdesign-proposals-archive\u002Fblob\u002Fmain\u002Farchitecture\u002Fresource-management.md","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":37,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_57":{"__typename":"Paragraph","id":"e5433ac93edd_57","name":"8ec6","type":"P","href":null,"layout":null,"metadata":null,"text":"Like most internal Google services, Borgmaster had an imperative, unversioned, monolithic RPC API built using the precursor to grpc.io, Stubby. It exposed an ad hoc collection of operations, like CreateJob, LookupPackage, StartAllocUpdate, and SetMachineAttributes.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_58":{"__typename":"Paragraph","id":"e5433ac93edd_58","name":"52b8","type":"P","href":null,"layout":null,"metadata":null,"text":"Hundreds to thousands of clients interfaced with this API. Many of them were asynchronous controllers or monitoring agents, as discussed in previous threads, and there was a simple command-line tool, and two widely used configuration CLIs.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_59":{"__typename":"Paragraph","id":"e5433ac93edd_59","name":"7f0c","type":"P","href":null,"layout":null,"metadata":null,"text":"The APIs were manually mapped into the two Turing-complete configuration languages, and there was also a hand-crafted diff library for comparing the previous and new desired states. The sets of concepts, RPC operations, and configurable resource types were not easily extended.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_60":{"__typename":"Paragraph","id":"e5433ac93edd_60","name":"e9a5","type":"P","href":null,"layout":null,"metadata":null,"text":"Some extensions of the core functionality, such as for batch scheduling and vertical autoscaling, used the Borgmaster as a configuration store by manually adding substructures stored with Job objects, which were then retrieved by polling Jobs.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_61":{"__typename":"Paragraph","id":"e5433ac93edd_61","name":"aff9","type":"P","href":null,"layout":null,"metadata":null,"text":"Others, such as for load balancing, built independent services with their own service APIs and configuration mechanisms. This enabled teams to evolve their services independently, but created a heterogeneous, inconsistent management surface.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_62":{"__typename":"Paragraph","id":"e5433ac93edd_62","name":"bc51","type":"P","href":null,"layout":null,"metadata":null,"text":"Omega supported an extensible object model, and @davidopp had proposed putting an API in front of the persistent store, as we later did in Kubernetes, but it wasn’t declarative. Separate work on a common configuration store was discontinued as Google Cloud became the focus.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":48,"end":57,"href":"http:\u002F\u002Ftwitter.com\u002Fdavidopp","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_63":{"__typename":"Paragraph","id":"e5433ac93edd_63","name":"7668","type":"P","href":null,"layout":null,"metadata":null,"text":"GCP was comprised of independent services, with some common standards, such as the org hierarchy and authz. They used REST APIs, as the rest of the industry, and gRPC didn’t exist yet. But, GCP’s APIs were not natively declarative, and Terraform didn’t exist, either.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_64":{"__typename":"Paragraph","id":"e5433ac93edd_64","name":"02f5","type":"P","href":null,"layout":null,"metadata":null,"text":"@jbeda proposed layering an aggregated config store\u002Fservice with consistent, declarative CRUD REST APIs over underlying GCP and third-party service APIs. This sort of later evolved into Deployment Manager.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":6,"href":"http:\u002F\u002Ftwitter.com\u002Fjbeda","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_65":{"__typename":"Paragraph","id":"e5433ac93edd_65","name":"3eec","type":"P","href":null,"layout":null,"metadata":null,"text":"We folded learnings from these 5+ systems into the Kubernetes Resource Model, which now supports arbitrarily many built-in types, aggregated APIs, and centralized storage (CRDs), and can be used to configure 1st-party and 3rd-party services, including GCP: https:\u002F\u002Fyoutu.be\u002Fs_hiFuRDJSE.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":257,"end":285,"href":"https:\u002F\u002Fyoutu.be\u002Fs_hiFuRDJSE","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_66":{"__typename":"Paragraph","id":"e5433ac93edd_66","name":"8d0e","type":"P","href":null,"layout":null,"metadata":null,"text":"KRM is consistent and declarative. Metadata and verbs are uniform. Spec and status are distinctly separated. Resource identifiers, modeled closely after Borgmaster’s (http:\u002F\u002Fissues.k8s.io\u002F148), provide declarative names. Label selectors enable declarative sets.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":167,"end":191,"href":"http:\u002F\u002Fissues.k8s.io\u002F148","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_67":{"__typename":"Paragraph","id":"e5433ac93edd_67","name":"6bae","type":"P","href":null,"layout":null,"metadata":null,"text":"For the most part, controllers know which fields to propagate from one resource instance to another and wait gracefully on declarative object (rather than field) references, without assuming referential integrity, which enables relaxed operation ordering.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_68":{"__typename":"Paragraph","id":"e5433ac93edd_68","name":"daa6","type":"P","href":null,"layout":null,"metadata":null,"text":"There are some gaps in the model (e.g., http:\u002F\u002Fissues.k8s.io\u002F34363, http:\u002F\u002Fissues.k8s.io\u002F30698, http:\u002F\u002Fissues.k8s.io\u002F1698, http:\u002F\u002Fissues.k8s.io\u002F22675), but for the most part it facilitates generic operations on arbitrary resource types.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":40,"end":66,"href":"http:\u002F\u002Fissues.k8s.io\u002F34363","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":68,"end":94,"href":"http:\u002F\u002Fissues.k8s.io\u002F30698","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":96,"end":121,"href":"http:\u002F\u002Fissues.k8s.io\u002F1698","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":123,"end":149,"href":"http:\u002F\u002Fissues.k8s.io\u002F22675","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_69":{"__typename":"Paragraph","id":"e5433ac93edd_69","name":"215b","type":"P","href":null,"layout":null,"metadata":null,"text":"In the next thread, I’ll cover more about configuration itself, such as the origin of kubectl apply.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_70":{"__typename":"Paragraph","id":"e5433ac93edd_70","name":"9beb","type":"P","href":null,"layout":null,"metadata":null,"text":"BTW, when I was digging through old docs\u002Fdecks, I found a diagram from the Dec 2013 API proposal. Sunit-\u003EPod, SunitPrototype-\u003EPodTemplate, Replicate-\u003EReplicaSet, Autoscale-\u003EHorizontalPodAutoscaler.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:0*VKpP9zjO1Yc21_C8":{"__typename":"ImageMetadata","id":"0*VKpP9zjO1Yc21_C8","originalHeight":991,"originalWidth":1920,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:e5433ac93edd_71":{"__typename":"Paragraph","id":"e5433ac93edd_71","name":"3301","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:0*VKpP9zjO1Yc21_C8"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_72":{"__typename":"Paragraph","id":"e5433ac93edd_72","name":"397a","type":"P","href":null,"layout":null,"metadata":null,"text":"Kubernetes Borg\u002FOmega history topic 8: Declarative configuration and Apply. Inside Google, the most used configuration approach for Borg is the Turing-complete Borg Configuration Language (BCL). You can see a snippet of BCL on slide 7 in this deck: inf.ed.ac.uk\u002Fteaching\u002Fcours…","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":37,"href":"https:\u002F\u002Ftwitter.com\u002Fbgrant0607\u002Fstatus\u002F1123620689930358786","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":249,"end":277,"href":"https:\u002F\u002Fwww.inf.ed.ac.uk\u002Fteaching\u002Fcourses\u002Fexc\u002Fslides\u002FWilkes.pdf","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":37,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_73":{"__typename":"Paragraph","id":"e5433ac93edd_73","name":"4c61","type":"P","href":null,"layout":null,"metadata":null,"text":"Millions of lines of BCL have been written. A fair amount of BCL was devoted to configuring application command-line flags, which was the most common way to figure server binaries, which is crazy IMO, but the practice sadly carried over to Kubernetes components.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_74":{"__typename":"Paragraph","id":"e5433ac93edd_74","name":"f6d9","type":"P","href":null,"layout":null,"metadata":null,"text":"BCL was evaluated and instantiated using the borgcfg CLI, which supports commands like up, down, and update. Logic to diff and merge, perform rolling updates, and otherwise update the live state was embedded in the tool. Logic for common generation functions was written in BCL.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_75":{"__typename":"Paragraph","id":"e5433ac93edd_75","name":"d4bb","type":"P","href":null,"layout":null,"metadata":null,"text":"This created a monolithic configuration and tool ecosystem. Even frameworks like mapreduce and services on top of Borg like BorgCron had to use BCL and borgcfg to interact with Borg. Getting-started tools generated BCL.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_76":{"__typename":"Paragraph","id":"e5433ac93edd_76","name":"a75a","type":"P","href":null,"layout":null,"metadata":null,"text":"A Python-based language was later developed, also. It interfaced with the update logic via a protobuf that wasn’t quite the same as Borgmaster’s. Other languages, such as Ruby, weren’t used in Google. Several new Borg config languages were developed, but none were approved.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_77":{"__typename":"Paragraph","id":"e5433ac93edd_77","name":"3bbf","type":"P","href":null,"layout":null,"metadata":null,"text":"Not specifically developed for Borg use, jsonnet.org\u002Farticles\u002Fdesig… and https:\u002F\u002Fgithub.com\u002Fcuelang\u002Fcue\u002F were inspired by BCL. aurora.apache.org\u002Fdocumentation\u002F… and https:\u002F\u002Fgithub.com\u002Fstripe\u002Fskycfg were inspired by the Python language.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":41,"end":68,"href":"https:\u002F\u002Fjsonnet.org\u002Farticles\u002Fdesign.html","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":73,"end":104,"href":"https:\u002F\u002Fgithub.com\u002Fcuelang\u002Fcue\u002F","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":127,"end":160,"href":"https:\u002F\u002Faurora.apache.org\u002Fdocumentation\u002Flatest\u002Freference\u002Fconfiguration-templating\u002F","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":165,"end":197,"href":"https:\u002F\u002Fgithub.com\u002Fstripe\u002Fskycfg","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_78":{"__typename":"Paragraph","id":"e5433ac93edd_78","name":"6d8d","type":"P","href":null,"layout":null,"metadata":null,"text":"Borgcfg didn’t provide configuration packages. Shared templates were unversioned and directly imported from their homes in the monorepo, which inflicted churn on their consumers. There were also no “stacks” or lifecycle directives, so a number of imperative updates were needed.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_79":{"__typename":"Paragraph","id":"e5433ac93edd_79","name":"288f","type":"P","href":null,"layout":null,"metadata":null,"text":"In Kubernetes, we wanted to decouple configuration authoring and generation from updates to the desired state via the API, so that users could express configuration using languages and tools familiar to them: Jinja, Python, Ruby, Javascript, Terraform, Ansible, whatever.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_80":{"__typename":"Paragraph","id":"e5433ac93edd_80","name":"72d1","type":"P","href":null,"layout":null,"metadata":null,"text":"I wrote about this in http:\u002F\u002Fprs.k8s.io\u002F1007. I also felt it needed to be possible for automation to write directly to the API and not need to update some arbitrary configuration language. To do that, we needed to be able to merge user intent and automated changes.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":22,"end":44,"href":"http:\u002F\u002Fprs.k8s.io\u002F1007","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_81":{"__typename":"Paragraph","id":"e5433ac93edd_81","name":"cd0d","type":"P","href":null,"layout":null,"metadata":null,"text":"My initial proposal, in http:\u002F\u002Fissues.k8s.io\u002F1178, was to maintain and merge 2 separate layers of desired state in the server. Resistance to that idea led to my client-side Apply proposal in http:\u002F\u002Fissues.k8s.io\u002F1702. We’re finally getting server-side apply: https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fenhancements\u002Fblob\u002Fmaster\u002Fkeps\u002Fsig-api-machinery\u002F0006-apply.md.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":24,"end":49,"href":"http:\u002F\u002Fissues.k8s.io\u002F1178","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":191,"end":216,"href":"http:\u002F\u002Fissues.k8s.io\u002F1702","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":259,"end":350,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fenhancements\u002Fblob\u002Fmaster\u002Fkeps\u002Fsig-api-machinery\u002F0006-apply.md","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_82":{"__typename":"Paragraph","id":"e5433ac93edd_82","name":"2681","type":"P","href":null,"layout":null,"metadata":null,"text":"A gotcha we ran into early in the Apply implementation was complex schema topology. Merging 2 flat maps is easy, but we unfortunately had associative lists: https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fcommunity\u002Fblob\u002Fmaster\u002Fcontributors\u002Fdevel\u002Fsig-architecture\u002Fapi-conventions.md#lists-of-named-subobjects-preferred-over-maps. And also sets and undiscriminated unions (being addressed: https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fenhancements\u002Fblob\u002Fmaster\u002Fkeps\u002Fsig-api-machinery\u002F20190325-unions.md).","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":157,"end":309,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fcommunity\u002Fblob\u002Fmaster\u002Fcontributors\u002Fdevel\u002Fsig-architecture\u002Fapi-conventions.md#lists-of-named-subobjects-preferred-over-maps","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":370,"end":466,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fenhancements\u002Fblob\u002Fmaster\u002Fkeps\u002Fsig-api-machinery\u002F20190325-unions.md","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_83":{"__typename":"Paragraph","id":"e5433ac93edd_83","name":"24fc","type":"P","href":null,"layout":null,"metadata":null,"text":"Strategic merge patch was developed so that we could diff and merge two objects containing associative lists (non-ordinal lists with index keys in values of fields within list elements): https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fcommunity\u002Fblob\u002Fmaster\u002Fcontributors\u002Fdevel\u002Fsig-api-machinery\u002Fstrategic-merge-patch.md.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":187,"end":300,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fcommunity\u002Fblob\u002Fmaster\u002Fcontributors\u002Fdevel\u002Fsig-api-machinery\u002Fstrategic-merge-patch.md","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_84":{"__typename":"Paragraph","id":"e5433ac93edd_84","name":"dab6","type":"P","href":null,"layout":null,"metadata":null,"text":"I wrote an overview of the motivation and principles for the configuration design in https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fdesign-proposals-archive\u002Fblob\u002Fmain\u002Farchitecture\u002Fdeclarative-application-management.md. The original draft of that also contained sketches of what became https:\u002F\u002Fgithub.com\u002Fkubernetes-sigs\u002Fapplication and https:\u002F\u002Fgithub.com\u002Fkubernetes-sigs\u002Fkustomize.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":85,"end":200,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fdesign-proposals-archive\u002Fblob\u002Fmain\u002Farchitecture\u002Fdeclarative-application-management.md","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":268,"end":314,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes-sigs\u002Fapplication","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":319,"end":363,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes-sigs\u002Fkustomize","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_85":{"__typename":"Paragraph","id":"e5433ac93edd_85","name":"1a0c","type":"P","href":null,"layout":null,"metadata":null,"text":"Whereas Apply facilitates collaborative config authoring between humans and machines (thanks to @originalavalamp for that description), kustomize enables collaboration among humans, by facilitating modification of unchanged base prototype\u002Fseed configurations.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":96,"end":112,"href":"http:\u002F\u002Ftwitter.com\u002Foriginalavalamp","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_86":{"__typename":"Paragraph","id":"e5433ac93edd_86","name":"88f9","type":"P","href":null,"layout":null,"metadata":null,"text":"The declarative API, Apply, and kustomize facilitate maintaining configuration as YAML or JSON or proto, amenable to manipulation by tools, rather than as YAML marked up with macros, complex configuration languages, or scripts written in general-purpose programming language.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_87":{"__typename":"Paragraph","id":"e5433ac93edd_87","name":"3226","type":"P","href":null,"layout":null,"metadata":null,"text":"On one hand, the ~100 tools that have been developed show that the decoupling of config format and the API has worked. OTOH, it shows there are still gaps. With work like diff and dry run (https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fenhancements\u002Fpull\u002F893) and prune (https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fenhancements\u002Fpull\u002F810), we’re working to close them.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":189,"end":240,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fenhancements\u002Fpull\u002F893","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":253,"end":304,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fenhancements\u002Fpull\u002F810","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_88":{"__typename":"Paragraph","id":"e5433ac93edd_88","name":"0975","type":"P","href":null,"layout":null,"metadata":null,"text":"A list of tools can be found here: https:\u002F\u002Fdocs.google.com\u002Fspreadsheets\u002Fd\u002F1FCgqz1Ci7_VCz_wdh8vBitZ3giBtac_H8SBw4uxnrsE\u002Fedit#gid=0. I just added another 20 or so that I’ve seen.\nThis thread is already the longest yet, so I’ll start another later with configuration terminology: declarative vs intent, macros vs config languages, packages vs stacks, prototypes vs templates, whitebox vs blackbox, overlays, lifecycle directives, etc.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":35,"end":129,"href":"https:\u002F\u002Fdocs.google.com\u002Fspreadsheets\u002Fd\u002F1FCgqz1Ci7_VCz_wdh8vBitZ3giBtac_H8SBw4uxnrsE\u002Fedit#gid=0","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_89":{"__typename":"Paragraph","id":"e5433ac93edd_89","name":"6b78","type":"P","href":null,"layout":null,"metadata":null,"text":"I’ve worked with @eric_brewer for several years at Google, including on configuration, between work Omega and Kubernetes. In the second half of this podcast, Eric also briefly discusses declarative configuration: https:\u002F\u002Fsoftwareengineeringdaily.com\u002F2019\u002F04\u002F26\u002Fcloud-with-eric-brewer\u002F.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":17,"end":29,"href":"http:\u002F\u002Ftwitter.com\u002Feric_brewer","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":213,"end":284,"href":"https:\u002F\u002Fsoftwareengineeringdaily.com\u002F2019\u002F04\u002F26\u002Fcloud-with-eric-brewer\u002F","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_90":{"__typename":"Paragraph","id":"e5433ac93edd_90","name":"8245","type":"P","href":null,"layout":null,"metadata":null,"text":"BTW, eventually a “production database” called ProdSpec, did succeed and rolled out. Borg has converged towards a model similar to the Kubernetes Resource Model and “GitOps” (though our internal VCS isn’t git), described here: https:\u002F\u002Fyoutu.be\u002Fb4PFHj9s5F8.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":47,"end":55,"href":"https:\u002F\u002Fwww.usenix.org\u002Fpublications\u002Floginonline\u002Fprodspec-and-annealing-intent-based-actuation-google-production","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":227,"end":255,"href":"https:\u002F\u002Fyoutu.be\u002Fb4PFHj9s5F8","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_91":{"__typename":"Paragraph","id":"e5433ac93edd_91","name":"911b","type":"P","href":null,"layout":null,"metadata":null,"text":"Kubernetes Borg\u002FOmega history topic 9: Scheduling constraints. I have volumes more to write about configuration, but will move on with history topics for now. Borg’s set of constraints grew organically over time. It started with just required memory, before multicore and NPTL.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":37,"href":"https:\u002F\u002Ftwitter.com\u002Fbgrant0607\u002Fstatus\u002F1126153226523267073","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":37,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_92":{"__typename":"Paragraph","id":"e5433ac93edd_92","name":"5eb4","type":"P","href":null,"layout":null,"metadata":null,"text":"Other resources were added: cpu, disks. Hard and soft constraints on key\u002Fvalue machine attributes, and “attribute limits” to limit the number of tasks per failure domain. Automatically injected anti-constraints were used to implement dedicated machines.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_93":{"__typename":"Paragraph","id":"e5433ac93edd_93","name":"8f6d","type":"P","href":null,"layout":null,"metadata":null,"text":"In Omega (https:\u002F\u002Fai.google\u002Fresearch\u002Fpubs\u002Fpub41684), we added the concepts of taints and tolerations in order to subsume a number of ad hoc means to prevent scheduling of most tasks and\u002For evict them from certain machines, and forgiveness to defer eviction.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":10,"end":50,"href":"https:\u002F\u002Fai.google\u002Fresearch\u002Fpubs\u002Fpub41684","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_94":{"__typename":"Paragraph","id":"e5433ac93edd_94","name":"ecca","type":"P","href":null,"layout":null,"metadata":null,"text":"These scheduling features made their way pretty directly into Kubernetes: http:\u002F\u002Fissues.k8s.io\u002F168, http:\u002F\u002Fissues.k8s.io\u002F367, http:\u002F\u002Fissues.k8s.io\u002F1574, http:\u002F\u002Fissues.k8s.io\u002F17190. @davidopp, who was the TL of scheduling in Borg and Omega, worked on a number of these features in K8s too.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":74,"end":98,"href":"http:\u002F\u002Fissues.k8s.io\u002F168","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":100,"end":124,"href":"http:\u002F\u002Fissues.k8s.io\u002F367","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":126,"end":151,"href":"http:\u002F\u002Fissues.k8s.io\u002F1574","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":153,"end":179,"href":"http:\u002F\u002Fissues.k8s.io\u002F17190","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":181,"end":190,"href":"http:\u002F\u002Ftwitter.com\u002Fdavidopp","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_95":{"__typename":"Paragraph","id":"e5433ac93edd_95","name":"a575","type":"P","href":null,"layout":null,"metadata":null,"text":"A scheduling braindump I wrote in early 2015 (https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fissues\u002F4301#issuecomment-74355529) possibly helped to convince some that Google really was fully sharing its experience with the project. The scheduling design docs can be found in https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fdesign-proposals-archive\u002Ftree\u002Fmain\u002Fscheduling.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":46,"end":120,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fissues\u002F4301#issuecomment-74355529","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":268,"end":343,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fdesign-proposals-archive\u002Ftree\u002Fmain\u002Fscheduling","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_96":{"__typename":"Paragraph","id":"e5433ac93edd_96","name":"ec64","type":"P","href":null,"layout":null,"metadata":null,"text":"These mechanisms can be used to manage how workloads are binpacked for efficiency, spread for availability, isolated from one another for performance or reliability or security, colocated with required resources, matched with desired configurations, and manage node drains.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_97":{"__typename":"Paragraph","id":"e5433ac93edd_97","name":"f2b3","type":"P","href":null,"layout":null,"metadata":null,"text":"These scheduling primitives are pretty flexible, but if there are constraints or other policies or criteria that can’t be represented, users can use their own schedulers. In order to do that in Borg, one would have to add a constraint to a task to pin it to a specific machine.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_98":{"__typename":"Paragraph","id":"e5433ac93edd_98","name":"c992","type":"P","href":null,"layout":null,"metadata":null,"text":"The Omega paper compared performance of 2-level scheduling with information hiding, but one issue it didn’t mention is that the lower-level scheduler needs to implement all of the same constraints as all the upper-level schedulers, or it may never satisfy their requirements.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_99":{"__typename":"Paragraph","id":"e5433ac93edd_99","name":"d398","type":"P","href":null,"layout":null,"metadata":null,"text":"Anyway, while resource optimization is an important concern, there are many other considerations in decisions, such as whether container images already resident, which facilitates faster start time.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_100":{"__typename":"Paragraph","id":"e5433ac93edd_100","name":"735f","type":"P","href":null,"layout":null,"metadata":null,"text":"Kubernetes Borg\u002FOmega history topic 10: In honor of #KubeConEU and the 5th anniversary of open-sourcing Kubernetes, I’ll add more perspective from the Borg and Omega teams to the origin story.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":38,"href":"https:\u002F\u002Ftwitter.com\u002Fbgrant0607\u002Fstatus\u002F1131202013411176448","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":38,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_101":{"__typename":"Paragraph","id":"e5433ac93edd_101","name":"d1cd","type":"P","href":null,"layout":null,"metadata":null,"text":"Internally, Google puts a lot of emphasis on both resource efficiency and engineering efficiency. For both reasons, back in June 2013, a few months before GCE was ready to GA (https:\u002F\u002Fcloudplatform.googleblog.com\u002F2013\u002F12\u002Fgoogle-compute-engine-is-now-generally-available.html), the Borg and GCE teams started to work more closely to improve both.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":176,"end":274,"href":"https:\u002F\u002Fcloudplatform.googleblog.com\u002F2013\u002F12\u002Fgoogle-compute-engine-is-now-generally-available.html","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_102":{"__typename":"Paragraph","id":"e5433ac93edd_102","name":"ecde","type":"P","href":null,"layout":null,"metadata":null,"text":"The initial focus gravitated towards directly supporting features needed by Cloud in Borg so that Cloud wouldn’t need to work around the the lack of those features (see my previous comment on 2-level scheduling: https:\u002F\u002Ftwitter.com\u002Fbgrant0607\u002Fstatus\u002F1126153859041087488).","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":212,"end":269,"href":"https:\u002F\u002Ftwitter.com\u002Fbgrant0607\u002Fstatus\u002F1126153859041087488","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_103":{"__typename":"Paragraph","id":"e5433ac93edd_103","name":"fb8d","type":"P","href":null,"layout":null,"metadata":null,"text":"Google also spends a lot of energy constantly mitigating entropy in its internal software and infrastructure. The monorepo is one mechanism for this. It also launches many efforts to “unify” or “converge” multiple systems that co-evolve to do similar things.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_104":{"__typename":"Paragraph","id":"e5433ac93edd_104","name":"dc3f","type":"P","href":null,"layout":null,"metadata":null,"text":"In that context, 2 months later, the Unified Compute Working Group was formed by Google Cloud and Google’s internal infrastructure group, “TI”, which included Borg. The goal was to develop a proposal for a “compute platform” that could be used by both Cloud and internal customers.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_105":{"__typename":"Paragraph","id":"e5433ac93edd_105","name":"f6c7","type":"P","href":null,"layout":null,"metadata":null,"text":"It was obvious that VMs would be too cumbersome and inefficient and App Engine wasn’t versatile enough to run a wide range of internal services, such as web search and Gmail. We needed a platform that was more like Borg, that was based on containers.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_106":{"__typename":"Paragraph","id":"e5433ac93edd_106","name":"33cc","type":"P","href":null,"layout":null,"metadata":null,"text":"There were discussions regarding how compatible it should be with App Engine and with Borg. Docker, buildpacks, and Omlet (a new node agent under development to replace Borglet) were compared. Early discussions presumed a managed service, like GCE, GAE, and Borg.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_107":{"__typename":"Paragraph","id":"e5433ac93edd_107","name":"5cdf","type":"P","href":null,"layout":null,"metadata":null,"text":"In September 2013, viewpoints of 9+ WG participants were collected and composed into a “Unified Compute PRD”, focused on serving workloads (e.g., rather than batch). That was the first time I was aware of the term “Container as a Service” being used.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_108":{"__typename":"Paragraph","id":"e5433ac93edd_108","name":"f50d","type":"P","href":null,"layout":null,"metadata":null,"text":"In October, subgroups of the WG were formed to focus on key problems, including a container management API subgroup. In November, we pulled in more people from Borg and from Cloud to hash out a number of API details. In December, an API proposal was presented to the full WG.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_109":{"__typename":"Paragraph","id":"e5433ac93edd_109","name":"6002","type":"P","href":null,"layout":null,"metadata":null,"text":"At the same meeting, a proposal was made for what became the App Engine Flexible Environment (https:\u002F\u002Fcloud.google.com\u002Fappengine\u002Fdocs\u002Fflexible\u002F), and a proposal to build an open-source container platform, so that we wouldn’t be “Hadooped” by other OSS projects.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":94,"end":143,"href":"https:\u002F\u002Fcloud.google.com\u002Fappengine\u002Fdocs\u002Fflexible\u002F","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_110":{"__typename":"Paragraph","id":"e5433ac93edd_110","name":"ea4d","type":"P","href":null,"layout":null,"metadata":null,"text":"That OSS container platform was Project 7. Afterward, there were several proposals from both the Borg side and Cloud side to build products with compatible APIs. Collaboration with the Borg team deepened. Borglet team members started to work on libcontainer for Docker in April 2014.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_111":{"__typename":"Paragraph","id":"e5433ac93edd_111","name":"0ca8","type":"P","href":null,"layout":null,"metadata":null,"text":"It soon became clear that other Borg team members (me @thockin @erictune4 Dawn Chen @originalavalamp @davidopp @vishnukanan) should work on the open-source project to design and develop the Borg-like functionality. We deeply believed in the potential value to external users\nSo we created Kubernetes because we needed it to exist, and we believed others needed it to exist also. Looking at the other solutions available at the time (e.g., https:\u002F\u002Fgithub.com\u002Ftsuru\u002Fdocker-cluster, https:\u002F\u002Fgithub.com\u002Fsignalfx\u002Fmaestro-ng) and since, we made the right call.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":54,"end":62,"href":"http:\u002F\u002Ftwitter.com\u002Fthockin","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":63,"end":73,"href":"http:\u002F\u002Ftwitter.com\u002Ferictune4","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":84,"end":100,"href":"http:\u002F\u002Ftwitter.com\u002Foriginalavalamp","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":101,"end":110,"href":"http:\u002F\u002Ftwitter.com\u002Fdavidopp","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":111,"end":123,"href":"http:\u002F\u002Ftwitter.com\u002Fvishnukanan","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":439,"end":478,"href":"https:\u002F\u002Fgithub.com\u002Ftsuru\u002Fdocker-cluster","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":480,"end":518,"href":"https:\u002F\u002Fgithub.com\u002Fsignalfx\u002Fmaestro-ng","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_112":{"__typename":"Paragraph","id":"e5433ac93edd_112","name":"3733","type":"P","href":null,"layout":null,"metadata":null,"text":"Kubernetes Borg\u002FOmega history topic 11: PodDisruptionBudget. Google constantly performs software and hardware maintenance in its datacenters: firmware updates, kernel and image updates, disk repairs, switch updates, battery tests, etc. etc. More and more kinds over time.\nEven though Borg tasks are designed to be resilient, this could get pretty disruptive. Rate-limiting maintenance tasks independently isn’t efficient if you have dozens of them, and it’s not always feasible to perform all types of maintenance at the same time.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":38,"href":"https:\u002F\u002Ftwitter.com\u002Fbgrant0607\u002Fstatus\u002F1134536364823699457","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":38,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_113":{"__typename":"Paragraph","id":"e5433ac93edd_113","name":"1c8a","type":"P","href":null,"layout":null,"metadata":null,"text":"Even if rate-limiting machine disruptions, it’s also possible for the same task to get disrupted over and over again, like a can being kicked down the road. Hence, the Safe Removal Service (aka SRSly — pronounced seriously) was developed by SRE. SRE builds lots of automation.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_114":{"__typename":"Paragraph","id":"e5433ac93edd_114","name":"165c","type":"P","href":null,"layout":null,"metadata":null,"text":"SRSly kept track of how often tasks of the same Borg Job were disrupted (aka evicted). Maintenance automation queried SRSly regarding all tasks scheduled on a machine before taking it out of service. This enabled Borg to provide a SLO on task disruption.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_115":{"__typename":"Paragraph","id":"e5433ac93edd_115","name":"2933","type":"P","href":null,"layout":null,"metadata":null,"text":"Borgmaster, however, did not know about SRSly. Instead, all critical\u002Fproduction workloads were changed to run with the same priority so that they wouldn’t preempt each other. Doing that for every Borg Job in the company was extremely painful — more on priority\u002Fpreemption later\nFor Omega, we developed a model that could be applied both during task preemption to run a higher-priority task and eviction for maintenance — disruption counters. There was a time dimension that ended up not being effective due to constant changes, so we dropped it in K8s.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_116":{"__typename":"Paragraph","id":"e5433ac93edd_116","name":"d264","type":"P","href":null,"layout":null,"metadata":null,"text":"I think I first mentioned this in Kubernetes in my big scheduling braindump comment: https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fissues\u002F4301#issuecomment-74355529. It came up again when I proposed maxUnavailable to moderate concurrent disruptions caused by updates during the design of Deployment:\nhttps:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fpull\u002F12236#discussion_r36501373.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":85,"end":159,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fissues\u002F4301#issuecomment-74355529","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":295,"end":367,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fpull\u002F12236#discussion_r36501373","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_117":{"__typename":"Paragraph","id":"e5433ac93edd_117","name":"d281","type":"P","href":null,"layout":null,"metadata":null,"text":"That discussion was forked into https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fissues\u002F12611. Around that time, Matt Liggett (https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fpulls?q=is%3Apr+author%3Amml+is%3Aclosed) joined the GKE team from Borg SRE (woo hoo!). One of the first things Matt worked on was improving node drains: https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fissues\u002F6080.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":32,"end":85,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fissues\u002F12611","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":119,"end":200,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fpulls?q=is%3Apr+author%3Amml+is%3Aclosed","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":314,"end":366,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fissues\u002F6080","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_118":{"__typename":"Paragraph","id":"e5433ac93edd_118","name":"b5fa","type":"P","href":null,"layout":null,"metadata":null,"text":"Together with @davidopp and @erictune4, we folded disruption budgets into the rescheduling design proposal: https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fcommunity\u002Fblob\u002Fmaster\u002Fcontributors\u002Fdesign-proposals\u002Fscheduling\u002Frescheduling.md#disruption-budget. (Rescheduling deserves its own thread — I’ll do that one next.)","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":14,"end":23,"href":"http:\u002F\u002Ftwitter.com\u002Fdavidopp","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":28,"end":38,"href":"http:\u002F\u002Ftwitter.com\u002Ferictune4","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":108,"end":234,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fcommunity\u002Fblob\u002Fmaster\u002Fcontributors\u002Fdesign-proposals\u002Fscheduling\u002Frescheduling.md#disruption-budget","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_119":{"__typename":"Paragraph","id":"e5433ac93edd_119","name":"ef30","type":"P","href":null,"layout":null,"metadata":null,"text":"Implementation began in https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fpull\u002F24697 and https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fpull\u002F25551\nPodDisruptionBudget is now documented: https:\u002F\u002Fkubernetes.io\u002Fdocs\u002Fconcepts\u002Fworkloads\u002Fpods\u002Fdisruptions\u002F and https:\u002F\u002Fkubernetes.io\u002Fdocs\u002Ftasks\u002Frun-application\u002Fconfigure-pdb\u002F. Try it out and give us feedback on how well it works for you. We’re looking to advance it from beta to GA: https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fenhancements\u002Fissues\u002F85.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":24,"end":75,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fpull\u002F24697","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":80,"end":131,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fpull\u002F25551","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":171,"end":234,"href":"https:\u002F\u002Fkubernetes.io\u002Fdocs\u002Fconcepts\u002Fworkloads\u002Fpods\u002Fdisruptions\u002F","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":239,"end":302,"href":"https:\u002F\u002Fkubernetes.io\u002Fdocs\u002Ftasks\u002Frun-application\u002Fconfigure-pdb\u002F","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":411,"end":463,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fenhancements\u002Fissues\u002F85","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_120":{"__typename":"Paragraph","id":"e5433ac93edd_120","name":"2594","type":"P","href":null,"layout":null,"metadata":null,"text":"You can safely drain a node with kubetctl drain: https:\u002F\u002Fkubernetes.io\u002Fdocs\u002Ftasks\u002Fadminister-cluster\u002Fsafely-drain-node\u002F. Node upgrades and the cluster autoscaler in Google Kubernetes Engine (GKE) also respect PodDisruptionBudget. The latter is documented here: https:\u002F\u002Fcloud.google.com\u002Fkubernetes-engine\u002Fdocs\u002Fconcepts\u002Fcluster-autoscaler.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":49,"end":119,"href":"https:\u002F\u002Fkubernetes.io\u002Fdocs\u002Ftasks\u002Fadminister-cluster\u002Fsafely-drain-node\u002F","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":261,"end":336,"href":"https:\u002F\u002Fcloud.google.com\u002Fkubernetes-engine\u002Fdocs\u002Fconcepts\u002Fcluster-autoscaler","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_121":{"__typename":"Paragraph","id":"e5433ac93edd_121","name":"1f61","type":"P","href":null,"layout":null,"metadata":null,"text":"Node upgrade behavior is documented here: https:\u002F\u002Ft.co\u002FeyWfp2TZn3\nAnd more about the Google SRE philosophy behind automation can be found in the SRE book: https:\u002F\u002Fsre.google\u002Fsre-book\u002Fautomation-at-google\u002F.\nAnd the Safe Removal Service was also mentioned in Google’s “VM Live Migration at Scale” paper in VEE 2018: https:\u002F\u002Fdl.acm.org\u002Fdoi\u002F10.1145\u002F3296975.3186415.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":42,"end":65,"href":"https:\u002F\u002Ft.co\u002FeyWfp2TZn3","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":155,"end":204,"href":"https:\u002F\u002Fsre.google\u002Fsre-book\u002Fautomation-at-google\u002F","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":314,"end":360,"href":"https:\u002F\u002Fdl.acm.org\u002Fdoi\u002F10.1145\u002F3296975.3186415","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_122":{"__typename":"Paragraph","id":"e5433ac93edd_122","name":"f435","type":"P","href":null,"layout":null,"metadata":null,"text":"Kubernetes Borg\u002FOmega history topic 12: A follow-on to the PodDisruptionBudget topic: the descheduler (https:\u002F\u002Fgithub.com\u002Fkubernetes-incubator\u002Fdescheduler). Descheduler is more appropriate than the original term “rescheduler”, because its job is to decide which pods to kill, not to replace or schedule them.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":38,"href":"https:\u002F\u002Ftwitter.com\u002Fbgrant0607\u002Fstatus\u002F1140592824947109888","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":103,"end":154,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes-incubator\u002Fdescheduler","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":38,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_123":{"__typename":"Paragraph","id":"e5433ac93edd_123","name":"ed61","type":"P","href":null,"layout":null,"metadata":null,"text":"In Kubernetes, when running on a cloud provider such as in GKE, in the case of pending pods with no existing available space to be placed, either cluster autoscaling or even node autoprovisioning (https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fautoscaler\u002Fblob\u002Fmaster\u002Fcluster-autoscaler\u002Fproposals\u002Fnode_autoprovisioning.md, https:\u002F\u002Fcloud.google.com\u002Fkubernetes-engine\u002Fdocs\u002Fhow-to\u002Fnode-auto-provisioning) can create new nodes for them.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":197,"end":303,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fautoscaler\u002Fblob\u002Fmaster\u002Fcluster-autoscaler\u002Fproposals\u002Fnode_autoprovisioning.md","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":305,"end":382,"href":"https:\u002F\u002Fcloud.google.com\u002Fkubernetes-engine\u002Fdocs\u002Fhow-to\u002Fnode-auto-provisioning","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_124":{"__typename":"Paragraph","id":"e5433ac93edd_124","name":"b08a","type":"P","href":null,"layout":null,"metadata":null,"text":"In Borg, the rescheduler was created to defragment nodes to make room. It selected tasks to evict so that the new tasks could schedule, while also ensuring the replacements for the evicted tasks could also find new homes so as not to just cause unnecessary churn.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_125":{"__typename":"Paragraph","id":"e5433ac93edd_125","name":"4d47","type":"P","href":null,"layout":null,"metadata":null,"text":"In K8s, the purpose of the descheduler is mainly to reshuffle pods to improve the overall distribution of pods across nodes. After some churn in a cluster due to pod terminations due to pod autoscaling, pod updates, pods for batch\u002FCI tasks, etc., pod layout can become uneven.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_126":{"__typename":"Paragraph","id":"e5433ac93edd_126","name":"bb4c","type":"P","href":null,"layout":null,"metadata":null,"text":"A simple example: Say the cluster autoscaler (https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fautoscaler\u002Ftree\u002Fmaster\u002Fcluster-autoscaler) added a new node for new pods. If those pods were due to creation of a new Deployment or ReplicaSet, they could all land on the new node if there weren’t enough space on existing nodes.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":46,"end":117,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fautoscaler\u002Ftree\u002Fmaster\u002Fcluster-autoscaler","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_127":{"__typename":"Paragraph","id":"e5433ac93edd_127","name":"2ddd","type":"P","href":null,"layout":null,"metadata":null,"text":"From the experience in Borg, we knew the descheduler would be needed from the beginning of the Kubernetes project. I think it was first mentioned when discussing the addition of liveness and readiness probes: https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fissues\u002F620#issuecomment-50110653.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":209,"end":282,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fissues\u002F620#issuecomment-50110653","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_128":{"__typename":"Paragraph","id":"e5433ac93edd_128","name":"1576","type":"P","href":null,"layout":null,"metadata":null,"text":"This enabled us to establish a clear separation of concerns between pod creation and replacement by workload controllers, horizontal scaling by HPA, placement by the scheduler, and rebalancing across nodes and failure domains by the descheduler, which would respect PDB.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_129":{"__typename":"Paragraph","id":"e5433ac93edd_129","name":"a28a","type":"P","href":null,"layout":null,"metadata":null,"text":"That division was discussed when designing eviction for unresponsive nodes (https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fissues\u002F3885#issuecomment-71984989) and then in issues.k8s.io\u002F12140. The design docs can be found at https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fcommunity\u002Fblob\u002Fmaster\u002Fcontributors\u002Fdesign-proposals\u002Fscheduling\u002Frescheduler.md and https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fcommunity\u002Fblob\u002Fmaster\u002Fcontributors\u002Fdesign-proposals\u002Fscheduling\u002Frescheduling.md.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":76,"end":150,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fkubernetes\u002Fissues\u002F3885#issuecomment-71984989","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":217,"end":324,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fcommunity\u002Fblob\u002Fmaster\u002Fcontributors\u002Fdesign-proposals\u002Fscheduling\u002Frescheduler.md","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":329,"end":437,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fcommunity\u002Fblob\u002Fmaster\u002Fcontributors\u002Fdesign-proposals\u002Fscheduling\u002Frescheduling.md","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_130":{"__typename":"Paragraph","id":"e5433ac93edd_130","name":"d597","type":"P","href":null,"layout":null,"metadata":null,"text":"Note that if churn in the cluster is sufficiently high and eviction is highly constrained due to PodDisruptionBudgets, it may not be possible for the descheduler to keep up. This is one reason why it may not be possible to achieve an “optimal” layout.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_131":{"__typename":"Paragraph","id":"e5433ac93edd_131","name":"b689","type":"P","href":null,"layout":null,"metadata":null,"text":"Kubernetes Borg\u002FOmega history topic 13: Priority and preemption. Some work is more important and\u002For urgent than other work. Borg represented this as an integer value: priority. A higher value meant a task was more important than a lower value, and should be able to displace it.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":38,"href":"https:\u002F\u002Ftwitter.com\u002Fbgrant0607\u002Fstatus\u002F1145696550959509504","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":38,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_132":{"__typename":"Paragraph","id":"e5433ac93edd_132","name":"7d2e","type":"P","href":null,"layout":null,"metadata":null,"text":"When choosing a machine for a task, the scheduler ignored lower-priority tasks for determining whether\u002Fwhere a task would fit, but considered the number of tasks that would have to be preempted as part of the ranking function for choosing the best machine.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_133":{"__typename":"Paragraph","id":"e5433ac93edd_133","name":"2598","type":"P","href":null,"layout":null,"metadata":null,"text":"Disruption budgets were never added to the scheduler, which would have been hard, but there were also concerns about performance and priority inversion. Higher-priority tasks could specify how long they would wait for lower-priority ones to gracefully terminate.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_134":{"__typename":"Paragraph","id":"e5433ac93edd_134","name":"50ae","type":"P","href":null,"layout":null,"metadata":null,"text":"Priorities were used to ensure production\u002Fcritical serving workloads could always get the resources they needed. This was essential to enabling mixed workloads to run together in the same clusters. Batch and experimental workloads ran at lower priorities, infrastructure at higher.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_135":{"__typename":"Paragraph","id":"e5433ac93edd_135","name":"0c33","type":"P","href":null,"layout":null,"metadata":null,"text":"For a while, users tried spreading their workloads across multiple priority bands in order to be nice to other tenants — crude kind of fairness in the case of resource crunches. That resulted in preemption cascades of higher-priority tasks preempting lower-priority ones .","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_136":{"__typename":"Paragraph","id":"e5433ac93edd_136","name":"c230","type":"P","href":null,"layout":null,"metadata":null,"text":"Batch workloads, many of which were continuous automatically submitted, primarily preempted other batch tasks, causing significant amounts of lost work. So, priorities were “collapsed” into bands such that everything in the same band was treated as the same priority.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_137":{"__typename":"Paragraph","id":"e5433ac93edd_137","name":"c6f7","type":"P","href":null,"layout":null,"metadata":null,"text":"The collapse reduced preemption, but other mechanisms were needed to ensure timely and efficient scheduling. The rescheduler ensured that pending production-priority tasks could schedule by choosing others to displace. It verified that both tasks would schedule, to avoid cascades.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_138":{"__typename":"Paragraph","id":"e5433ac93edd_138","name":"1f28","type":"P","href":null,"layout":null,"metadata":null,"text":"Groups of batch tasks were queued and admitted to the cluster when enough resources became available to schedule them. Resource quota by priority prevented priority inflation over time. Space was left between the bands in case new bands were needed — like BASIC line numbering.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_139":{"__typename":"Paragraph","id":"e5433ac93edd_139","name":"32dd","type":"P","href":null,"layout":null,"metadata":null,"text":"Eventually the priority values of virtually all tasks were changed to rationalize them with the new scheme, across thousands of jobs, in their configuration files, through a painstaking process. This reiterated the importance of abstracting the operational intent.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_140":{"__typename":"Paragraph","id":"e5433ac93edd_140","name":"e473","type":"P","href":null,"layout":null,"metadata":null,"text":"Borg’s approach is described in the Borg paper: https:\u002F\u002Fai.google\u002Fresearch\u002Fpubs\u002Fpub43438. K8s design proposals were in https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fdesign-proposals-archive\u002Fblob\u002Fmain\u002Fscheduling\u002Fpod-preemption.md and https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fdesign-proposals-archive\u002Fblob\u002Fmain\u002Fscheduling\u002Fpod-priority-api.md. Priority in resource quota: https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fenhancements\u002Fblob\u002Fmaster\u002Fkeps\u002Fsig-scheduling\u002F20190409-resource-quota-ga.md. Coscheduling: https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fenhancements\u002Fblob\u002Fmaster\u002Fkeps\u002Fsig-scheduling\u002F34-20180703-coscheduling.md.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":48,"end":88,"href":"https:\u002F\u002Fai.google\u002Fresearch\u002Fpubs\u002Fpub43438","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":119,"end":212,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fdesign-proposals-archive\u002Fblob\u002Fmain\u002Fscheduling\u002Fpod-preemption.md","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":217,"end":312,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fdesign-proposals-archive\u002Fblob\u002Fmain\u002Fscheduling\u002Fpod-priority-api.md","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":342,"end":446,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fenhancements\u002Fblob\u002Fmaster\u002Fkeps\u002Fsig-scheduling\u002F20190409-resource-quota-ga.md","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":462,"end":564,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fenhancements\u002Fblob\u002Fmaster\u002Fkeps\u002Fsig-scheduling\u002F34-20180703-coscheduling.md","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_141":{"__typename":"Paragraph","id":"e5433ac93edd_141","name":"ff32","type":"P","href":null,"layout":null,"metadata":null,"text":"Priority in Kubernetes is relatively new, and it’s still evolving. For instance, there’s an open proposal to add a preemption policy, https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fenhancements\u002Fpull\u002F1096, primarily to avoid preempting other pods. Borg has a similar mechanism. I’ll discuss why when covering QoS.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":134,"end":186,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fenhancements\u002Fpull\u002F1096","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_142":{"__typename":"Paragraph","id":"e5433ac93edd_142","name":"4e00","type":"P","href":null,"layout":null,"metadata":null,"text":"Waiting for preempted pods to terminate gracefully before starting newly scheduled pods creates significant complexity in the design. The scheduler then needs to model the future state, and some controller needs to watch for the space to become before starting the new pod.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_143":{"__typename":"Paragraph","id":"e5433ac93edd_143","name":"aa2c","type":"P","href":null,"layout":null,"metadata":null,"text":"The complexity of priority and preemption is primarily what drove the change for the DaemonSet controller to rely on the default scheduler to bind pods to nodes, as well as the scheduler framework proposal https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fenhancements\u002Fissues\u002F624, so the code could be reused in custom schedulers.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":206,"end":259,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fenhancements\u002Fissues\u002F624","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_144":{"__typename":"Paragraph","id":"e5433ac93edd_144","name":"44a0","type":"P","href":null,"layout":null,"metadata":null,"text":"I’ll cover Quality of Service (QoS) and oversubscription next. Over time, priority bands in Borg (specific hardcoded integer values) came to be used as part of the determination of QoS level, for reasons I’ll go into in that thread.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_145":{"__typename":"Paragraph","id":"e5433ac93edd_145","name":"014a","type":"P","href":null,"layout":null,"metadata":null,"text":"Kubernetes Borg\u002FOmega history topic 14: Computational Quality of Service (QoS) and oversubscription. What are they, why would you want them, and how is QoS different than priority? On the last point, it’s distinguishing importance and urgency.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":38,"href":"https:\u002F\u002Ftwitter.com\u002Fbgrant0607\u002Fstatus\u002F1153341109692588032","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":38,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_146":{"__typename":"Paragraph","id":"e5433ac93edd_146","name":"a9ae","type":"P","href":null,"layout":null,"metadata":null,"text":"QoS is something that wouldn’t matter if just one process were running per host system or if all the processes steadily used a constant amount of cpu, memory, and other resources. Because they vary, reserving max capacity needed for each would leave systems poorly utilized.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_147":{"__typename":"Paragraph","id":"e5433ac93edd_147","name":"4038","type":"P","href":null,"layout":null,"metadata":null,"text":"Oversubscription mitigates that by packing more applications onto a system than could all fit at their peak requirements. It’s kind of like a bank: not everyone can withdraw at the same time. The question is then: what happens when apps demand more resources than they can get?","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_148":{"__typename":"Paragraph","id":"e5433ac93edd_148","name":"c587","type":"P","href":null,"layout":null,"metadata":null,"text":"With time-division multiplexing, many CPU threads can be interleaved. They can be blocked and queued by the OS, typically at the cost of context switches and waiting a few time slices. Thus there is no fixed limit to how many can be packed onto a machine. CPU is compressible.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_149":{"__typename":"Paragraph","id":"e5433ac93edd_149","name":"8089","type":"P","href":null,"layout":null,"metadata":null,"text":"OTOH, swapping memory pages, even to local SSD, is painfully expensive. This is why systems hosting services that need to respond with subsecond latency disable swap. Memory is considered an incompressible resource.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_150":{"__typename":"Paragraph","id":"e5433ac93edd_150","name":"78e6","type":"P","href":null,"layout":null,"metadata":null,"text":"For simplicity, I’ll ignore resources other than CPU and memory\nCompressible resources like CPU can be made available quickly by the kernel with low impact to the threads that were interrupted, provided it knows which threads urgently need the resources and which ones don’t. We call this latency sensitive and latency tolerant respectively.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_151":{"__typename":"Paragraph","id":"e5433ac93edd_151","name":"1684","type":"P","href":null,"layout":null,"metadata":null,"text":"Borg used an explicit attribute to indicate this, called appclass, which is described by the Borg paper: https:\u002F\u002Fai.google\u002Fresearch\u002Fpubs\u002Fpub43438. This was translated to scheduling latency in LMCTFY: https:\u002F\u002Fgithub.com\u002Fgoogle\u002Flmctfy\u002Fblob\u002Fmaster\u002Finclude\u002Flmctfy.proto#L142.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":105,"end":145,"href":"https:\u002F\u002Fai.google\u002Fresearch\u002Fpubs\u002Fpub43438","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":200,"end":270,"href":"https:\u002F\u002Fgithub.com\u002Fgoogle\u002Flmctfy\u002Fblob\u002Fmaster\u002Finclude\u002Flmctfy.proto#L142","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_152":{"__typename":"Paragraph","id":"e5433ac93edd_152","name":"85ac","type":"P","href":null,"layout":null,"metadata":null,"text":"In Kubernetes, it’s inferred from resource requests and limits\nIn order to reallocate incompressible resources quickly, threads need to be killed, which is obviously not low impact. (For memory, in Linux this is done by the OOM killer.) This was why Borg used priority (production priority vs not) to make memory oversubscription decisions.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_153":{"__typename":"Paragraph","id":"e5433ac93edd_153","name":"e4c9","type":"P","href":null,"layout":null,"metadata":null,"text":"Borg’s resource reclamation approach is described by the paper: reservations based on observed usage were computed and oversubscribed resources (latency-tolerant cpu and non-production memory) were tallied against reservations whereas guaranteed ones used limits. Complicated.\nVertical autoscaling (VA) added even more complexity. VA changed limits, but left its own padding to provide slack for reaction time and observation of demand. Ad hoc mechanisms were added to disable limit enforcement for each resource, creating a notion similar to request in K8s.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_154":{"__typename":"Paragraph","id":"e5433ac93edd_154","name":"4e5b","type":"P","href":null,"layout":null,"metadata":null,"text":"In K8s, I wanted something simpler, to directly convey the desire for oversubscription and bursting flexibility. The discussion started way back in issues.k8s.io\u002F147 and issues.k8s.io\u002F168. The model we settled on was determined by looking at limits and requests.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_155":{"__typename":"Paragraph","id":"e5433ac93edd_155","name":"96d0","type":"P","href":null,"layout":null,"metadata":null,"text":"Request==Limit implies guaranteed resources (not oversubscribed). Request\u003CLimit implies burstable (oversubscribed). Zero request implies best effort. Borg scheduled best effort using reservation, but no throughput guarantees could be made in practice.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_156":{"__typename":"Paragraph","id":"e5433ac93edd_156","name":"95f2","type":"P","href":null,"layout":null,"metadata":null,"text":"This is described in the resource model design (https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fdesign-proposals-archive\u002Fblob\u002Fmain\u002Fscheduling\u002Fresources.md) and the QoS proposal (https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fdesign-proposals-archive\u002Fblob\u002Fmain\u002Fnode\u002Fresource-qos.md), including the mapping to OOM scores. The mapping to cgroup cpu shares is described in the pod resource design (https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fcommunity\u002Fblob\u002Fmaster\u002Fcontributors\u002Fdesign-proposals\u002Fnode\u002Fpod-resource-management.md).","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":48,"end":136,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fdesign-proposals-archive\u002Fblob\u002Fmain\u002Fscheduling\u002Fresources.md","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":160,"end":245,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fdesign-proposals-archive\u002Fblob\u002Fmain\u002Fnode\u002Fresource-qos.md","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":359,"end":472,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fcommunity\u002Fblob\u002Fmaster\u002Fcontributors\u002Fdesign-proposals\u002Fnode\u002Fpod-resource-management.md","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_157":{"__typename":"Paragraph","id":"e5433ac93edd_157","name":"35b9","type":"P","href":null,"layout":null,"metadata":null,"text":"Some work on Vertical Pod Autoscaling for Kubernetes has started: https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fcommunity\u002Fblob\u002Fmaster\u002Fcontributors\u002Fdesign-proposals\u002Fautoscaling\u002Fvertical-pod-autoscaler.md. There have been proposals to implement oversubscription also (https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fenhancements\u002Fissues\u002F355). As for horizontal scaling, resource monitoring infrastructure is a prerequisite.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":66,"end":186,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fcommunity\u002Fblob\u002Fmaster\u002Fcontributors\u002Fdesign-proposals\u002Fautoscaling\u002Fvertical-pod-autoscaler.md","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":250,"end":303,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fenhancements\u002Fissues\u002F355","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_158":{"__typename":"Paragraph","id":"e5433ac93edd_158","name":"db58","type":"P","href":null,"layout":null,"metadata":null,"text":"If managing cluster-level sharing using ResourceQuota and LimitRange, oversubscription can be done at that level also. The original designs were described by https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fdesign-proposals-archive\u002Fblob\u002Fmain\u002Fresource-management\u002Fadmission_control_limit_range.md and https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fdesign-proposals-archive\u002Fblob\u002Fmain\u002Fresource-management\u002Fadmission_control_resource_quota.md, with improvements in https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fdesign-proposals-archive\u002Fblob\u002Fmain\u002Fresource-management\u002Fresource-quota-scoping.md.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":158,"end":275,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fdesign-proposals-archive\u002Fblob\u002Fmain\u002Fresource-management\u002Fadmission_control_limit_range.md","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":280,"end":400,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fdesign-proposals-archive\u002Fblob\u002Fmain\u002Fresource-management\u002Fadmission_control_resource_quota.md","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":423,"end":533,"href":"https:\u002F\u002Fgithub.com\u002Fkubernetes\u002Fdesign-proposals-archive\u002Fblob\u002Fmain\u002Fresource-management\u002Fresource-quota-scoping.md","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:e5433ac93edd_159":{"__typename":"Paragraph","id":"e5433ac93edd_159","name":"f4c5","type":"P","href":null,"layout":null,"metadata":null,"text":"Ok, this topic doesn’t fit into a Twitter form factor very well. Maybe some day I’ll get around to writing this up more in long form. For now, that’s about all I have time for, but questions are welcome.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"CollectionViewerEdge:collectionId:5b301f10ddcd-viewerId:lo_e155128c7aa7":{"__typename":"CollectionViewerEdge","id":"collectionId:5b301f10ddcd-viewerId:lo_e155128c7aa7","isEditor":false,"isMuting":false},"ImageMetadata:1*jWhTrIoYwTUdKuVXycqAaw.png":{"__typename":"ImageMetadata","id":"1*jWhTrIoYwTUdKuVXycqAaw.png","originalWidth":800,"originalHeight":152},"PostViewerEdge:postId:2fe1988b522a-viewerId:lo_e155128c7aa7":{"__typename":"PostViewerEdge","shouldIndexPostForExternalSearch":true,"id":"postId:2fe1988b522a-viewerId:lo_e155128c7aa7"},"Tag:kubernetes":{"__typename":"Tag","id":"kubernetes","displayTitle":"Kubernetes","normalizedTagSlug":"kubernetes"},"Post:2fe1988b522a":{"__typename":"Post","id":"2fe1988b522a","collection":{"__ref":"Collection:5b301f10ddcd"},"content({\"postMeteringOptions\":{}})":{"__typename":"PostContent","isLockedPreviewOnly":false,"bodyModel":{"__typename":"RichText","sections":[{"__typename":"Section","name":"77ec","startIndex":0,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null}],"paragraphs":[{"__ref":"Paragraph:e5433ac93edd_0"},{"__ref":"Paragraph:e5433ac93edd_1"},{"__ref":"Paragraph:e5433ac93edd_2"},{"__ref":"Paragraph:e5433ac93edd_3"},{"__ref":"Paragraph:e5433ac93edd_4"},{"__ref":"Paragraph:e5433ac93edd_5"},{"__ref":"Paragraph:e5433ac93edd_6"},{"__ref":"Paragraph:e5433ac93edd_7"},{"__ref":"Paragraph:e5433ac93edd_8"},{"__ref":"Paragraph:e5433ac93edd_9"},{"__ref":"Paragraph:e5433ac93edd_10"},{"__ref":"Paragraph:e5433ac93edd_11"},{"__ref":"Paragraph:e5433ac93edd_12"},{"__ref":"Paragraph:e5433ac93edd_13"},{"__ref":"Paragraph:e5433ac93edd_14"},{"__ref":"Paragraph:e5433ac93edd_15"},{"__ref":"Paragraph:e5433ac93edd_16"},{"__ref":"Paragraph:e5433ac93edd_17"},{"__ref":"Paragraph:e5433ac93edd_18"},{"__ref":"Paragraph:e5433ac93edd_19"},{"__ref":"Paragraph:e5433ac93edd_20"},{"__ref":"Paragraph:e5433ac93edd_21"},{"__ref":"Paragraph:e5433ac93edd_22"},{"__ref":"Paragraph:e5433ac93edd_23"},{"__ref":"Paragraph:e5433ac93edd_24"},{"__ref":"Paragraph:e5433ac93edd_25"},{"__ref":"Paragraph:e5433ac93edd_26"},{"__ref":"Paragraph:e5433ac93edd_27"},{"__ref":"Paragraph:e5433ac93edd_28"},{"__ref":"Paragraph:e5433ac93edd_29"},{"__ref":"Paragraph:e5433ac93edd_30"},{"__ref":"Paragraph:e5433ac93edd_31"},{"__ref":"Paragraph:e5433ac93edd_32"},{"__ref":"Paragraph:e5433ac93edd_33"},{"__ref":"Paragraph:e5433ac93edd_34"},{"__ref":"Paragraph:e5433ac93edd_35"},{"__ref":"Paragraph:e5433ac93edd_36"},{"__ref":"Paragraph:e5433ac93edd_37"},{"__ref":"Paragraph:e5433ac93edd_38"},{"__ref":"Paragraph:e5433ac93edd_39"},{"__ref":"Paragraph:e5433ac93edd_40"},{"__ref":"Paragraph:e5433ac93edd_41"},{"__ref":"Paragraph:e5433ac93edd_42"},{"__ref":"Paragraph:e5433ac93edd_43"},{"__ref":"Paragraph:e5433ac93edd_44"},{"__ref":"Paragraph:e5433ac93edd_45"},{"__ref":"Paragraph:e5433ac93edd_46"},{"__ref":"Paragraph:e5433ac93edd_47"},{"__ref":"Paragraph:e5433ac93edd_48"},{"__ref":"Paragraph:e5433ac93edd_49"},{"__ref":"Paragraph:e5433ac93edd_50"},{"__ref":"Paragraph:e5433ac93edd_51"},{"__ref":"Paragraph:e5433ac93edd_52"},{"__ref":"Paragraph:e5433ac93edd_53"},{"__ref":"Paragraph:e5433ac93edd_54"},{"__ref":"Paragraph:e5433ac93edd_55"},{"__ref":"Paragraph:e5433ac93edd_56"},{"__ref":"Paragraph:e5433ac93edd_57"},{"__ref":"Paragraph:e5433ac93edd_58"},{"__ref":"Paragraph:e5433ac93edd_59"},{"__ref":"Paragraph:e5433ac93edd_60"},{"__ref":"Paragraph:e5433ac93edd_61"},{"__ref":"Paragraph:e5433ac93edd_62"},{"__ref":"Paragraph:e5433ac93edd_63"},{"__ref":"Paragraph:e5433ac93edd_64"},{"__ref":"Paragraph:e5433ac93edd_65"},{"__ref":"Paragraph:e5433ac93edd_66"},{"__ref":"Paragraph:e5433ac93edd_67"},{"__ref":"Paragraph:e5433ac93edd_68"},{"__ref":"Paragraph:e5433ac93edd_69"},{"__ref":"Paragraph:e5433ac93edd_70"},{"__ref":"Paragraph:e5433ac93edd_71"},{"__ref":"Paragraph:e5433ac93edd_72"},{"__ref":"Paragraph:e5433ac93edd_73"},{"__ref":"Paragraph:e5433ac93edd_74"},{"__ref":"Paragraph:e5433ac93edd_75"},{"__ref":"Paragraph:e5433ac93edd_76"},{"__ref":"Paragraph:e5433ac93edd_77"},{"__ref":"Paragraph:e5433ac93edd_78"},{"__ref":"Paragraph:e5433ac93edd_79"},{"__ref":"Paragraph:e5433ac93edd_80"},{"__ref":"Paragraph:e5433ac93edd_81"},{"__ref":"Paragraph:e5433ac93edd_82"},{"__ref":"Paragraph:e5433ac93edd_83"},{"__ref":"Paragraph:e5433ac93edd_84"},{"__ref":"Paragraph:e5433ac93edd_85"},{"__ref":"Paragraph:e5433ac93edd_86"},{"__ref":"Paragraph:e5433ac93edd_87"},{"__ref":"Paragraph:e5433ac93edd_88"},{"__ref":"Paragraph:e5433ac93edd_89"},{"__ref":"Paragraph:e5433ac93edd_90"},{"__ref":"Paragraph:e5433ac93edd_91"},{"__ref":"Paragraph:e5433ac93edd_92"},{"__ref":"Paragraph:e5433ac93edd_93"},{"__ref":"Paragraph:e5433ac93edd_94"},{"__ref":"Paragraph:e5433ac93edd_95"},{"__ref":"Paragraph:e5433ac93edd_96"},{"__ref":"Paragraph:e5433ac93edd_97"},{"__ref":"Paragraph:e5433ac93edd_98"},{"__ref":"Paragraph:e5433ac93edd_99"},{"__ref":"Paragraph:e5433ac93edd_100"},{"__ref":"Paragraph:e5433ac93edd_101"},{"__ref":"Paragraph:e5433ac93edd_102"},{"__ref":"Paragraph:e5433ac93edd_103"},{"__ref":"Paragraph:e5433ac93edd_104"},{"__ref":"Paragraph:e5433ac93edd_105"},{"__ref":"Paragraph:e5433ac93edd_106"},{"__ref":"Paragraph:e5433ac93edd_107"},{"__ref":"Paragraph:e5433ac93edd_108"},{"__ref":"Paragraph:e5433ac93edd_109"},{"__ref":"Paragraph:e5433ac93edd_110"},{"__ref":"Paragraph:e5433ac93edd_111"},{"__ref":"Paragraph:e5433ac93edd_112"},{"__ref":"Paragraph:e5433ac93edd_113"},{"__ref":"Paragraph:e5433ac93edd_114"},{"__ref":"Paragraph:e5433ac93edd_115"},{"__ref":"Paragraph:e5433ac93edd_116"},{"__ref":"Paragraph:e5433ac93edd_117"},{"__ref":"Paragraph:e5433ac93edd_118"},{"__ref":"Paragraph:e5433ac93edd_119"},{"__ref":"Paragraph:e5433ac93edd_120"},{"__ref":"Paragraph:e5433ac93edd_121"},{"__ref":"Paragraph:e5433ac93edd_122"},{"__ref":"Paragraph:e5433ac93edd_123"},{"__ref":"Paragraph:e5433ac93edd_124"},{"__ref":"Paragraph:e5433ac93edd_125"},{"__ref":"Paragraph:e5433ac93edd_126"},{"__ref":"Paragraph:e5433ac93edd_127"},{"__ref":"Paragraph:e5433ac93edd_128"},{"__ref":"Paragraph:e5433ac93edd_129"},{"__ref":"Paragraph:e5433ac93edd_130"},{"__ref":"Paragraph:e5433ac93edd_131"},{"__ref":"Paragraph:e5433ac93edd_132"},{"__ref":"Paragraph:e5433ac93edd_133"},{"__ref":"Paragraph:e5433ac93edd_134"},{"__ref":"Paragraph:e5433ac93edd_135"},{"__ref":"Paragraph:e5433ac93edd_136"},{"__ref":"Paragraph:e5433ac93edd_137"},{"__ref":"Paragraph:e5433ac93edd_138"},{"__ref":"Paragraph:e5433ac93edd_139"},{"__ref":"Paragraph:e5433ac93edd_140"},{"__ref":"Paragraph:e5433ac93edd_141"},{"__ref":"Paragraph:e5433ac93edd_142"},{"__ref":"Paragraph:e5433ac93edd_143"},{"__ref":"Paragraph:e5433ac93edd_144"},{"__ref":"Paragraph:e5433ac93edd_145"},{"__ref":"Paragraph:e5433ac93edd_146"},{"__ref":"Paragraph:e5433ac93edd_147"},{"__ref":"Paragraph:e5433ac93edd_148"},{"__ref":"Paragraph:e5433ac93edd_149"},{"__ref":"Paragraph:e5433ac93edd_150"},{"__ref":"Paragraph:e5433ac93edd_151"},{"__ref":"Paragraph:e5433ac93edd_152"},{"__ref":"Paragraph:e5433ac93edd_153"},{"__ref":"Paragraph:e5433ac93edd_154"},{"__ref":"Paragraph:e5433ac93edd_155"},{"__ref":"Paragraph:e5433ac93edd_156"},{"__ref":"Paragraph:e5433ac93edd_157"},{"__ref":"Paragraph:e5433ac93edd_158"},{"__ref":"Paragraph:e5433ac93edd_159"}]},"validatedShareKey":"","shareKeyCreator":null},"creator":{"__ref":"User:ccdbe9a99319"},"inResponseToEntityType":null,"isLocked":false,"isMarkedPaywallOnly":false,"lockedSource":"LOCKED_POST_SOURCE_NONE","mediumUrl":"https:\u002F\u002Fitnext.io\u002Fthe-technical-history-of-kubernetes-2fe1988b522a","primaryTopic":null,"topics":[],"isPublished":true,"latestPublishedVersion":"e5433ac93edd","visibility":"PUBLIC","postResponses":{"__typename":"PostResponses","count":0},"clapCount":141,"allowResponses":true,"isLimitedState":false,"title":"The Technical History of Kubernetes","isSeries":false,"sequence":null,"uniqueSlug":"the-technical-history-of-kubernetes-2fe1988b522a","socialTitle":"","socialDek":"","canonicalUrl":"","metaDescription":"","latestPublishedAt":1730885592156,"readingTime":24.63396226415094,"previewContent":{"__typename":"PreviewContent","subtitle":"Ideas and learnings from Borg and Omega that made their way into Kubernetes."},"previewImage":{"__ref":"ImageMetadata:0*VKpP9zjO1Yc21_C8"},"isShortform":false,"seoTitle":"","firstPublishedAt":1711123662686,"updatedAt":1730885592240,"shortformType":"SHORTFORM_TYPE_LINK","seoDescription":"","viewerEdge":{"__ref":"PostViewerEdge:postId:2fe1988b522a-viewerId:lo_e155128c7aa7"},"isSuspended":false,"license":"ALL_RIGHTS_RESERVED","tags":[{"__ref":"Tag:kubernetes"}],"isNewsletter":false,"statusForCollection":"APPROVED","pendingCollection":null,"detectedLanguage":"en","wordCount":6475,"layerCake":0,"responsesLocked":false}}</script><script src="https://cdn-client.medium.com/lite/static/js/manifest.1a594fe1.js"></script><script src="https://cdn-client.medium.com/lite/static/js/9865.1496d74a.js"></script><script src="https://cdn-client.medium.com/lite/static/js/main.ae8a5741.js"></script><script src="https://cdn-client.medium.com/lite/static/js/instrumentation.d9108df7.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/reporting.ff22a7a5.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/9120.5df29668.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5049.d1ead72d.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/4810.6318add7.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6618.db187378.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/1386.90da86c2.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/9977.5b3eb23a.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/719.ec375b59.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5250.9f9e01d2.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6349.b071a958.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2648.26563adf.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/8393.826a25fb.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/1443.a8a73f48.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/3735.afb7e926.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5642.4f29140a.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6546.cd03f950.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6834.08de95de.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/7346.72622eb9.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2420.2a5e2d95.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/839.ca7937c2.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/7975.d195c6f1.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2106.21ff89d3.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/7394.e27cfbf2.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2961.00a48598.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/8204.138a844a.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/4391.59acaed3.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/PostPage.MainContent.fb868496.chunk.js"></script><script>window.main();</script></body></html>