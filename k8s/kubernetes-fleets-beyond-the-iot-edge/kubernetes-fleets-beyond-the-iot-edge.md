<!--
title: Kubernetes Fleets：超越IoT边缘
cover: https://cdn.thenewstack.io/media/2025/03/57a97849-chip.jpg
summary: 突破边缘！企业拥抱 Kubernetes 集群，替换传统 VM 堆栈。构建云原生堆栈需考虑网络、服务网格等，关注 CNCF 项目。部署要快，兼顾 VM 迁移。状态、存储、可观测性是关键。硬件生命周期管理和 RTO/RPO 不容忽视！
-->

突破边缘！企业拥抱 Kubernetes Fleet，替换传统 VM 堆栈。构建云原生堆栈需考虑网络、服务网格等，关注 CNCF 项目。部署要快，兼顾 VM 迁移。状态、存储、可观测性是关键。硬件生命周期管理和 RTO/RPO 不容忽视！

> 译自：[Kubernetes Fleets: Beyond the IoT Edge](https://thenewstack.io/kubernetes-fleets-beyond-the-iot-edge/)
> 
> 作者：Chris Brown

在技术飞速发展的今天，十年就像一个世纪。十年前，由于移动设备的普及，物联网开始蓬勃发展。 各公司都在寻找[处理来自其设备网络的数据的方法](https://thenewstack.io/5-ways-data-protection-for-kubernetes-is-different/)，而公共云已准备好提供解决方案。

对于那些寻求本地处理的人来说，仅仅成立一年多的 [Kubernetes](https://thenewstack.io/kubernetes/) 是一个自然的选择。 Kubernetes 允许这些公司[在本地部署无数应用程序](https://thenewstack.io/a-look-at-kubernetes-deployment/)，这些应用程序模仿云中可用的服务并与之集成，从而使它们在部署位置方面具有令人难以置信的灵活性。 借用网络术语，这通常被称为“边缘”。

## 从边缘到 Fleet

十年后，Kubernetes 的发展势头依然强劲。 不仅新的应用程序默认以云原生方式构建，而且现有的应用程序也经过了重构，并且现在可以使用云原生版本的第三方工具。 利用物联网蓬勃发展的相同部署灵活性和开发速度，各公司已经替换了现有的计算堆栈，并使用 Kubernetes 扩展到了独特的新位置。 例如：

- 用集中管理的 Kubernetes 堆栈替换每个商店分支中的 VM 堆栈
- 在每艘游轮上运行 Kubernetes 堆栈以提供船上服务
- 战斗机在执行任务时运行 Kubernetes 以处理数据并实时响应

传统上，这些并未被认为是边缘，但从根本上讲，它们的构造是相同的。 换句话说，Kubernetes 不仅允许我们在边缘运行机器学习工作负载，而且任何工作负载都可以在您的边缘运行。 这就是新的边缘：Kubernetes Fleet。

那么，[在规划和构建 Kubernetes Fleet 时有哪些关键考虑因素](https://thenewstack.io/the-state-of-kubernetes-key-challenges-and-the-role-of-ai/)？

## 构建堆栈

部署基本的 Kubernetes 集群很容易； 添加所有功能才是困难所在。 如此多的工具进入企业就绪的 Kubernetes 堆栈（例如网络、入口网关、策略管理和服务网格），您必须确保无论选择部署什么，都可以大规模管理。 并且不要忘记可支持性。

寻找那些已经建立并被广泛采用的项目。 Cloud Native Computing Foundation 有一个完整的项目列表供您使用。 您当前的工作负载可以告诉您需要什么样的功能，但同样重要的是不要将自己锁定。 您可以选择一个网络堆栈，但稍后会意识到另一个网络堆栈提供了独特的功能或更兼容的堆栈，并且您不想被困住。 寻找足够灵活的解决方案，以适应更换组件或并行运行组件，以确保无论如何，您都可以使用合适的工具来完成工作。

## 部署和未来扩展

许多较小堆栈的自然结果是，新部署发生的频率更高。 部署不再是每隔几年发生一次的事情。 在比较 Kubernetes Fleet 管理解决方案时，重要的是要同时考虑部署基本解决方案需要多长时间，以及添加其他集群需要多长时间。 您越快开始使用基本解决方案，就可以越快地挑战和更新您的期望，并适应应用程序不断增长的需求。 您越快部署新集群，就可以越快地进行扩展。

## 迁移和拆分堆栈

虽然许多公司都在部署纯 Kubernetes 堆栈，但这并不适用于所有人。 运营商通常会发现，除了 Kubernetes 集群之外，他们还需要少量其他 VM。 这种情况可能会在有限的时间内发生。 例如，可能存在一个迁移期或转换期，在此期间两者都需要并行运行，或者可能有一些应用程序无法容器化。 很少有运营商会在远程站点上完全采用 Kubernetes，但最终会发现一个新的用例，该用例无法轻易地容器化。

在构建 Kubernetes Fleet 时，重要的是要考虑如何管理这些拆分的工作负载。 这两个系统应该如何紧密地协同工作，或者应该将 Kubernetes 和 VM 视为完全独立的堆栈？ 当您需要在两个环境之间移动工作负载时，您将如何做？

## 处理状态和存储

随着 Kubernetes 扩展到新的工作负载，需要状态和存储的容器数量猛增。 存储不应是事后才考虑的事情； 在规划 Fleet 时，它需要成为头等大事。

当然，这不仅仅是物理存储本身。还需要考虑备份。与任何企业工作负载一样，请务必考虑您的恢复时间目标 （RTO） 和恢复点目标 （RPO）。仅仅因为集群不在数据中心并不意味着这些注意事项会发生变化。

## 硬件的生命周期管理

当然，任何 Kubernetes Fleet 管理解决方案都将处理 Kubernetes 本身以及核心服务的升级，但这并不是这里唯一需要担心的部分。硬件也需要更新。

在规划解决方案时，请考虑如何处理固件更新，例如基本输入/输出系统 （BIOS）。在发布新 CVE 和缓解问题之间，公司愿意承担什么程度的风险敞口？您将如何审核以确保按预期应用更新？

## 预防胜于治疗

在开始时花时间考虑 Kubernetes Fleet 中的注意事项，将为您节省大量的后续麻烦。早期的决策很容易产生可怕的技术债务，这些债务需要比正确规划花费更长的时间来修复。

Nutanix 很高兴今年在伦敦赞助 KubeCon。欢迎来我们的展位与我们讨论您的 Kubernetes 计划，了解我们如何在任何地方帮助您进行虚拟化、Kubernetes 和存储。