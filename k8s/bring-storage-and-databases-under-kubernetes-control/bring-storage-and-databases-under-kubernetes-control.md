
<!--
title: 将存储和数据库置于 Kubernetes 的控制之下
cover: https://cdn.thenewstack.io/media/2024/09/ee08b09c-storage.jpg
-->

将存储和数据库置于 Kubernetes 控制之下，免去了开发人员在构建和部署应用程序时访问它们的额外步骤。

> 译自 [Bring Storage and Databases Under Kubernetes Control](https://thenewstack.io/bring-storage-and-databases-under-kubernetes-control/)，作者 Murli Thirumale。

在这个时代，企业正在竭尽全力简化软件开发流程。因此，越来越多的软件开发团队开始依赖 Kubernetes，这主要是因为它为容器化应用程序开发提供了灵活性和敏捷性。事实上，根据 [最近一项针对 Kubernetes 专家的调查](https://www.purestorage.com/company/newsroom/press-releases/survey-reveals-surge-in-cloud-native-adoption.html)，80% 的组织将在未来五年内在 [Kubernetes](https://thenewstack.io/kubernetes/) 上构建其大部分应用程序。

现在，组织是时候将 Kubernetes 的使用提升到一个新的水平，将其 [存储](https://thenewstack.io/storage/) 和 [数据库](https://thenewstack.io/how-to-run-databases-in-kubernetes/) 置于 Kubernetes 的控制之下。这将使开发人员在构建和部署应用程序时，无需再执行访问所需存储的额外步骤。事实上，在 Kubernetes 中管理存储和数据库有多种好处，这些好处直击开发团队最初使用 Kubernetes 的核心原因。

## Kubernetes 的核心和目的

自从“一次构建，随处部署”这句话首次出现以来，DevOps 世界已经走过了漫长的道路。虽然这句话的核心含义仍然驱动着当今的许多应用程序开发，但添加一个额外的短语可能是合适的：“一次构建，随处部署，速度更快”。

这就是为什么平台工程正在慢慢地从单一的工作描述转变为 DevOps 中的一个业务职能。“更快”的概念与平台工程存在的两个原因直接相关：

* 通过为代码升级、CI/CD 管道集成、存储、网络和计算需求提供自助服务功能，提高开发人员速度（也称为减少开发人员的辛劳），从而实现更快的应用程序测试和试点。
* 通过为不同的部署规模提供 T 恤尺寸和黄金路径，以实现快速、预先配置的基础设施，从而更快地投入生产（或减少运营辛劳）。这包括添加护栏，以最大程度地减少生产上线期间的延迟和故障。此外，平台工程增加了基础设施资源的弹性扩展，而备份和灾难恢复方面的弹性是减少第 2 天运营问题的关键因素。

随着开发人员世界继续朝着更快的开发和更快的创新迈进，适当的数据存储有时会被遗忘，直到真正需要它的那一刻。在那一刻，即使开发人员拥有应用程序和容器，并且渴望进行测试，他们现在也必须：

1.  停止他们的进度。
2.  找存储管理员。
3.  请求继续所需的存储。

想象一下你在开车。你准备进入入口匝道，你的方向盘、导航和变速杆都在你的指尖。然而，换车道所需的指示灯却位于后座。这会降低你前往旅程中下一个地点的能力。借助 Kubernetes 下的数据存储，可以更轻松地获得“进入入口匝道”进行测试和生产所需的敏捷性，从而提供更加简化的 DevOps 体验。

## 将存储置于 Kubernetes 控制之下的好处

虽然将存储和数据库置于 Kubernetes 控制之下的总体好处在于敏捷性，但这种转变也有一些非常具体的好处。让我们来看看其中的一些好处：

- **面向应用和数据的开发者自助服务**：计算、网络、存储、备份和灾难恢复的服务请求都可以通过免工单供应同时进行。不幸的是，另一种选择是针对每种服务采用分散且孤立的方法。当数据存储处于 Kubernetes 控制之下时，平台工程师可以为不同的应用程序类别创建存储黄金路径和 T 恤尺寸。
- **应用和数据的统一智能管理**：在 Kubernetes 内管理数据时，您将拥有一个通用的控制平面，这将使运维团队的管理更加简单。这也将更容易与 K8s API 深度集成并为集群操作增加价值。例如，您可以避开因升级而关闭的节点，并避免在同一机架上复制节点。
- **安全性和治理**：Kubernetes 将为您提供基于角色的访问控制，确保只有授权方才能访问您的敏感数据。K8s 还会轮换密钥和访问凭证，这有助于减少数据泄露。
- **性能**：Kubernetes 数据管理提供存储优化和更快的分配，以帮助您的应用程序获得更好的性能。您能够 [在扩展计算需求的同时扩展存储](https://thenewstack.io/why-compute-and-storage-should-be-decoupled-for-log-management-at-scale/)，这通常发生在应用程序增长时。分布式存储模型减少了后端存储在规模上的连接压力。
- **成本**：在 Kubernetes 下管理数据允许不同的应用程序层级具有不同的存储性能，从而更好地控制总存储成本。
- **应用弹性**：部署高可用性、备份和灾难恢复，这些都是应用程序一致的数据操作，这得益于容器粒度卷和快照。
- **数据库即服务**：开发人员使用各种开源数据库；然而，许多 IT 部门并不支持其中的大多数。如果您使用容器化版本的数据库和 Kubernetes 运算符，您的组织可以以自助服务模式向开发人员提供各种数据库，并内置弹性和简单的第一天和第二天操作。

## 那么我该如何做到这一点呢？

将您的数据库和存储置于 Kubernetes 的控制之下最终取决于您使用的数据服务平台。许多平台工程师和 IT 团队都意识到将任何类型的数据从一个环境迁移到另一个环境所带来的风险。但是，借助 Pure Storage 的 Portworx（一个与 Kubernetes 无缝协作的数据服务平台），组织可以创建一条从数据库当前所在位置到 Kubernetes 的直接路径，同时还能够无缝连接到其他数据库。

## 将 Kubernetes 提升到一个新的水平

随着世界需要以更快的速度和更大的规模进行创新，开发人员将成为创新的支柱。因此，组织、IT 部门和平台工程师有责任创建一个最大限度地提高开发人员时间和资源的 DevOps 环境。在 Kubernetes 中控制存储和数据库非常适合实现这一目标。它消除了生产过程中不必要的步骤，同时增加了宝贵的 DevOps 优势，从而增强开发人员的能力。如果说数据存储是任何优秀应用程序的基础，那么数据存在于每天创建应用程序的地方也是理所当然的。
