# Build an AI-Powered Question-Answering Application
![Featued image for: Build an AI-Powered Question-Answering Application](https://cdn.thenewstack.io/media/2024/09/6e14ce9f-ai-powered-question-answering-application-1024x576.jpg)
You’ve got a ton of data — structured, unstructured, you name it — and you want to put it to use in an application. Whether you’re looking to gain insights or find answers, you need a solution that delivers results quickly and accurately. With the right tools, this might be easier than you think.

The old standby of keyword searching has its limits, especially when [unstructured data](https://zilliz.com/learn/introduction-to-unstructured-data?utm_source=vendor&utm_medium=referral&utm_campaign=2024-09-20_blog_haystack-milvus_tns) enters the mix. At that point, the chances of getting quick, relevant results start to fade. But there’s a way forward. By combining [Milvus](https://zilliz.com/what-is-milvus?utm_source=vendor&utm_medium=referral&utm_campaign=2024-09-20_blog_haystack-milvus_tns), an open source vector database, with [Haystack](https://haystack.deepset.ai/) 2.0, an open source framework from Deepset for building end-to-end large language model ([LLM](https://zilliz.com/glossary/large-language-models-(llms)?utm_source=vendor&utm_medium=referral&utm_campaign=2024-09-20_blog_haystack-milvus_tns)) applications and [retrieval augmented generation](https://zilliz.com/learn/Retrieval-Augmented-Generation?utm_source=vendor&utm_medium=referral&utm_campaign=2024-09-20_blog_haystack-milvus_tns) (RAG) pipelines, you can build the kind of advanced applications that users and developers crave.

In this article, I’ll explain how to harness the power of Milvus and Haystack 2.0 to create an AI-powered question-answering application using retrieval-augmented generation (RAG). Let’s dive in!

**Data Storage With Milvus**
To use data, you need to store it somewhere first. Maintained by [Zilliz](https://zilliz.com?utm_source=vendor&utm_medium=referral&utm_campaign=2024-09-20_blog_haystack-milvus_tns) developers, Milvus is an open source [vector database](https://zilliz.com/learn/what-is-vector-database?utm_source=vendor&utm_medium=referral&utm_campaign=2024-09-20_blog_haystack-milvus_tns) designed to handle high-dimensional vectors efficiently. Vectors are numerical representations of unstructured data (text, photos, audio files, etc.) in a high-dimensional space.

Converting data to a [vector embedding](https://zilliz.com/glossary/vector-embeddings?utm_source=vendor&utm_medium=referral&utm_campaign=2024-09-20_blog_haystack-milvus_tns) preserves the semantic meaning and relationships between data points. The closer these [embeddings](https://thenewstack.io/vector-embeddings-explained-a-beginners-guide-to-powerful-ai) are located in this space, the more semantically relevant they are. When you store these vectors in a vector database, you quickly amass related embeddings, making searches for contextually relevant data more efficient.

## Factors to Consider When Selecting a Vector Database
It’s important to consider critical functionality when [selecting a vector database](https://zilliz.com/blog/how-to-evaluate-a-vector-database?utm_source=vendor&utm_medium=referral&utm_campaign=2024-09-20_blog_haystack-milvus_tns) for your RAG pipeline.

- High-dimensional
**vector indexing:**Is the vector database optimized for indexing and searching high-dimensional vectors? It should be able to utilize advanced indexing techniques, such as hierarchical navigable small world graphs ([HNSW](https://zilliz.com/learn/hierarchical-navigable-small-worlds-HNSW?utm_source=vendor&utm_medium=referral&utm_campaign=2024-09-20_blog_haystack-milvus_tns)) or inverted file systems ([IVF](https://zilliz.com/learn/vector-index?utm_source=vendor&utm_medium=referral&utm_campaign=2024-09-20_blog_haystack-milvus_tns)), to create efficient index structures. These index structures enable fast similarity searches even in large-scale data sets with millions or billions of vectors. **Scalability and performance:**Even though your prototype might use a small data set, it’s important to plan for[production scale](https://thenewstack.io/scaling-databases-to-meet-enterprise-genai-demands). Can your vector database handle massive amounts of vector data without sacrificing performance? It should scale horizontally across multiple nodes or machines, allowing distributed storage and parallel processing. This scalability ensures that it can accommodate growing data sets and high query throughput without compromising the speed and accuracy of your application.**Hybrid search:**Your vector database should support[hybrid searches](https://zilliz.com/blog/a-review-of-hybrid-search-in-milvus?utm_source=vendor&utm_medium=referral&utm_campaign=2024-09-20_blog_haystack-milvus_tns), enabling you to retrieve vectors across different modalities or generated by various[embedding models](https://zilliz.com/ai-models?utm_source=vendor&utm_medium=referral&utm_campaign=2024-09-20_blog_haystack-milvus_tns). Additionally, it should allow you to combine hybrid vector search with keyword matching for more complex queries. This capability simplifies finding the most relevant items in a vector database, whether based on[metadata](https://zilliz.com/blog/metadata-filtering-hybrid-search-or-agent-in-rag-applications?utm_source=vendor&utm_medium=referral&utm_campaign=2024-09-20_blog_haystack-milvus_tns)or vector embeddings representing images, audio, text and more.Make sure your vector database integrates seamlessly with popular[Integration](https://zilliz.com/product/integrations?utm_source=vendor&utm_medium=referral&utm_campaign=2024-09-20_blog_haystack-milvus_tns)with popular machine learning models:[machine learning models](https://zilliz.com/ai-models?utm_source=vendor&utm_medium=referral&utm_campaign=2024-09-20_blog_haystack-milvus_tns), such as[OpenAI](https://zilliz.com/learn/guide-to-using-openai-text-embedding-models?utm_source=vendor&utm_medium=referral&utm_campaign=2024-09-20_blog_haystack-milvus_tns)text embedding models,[Cohere](https://zilliz.com/ai-models/embed-multilingual-v3.0?utm_source=vendor&utm_medium=referral&utm_campaign=2024-09-20_blog_haystack-milvus_tns)multilingual models and[Voyage AI](https://zilliz.com/ai-models/voyage-code-2?utm_source=vendor&utm_medium=referral&utm_campaign=2024-09-20_blog_haystack-milvus_tns)code embedding models, to streamline the conversion of unstructured data into vector embeddings for efficient similarity retrieval.**Support for multiple indexes and distance metrics:**Different indexing algorithms and[distance metrics](https://zilliz.com/blog/similarity-metrics-for-vector-search?utm_source=vendor&utm_medium=referral&utm_campaign=2024-09-20_blog_haystack-milvus_tns)cater to different use cases and data characteristics. Depending on your specific requirements, you should be able to[choose between indexes](https://zilliz.com/learn/how-to-pick-a-vector-index-in-milvus-visual-guide?utm_source=vendor&utm_medium=referral&utm_campaign=2024-09-20_blog_haystack-milvus_tns)such as HNSW, IVF,[ANNOY](https://zilliz.com/learn/approximate-nearest-neighbor-oh-yeah-ANNOY?utm_source=vendor&utm_medium=referral&utm_campaign=2024-09-20_blog_haystack-milvus_tns)or[FAISS](https://zilliz.com/learn/faiss?utm_source=vendor&utm_medium=referral&utm_campaign=2024-09-20_blog_haystack-milvus_tns). Additionally, you may want to choose distance metrics such as Euclidean distance, cosine similarity and inner product, allowing you to select the most appropriate metric for your application.
## Building Pipelines With Haystack 2.0
Once your data is safely stored, you need to build pipelines to use it effectively. This is where Haystack 2.0 comes into play. Haystack is an open source [Python](https://roadmap.sh/python) framework for building production-ready LLM applications, RAG pipelines and modern search systems that work intelligently with large document collections.

How do you build Haystack pipelines for an LLM application? Haystack gives you components you can link to build custom data pipelines. The components can help you perform tasks like document retrieval, text generation or summarization. You can also build your own components or use one of the example pipelines as a starting point.

[Haystack 2.0 also integrates seamlessly with Milvus](https://zilliz.com/product/integrations/haystack?utm_source=vendor&utm_medium=referral&utm_campaign=2024-09-20_blog_haystack-milvus_tns). This means developers can quickly connect their data pipelines with Milvus data storage and retrieval capabilities, accelerating the development of RAG pipelines and LLM applications.
## Build an AI-Powered Application
In the following sections, I’ll show you how to build an AI-powered question-answering recipe application using the popular RAG technique with Haystack 2.0 and the Milvus vector database.

### Setup and Installation
To get started building with Haystack and Milvus, the following instructions will walk you through building a sample RAG-based recipe application that lets you ask questions, request recipes and create meal plans from a set of popular vegan recipes. You can also use your own recipes to make it even more custom.

First and most importantly, make sure you have Python installed on your local machine. You’ll need version 3.6 or higher. If you need an update, grab one at the [Python page](https://www.python.org/).

To install the necessary packages:

1 |
pip install --upgrade pymilvus milvus-haystack markdown-it-py mdit_plain pypdf sentence-transformers |
### Build an Indexing Pipeline
Next, you need to build your indexing pipeline. Since this tutorial uses Milvus as the data store, your indexing pipeline, which processes and stores documents, will use MilvusDocumentStore.

Make sure you have some sample files to use and test with. Put your files in a folder called **recipe_files**. You can use the [sample files](https://drive.google.com/drive/folders/1n9yqq5Gl_HWfND5bTlrCwAOycMDt5EMj) used in this example, or you can use your own recipes. If you change the folder name or file path, update the example to reflect your choices. You may also want to implement error checking, handling and logging to the sample code to catch any issues that may arise along the way.

#### 1. Initialize the MilvusDocumentStore
#### 2. Configure the Necessary Components for Document Processing
#### 3. Index the Documents
This step adds the Haystack components to your pipeline. Make sure you configure inputs and outputs for each component and put them in the order you want them to run.

**4. **Run the Pipeline
Indexing processes the documents, converts them to text, splits them into chunks and embeds those chunks into high-dimensional vectors.

### Integrate the RAG Pipeline
The RAG pipeline combines document retrieval with answer generation using an LLM. For this example, you need an [OpenAI key](https://thenewstack.io/beginners-guide-to-openai-text-embedding-models). Set it as an environment variable, `OPENAI_API_KEY`
. See [Haystack’s documentation](https://docs.haystack.deepset.ai/docs/generators) for the full list of models it supports.

The RAG pipeline retrieves relevant documents based on the query, generates a prompt for the OpenAIGenerator using the retrieved documents and generates an answer using the LLM. It then returns the generated answer as the final output.

**Conclusion**
This was a basic example illustrating how to integrate Milvus with Haystack 2.0. Combining Milvus’ vector storage, indexing and retrieval capability with Haystack’s RAG pipelines lets you build systems that effectively process and evaluate documents to deliver relevant answers. Hopefully, this example will help jump-start your efforts to build advanced LLM applications.

[
YOUTUBE.COM/THENEWSTACK
Tech moves fast, don't miss an episode. Subscribe to our YouTube
channel to stream all our podcasts, interviews, demos, and more.
](https://youtube.com/thenewstack?sub_confirmation=1)