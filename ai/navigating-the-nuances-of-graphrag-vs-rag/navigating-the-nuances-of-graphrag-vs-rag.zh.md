虽然[大型语言模型（LLM）](https://thenewstack.io/what-is-a-large-language-model/)在构建 AI 应用和代理系统方面具有巨大的前景，但确保它们生成可靠且值得信赖的输出仍然是一个持续存在的挑战。有效的数据管理——特别是数据的存储、检索和访问方式——对于克服这个问题至关重要。[检索增强生成（RAG）](https://thenewstack.io/retrieval-augmented-generation-for-llms/)已经成为一种被广泛采用的策略，它将 LLM 的基础建立在超出其原始训练数据的外部知识之上。

RAG 的标准或基线实现通常依赖于基于向量的方法。虽然对于检索上下文相关的文档和参考资料有效，但基于向量的 RAG 在其他情况下也面临局限性，尤其是在应用程序需要强大的推理能力以及理解分布在大型知识库中的各种概念之间复杂关系的能力时。这可能导致输出令最终用户失望甚至误导最终用户。

为了解决这些限制，RAG 架构的一种变体，即 [GraphRAG](https://thenewstack.io/graphrag-explained-the-secret-to-enterprise-efficiency/)，[由微软研究院首次提出](https://www.microsoft.com/en-us/research/blog/graphrag-unlocking-llm-discovery-on-narrative-private-data/)，已经获得了关注。GraphRAG 将知识图谱与 LLM 集成，为某些用例提供了优于传统基于向量的 RAG 的独特优势。对于寻求构建更可靠的 AI 应用程序的开发人员来说，了解基于向量的 RAG 和 GraphRAG 的相对优势和劣势至关重要。

## RAG：基于嵌入的基线方法

在标准的基于向量的 RAG 系统中，用于增强 LLM 知识的底层数据首先被分割成块进行处理。使用嵌入模型，这些块随后被转换为称为嵌入的数字向量。然后通过搜索向量嵌入与用户查询嵌入相似的块来执行检索。此过程有效地识别在语义或上下文上与输入相关的文本片段。

[![图 1. 标准的基于向量的 RAG 实现的架构。](https://cdn.thenewstack.io/media/2025/06/80106f9e-image1-1024x341.png)](https://cdn.thenewstack.io/media/2025/06/80106f9e-image1-1024x341.png)

图 1. 标准的基于向量的 RAG 实现的架构。

这种基于嵌入的方法对于许多任务非常强大，例如查找关于特定主题的相关文档或段落。它将每个文档或块视为孤立的信息片段，并且主要依赖于向量表示捕获的语义相似性。

然而，这种仅仅依赖于语义相似性的做法可能成为一种限制。涉及不同实体（如人物、组织和概念）之间复杂逻辑关系的信息可能没有很强的语义重叠。

此外，通过将大型文档或知识库分解为较小的块，基于向量的方法可能会无意中丢失“全局”，例如总体结构、层次结构以及不同信息片段之间的链接。这使得基于向量的 RAG 难以处理需要理解不同检索信息片段之间关系的查询。

例如，对于基于向量的 RAG 来说，回答诸如“2026 年计划中涵盖的主题是什么？”之类的问题可能具有挑战性。即使文档包含讨论各种主题的部分，查询的关键词“主题”可能与文档中用于这些主题的特定术语没有很强的语义相似性，特别是如果它们分散在大型知识库中。

类似地，如果知识库的不同部分提到了“Jane Smith”、“ACME”和“可再生能源项目”之间的关系，那么诸如“Jane Smith 在 ACME 的可再生能源项目中担任什么角色？”之类的查询就会变得有问题。基于向量的 RAG 将这些提及视为孤立的块，难以连接提供准确、综合答案所需的点。

在不同实体之间建立这些逻辑连接，通常称为多跳检索或推理，这是基于向量的 RAG 经常不足的地方。

## GraphRAG：用知识图谱连接各个点

GraphRAG 以 RAG 建立的基础为基础，但引入了一个关键的增强功能：知识图谱的集成。知识图谱是一种结构化的信息表示方式。它由实体（即人物、地点、组织或概念等关键项目）和关系组成，这些关系定义了这些实体之间的连接方式。可以将知识图谱视为一张地图，明确显示不同信息片段之间的相互关系。

[![图 2. 基于 MongoDB 的 Wikipedia 页面的知识图谱可视化。](https://cdn.thenewstack.io/media/2025/06/69919392-image2.png)](https://cdn.thenewstack.io/media/2025/06/69919392-image2.png)

图 2. 基于 MongoDB 的 Wikipedia 页面的知识图谱可视化。

通过将知识图谱纳入检索过程，GraphRAG 不再将数据块视为孤立的单元。相反，它考虑了不同的知识片段如何通过图结构连接和关联。这种结构使使用 GraphRAG 的基于 LLM 的系统能够检索相关实体并推理它们的互连关系，从而为复杂问题提供更全面的答案并提高信息相关性。

GraphRAG 通过以下几个关键方式增强了 RAG 架构：

1. **响应准确性：** 将知识图谱集成到检索组件中可以显著提高准确性。最新的基准测试，包括 [AWS 合作伙伴 Lettra](https://aws.amazon.com/blogs/machine-learning/improving-retrieval-augmented-generation-accuracy-with-graphrag/) 的基准测试，表明 GraphRAG 可以持续提高准确性，Lettra 报告的增益高达 35%，尤其是在需要多步骤推理和基于关系的逻辑的查询中。这种增强的准确性源于遍历关系和综合以关系方式（而不仅仅是语义方式）连接的信息的能力。
2. **可解释性和透明度：** 与依赖于抽象数字向量的基于嵌入的方法不同，基于嵌入的方法难以理解为什么检索或认为某些块是相关的，而基于图的方法提供了更直观和可审计的文档和实体连接方式的表示。这为检索到的信息提供了更高的可解释性和透明度。开发人员和用户可以深入了解通过知识图谱检索相关数据所采用的路径。这种透明度还有助于优化数据检索模式，从而进一步提高准确性。
3. **基于层次结构和关系的查询：** GraphRAG 在理解知识库中的结构、层次结构和链接至关重要的场景中表现出色。如前所述，基于向量的 RAG 在这方面存在困难，因为分块会丢失这种结构上下文。GraphRAG 遍历关系的能力使其非常适合涉及多跳推理的查询。这直接解决了基于向量的 RAG 在理解不同位置提到的实体之间关系的局限性。GraphRAG 能够回答复杂的查询类型，例如“X 如何通过 Z 与 Y 相关？”，而这些查询仅靠语义相似性搜索无法实现。

虽然 GraphRAG 提供了显著的优势，但它也带来了一系列挑战。使用 GraphRAG 实现比基于向量的 RAG 更好的准确性通常取决于用例。

GraphRAG 的主要挑战是创建知识图谱本身。这通常涉及一个额外的步骤，其中 LLM 用于从源数据中提取实体和关系，然后将它们构建为图格式。知识图谱的质量很大程度上取决于所使用的模型。建议依赖前沿 LLM。推理模型虽然更昂贵，但往往能提供更好的结果。此外，随着新数据的到来，维护和更新图谱是一项持续的运营负担。

与基于向量的 RAG 的数据嵌入和索引的相对轻量级和快速的过程不同，构建和更新知识图谱通常取决于 LLM 准确地理解、映射复杂关系并将它们集成到现有图谱结构中。每次需要将新数据添加到知识图谱时，都必须对照现有图谱数据检查 LLM 提取的数据并进行相应的更新，这在计算上可能非常密集。

[![图 3. GraphRAG 实现的架构。](https://cdn.thenewstack.io/media/2025/06/327e13b7-image3-1024x371.png)](https://cdn.thenewstack.io/media/2025/06/327e13b7-image3-1024x371.png)

图 3. GraphRAG 实现的架构。

随着知识库的增长，图遍历固有的额外复杂性也会带来响应延迟和可扩展性方面的挑战。与基于向量的 RAG 相比，检索信息现在涉及导航图中的连接，这在计算上可能比简单的相似性搜索更密集，尤其是对于多跳查询。延迟与回答查询所需的遍历深度以及所采用的特定检索策略等因素密切相关。必须根据应用程序的要求仔细考虑和优化这些方面。

## 迈向混合方法和统一平台

GraphRAG 通过更深入地理解复杂的层次关系来补充传统的 RAG 方法。它还可以更有效地聚合通过关系连接的不同数据点。

许多高级 RAG 和代理系统正在引入混合方法，将 GraphRAG 和基于嵌入的向量搜索的优势结合起来。例如，系统可以使用向量搜索来初步高层次地语义检索相关的语义节点，然后使用知识图谱来理解检索到的文档或实体内部或之间的关系，从而综合最终答案。

实施这些复杂的 RAG 变体，包括 GraphRAG 和各种混合方法，通常受益于可以以统一方式处理不同数据模型的数据库。这包括支持不同的数据类型、类似图的结构和用于相似性搜索的向量功能。统一的方法可以通过消除跨仅针对一种数据类型优化的不同系统同步数据的需要来简化整体架构、减少运营开销并简化开发体验。

这就是 MongoDB Atlas 非常适合解决这些不同用例的原因：它提供了强大的检索功能，从全文和语义搜索到图遍历，为构建高级 AI 应用程序提供了全面而灵活的数据库。

查看 [MongoDB 的文档](https://www.mongodb.com/docs/atlas/atlas-vector-search/ai-integrations/langchain/)，了解如何使用 MongoDB 实现基于向量的 RAG 和 GraphRAG。

## 构建可靠的 AI 应用程序

基于向量的 RAG 通过基于上下文数据，通过语义相似性来确定响应，为增强 LLM 性能提供了坚实的基础，但在处理复杂关系和多跳推理方面存在困难。GraphRAG 通过使用知识图谱显式地建模关系来解决这些缺点，从而提高准确性和更好的可解释性，同时引入额外的运营考虑因素。

最终，基于向量的 RAG 和 GraphRAG 之间的选择或采用混合方法取决于 AI 应用程序的特定要求和知识库的性质。随着 AI 系统变得更加复杂，并且需要对复杂信息进行更深入、更细致的理解，像 GraphRAG 和混合模式这样的方法在构建真正可靠的 LLM 驱动的应用程序和代理方面将变得越来越重要。