<!DOCTYPE html><html lang="en" class="anthropicsans_38ab20ab-module__m_Ag9q__variable anthropicserif_9dcb6d5c-module__l8Ld2a__variable copernicus_f8782a09-module__ahfGZW__variable styrenea_5e06b95-module__JuxQ9a__variable styreneb_4765efd3-module__CFivSW__variable tiempostext_7f420b3d-module__SmwvBG__variable jetbrainsmono_7d7bdbc6-module__j_XgJq__variable"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/chunks/fed19462e770b5e0.css" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi" data-precedence="next"/><link rel="stylesheet" href="/_next/static/chunks/dcab5e8e8ad4cc11.css" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi" data-precedence="next"/><link rel="stylesheet" href="/_next/static/chunks/5854b2d87f13c141.css" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi" data-precedence="next"/><link rel="stylesheet" href="/_next/static/chunks/abb3e2075b301e6f.css" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi" data-precedence="next"/><link rel="stylesheet" href="/_next/static/chunks/5247a9f776a63f50.css" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi" data-precedence="next"/><link rel="stylesheet" href="/_next/static/chunks/3ef2df9cc3987918.css" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi" href="/_next/static/chunks/c68b224ec2e5a0f0.js"/><script src="/_next/static/chunks/a94589f19b4b4fe1.js" async="" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi"></script><script src="/_next/static/chunks/d0300bffb79131f2.js" async="" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi"></script><script src="/_next/static/chunks/08dcfc3b15383cd6.js" async="" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi"></script><script src="/_next/static/chunks/turbopack-8815bdd0c493e34b.js" async="" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi"></script><script src="/_next/static/chunks/d96012bcfc98706a.js" async="" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi"></script><script src="/_next/static/chunks/d80b3790a119a285.js" async="" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi"></script><script src="/_next/static/chunks/1fb574e7be3f9a05.js" async="" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi"></script><script src="/_next/static/chunks/5ae0d9ad512fb263.js" async="" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi"></script><script src="/_next/static/chunks/c1896c986be1a2e2.js" async="" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi"></script><script src="/_next/static/chunks/7792a96214bec1f0.js" async="" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi"></script><script src="/_next/static/chunks/90869c85d8d8ba84.js" async="" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi"></script><script src="/_next/static/chunks/55e41b6edc326dca.js" async="" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi"></script><script src="/_next/static/chunks/2fd2aa01a4bc9178.js" async="" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi"></script><script src="/_next/static/chunks/8bdf83f8bd0ec540.js" async="" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi"></script><script src="/_next/static/chunks/046a135eda40f761.js" async="" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi"></script><script src="/_next/static/chunks/8ff14dc5284a5c6d.js" async="" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi"></script><script src="/_next/static/chunks/4d62cd54534b3ba6.js" async="" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi"></script><script src="/_next/static/chunks/1d74fcc382f9306e.js" async="" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi"></script><script src="/_next/static/chunks/8288730f5c5f5922.js" async="" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi"></script><script src="/_next/static/chunks/e95d17fb31990dec.js" async="" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi"></script><script src="/_next/static/chunks/2e3229a62c65aaec.js" async="" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi"></script><script src="/_next/static/chunks/91a159b613adeb74.js" async="" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi"></script><script src="/_next/static/chunks/eeb90237787e1eca.js" async="" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi"></script><script src="/_next/static/chunks/4014b723c1a53f30.js" async="" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi"></script><script src="/_next/static/chunks/fba43d7d87521a3b.js" async="" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi"></script><meta name="next-size-adjust" content=""/><meta name="theme-color" content="#141413"/><script src="/_next/static/chunks/a6dad97d9634a72d.js" noModule="" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi"></script></head><body><div hidden=""><!--$?--><template id="B:0"></template><!--/$--></div><header class="SiteHeader-module-scss-module__zKj4Ca__header" data-theme="light"><div class="SiteHeader-module-scss-module__zKj4Ca__skipLinks"><a href="#main-content" class="SiteHeader-module-scss-module__zKj4Ca__skipLink">Skip to main content</a><a href="#footer" class="SiteHeader-module-scss-module__zKj4Ca__skipLink">Skip to footer</a></div><div class="page-wrapper SiteHeader-module-scss-module__zKj4Ca__root"><a href="/" aria-label="Home"><div class="SiteHeader-module-scss-module__zKj4Ca__logoDesktop"><div class="LogoWordmark-module-scss-module__Sdgt-q__logo-wrapper"><svg class="LogoWordmark-module-scss-module__Sdgt-q__logo-static" width="570" height="64" viewBox="0 0 570 64" fill="none" xmlns="http://www.w3.org/2000/svg" aria-label="Anthropic"><path d="M139.492 12.9945H160.265V62.9392H173.525V12.9945H194.298V1.06077H139.492V12.9945Z" fill="currentColor"></path><path d="M116.066 44.3757L88.221 1.06077H73.1934V62.9392H86.011V19.6243L113.856 62.9392H128.884V1.06077H116.066V44.3757Z" fill="currentColor"></path><path d="M247.337 25.7238H218.166V1.06077H204.906V62.9392H218.166V37.6575H247.337V62.9392H260.597V1.06077H247.337V25.7238Z" fill="currentColor"></path><path d="M24.663 1.06077L0 62.9392H13.7901L18.834 49.9447H44.6365L49.6796 62.9392H63.4696L38.8066 1.06077H24.663ZM23.2946 38.453L31.7348 16.7072L40.175 38.453H23.2946Z" fill="currentColor"></path><path d="M370.475 0C352.619 0 339.978 13.2597 339.978 32.0884C339.978 50.7403 352.619 64 370.475 64C388.243 64 400.796 50.7403 400.796 32.0884C400.796 13.2597 388.243 0 370.475 0ZM370.475 51.6243C360.044 51.6243 353.68 44.1989 353.68 32.0884C353.68 19.8011 360.044 12.3757 370.475 12.3757C380.818 12.3757 387.094 19.8011 387.094 32.0884C387.094 44.1989 380.818 51.6243 370.475 51.6243Z" fill="currentColor"></path><path d="M555.845 42.1657C553.547 48.1768 548.95 51.6243 542.674 51.6243C532.243 51.6243 525.878 44.1989 525.878 32.0884C525.878 19.8011 532.243 12.3757 542.674 12.3757C548.95 12.3757 553.547 15.8232 555.845 21.8343H569.901C566.453 8.57459 556.11 0 542.674 0C524.818 0 512.177 13.2597 512.177 32.0884C512.177 50.7403 524.818 64 542.674 64C556.199 64 566.541 55.337 569.989 42.1657H555.845Z" fill="currentColor"></path><path d="M471.337 1.06077L496 62.9392H509.525L484.862 1.06077H471.337Z" fill="currentColor"></path><path d="M443.403 1.06077H413.171V62.9392H426.431V40.4862H443.403C457.459 40.4862 466.033 33.0608 466.033 20.7735C466.033 8.48619 457.459 1.06077 443.403 1.06077ZM442.784 28.5525H426.431V12.9945H442.784C449.326 12.9945 452.773 15.6464 452.773 20.7735C452.773 25.9006 449.326 28.5525 442.784 28.5525Z" fill="currentColor"></path><path d="M329.812 19.8895C329.812 8.22099 321.238 1.06077 307.182 1.06077H276.95V62.9392H290.21V38.7182H304.971L318.232 62.9392H332.906L318.223 36.8734C325.593 34.0402 329.812 28.0743 329.812 19.8895ZM290.21 12.9945H306.564C313.105 12.9945 316.552 15.3812 316.552 19.8895C316.552 24.3978 313.105 26.7845 306.564 26.7845H290.21V12.9945Z" fill="currentColor"></path></svg><div class="LogoWordmark-module-scss-module__Sdgt-q__logo-lottie"></div></div></div><svg class="Icon-module-scss-module__lqbdHG__icon SiteHeader-module-scss-module__zKj4Ca__logoMobile" width="32" height="32" viewBox="0 0 46 32"><path d="M32.73 0h-6.945L38.45 32h6.945L32.73 0ZM12.665 0 0 32h7.082l2.59-6.72h13.25l2.59 6.72h7.082L19.929 0h-7.264Zm-.702 19.337 4.334-11.246 4.334 11.246h-8.668Z" fill="#000000"></path></svg></a><div class="SiteHeader-module-scss-module__zKj4Ca__contentWrapper"><nav class="SiteHeader-module-scss-module__zKj4Ca__nav"><ul class="SiteHeader-module-scss-module__zKj4Ca__navList"><li class="body-3 SiteHeader-module-scss-module__zKj4Ca__navItem"><a href="/research" class="SiteHeader-module-scss-module__zKj4Ca__navText">Research</a></li><li class="body-3 SiteHeader-module-scss-module__zKj4Ca__navItem"><a href="/economic-futures" class="SiteHeader-module-scss-module__zKj4Ca__navText">Economic Futures</a></li><li class="body-3 SiteHeader-module-scss-module__zKj4Ca__navItem" data-category="Commitments"><button class="SiteHeader-module-scss-module__zKj4Ca__navText" aria-haspopup="menu" aria-expanded="false" aria-controls="nav-dropdown-Commitments"><span>Commitments</span><svg class="Icon-module-scss-module__lqbdHG__icon SiteHeader-module-scss-module__zKj4Ca__caretIcon" width="12" height="6.13" viewBox="0 0 8 5"><path d="M7.3016 0.231808C7.44932 0.0678162 7.70306 0.0546398 7.86724 0.20212C8.03137 0.349888 8.04461 0.603568 7.89692 0.767766L4.29684 4.76791L4.23434 4.82417C4.16662 4.87328 4.08425 4.89995 3.99918 4.89995C3.88588 4.89989 3.77733 4.85213 3.70152 4.76791L0.10144 0.767766L0.0537825 0.702139C-0.040206 0.541753 -0.0124254 0.331356 0.131128 0.20212C0.274775 0.0728844 0.486972 0.0674593 0.636608 0.1779L0.696765 0.231808L3.99918 3.90148L7.3016 0.231808Z" fill="currentColor"></path></svg></button></li><li class="body-3 SiteHeader-module-scss-module__zKj4Ca__navItem" data-category="Learn"><button class="SiteHeader-module-scss-module__zKj4Ca__navText" aria-haspopup="menu" aria-expanded="false" aria-controls="nav-dropdown-Learn"><span>Learn</span><svg class="Icon-module-scss-module__lqbdHG__icon SiteHeader-module-scss-module__zKj4Ca__caretIcon" width="12" height="6.13" viewBox="0 0 8 5"><path d="M7.3016 0.231808C7.44932 0.0678162 7.70306 0.0546398 7.86724 0.20212C8.03137 0.349888 8.04461 0.603568 7.89692 0.767766L4.29684 4.76791L4.23434 4.82417C4.16662 4.87328 4.08425 4.89995 3.99918 4.89995C3.88588 4.89989 3.77733 4.85213 3.70152 4.76791L0.10144 0.767766L0.0537825 0.702139C-0.040206 0.541753 -0.0124254 0.331356 0.131128 0.20212C0.274775 0.0728844 0.486972 0.0674593 0.636608 0.1779L0.696765 0.231808L3.99918 3.90148L7.3016 0.231808Z" fill="currentColor"></path></svg></button></li><li class="body-3 SiteHeader-module-scss-module__zKj4Ca__navItem"><a href="/news" class="SiteHeader-module-scss-module__zKj4Ca__navText">News</a></li></ul></nav><div class="SiteHeader-module-scss-module__zKj4Ca__claudeCtaWrapper"><a href="https://claude.ai/" class="SiteHeader-module-scss-module__zKj4Ca__claudeCtaButton body-3" target="_blank" rel="noopener noreferrer">Try Claude</a><div class="SiteHeader-module-scss-module__zKj4Ca__claudeCtaDropdownTrigger"><svg class="Icon-module-scss-module__lqbdHG__icon SiteHeader-module-scss-module__zKj4Ca__claudeCtaIcon" width="12" height="6.13" viewBox="0 0 8 5"><path d="M7.3016 0.231808C7.44932 0.0678162 7.70306 0.0546398 7.86724 0.20212C8.03137 0.349888 8.04461 0.603568 7.89692 0.767766L4.29684 4.76791L4.23434 4.82417C4.16662 4.87328 4.08425 4.89995 3.99918 4.89995C3.88588 4.89989 3.77733 4.85213 3.70152 4.76791L0.10144 0.767766L0.0537825 0.702139C-0.040206 0.541753 -0.0124254 0.331356 0.131128 0.20212C0.274775 0.0728844 0.486972 0.0674593 0.636608 0.1779L0.696765 0.231808L3.99918 3.90148L7.3016 0.231808Z" fill="currentColor"></path></svg></div></div><button class="SiteHeader-module-scss-module__zKj4Ca__mobileIcon" aria-label="Navigation menu"><svg class="Icon-module-scss-module__lqbdHG__icon" width="24" height="24" viewBox="0 0 40 40"><path d="M18.75 28C19.1641 28.0002 19.5 28.3359 19.5 28.75C19.4999 29.1641 19.164 29.4998 18.75 29.5H7.91699C7.50281 29.5 7.16705 29.1642 7.16699 28.75C7.16699 28.3358 7.50278 28 7.91699 28H18.75ZM32.084 19.25C32.4979 19.2504 32.834 19.586 32.834 20C32.8339 20.4139 32.4979 20.7496 32.084 20.75H7.91699C7.50281 20.75 7.16705 20.4142 7.16699 20C7.16699 19.5858 7.50278 19.25 7.91699 19.25H32.084ZM32.084 10.5C32.4979 10.5004 32.834 10.836 32.834 11.25C32.8339 11.6639 32.4979 11.9996 32.084 12H7.91699C7.50282 12 7.16706 11.6642 7.16699 11.25C7.16699 10.8358 7.50278 10.5 7.91699 10.5H32.084Z" fill="#141413"></path></svg></button></div></div></header><main id="main-content" class=""><section class="page-wrapper HeroEngineering-module-scss-module__j1ivRa__hero" aria-label="Engineering Article Hero"><a class="body-2 bold HeroEngineering-module-scss-module__j1ivRa__hubLink" href="/engineering">Engineering at Anthropic</a><div class="HeroEngineering-module-scss-module__j1ivRa__content"><div class="HeroEngineering-module-scss-module__j1ivRa__header"><div class="HeroEngineering-module-scss-module__j1ivRa__heroImage"><img alt="" loading="lazy" width="1000" height="1000" decoding="async" data-nimg="1" style="color:transparent" src="https://www-cdn.anthropic.com/images/4zrzovbb/website/42f40f6fae9ec2d7cf2e5a98908a16d0216b91be-1000x1000.svg"/></div><h1 class="headline-1">Code execution with MCP: Building more efficient agents</h1></div><div class="HeroEngineering-module-scss-module__j1ivRa__metadata"><p class="body-2 HeroEngineering-module-scss-module__j1ivRa__date">Published <!-- -->Nov 04, 2025</p><p class="body-large-1 HeroEngineering-module-scss-module__j1ivRa__summary">Direct tool calls consume context for each definition and result. Agents scale better by writing code to call tools instead. Here&#x27;s how it works with MCP.</p></div></div></section><div class="page-wrapper"><article><div class=""><div class="Body-module-scss-module__z40yvW__body" data-theme="ivory"><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text"><a href="https://modelcontextprotocol.io/">The Model Context Protocol (MCP)</a> is an open standard for connecting AI agents to external systems. Connecting agents to tools and data traditionally requires a custom integration for each pairing, creating fragmentation and duplicated effort that makes it difficult to scale truly connected systems. MCP provides a universal protocol—developers implement MCP once in their agent and it unlocks an entire ecosystem of integrations.</p><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">Since launching MCP in November 2024, adoption has been rapid: the community has built thousands of <a href="https://github.com/modelcontextprotocol/servers" target="_blank" rel="noopener noreferrer">MCP servers</a>, <a href="https://modelcontextprotocol.io/docs/sdk" target="_blank" rel="noopener noreferrer">SDKs</a> are available for all major programming languages, and the industry has adopted MCP as the de-facto standard for connecting agents to tools and data.</p><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">Today developers routinely build agents with access to hundreds or thousands of tools across dozens of MCP servers. However, as the number of connected tools grows, loading all tool definitions upfront and passing intermediate results through the context window slows down agents and increases costs.</p><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">In this blog we&#x27;ll explore how code execution can enable agents to interact with MCP servers more efficiently, handling more tools while using fewer tokens.</p><h2 class="Body-module-scss-module__z40yvW__reading-column headline-4 post-heading" id="excessive-token-consumption-from-tools-makes-agents-less-efficient"><strong>Excessive token consumption from tools makes agents less efficient</strong></h2><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">As MCP usage scales, there are two common patterns that can increase agent cost and latency:</p><ol class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text"><li>Tool definitions overload the context window;</li><li>Intermediate tool results consume additional tokens.</li></ol><h3 class="Body-module-scss-module__z40yvW__reading-column headline-5 post-section" id="1-tool-definitions-overload-the-context-window"><strong>1. Tool definitions overload the context window</strong></h3><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">Most MCP clients load all tool definitions upfront directly into context, exposing them to the model using a direct tool-calling syntax. These tool definitions might look like: </p><div class="Body-module-scss-module__z40yvW__media-column Body-module-scss-module__z40yvW__inline"><div class="CodeBlock-module-scss-module__PbWBnq__codeBlock"><pre class="" style="--height:300px;--height-expanded:0px"><code class="plaintext">gdrive.getDocument
     Description: Retrieves a document from Google Drive
     Parameters:
                documentId (required, string): The ID of the document to retrieve
                fields (optional, string): Specific fields to return
     Returns: Document object with title, body content, metadata, permissions, etc.</code></pre><div class="CodeBlock-module-scss-module__PbWBnq__controls"><button aria-label="Copy code"><svg class="Icon-module-scss-module__lqbdHG__icon" width="11" height="15" viewBox="0 0 11 15"><path d="M5.4 0C6.39875 0 7.26819 0.543814 7.73525 1.35H9.45C10.1956 1.35 10.8 1.95442 10.8 2.7V13.5C10.8 14.2456 10.1956 14.85 9.45 14.85H1.35C0.604415 14.85 2.17436e-08 14.2456 0 13.5V2.7C1.7395e-07 1.95442 0.604415 1.35 1.35 1.35H3.06475C3.53181 0.543814 4.40125 0 5.4 0ZM1.35 2.25C1.10147 2.25 0.9 2.45147 0.9 2.7V13.5C0.9 13.7485 1.10147 13.95 1.35 13.95H9.45C9.69853 13.95 9.9 13.7485 9.9 13.5V2.7C9.9 2.45147 9.69853 2.25 9.45 2.25H8.06221C8.08677 2.39637 8.1 2.54665 8.1 2.7V3.6C8.1 3.84853 7.89853 4.05 7.65 4.05H3.15C2.90147 4.05 2.7 3.84853 2.7 3.6V2.7C2.7 2.54665 2.71323 2.39637 2.73779 2.25H1.35ZM7.68603 10.6233C7.78376 10.395 8.04828 10.2886 8.27666 10.386C8.50499 10.4838 8.61143 10.7483 8.51396 10.9767C8.24856 11.5967 7.73014 12.15 7.01982 12.15C6.58192 12.1499 6.21722 11.9397 5.93965 11.6332C5.66215 11.9395 5.29801 12.1499 4.86035 12.15C4.42229 12.15 4.05692 11.9398 3.7793 11.6332C3.50175 11.9395 3.13773 12.15 2.7 12.15C2.45147 12.15 2.25 11.9485 2.25 11.7C2.25 11.4515 2.45147 11.25 2.7 11.25C2.8912 11.25 3.16726 11.0879 3.36621 10.6233L3.39697 10.5636C3.47806 10.4321 3.62261 10.35 3.78018 10.35C3.9602 10.3501 4.1233 10.4578 4.19414 10.6233C4.39309 11.0878 4.66917 11.25 4.86035 11.25C5.05156 11.2498 5.32773 11.0877 5.52656 10.6233L5.55732 10.5636C5.63837 10.4323 5.78229 10.3501 5.93965 10.35C6.11974 10.35 6.28275 10.4578 6.35361 10.6233C6.55251 11.0878 6.82862 11.2499 7.01982 11.25C7.21102 11.25 7.48708 11.0879 7.68603 10.6233ZM7.68603 7.02334C7.78376 6.79501 8.04828 6.68857 8.27666 6.78604C8.50499 6.88376 8.61143 7.14828 8.51396 7.37666C8.24856 7.99675 7.73014 8.55 7.01982 8.55C6.58192 8.54994 6.21722 8.3397 5.93965 8.0332C5.66215 8.33947 5.29801 8.54989 4.86035 8.55C4.42229 8.55 4.05692 8.33983 3.7793 8.0332C3.50175 8.33945 3.13773 8.55 2.7 8.55C2.45147 8.55 2.25 8.34853 2.25 8.1C2.25 7.85147 2.45147 7.65 2.7 7.65C2.8912 7.65 3.16726 7.48791 3.36621 7.02334L3.39697 6.96357C3.47806 6.83213 3.62261 6.75 3.78018 6.75C3.9602 6.75007 4.1233 6.85783 4.19414 7.02334C4.39309 7.48782 4.66917 7.65 4.86035 7.65C5.05156 7.6498 5.32773 7.48772 5.52656 7.02334L5.55732 6.96357C5.63837 6.83232 5.78229 6.75012 5.93965 6.75C6.11974 6.75 6.28275 6.85778 6.35361 7.02334C6.55251 7.48782 6.82862 7.6499 7.01982 7.65C7.21102 7.65 7.48708 7.48786 7.68603 7.02334ZM5.4 0.9C4.40589 0.9 3.6 1.70589 3.6 2.7V3.15H7.2V2.7C7.2 1.70589 6.39411 0.9 5.4 0.9Z" fill="currentColor"></path></svg><span class="body-3">Copy</span></button></div></div></div><div class="Body-module-scss-module__z40yvW__media-column Body-module-scss-module__z40yvW__inline"><div class="CodeBlock-module-scss-module__PbWBnq__codeBlock"><pre class="" style="--height:300px;--height-expanded:0px"><code class="plaintext">salesforce.updateRecord
    Description: Updates a record in Salesforce
    Parameters:
               objectType (required, string): Type of Salesforce object (Lead, Contact,      Account, etc.)
               recordId (required, string): The ID of the record to update
               data (required, object): Fields to update with their new values
     Returns: Updated record object with confirmation</code></pre><div class="CodeBlock-module-scss-module__PbWBnq__controls"><button aria-label="Copy code"><svg class="Icon-module-scss-module__lqbdHG__icon" width="11" height="15" viewBox="0 0 11 15"><path d="M5.4 0C6.39875 0 7.26819 0.543814 7.73525 1.35H9.45C10.1956 1.35 10.8 1.95442 10.8 2.7V13.5C10.8 14.2456 10.1956 14.85 9.45 14.85H1.35C0.604415 14.85 2.17436e-08 14.2456 0 13.5V2.7C1.7395e-07 1.95442 0.604415 1.35 1.35 1.35H3.06475C3.53181 0.543814 4.40125 0 5.4 0ZM1.35 2.25C1.10147 2.25 0.9 2.45147 0.9 2.7V13.5C0.9 13.7485 1.10147 13.95 1.35 13.95H9.45C9.69853 13.95 9.9 13.7485 9.9 13.5V2.7C9.9 2.45147 9.69853 2.25 9.45 2.25H8.06221C8.08677 2.39637 8.1 2.54665 8.1 2.7V3.6C8.1 3.84853 7.89853 4.05 7.65 4.05H3.15C2.90147 4.05 2.7 3.84853 2.7 3.6V2.7C2.7 2.54665 2.71323 2.39637 2.73779 2.25H1.35ZM7.68603 10.6233C7.78376 10.395 8.04828 10.2886 8.27666 10.386C8.50499 10.4838 8.61143 10.7483 8.51396 10.9767C8.24856 11.5967 7.73014 12.15 7.01982 12.15C6.58192 12.1499 6.21722 11.9397 5.93965 11.6332C5.66215 11.9395 5.29801 12.1499 4.86035 12.15C4.42229 12.15 4.05692 11.9398 3.7793 11.6332C3.50175 11.9395 3.13773 12.15 2.7 12.15C2.45147 12.15 2.25 11.9485 2.25 11.7C2.25 11.4515 2.45147 11.25 2.7 11.25C2.8912 11.25 3.16726 11.0879 3.36621 10.6233L3.39697 10.5636C3.47806 10.4321 3.62261 10.35 3.78018 10.35C3.9602 10.3501 4.1233 10.4578 4.19414 10.6233C4.39309 11.0878 4.66917 11.25 4.86035 11.25C5.05156 11.2498 5.32773 11.0877 5.52656 10.6233L5.55732 10.5636C5.63837 10.4323 5.78229 10.3501 5.93965 10.35C6.11974 10.35 6.28275 10.4578 6.35361 10.6233C6.55251 11.0878 6.82862 11.2499 7.01982 11.25C7.21102 11.25 7.48708 11.0879 7.68603 10.6233ZM7.68603 7.02334C7.78376 6.79501 8.04828 6.68857 8.27666 6.78604C8.50499 6.88376 8.61143 7.14828 8.51396 7.37666C8.24856 7.99675 7.73014 8.55 7.01982 8.55C6.58192 8.54994 6.21722 8.3397 5.93965 8.0332C5.66215 8.33947 5.29801 8.54989 4.86035 8.55C4.42229 8.55 4.05692 8.33983 3.7793 8.0332C3.50175 8.33945 3.13773 8.55 2.7 8.55C2.45147 8.55 2.25 8.34853 2.25 8.1C2.25 7.85147 2.45147 7.65 2.7 7.65C2.8912 7.65 3.16726 7.48791 3.36621 7.02334L3.39697 6.96357C3.47806 6.83213 3.62261 6.75 3.78018 6.75C3.9602 6.75007 4.1233 6.85783 4.19414 7.02334C4.39309 7.48782 4.66917 7.65 4.86035 7.65C5.05156 7.6498 5.32773 7.48772 5.52656 7.02334L5.55732 6.96357C5.63837 6.83232 5.78229 6.75012 5.93965 6.75C6.11974 6.75 6.28275 6.85778 6.35361 7.02334C6.55251 7.48782 6.82862 7.6499 7.01982 7.65C7.21102 7.65 7.48708 7.48786 7.68603 7.02334ZM5.4 0.9C4.40589 0.9 3.6 1.70589 3.6 2.7V3.15H7.2V2.7C7.2 1.70589 6.39411 0.9 5.4 0.9Z" fill="currentColor"></path></svg><span class="body-3">Copy</span></button></div></div></div><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">Tool descriptions occupy more context window space, increasing response time and costs. In cases where agents are connected to thousands of tools, they’ll need to process hundreds of thousands of tokens before reading a request.</p><h3 class="Body-module-scss-module__z40yvW__reading-column headline-5 post-section" id="2-intermediate-tool-results-consume-additional-tokens"><strong>2. Intermediate tool results consume additional tokens</strong></h3><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">Most MCP clients allow models to directly call MCP tools. For example, you might ask your agent: &quot;Download my meeting transcript from Google Drive and attach it to the Salesforce lead.&quot;</p><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">The model will make calls like:</p><div class="Body-module-scss-module__z40yvW__media-column Body-module-scss-module__z40yvW__inline"><div class="CodeBlock-module-scss-module__PbWBnq__codeBlock"><pre class="" style="--height:300px;--height-expanded:0px"><code class="plaintext">TOOL CALL: gdrive.getDocument(documentId: &quot;abc123&quot;)
        → returns &quot;Discussed Q4 goals...\n[full transcript text]&quot;
           (loaded into model context)

TOOL CALL: salesforce.updateRecord(
			objectType: &quot;SalesMeeting&quot;,
			recordId: &quot;00Q5f000001abcXYZ&quot;,
  			data: { &quot;Notes&quot;: &quot;Discussed Q4 goals...\n[full transcript text written out]&quot; }
		)
		(model needs to write entire transcript into context again)</code></pre><div class="CodeBlock-module-scss-module__PbWBnq__controls"><button aria-label="Copy code"><svg class="Icon-module-scss-module__lqbdHG__icon" width="11" height="15" viewBox="0 0 11 15"><path d="M5.4 0C6.39875 0 7.26819 0.543814 7.73525 1.35H9.45C10.1956 1.35 10.8 1.95442 10.8 2.7V13.5C10.8 14.2456 10.1956 14.85 9.45 14.85H1.35C0.604415 14.85 2.17436e-08 14.2456 0 13.5V2.7C1.7395e-07 1.95442 0.604415 1.35 1.35 1.35H3.06475C3.53181 0.543814 4.40125 0 5.4 0ZM1.35 2.25C1.10147 2.25 0.9 2.45147 0.9 2.7V13.5C0.9 13.7485 1.10147 13.95 1.35 13.95H9.45C9.69853 13.95 9.9 13.7485 9.9 13.5V2.7C9.9 2.45147 9.69853 2.25 9.45 2.25H8.06221C8.08677 2.39637 8.1 2.54665 8.1 2.7V3.6C8.1 3.84853 7.89853 4.05 7.65 4.05H3.15C2.90147 4.05 2.7 3.84853 2.7 3.6V2.7C2.7 2.54665 2.71323 2.39637 2.73779 2.25H1.35ZM7.68603 10.6233C7.78376 10.395 8.04828 10.2886 8.27666 10.386C8.50499 10.4838 8.61143 10.7483 8.51396 10.9767C8.24856 11.5967 7.73014 12.15 7.01982 12.15C6.58192 12.1499 6.21722 11.9397 5.93965 11.6332C5.66215 11.9395 5.29801 12.1499 4.86035 12.15C4.42229 12.15 4.05692 11.9398 3.7793 11.6332C3.50175 11.9395 3.13773 12.15 2.7 12.15C2.45147 12.15 2.25 11.9485 2.25 11.7C2.25 11.4515 2.45147 11.25 2.7 11.25C2.8912 11.25 3.16726 11.0879 3.36621 10.6233L3.39697 10.5636C3.47806 10.4321 3.62261 10.35 3.78018 10.35C3.9602 10.3501 4.1233 10.4578 4.19414 10.6233C4.39309 11.0878 4.66917 11.25 4.86035 11.25C5.05156 11.2498 5.32773 11.0877 5.52656 10.6233L5.55732 10.5636C5.63837 10.4323 5.78229 10.3501 5.93965 10.35C6.11974 10.35 6.28275 10.4578 6.35361 10.6233C6.55251 11.0878 6.82862 11.2499 7.01982 11.25C7.21102 11.25 7.48708 11.0879 7.68603 10.6233ZM7.68603 7.02334C7.78376 6.79501 8.04828 6.68857 8.27666 6.78604C8.50499 6.88376 8.61143 7.14828 8.51396 7.37666C8.24856 7.99675 7.73014 8.55 7.01982 8.55C6.58192 8.54994 6.21722 8.3397 5.93965 8.0332C5.66215 8.33947 5.29801 8.54989 4.86035 8.55C4.42229 8.55 4.05692 8.33983 3.7793 8.0332C3.50175 8.33945 3.13773 8.55 2.7 8.55C2.45147 8.55 2.25 8.34853 2.25 8.1C2.25 7.85147 2.45147 7.65 2.7 7.65C2.8912 7.65 3.16726 7.48791 3.36621 7.02334L3.39697 6.96357C3.47806 6.83213 3.62261 6.75 3.78018 6.75C3.9602 6.75007 4.1233 6.85783 4.19414 7.02334C4.39309 7.48782 4.66917 7.65 4.86035 7.65C5.05156 7.6498 5.32773 7.48772 5.52656 7.02334L5.55732 6.96357C5.63837 6.83232 5.78229 6.75012 5.93965 6.75C6.11974 6.75 6.28275 6.85778 6.35361 7.02334C6.55251 7.48782 6.82862 7.6499 7.01982 7.65C7.21102 7.65 7.48708 7.48786 7.68603 7.02334ZM5.4 0.9C4.40589 0.9 3.6 1.70589 3.6 2.7V3.15H7.2V2.7C7.2 1.70589 6.39411 0.9 5.4 0.9Z" fill="currentColor"></path></svg><span class="body-3">Copy</span></button></div></div></div><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">Every intermediate result must pass through the model. In this example, the full call transcript flows through twice. For a 2-hour sales meeting, that could mean processing an additional 50,000 tokens. Even larger documents may exceed context window limits, breaking the workflow.</p><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">With large documents or complex data structures, models may be more likely to make mistakes when copying data between tool calls.</p><div class="Body-module-scss-module__z40yvW__media-column Body-module-scss-module__z40yvW__inline"><figure class="ImageWithCaption-module-scss-module__Duq99q__e-imageWithCaption"><img alt="Image of how the MCP client works with the MCP server and LLM." loading="lazy" width="1920" height="1080" decoding="async" data-nimg="1" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fwww-cdn.anthropic.com%2Fimages%2F4zrzovbb%2Fwebsite%2F9ecf165020005c09a22a9472cee6309555485619-1920x1080.png&amp;w=1920&amp;q=75 1x, /_next/image?url=https%3A%2F%2Fwww-cdn.anthropic.com%2Fimages%2F4zrzovbb%2Fwebsite%2F9ecf165020005c09a22a9472cee6309555485619-1920x1080.png&amp;w=3840&amp;q=75 2x" src="/_next/image?url=https%3A%2F%2Fwww-cdn.anthropic.com%2Fimages%2F4zrzovbb%2Fwebsite%2F9ecf165020005c09a22a9472cee6309555485619-1920x1080.png&amp;w=3840&amp;q=75"/><figcaption class="caption">The MCP client loads tool definitions into the model&#x27;s context window and orchestrates a message loop where each tool call and result passes through the model between operations.</figcaption></figure></div><h2 class="Body-module-scss-module__z40yvW__reading-column headline-4 post-heading" id="code-execution-with-mcp-improves-context-efficiency"><strong>Code execution with MCP improves context efficiency</strong></h2><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">With code execution environments becoming more common for agents, a solution is to present MCP servers as code APIs rather than direct tool calls. The agent can then write code to interact with MCP servers. This approach addresses both challenges: agents can load only the tools they need and process data in the execution environment before passing results back to the model.</p><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">There are a number of ways to do this. One approach is to generate a file tree of all available tools from connected MCP servers. Here&#x27;s an implementation using TypeScript:</p><div class="Body-module-scss-module__z40yvW__media-column Body-module-scss-module__z40yvW__inline"><div class="CodeBlock-module-scss-module__PbWBnq__codeBlock"><pre class="" style="--height:300px;--height-expanded:0px"><code class="plaintext">servers
├── google-drive
│   ├── getDocument.ts
│   ├── ... (other tools)
│   └── index.ts
├── salesforce
│   ├── updateRecord.ts
│   ├── ... (other tools)
│   └── index.ts
└── ... (other servers)</code></pre><div class="CodeBlock-module-scss-module__PbWBnq__controls"><button aria-label="Copy code"><svg class="Icon-module-scss-module__lqbdHG__icon" width="11" height="15" viewBox="0 0 11 15"><path d="M5.4 0C6.39875 0 7.26819 0.543814 7.73525 1.35H9.45C10.1956 1.35 10.8 1.95442 10.8 2.7V13.5C10.8 14.2456 10.1956 14.85 9.45 14.85H1.35C0.604415 14.85 2.17436e-08 14.2456 0 13.5V2.7C1.7395e-07 1.95442 0.604415 1.35 1.35 1.35H3.06475C3.53181 0.543814 4.40125 0 5.4 0ZM1.35 2.25C1.10147 2.25 0.9 2.45147 0.9 2.7V13.5C0.9 13.7485 1.10147 13.95 1.35 13.95H9.45C9.69853 13.95 9.9 13.7485 9.9 13.5V2.7C9.9 2.45147 9.69853 2.25 9.45 2.25H8.06221C8.08677 2.39637 8.1 2.54665 8.1 2.7V3.6C8.1 3.84853 7.89853 4.05 7.65 4.05H3.15C2.90147 4.05 2.7 3.84853 2.7 3.6V2.7C2.7 2.54665 2.71323 2.39637 2.73779 2.25H1.35ZM7.68603 10.6233C7.78376 10.395 8.04828 10.2886 8.27666 10.386C8.50499 10.4838 8.61143 10.7483 8.51396 10.9767C8.24856 11.5967 7.73014 12.15 7.01982 12.15C6.58192 12.1499 6.21722 11.9397 5.93965 11.6332C5.66215 11.9395 5.29801 12.1499 4.86035 12.15C4.42229 12.15 4.05692 11.9398 3.7793 11.6332C3.50175 11.9395 3.13773 12.15 2.7 12.15C2.45147 12.15 2.25 11.9485 2.25 11.7C2.25 11.4515 2.45147 11.25 2.7 11.25C2.8912 11.25 3.16726 11.0879 3.36621 10.6233L3.39697 10.5636C3.47806 10.4321 3.62261 10.35 3.78018 10.35C3.9602 10.3501 4.1233 10.4578 4.19414 10.6233C4.39309 11.0878 4.66917 11.25 4.86035 11.25C5.05156 11.2498 5.32773 11.0877 5.52656 10.6233L5.55732 10.5636C5.63837 10.4323 5.78229 10.3501 5.93965 10.35C6.11974 10.35 6.28275 10.4578 6.35361 10.6233C6.55251 11.0878 6.82862 11.2499 7.01982 11.25C7.21102 11.25 7.48708 11.0879 7.68603 10.6233ZM7.68603 7.02334C7.78376 6.79501 8.04828 6.68857 8.27666 6.78604C8.50499 6.88376 8.61143 7.14828 8.51396 7.37666C8.24856 7.99675 7.73014 8.55 7.01982 8.55C6.58192 8.54994 6.21722 8.3397 5.93965 8.0332C5.66215 8.33947 5.29801 8.54989 4.86035 8.55C4.42229 8.55 4.05692 8.33983 3.7793 8.0332C3.50175 8.33945 3.13773 8.55 2.7 8.55C2.45147 8.55 2.25 8.34853 2.25 8.1C2.25 7.85147 2.45147 7.65 2.7 7.65C2.8912 7.65 3.16726 7.48791 3.36621 7.02334L3.39697 6.96357C3.47806 6.83213 3.62261 6.75 3.78018 6.75C3.9602 6.75007 4.1233 6.85783 4.19414 7.02334C4.39309 7.48782 4.66917 7.65 4.86035 7.65C5.05156 7.6498 5.32773 7.48772 5.52656 7.02334L5.55732 6.96357C5.63837 6.83232 5.78229 6.75012 5.93965 6.75C6.11974 6.75 6.28275 6.85778 6.35361 7.02334C6.55251 7.48782 6.82862 7.6499 7.01982 7.65C7.21102 7.65 7.48708 7.48786 7.68603 7.02334ZM5.4 0.9C4.40589 0.9 3.6 1.70589 3.6 2.7V3.15H7.2V2.7C7.2 1.70589 6.39411 0.9 5.4 0.9Z" fill="currentColor"></path></svg><span class="body-3">Copy</span></button></div></div></div><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">Then each tool corresponds to a file, something like:</p><div class="Body-module-scss-module__z40yvW__media-column Body-module-scss-module__z40yvW__inline"><div class="CodeBlock-module-scss-module__PbWBnq__codeBlock"><pre class="" style="--height:300px;--height-expanded:0px"><code class="plaintext">// ./servers/google-drive/getDocument.ts
import { callMCPTool } from &quot;../../../client.js&quot;;

interface GetDocumentInput {
  documentId: string;
}

interface GetDocumentResponse {
  content: string;
}

/* Read a document from Google Drive */
export async function getDocument(input: GetDocumentInput): Promise&lt;GetDocumentResponse&gt; {
  return callMCPTool&lt;GetDocumentResponse&gt;(&#x27;google_drive__get_document&#x27;, input);
}
</code></pre><div class="CodeBlock-module-scss-module__PbWBnq__controls"><button aria-label="Copy code"><svg class="Icon-module-scss-module__lqbdHG__icon" width="11" height="15" viewBox="0 0 11 15"><path d="M5.4 0C6.39875 0 7.26819 0.543814 7.73525 1.35H9.45C10.1956 1.35 10.8 1.95442 10.8 2.7V13.5C10.8 14.2456 10.1956 14.85 9.45 14.85H1.35C0.604415 14.85 2.17436e-08 14.2456 0 13.5V2.7C1.7395e-07 1.95442 0.604415 1.35 1.35 1.35H3.06475C3.53181 0.543814 4.40125 0 5.4 0ZM1.35 2.25C1.10147 2.25 0.9 2.45147 0.9 2.7V13.5C0.9 13.7485 1.10147 13.95 1.35 13.95H9.45C9.69853 13.95 9.9 13.7485 9.9 13.5V2.7C9.9 2.45147 9.69853 2.25 9.45 2.25H8.06221C8.08677 2.39637 8.1 2.54665 8.1 2.7V3.6C8.1 3.84853 7.89853 4.05 7.65 4.05H3.15C2.90147 4.05 2.7 3.84853 2.7 3.6V2.7C2.7 2.54665 2.71323 2.39637 2.73779 2.25H1.35ZM7.68603 10.6233C7.78376 10.395 8.04828 10.2886 8.27666 10.386C8.50499 10.4838 8.61143 10.7483 8.51396 10.9767C8.24856 11.5967 7.73014 12.15 7.01982 12.15C6.58192 12.1499 6.21722 11.9397 5.93965 11.6332C5.66215 11.9395 5.29801 12.1499 4.86035 12.15C4.42229 12.15 4.05692 11.9398 3.7793 11.6332C3.50175 11.9395 3.13773 12.15 2.7 12.15C2.45147 12.15 2.25 11.9485 2.25 11.7C2.25 11.4515 2.45147 11.25 2.7 11.25C2.8912 11.25 3.16726 11.0879 3.36621 10.6233L3.39697 10.5636C3.47806 10.4321 3.62261 10.35 3.78018 10.35C3.9602 10.3501 4.1233 10.4578 4.19414 10.6233C4.39309 11.0878 4.66917 11.25 4.86035 11.25C5.05156 11.2498 5.32773 11.0877 5.52656 10.6233L5.55732 10.5636C5.63837 10.4323 5.78229 10.3501 5.93965 10.35C6.11974 10.35 6.28275 10.4578 6.35361 10.6233C6.55251 11.0878 6.82862 11.2499 7.01982 11.25C7.21102 11.25 7.48708 11.0879 7.68603 10.6233ZM7.68603 7.02334C7.78376 6.79501 8.04828 6.68857 8.27666 6.78604C8.50499 6.88376 8.61143 7.14828 8.51396 7.37666C8.24856 7.99675 7.73014 8.55 7.01982 8.55C6.58192 8.54994 6.21722 8.3397 5.93965 8.0332C5.66215 8.33947 5.29801 8.54989 4.86035 8.55C4.42229 8.55 4.05692 8.33983 3.7793 8.0332C3.50175 8.33945 3.13773 8.55 2.7 8.55C2.45147 8.55 2.25 8.34853 2.25 8.1C2.25 7.85147 2.45147 7.65 2.7 7.65C2.8912 7.65 3.16726 7.48791 3.36621 7.02334L3.39697 6.96357C3.47806 6.83213 3.62261 6.75 3.78018 6.75C3.9602 6.75007 4.1233 6.85783 4.19414 7.02334C4.39309 7.48782 4.66917 7.65 4.86035 7.65C5.05156 7.6498 5.32773 7.48772 5.52656 7.02334L5.55732 6.96357C5.63837 6.83232 5.78229 6.75012 5.93965 6.75C6.11974 6.75 6.28275 6.85778 6.35361 7.02334C6.55251 7.48782 6.82862 7.6499 7.01982 7.65C7.21102 7.65 7.48708 7.48786 7.68603 7.02334ZM5.4 0.9C4.40589 0.9 3.6 1.70589 3.6 2.7V3.15H7.2V2.7C7.2 1.70589 6.39411 0.9 5.4 0.9Z" fill="currentColor"></path></svg><span class="body-3">Copy</span></button></div></div></div><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">Our Google Drive to Salesforce example above becomes the code:</p><div class="Body-module-scss-module__z40yvW__media-column Body-module-scss-module__z40yvW__inline"><div class="CodeBlock-module-scss-module__PbWBnq__codeBlock"><pre class="" style="--height:300px;--height-expanded:0px"><code class="plaintext">// Read transcript from Google Docs and add to Salesforce prospect
import * as gdrive from &#x27;./servers/google-drive&#x27;;
import * as salesforce from &#x27;./servers/salesforce&#x27;;

const transcript = (await gdrive.getDocument({ documentId: &#x27;abc123&#x27; })).content;
await salesforce.updateRecord({
  objectType: &#x27;SalesMeeting&#x27;,
  recordId: &#x27;00Q5f000001abcXYZ&#x27;,
  data: { Notes: transcript }
});
</code></pre><div class="CodeBlock-module-scss-module__PbWBnq__controls"><button aria-label="Copy code"><svg class="Icon-module-scss-module__lqbdHG__icon" width="11" height="15" viewBox="0 0 11 15"><path d="M5.4 0C6.39875 0 7.26819 0.543814 7.73525 1.35H9.45C10.1956 1.35 10.8 1.95442 10.8 2.7V13.5C10.8 14.2456 10.1956 14.85 9.45 14.85H1.35C0.604415 14.85 2.17436e-08 14.2456 0 13.5V2.7C1.7395e-07 1.95442 0.604415 1.35 1.35 1.35H3.06475C3.53181 0.543814 4.40125 0 5.4 0ZM1.35 2.25C1.10147 2.25 0.9 2.45147 0.9 2.7V13.5C0.9 13.7485 1.10147 13.95 1.35 13.95H9.45C9.69853 13.95 9.9 13.7485 9.9 13.5V2.7C9.9 2.45147 9.69853 2.25 9.45 2.25H8.06221C8.08677 2.39637 8.1 2.54665 8.1 2.7V3.6C8.1 3.84853 7.89853 4.05 7.65 4.05H3.15C2.90147 4.05 2.7 3.84853 2.7 3.6V2.7C2.7 2.54665 2.71323 2.39637 2.73779 2.25H1.35ZM7.68603 10.6233C7.78376 10.395 8.04828 10.2886 8.27666 10.386C8.50499 10.4838 8.61143 10.7483 8.51396 10.9767C8.24856 11.5967 7.73014 12.15 7.01982 12.15C6.58192 12.1499 6.21722 11.9397 5.93965 11.6332C5.66215 11.9395 5.29801 12.1499 4.86035 12.15C4.42229 12.15 4.05692 11.9398 3.7793 11.6332C3.50175 11.9395 3.13773 12.15 2.7 12.15C2.45147 12.15 2.25 11.9485 2.25 11.7C2.25 11.4515 2.45147 11.25 2.7 11.25C2.8912 11.25 3.16726 11.0879 3.36621 10.6233L3.39697 10.5636C3.47806 10.4321 3.62261 10.35 3.78018 10.35C3.9602 10.3501 4.1233 10.4578 4.19414 10.6233C4.39309 11.0878 4.66917 11.25 4.86035 11.25C5.05156 11.2498 5.32773 11.0877 5.52656 10.6233L5.55732 10.5636C5.63837 10.4323 5.78229 10.3501 5.93965 10.35C6.11974 10.35 6.28275 10.4578 6.35361 10.6233C6.55251 11.0878 6.82862 11.2499 7.01982 11.25C7.21102 11.25 7.48708 11.0879 7.68603 10.6233ZM7.68603 7.02334C7.78376 6.79501 8.04828 6.68857 8.27666 6.78604C8.50499 6.88376 8.61143 7.14828 8.51396 7.37666C8.24856 7.99675 7.73014 8.55 7.01982 8.55C6.58192 8.54994 6.21722 8.3397 5.93965 8.0332C5.66215 8.33947 5.29801 8.54989 4.86035 8.55C4.42229 8.55 4.05692 8.33983 3.7793 8.0332C3.50175 8.33945 3.13773 8.55 2.7 8.55C2.45147 8.55 2.25 8.34853 2.25 8.1C2.25 7.85147 2.45147 7.65 2.7 7.65C2.8912 7.65 3.16726 7.48791 3.36621 7.02334L3.39697 6.96357C3.47806 6.83213 3.62261 6.75 3.78018 6.75C3.9602 6.75007 4.1233 6.85783 4.19414 7.02334C4.39309 7.48782 4.66917 7.65 4.86035 7.65C5.05156 7.6498 5.32773 7.48772 5.52656 7.02334L5.55732 6.96357C5.63837 6.83232 5.78229 6.75012 5.93965 6.75C6.11974 6.75 6.28275 6.85778 6.35361 7.02334C6.55251 7.48782 6.82862 7.6499 7.01982 7.65C7.21102 7.65 7.48708 7.48786 7.68603 7.02334ZM5.4 0.9C4.40589 0.9 3.6 1.70589 3.6 2.7V3.15H7.2V2.7C7.2 1.70589 6.39411 0.9 5.4 0.9Z" fill="currentColor"></path></svg><span class="body-3">Copy</span></button></div></div></div><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">The agent discovers tools by exploring the filesystem: listing the <code class="InlineCodeBlock-module-scss-module__nsPAba__code">./servers/ </code>directory to find available servers (like <code class="InlineCodeBlock-module-scss-module__nsPAba__code">google-drive</code> and <code class="InlineCodeBlock-module-scss-module__nsPAba__code">salesforce</code>), then reading the specific tool files it needs (like <code class="InlineCodeBlock-module-scss-module__nsPAba__code">getDocument.ts</code> and <code class="InlineCodeBlock-module-scss-module__nsPAba__code">updateRecord.ts</code>) to understand each tool&#x27;s interface. This lets the agent load only the definitions it needs for the current task. This reduces the token usage from 150,000 tokens to 2,000 tokens—a time and cost saving of 98.7%<strong>.</strong></p><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">Cloudflare <a href="https://blog.cloudflare.com/code-mode/" target="_blank" rel="noopener noreferrer">published similar findings</a>, referring to code execution with MCP as “Code Mode.&quot; The core insight is the same: LLMs are adept at writing code and developers should take advantage of this strength to build agents that interact with MCP servers more efficiently.</p><h2 class="Body-module-scss-module__z40yvW__reading-column headline-4 post-heading" id="benefits-of-code-execution-with-mcp"><strong>Benefits of code execution with MCP</strong></h2><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">Code execution with MCP enables agents to use context more efficiently by loading tools on demand, filtering data before it reaches the model, and executing complex logic in a single step. There are also security and state management benefits to using this approach.</p><h3 class="Body-module-scss-module__z40yvW__reading-column headline-5 post-section" id="progressive-disclosure">Progressive disclosure</h3><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">Models are great at navigating filesystems. Presenting tools as code on a filesystem allows models to read tool definitions on-demand, rather than reading them all up-front.</p><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">Alternatively, a <code class="InlineCodeBlock-module-scss-module__nsPAba__code">search_tools</code> tool can be added to the server to find relevant definitions. For example, when working with the hypothetical Salesforce server used above, the agent searches for &quot;salesforce&quot; and loads only those tools that it needs for the current task. Including a detail level parameter in the <code class="InlineCodeBlock-module-scss-module__nsPAba__code">search_tools</code> tool that allows the agent to select the level of detail required (such as name only, name and description, or the full definition with schemas) also helps the agent conserve context and find tools efficiently.</p><h3 class="Body-module-scss-module__z40yvW__reading-column headline-5 post-section" id="context-efficient-tool-results">Context efficient tool results</h3><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">When working with large datasets, agents can filter and transform results in code before returning them. Consider fetching a 10,000-row spreadsheet:</p><div class="Body-module-scss-module__z40yvW__media-column Body-module-scss-module__z40yvW__inline"><div class="CodeBlock-module-scss-module__PbWBnq__codeBlock"><pre class="" style="--height:300px;--height-expanded:0px"><code class="plaintext">// Without code execution - all rows flow through context
TOOL CALL: gdrive.getSheet(sheetId: &#x27;abc123&#x27;)
        → returns 10,000 rows in context to filter manually

// With code execution - filter in the execution environment
const allRows = await gdrive.getSheet({ sheetId: &#x27;abc123&#x27; });
const pendingOrders = allRows.filter(row =&gt; 
  row[&quot;Status&quot;] === &#x27;pending&#x27;
);
console.log(`Found ${pendingOrders.length} pending orders`);
console.log(pendingOrders.slice(0, 5)); // Only log first 5 for review</code></pre><div class="CodeBlock-module-scss-module__PbWBnq__controls"><button aria-label="Copy code"><svg class="Icon-module-scss-module__lqbdHG__icon" width="11" height="15" viewBox="0 0 11 15"><path d="M5.4 0C6.39875 0 7.26819 0.543814 7.73525 1.35H9.45C10.1956 1.35 10.8 1.95442 10.8 2.7V13.5C10.8 14.2456 10.1956 14.85 9.45 14.85H1.35C0.604415 14.85 2.17436e-08 14.2456 0 13.5V2.7C1.7395e-07 1.95442 0.604415 1.35 1.35 1.35H3.06475C3.53181 0.543814 4.40125 0 5.4 0ZM1.35 2.25C1.10147 2.25 0.9 2.45147 0.9 2.7V13.5C0.9 13.7485 1.10147 13.95 1.35 13.95H9.45C9.69853 13.95 9.9 13.7485 9.9 13.5V2.7C9.9 2.45147 9.69853 2.25 9.45 2.25H8.06221C8.08677 2.39637 8.1 2.54665 8.1 2.7V3.6C8.1 3.84853 7.89853 4.05 7.65 4.05H3.15C2.90147 4.05 2.7 3.84853 2.7 3.6V2.7C2.7 2.54665 2.71323 2.39637 2.73779 2.25H1.35ZM7.68603 10.6233C7.78376 10.395 8.04828 10.2886 8.27666 10.386C8.50499 10.4838 8.61143 10.7483 8.51396 10.9767C8.24856 11.5967 7.73014 12.15 7.01982 12.15C6.58192 12.1499 6.21722 11.9397 5.93965 11.6332C5.66215 11.9395 5.29801 12.1499 4.86035 12.15C4.42229 12.15 4.05692 11.9398 3.7793 11.6332C3.50175 11.9395 3.13773 12.15 2.7 12.15C2.45147 12.15 2.25 11.9485 2.25 11.7C2.25 11.4515 2.45147 11.25 2.7 11.25C2.8912 11.25 3.16726 11.0879 3.36621 10.6233L3.39697 10.5636C3.47806 10.4321 3.62261 10.35 3.78018 10.35C3.9602 10.3501 4.1233 10.4578 4.19414 10.6233C4.39309 11.0878 4.66917 11.25 4.86035 11.25C5.05156 11.2498 5.32773 11.0877 5.52656 10.6233L5.55732 10.5636C5.63837 10.4323 5.78229 10.3501 5.93965 10.35C6.11974 10.35 6.28275 10.4578 6.35361 10.6233C6.55251 11.0878 6.82862 11.2499 7.01982 11.25C7.21102 11.25 7.48708 11.0879 7.68603 10.6233ZM7.68603 7.02334C7.78376 6.79501 8.04828 6.68857 8.27666 6.78604C8.50499 6.88376 8.61143 7.14828 8.51396 7.37666C8.24856 7.99675 7.73014 8.55 7.01982 8.55C6.58192 8.54994 6.21722 8.3397 5.93965 8.0332C5.66215 8.33947 5.29801 8.54989 4.86035 8.55C4.42229 8.55 4.05692 8.33983 3.7793 8.0332C3.50175 8.33945 3.13773 8.55 2.7 8.55C2.45147 8.55 2.25 8.34853 2.25 8.1C2.25 7.85147 2.45147 7.65 2.7 7.65C2.8912 7.65 3.16726 7.48791 3.36621 7.02334L3.39697 6.96357C3.47806 6.83213 3.62261 6.75 3.78018 6.75C3.9602 6.75007 4.1233 6.85783 4.19414 7.02334C4.39309 7.48782 4.66917 7.65 4.86035 7.65C5.05156 7.6498 5.32773 7.48772 5.52656 7.02334L5.55732 6.96357C5.63837 6.83232 5.78229 6.75012 5.93965 6.75C6.11974 6.75 6.28275 6.85778 6.35361 7.02334C6.55251 7.48782 6.82862 7.6499 7.01982 7.65C7.21102 7.65 7.48708 7.48786 7.68603 7.02334ZM5.4 0.9C4.40589 0.9 3.6 1.70589 3.6 2.7V3.15H7.2V2.7C7.2 1.70589 6.39411 0.9 5.4 0.9Z" fill="currentColor"></path></svg><span class="body-3">Copy</span></button></div></div></div><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">The agent sees five rows instead of 10,000. Similar patterns work for aggregations, joins across multiple data sources, or extracting specific fields—all without bloating the context window.</p><h4 class="Body-module-scss-module__z40yvW__reading-column headline-6 post-subsection" id="more-powerful-and-context-efficient-control-flow"><strong>More powerful and context-efficient control flow</strong></h4><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">Loops, conditionals, and error handling can be done with familiar code patterns rather than chaining individual tool calls. For example, if you need a deployment notification in Slack, the agent can write:</p><div class="Body-module-scss-module__z40yvW__media-column Body-module-scss-module__z40yvW__inline"><div class="CodeBlock-module-scss-module__PbWBnq__codeBlock"><pre class="" style="--height:300px;--height-expanded:0px"><code class="plaintext">let found = false;
while (!found) {
  const messages = await slack.getChannelHistory({ channel: &#x27;C123456&#x27; });
  found = messages.some(m =&gt; m.text.includes(&#x27;deployment complete&#x27;));
  if (!found) await new Promise(r =&gt; setTimeout(r, 5000));
}
console.log(&#x27;Deployment notification received&#x27;);</code></pre><div class="CodeBlock-module-scss-module__PbWBnq__controls"><button aria-label="Copy code"><svg class="Icon-module-scss-module__lqbdHG__icon" width="11" height="15" viewBox="0 0 11 15"><path d="M5.4 0C6.39875 0 7.26819 0.543814 7.73525 1.35H9.45C10.1956 1.35 10.8 1.95442 10.8 2.7V13.5C10.8 14.2456 10.1956 14.85 9.45 14.85H1.35C0.604415 14.85 2.17436e-08 14.2456 0 13.5V2.7C1.7395e-07 1.95442 0.604415 1.35 1.35 1.35H3.06475C3.53181 0.543814 4.40125 0 5.4 0ZM1.35 2.25C1.10147 2.25 0.9 2.45147 0.9 2.7V13.5C0.9 13.7485 1.10147 13.95 1.35 13.95H9.45C9.69853 13.95 9.9 13.7485 9.9 13.5V2.7C9.9 2.45147 9.69853 2.25 9.45 2.25H8.06221C8.08677 2.39637 8.1 2.54665 8.1 2.7V3.6C8.1 3.84853 7.89853 4.05 7.65 4.05H3.15C2.90147 4.05 2.7 3.84853 2.7 3.6V2.7C2.7 2.54665 2.71323 2.39637 2.73779 2.25H1.35ZM7.68603 10.6233C7.78376 10.395 8.04828 10.2886 8.27666 10.386C8.50499 10.4838 8.61143 10.7483 8.51396 10.9767C8.24856 11.5967 7.73014 12.15 7.01982 12.15C6.58192 12.1499 6.21722 11.9397 5.93965 11.6332C5.66215 11.9395 5.29801 12.1499 4.86035 12.15C4.42229 12.15 4.05692 11.9398 3.7793 11.6332C3.50175 11.9395 3.13773 12.15 2.7 12.15C2.45147 12.15 2.25 11.9485 2.25 11.7C2.25 11.4515 2.45147 11.25 2.7 11.25C2.8912 11.25 3.16726 11.0879 3.36621 10.6233L3.39697 10.5636C3.47806 10.4321 3.62261 10.35 3.78018 10.35C3.9602 10.3501 4.1233 10.4578 4.19414 10.6233C4.39309 11.0878 4.66917 11.25 4.86035 11.25C5.05156 11.2498 5.32773 11.0877 5.52656 10.6233L5.55732 10.5636C5.63837 10.4323 5.78229 10.3501 5.93965 10.35C6.11974 10.35 6.28275 10.4578 6.35361 10.6233C6.55251 11.0878 6.82862 11.2499 7.01982 11.25C7.21102 11.25 7.48708 11.0879 7.68603 10.6233ZM7.68603 7.02334C7.78376 6.79501 8.04828 6.68857 8.27666 6.78604C8.50499 6.88376 8.61143 7.14828 8.51396 7.37666C8.24856 7.99675 7.73014 8.55 7.01982 8.55C6.58192 8.54994 6.21722 8.3397 5.93965 8.0332C5.66215 8.33947 5.29801 8.54989 4.86035 8.55C4.42229 8.55 4.05692 8.33983 3.7793 8.0332C3.50175 8.33945 3.13773 8.55 2.7 8.55C2.45147 8.55 2.25 8.34853 2.25 8.1C2.25 7.85147 2.45147 7.65 2.7 7.65C2.8912 7.65 3.16726 7.48791 3.36621 7.02334L3.39697 6.96357C3.47806 6.83213 3.62261 6.75 3.78018 6.75C3.9602 6.75007 4.1233 6.85783 4.19414 7.02334C4.39309 7.48782 4.66917 7.65 4.86035 7.65C5.05156 7.6498 5.32773 7.48772 5.52656 7.02334L5.55732 6.96357C5.63837 6.83232 5.78229 6.75012 5.93965 6.75C6.11974 6.75 6.28275 6.85778 6.35361 7.02334C6.55251 7.48782 6.82862 7.6499 7.01982 7.65C7.21102 7.65 7.48708 7.48786 7.68603 7.02334ZM5.4 0.9C4.40589 0.9 3.6 1.70589 3.6 2.7V3.15H7.2V2.7C7.2 1.70589 6.39411 0.9 5.4 0.9Z" fill="currentColor"></path></svg><span class="body-3">Copy</span></button></div></div></div><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">This approach is more efficient than alternating between MCP tool calls and sleep commands through the agent loop.</p><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">Additionally, being able to write out a conditional tree that gets executed also saves on “time to first token” latency: rather than having to wait for a model to evaluate an if-statement, the agent can let the code execution environment do this.</p><h3 class="Body-module-scss-module__z40yvW__reading-column headline-5 post-section" id="privacy-preserving-operations">Privacy-preserving operations</h3><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">When agents use code execution with MCP, intermediate results stay in the execution environment by default. This way, the agent only sees what you explicitly log or return, meaning data you don’t wish to share with the model can flow through your workflow without ever entering the model&#x27;s context.</p><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">For even more sensitive workloads, the agent harness can tokenize sensitive data automatically. For example, imagine you need to import customer contact details from a spreadsheet into Salesforce. The agent writes:</p><div class="Body-module-scss-module__z40yvW__media-column Body-module-scss-module__z40yvW__inline"><div class="CodeBlock-module-scss-module__PbWBnq__codeBlock"><pre class="" style="--height:300px;--height-expanded:0px"><code class="plaintext">const sheet = await gdrive.getSheet({ sheetId: &#x27;abc123&#x27; });
for (const row of sheet.rows) {
  await salesforce.updateRecord({
    objectType: &#x27;Lead&#x27;,
    recordId: row.salesforceId,
    data: { 
      Email: row.email,
      Phone: row.phone,
      Name: row.name
    }
  });
}
console.log(`Updated ${sheet.rows.length} leads`);</code></pre><div class="CodeBlock-module-scss-module__PbWBnq__controls"><button aria-label="Copy code"><svg class="Icon-module-scss-module__lqbdHG__icon" width="11" height="15" viewBox="0 0 11 15"><path d="M5.4 0C6.39875 0 7.26819 0.543814 7.73525 1.35H9.45C10.1956 1.35 10.8 1.95442 10.8 2.7V13.5C10.8 14.2456 10.1956 14.85 9.45 14.85H1.35C0.604415 14.85 2.17436e-08 14.2456 0 13.5V2.7C1.7395e-07 1.95442 0.604415 1.35 1.35 1.35H3.06475C3.53181 0.543814 4.40125 0 5.4 0ZM1.35 2.25C1.10147 2.25 0.9 2.45147 0.9 2.7V13.5C0.9 13.7485 1.10147 13.95 1.35 13.95H9.45C9.69853 13.95 9.9 13.7485 9.9 13.5V2.7C9.9 2.45147 9.69853 2.25 9.45 2.25H8.06221C8.08677 2.39637 8.1 2.54665 8.1 2.7V3.6C8.1 3.84853 7.89853 4.05 7.65 4.05H3.15C2.90147 4.05 2.7 3.84853 2.7 3.6V2.7C2.7 2.54665 2.71323 2.39637 2.73779 2.25H1.35ZM7.68603 10.6233C7.78376 10.395 8.04828 10.2886 8.27666 10.386C8.50499 10.4838 8.61143 10.7483 8.51396 10.9767C8.24856 11.5967 7.73014 12.15 7.01982 12.15C6.58192 12.1499 6.21722 11.9397 5.93965 11.6332C5.66215 11.9395 5.29801 12.1499 4.86035 12.15C4.42229 12.15 4.05692 11.9398 3.7793 11.6332C3.50175 11.9395 3.13773 12.15 2.7 12.15C2.45147 12.15 2.25 11.9485 2.25 11.7C2.25 11.4515 2.45147 11.25 2.7 11.25C2.8912 11.25 3.16726 11.0879 3.36621 10.6233L3.39697 10.5636C3.47806 10.4321 3.62261 10.35 3.78018 10.35C3.9602 10.3501 4.1233 10.4578 4.19414 10.6233C4.39309 11.0878 4.66917 11.25 4.86035 11.25C5.05156 11.2498 5.32773 11.0877 5.52656 10.6233L5.55732 10.5636C5.63837 10.4323 5.78229 10.3501 5.93965 10.35C6.11974 10.35 6.28275 10.4578 6.35361 10.6233C6.55251 11.0878 6.82862 11.2499 7.01982 11.25C7.21102 11.25 7.48708 11.0879 7.68603 10.6233ZM7.68603 7.02334C7.78376 6.79501 8.04828 6.68857 8.27666 6.78604C8.50499 6.88376 8.61143 7.14828 8.51396 7.37666C8.24856 7.99675 7.73014 8.55 7.01982 8.55C6.58192 8.54994 6.21722 8.3397 5.93965 8.0332C5.66215 8.33947 5.29801 8.54989 4.86035 8.55C4.42229 8.55 4.05692 8.33983 3.7793 8.0332C3.50175 8.33945 3.13773 8.55 2.7 8.55C2.45147 8.55 2.25 8.34853 2.25 8.1C2.25 7.85147 2.45147 7.65 2.7 7.65C2.8912 7.65 3.16726 7.48791 3.36621 7.02334L3.39697 6.96357C3.47806 6.83213 3.62261 6.75 3.78018 6.75C3.9602 6.75007 4.1233 6.85783 4.19414 7.02334C4.39309 7.48782 4.66917 7.65 4.86035 7.65C5.05156 7.6498 5.32773 7.48772 5.52656 7.02334L5.55732 6.96357C5.63837 6.83232 5.78229 6.75012 5.93965 6.75C6.11974 6.75 6.28275 6.85778 6.35361 7.02334C6.55251 7.48782 6.82862 7.6499 7.01982 7.65C7.21102 7.65 7.48708 7.48786 7.68603 7.02334ZM5.4 0.9C4.40589 0.9 3.6 1.70589 3.6 2.7V3.15H7.2V2.7C7.2 1.70589 6.39411 0.9 5.4 0.9Z" fill="currentColor"></path></svg><span class="body-3">Copy</span></button></div></div></div><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">The MCP client intercepts the data and tokenizes PII before it reaches the model:</p><div class="Body-module-scss-module__z40yvW__media-column Body-module-scss-module__z40yvW__inline"><div class="CodeBlock-module-scss-module__PbWBnq__codeBlock"><pre class="" style="--height:300px;--height-expanded:0px"><code class="plaintext">// What the agent would see, if it logged the sheet.rows:
[
  { salesforceId: &#x27;00Q...&#x27;, email: &#x27;[EMAIL_1]&#x27;, phone: &#x27;[PHONE_1]&#x27;, name: &#x27;[NAME_1]&#x27; },
  { salesforceId: &#x27;00Q...&#x27;, email: &#x27;[EMAIL_2]&#x27;, phone: &#x27;[PHONE_2]&#x27;, name: &#x27;[NAME_2]&#x27; },
  ...
]</code></pre><div class="CodeBlock-module-scss-module__PbWBnq__controls"><button aria-label="Copy code"><svg class="Icon-module-scss-module__lqbdHG__icon" width="11" height="15" viewBox="0 0 11 15"><path d="M5.4 0C6.39875 0 7.26819 0.543814 7.73525 1.35H9.45C10.1956 1.35 10.8 1.95442 10.8 2.7V13.5C10.8 14.2456 10.1956 14.85 9.45 14.85H1.35C0.604415 14.85 2.17436e-08 14.2456 0 13.5V2.7C1.7395e-07 1.95442 0.604415 1.35 1.35 1.35H3.06475C3.53181 0.543814 4.40125 0 5.4 0ZM1.35 2.25C1.10147 2.25 0.9 2.45147 0.9 2.7V13.5C0.9 13.7485 1.10147 13.95 1.35 13.95H9.45C9.69853 13.95 9.9 13.7485 9.9 13.5V2.7C9.9 2.45147 9.69853 2.25 9.45 2.25H8.06221C8.08677 2.39637 8.1 2.54665 8.1 2.7V3.6C8.1 3.84853 7.89853 4.05 7.65 4.05H3.15C2.90147 4.05 2.7 3.84853 2.7 3.6V2.7C2.7 2.54665 2.71323 2.39637 2.73779 2.25H1.35ZM7.68603 10.6233C7.78376 10.395 8.04828 10.2886 8.27666 10.386C8.50499 10.4838 8.61143 10.7483 8.51396 10.9767C8.24856 11.5967 7.73014 12.15 7.01982 12.15C6.58192 12.1499 6.21722 11.9397 5.93965 11.6332C5.66215 11.9395 5.29801 12.1499 4.86035 12.15C4.42229 12.15 4.05692 11.9398 3.7793 11.6332C3.50175 11.9395 3.13773 12.15 2.7 12.15C2.45147 12.15 2.25 11.9485 2.25 11.7C2.25 11.4515 2.45147 11.25 2.7 11.25C2.8912 11.25 3.16726 11.0879 3.36621 10.6233L3.39697 10.5636C3.47806 10.4321 3.62261 10.35 3.78018 10.35C3.9602 10.3501 4.1233 10.4578 4.19414 10.6233C4.39309 11.0878 4.66917 11.25 4.86035 11.25C5.05156 11.2498 5.32773 11.0877 5.52656 10.6233L5.55732 10.5636C5.63837 10.4323 5.78229 10.3501 5.93965 10.35C6.11974 10.35 6.28275 10.4578 6.35361 10.6233C6.55251 11.0878 6.82862 11.2499 7.01982 11.25C7.21102 11.25 7.48708 11.0879 7.68603 10.6233ZM7.68603 7.02334C7.78376 6.79501 8.04828 6.68857 8.27666 6.78604C8.50499 6.88376 8.61143 7.14828 8.51396 7.37666C8.24856 7.99675 7.73014 8.55 7.01982 8.55C6.58192 8.54994 6.21722 8.3397 5.93965 8.0332C5.66215 8.33947 5.29801 8.54989 4.86035 8.55C4.42229 8.55 4.05692 8.33983 3.7793 8.0332C3.50175 8.33945 3.13773 8.55 2.7 8.55C2.45147 8.55 2.25 8.34853 2.25 8.1C2.25 7.85147 2.45147 7.65 2.7 7.65C2.8912 7.65 3.16726 7.48791 3.36621 7.02334L3.39697 6.96357C3.47806 6.83213 3.62261 6.75 3.78018 6.75C3.9602 6.75007 4.1233 6.85783 4.19414 7.02334C4.39309 7.48782 4.66917 7.65 4.86035 7.65C5.05156 7.6498 5.32773 7.48772 5.52656 7.02334L5.55732 6.96357C5.63837 6.83232 5.78229 6.75012 5.93965 6.75C6.11974 6.75 6.28275 6.85778 6.35361 7.02334C6.55251 7.48782 6.82862 7.6499 7.01982 7.65C7.21102 7.65 7.48708 7.48786 7.68603 7.02334ZM5.4 0.9C4.40589 0.9 3.6 1.70589 3.6 2.7V3.15H7.2V2.7C7.2 1.70589 6.39411 0.9 5.4 0.9Z" fill="currentColor"></path></svg><span class="body-3">Copy</span></button></div></div></div><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">Then, when the data is shared in another MCP tool call, it is untokenized via a lookup in the MCP client. The real email addresses, phone numbers, and names flow from Google Sheets to Salesforce, but never through the model. This prevents the agent from accidentally logging or processing sensitive data. You can also use this to define deterministic security rules, choosing where data can flow to and from.</p><h3 class="Body-module-scss-module__z40yvW__reading-column headline-5 post-section" id="state-persistence-and-skills">State persistence and skills</h3><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">Code execution with filesystem access allows agents to maintain state across operations. Agents can write intermediate results to files, enabling them to resume work and track progress:</p><div class="Body-module-scss-module__z40yvW__media-column Body-module-scss-module__z40yvW__inline"><div class="CodeBlock-module-scss-module__PbWBnq__codeBlock"><pre class="" style="--height:300px;--height-expanded:0px"><code class="plaintext">const leads = await salesforce.query({ 
  query: &#x27;SELECT Id, Email FROM Lead LIMIT 1000&#x27; 
});
const csvData = leads.map(l =&gt; `${l.Id},${l.Email}`).join(&#x27;\n&#x27;);
await fs.writeFile(&#x27;./workspace/leads.csv&#x27;, csvData);

// Later execution picks up where it left off
const saved = await fs.readFile(&#x27;./workspace/leads.csv&#x27;, &#x27;utf-8&#x27;);</code></pre><div class="CodeBlock-module-scss-module__PbWBnq__controls"><button aria-label="Copy code"><svg class="Icon-module-scss-module__lqbdHG__icon" width="11" height="15" viewBox="0 0 11 15"><path d="M5.4 0C6.39875 0 7.26819 0.543814 7.73525 1.35H9.45C10.1956 1.35 10.8 1.95442 10.8 2.7V13.5C10.8 14.2456 10.1956 14.85 9.45 14.85H1.35C0.604415 14.85 2.17436e-08 14.2456 0 13.5V2.7C1.7395e-07 1.95442 0.604415 1.35 1.35 1.35H3.06475C3.53181 0.543814 4.40125 0 5.4 0ZM1.35 2.25C1.10147 2.25 0.9 2.45147 0.9 2.7V13.5C0.9 13.7485 1.10147 13.95 1.35 13.95H9.45C9.69853 13.95 9.9 13.7485 9.9 13.5V2.7C9.9 2.45147 9.69853 2.25 9.45 2.25H8.06221C8.08677 2.39637 8.1 2.54665 8.1 2.7V3.6C8.1 3.84853 7.89853 4.05 7.65 4.05H3.15C2.90147 4.05 2.7 3.84853 2.7 3.6V2.7C2.7 2.54665 2.71323 2.39637 2.73779 2.25H1.35ZM7.68603 10.6233C7.78376 10.395 8.04828 10.2886 8.27666 10.386C8.50499 10.4838 8.61143 10.7483 8.51396 10.9767C8.24856 11.5967 7.73014 12.15 7.01982 12.15C6.58192 12.1499 6.21722 11.9397 5.93965 11.6332C5.66215 11.9395 5.29801 12.1499 4.86035 12.15C4.42229 12.15 4.05692 11.9398 3.7793 11.6332C3.50175 11.9395 3.13773 12.15 2.7 12.15C2.45147 12.15 2.25 11.9485 2.25 11.7C2.25 11.4515 2.45147 11.25 2.7 11.25C2.8912 11.25 3.16726 11.0879 3.36621 10.6233L3.39697 10.5636C3.47806 10.4321 3.62261 10.35 3.78018 10.35C3.9602 10.3501 4.1233 10.4578 4.19414 10.6233C4.39309 11.0878 4.66917 11.25 4.86035 11.25C5.05156 11.2498 5.32773 11.0877 5.52656 10.6233L5.55732 10.5636C5.63837 10.4323 5.78229 10.3501 5.93965 10.35C6.11974 10.35 6.28275 10.4578 6.35361 10.6233C6.55251 11.0878 6.82862 11.2499 7.01982 11.25C7.21102 11.25 7.48708 11.0879 7.68603 10.6233ZM7.68603 7.02334C7.78376 6.79501 8.04828 6.68857 8.27666 6.78604C8.50499 6.88376 8.61143 7.14828 8.51396 7.37666C8.24856 7.99675 7.73014 8.55 7.01982 8.55C6.58192 8.54994 6.21722 8.3397 5.93965 8.0332C5.66215 8.33947 5.29801 8.54989 4.86035 8.55C4.42229 8.55 4.05692 8.33983 3.7793 8.0332C3.50175 8.33945 3.13773 8.55 2.7 8.55C2.45147 8.55 2.25 8.34853 2.25 8.1C2.25 7.85147 2.45147 7.65 2.7 7.65C2.8912 7.65 3.16726 7.48791 3.36621 7.02334L3.39697 6.96357C3.47806 6.83213 3.62261 6.75 3.78018 6.75C3.9602 6.75007 4.1233 6.85783 4.19414 7.02334C4.39309 7.48782 4.66917 7.65 4.86035 7.65C5.05156 7.6498 5.32773 7.48772 5.52656 7.02334L5.55732 6.96357C5.63837 6.83232 5.78229 6.75012 5.93965 6.75C6.11974 6.75 6.28275 6.85778 6.35361 7.02334C6.55251 7.48782 6.82862 7.6499 7.01982 7.65C7.21102 7.65 7.48708 7.48786 7.68603 7.02334ZM5.4 0.9C4.40589 0.9 3.6 1.70589 3.6 2.7V3.15H7.2V2.7C7.2 1.70589 6.39411 0.9 5.4 0.9Z" fill="currentColor"></path></svg><span class="body-3">Copy</span></button></div></div></div><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">Agents can also persist their own code as reusable functions. Once an agent develops working code for a task, it can save that implementation for future use:</p><div class="Body-module-scss-module__z40yvW__media-column Body-module-scss-module__z40yvW__inline"><div class="CodeBlock-module-scss-module__PbWBnq__codeBlock"><pre class="" style="--height:300px;--height-expanded:0px"><code class="plaintext">// In ./skills/save-sheet-as-csv.ts
import * as gdrive from &#x27;./servers/google-drive&#x27;;
export async function saveSheetAsCsv(sheetId: string) {
  const data = await gdrive.getSheet({ sheetId });
  const csv = data.map(row =&gt; row.join(&#x27;,&#x27;)).join(&#x27;\n&#x27;);
  await fs.writeFile(`./workspace/sheet-${sheetId}.csv`, csv);
  return `./workspace/sheet-${sheetId}.csv`;
}

// Later, in any agent execution:
import { saveSheetAsCsv } from &#x27;./skills/save-sheet-as-csv&#x27;;
const csvPath = await saveSheetAsCsv(&#x27;abc123&#x27;);</code></pre><div class="CodeBlock-module-scss-module__PbWBnq__controls"><button aria-label="Copy code"><svg class="Icon-module-scss-module__lqbdHG__icon" width="11" height="15" viewBox="0 0 11 15"><path d="M5.4 0C6.39875 0 7.26819 0.543814 7.73525 1.35H9.45C10.1956 1.35 10.8 1.95442 10.8 2.7V13.5C10.8 14.2456 10.1956 14.85 9.45 14.85H1.35C0.604415 14.85 2.17436e-08 14.2456 0 13.5V2.7C1.7395e-07 1.95442 0.604415 1.35 1.35 1.35H3.06475C3.53181 0.543814 4.40125 0 5.4 0ZM1.35 2.25C1.10147 2.25 0.9 2.45147 0.9 2.7V13.5C0.9 13.7485 1.10147 13.95 1.35 13.95H9.45C9.69853 13.95 9.9 13.7485 9.9 13.5V2.7C9.9 2.45147 9.69853 2.25 9.45 2.25H8.06221C8.08677 2.39637 8.1 2.54665 8.1 2.7V3.6C8.1 3.84853 7.89853 4.05 7.65 4.05H3.15C2.90147 4.05 2.7 3.84853 2.7 3.6V2.7C2.7 2.54665 2.71323 2.39637 2.73779 2.25H1.35ZM7.68603 10.6233C7.78376 10.395 8.04828 10.2886 8.27666 10.386C8.50499 10.4838 8.61143 10.7483 8.51396 10.9767C8.24856 11.5967 7.73014 12.15 7.01982 12.15C6.58192 12.1499 6.21722 11.9397 5.93965 11.6332C5.66215 11.9395 5.29801 12.1499 4.86035 12.15C4.42229 12.15 4.05692 11.9398 3.7793 11.6332C3.50175 11.9395 3.13773 12.15 2.7 12.15C2.45147 12.15 2.25 11.9485 2.25 11.7C2.25 11.4515 2.45147 11.25 2.7 11.25C2.8912 11.25 3.16726 11.0879 3.36621 10.6233L3.39697 10.5636C3.47806 10.4321 3.62261 10.35 3.78018 10.35C3.9602 10.3501 4.1233 10.4578 4.19414 10.6233C4.39309 11.0878 4.66917 11.25 4.86035 11.25C5.05156 11.2498 5.32773 11.0877 5.52656 10.6233L5.55732 10.5636C5.63837 10.4323 5.78229 10.3501 5.93965 10.35C6.11974 10.35 6.28275 10.4578 6.35361 10.6233C6.55251 11.0878 6.82862 11.2499 7.01982 11.25C7.21102 11.25 7.48708 11.0879 7.68603 10.6233ZM7.68603 7.02334C7.78376 6.79501 8.04828 6.68857 8.27666 6.78604C8.50499 6.88376 8.61143 7.14828 8.51396 7.37666C8.24856 7.99675 7.73014 8.55 7.01982 8.55C6.58192 8.54994 6.21722 8.3397 5.93965 8.0332C5.66215 8.33947 5.29801 8.54989 4.86035 8.55C4.42229 8.55 4.05692 8.33983 3.7793 8.0332C3.50175 8.33945 3.13773 8.55 2.7 8.55C2.45147 8.55 2.25 8.34853 2.25 8.1C2.25 7.85147 2.45147 7.65 2.7 7.65C2.8912 7.65 3.16726 7.48791 3.36621 7.02334L3.39697 6.96357C3.47806 6.83213 3.62261 6.75 3.78018 6.75C3.9602 6.75007 4.1233 6.85783 4.19414 7.02334C4.39309 7.48782 4.66917 7.65 4.86035 7.65C5.05156 7.6498 5.32773 7.48772 5.52656 7.02334L5.55732 6.96357C5.63837 6.83232 5.78229 6.75012 5.93965 6.75C6.11974 6.75 6.28275 6.85778 6.35361 7.02334C6.55251 7.48782 6.82862 7.6499 7.01982 7.65C7.21102 7.65 7.48708 7.48786 7.68603 7.02334ZM5.4 0.9C4.40589 0.9 3.6 1.70589 3.6 2.7V3.15H7.2V2.7C7.2 1.70589 6.39411 0.9 5.4 0.9Z" fill="currentColor"></path></svg><span class="body-3">Copy</span></button></div></div></div><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">This ties in closely to the concept of <a href="https://docs.claude.com/en/docs/agents-and-tools/agent-skills/overview">Skills</a>, folders of reusable instructions, scripts, and resources for models to improve performance on specialized tasks. Adding a SKILL.md file to these saved functions creates a structured skill that models can reference and use. Over time, this allows your agent to build a toolbox of higher-level capabilities, evolving the scaffolding that it needs to work most effectively.</p><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">Note that code execution introduces its own complexity. Running agent-generated code requires a secure execution environment with appropriate <a href="https://www.anthropic.com/engineering/claude-code-sandboxing">sandboxing</a>, resource limits, and monitoring. These infrastructure requirements add operational overhead and security considerations that direct tool calls avoid. The benefits of code execution—reduced token costs, lower latency, and improved tool composition—should be weighed against these implementation costs.</p><h2 class="Body-module-scss-module__z40yvW__reading-column headline-4 post-heading" id="summary"><strong>Summary</strong></h2><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">MCP provides a foundational protocol for agents to connect to many tools and systems. However, once too many servers are connected, tool definitions and results can consume excessive tokens, reducing agent efficiency.</p><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text">Although many of the problems here feel novel—context management, tool composition, state persistence—they have known solutions from software engineering. Code execution applies these established patterns to agents, letting them use familiar programming constructs to interact with MCP servers more efficiently. If you implement this approach, we encourage you to share your findings with the <a href="https://modelcontextprotocol.io/community/communication">MCP community</a>.</p><h3 class="Body-module-scss-module__z40yvW__reading-column headline-5 post-section" id="acknowledgments-">Acknowledgments </h3><p class="Body-module-scss-module__z40yvW__reading-column body-2 serif post-text"><em>This article was written by Adam Jones and Conor Kelly. Thanks to Jeremy Fox, Jerome Swannack, Stuart Ritchie, Molly Vorwerck, Matt Samuels, and Maggie Vo for feedback on drafts of this post.</em></p></div></div></article><div class="NewsletterEngineering-module-scss-module__AiizZa__wrapper"><div class="NewsletterEngineering-module-scss-module__AiizZa__content"><div class="NewsletterEngineering-module-scss-module__AiizZa__textContent"><h2 class="headline-5 NewsletterEngineering-module-scss-module__AiizZa__title">Get the developer newsletter</h2><div class="NewsletterEngineering-module-scss-module__AiizZa__body"><p class="body-1 serif tight">Product updates, how-tos, community spotlights, and more. Delivered monthly to your inbox.</p></div></div><div class="NewsletterEngineering-module-scss-module__AiizZa__formContainer"><form class="NewsletterEngineering-module-scss-module__AiizZa__emailForm"><div class="NewsletterEngineering-module-scss-module__AiizZa__inputWrapper"><input type="email" placeholder="Enter your email" class="NewsletterEngineering-module-scss-module__AiizZa__emailInput" required="" name="email" value=""/><button type="submit" class="NewsletterEngineering-module-scss-module__AiizZa__submitButton"><svg class="Icon-module-scss-module__lqbdHG__icon" width="20" height="20" viewBox="0 0 21 21"><path d="M4.14585 9.87492L14.4584 9.87492L9.60419 5.04158L10.5 4.14575L16.8542 10.4999L10.5 16.8541L9.60419 15.9583L14.4584 11.1249L4.14585 11.1249L4.14585 9.87492Z" fill="#ffffff"></path></svg></button></div><p class="body-3">Please provide your email address if you’d like to receive our monthly developer newsletter. You can unsubscribe at any time.</p></form></div></div></div></div></main><footer id="footer" class="SiteFooter-module-scss-module__JdOqwq__root" role="contentinfo" aria-label="Site footer"><div class="page-wrapper SiteFooter-module-scss-module__JdOqwq__footer"><div class="SiteFooter-module-scss-module__JdOqwq__logoWrapper"><a href="/" aria-label="Return to homepage"><svg class="Icon-module-scss-module__lqbdHG__icon" width="46" height="32" viewBox="0 0 46 32"><path d="M32.73 0h-6.945L38.45 32h6.945L32.73 0ZM12.665 0 0 32h7.082l2.59-6.72h13.25l2.59 6.72h7.082L19.929 0h-7.264Zm-.702 19.337 4.334-11.246 4.334 11.246h-8.668Z" fill="#faf9f5"></path></svg></a></div><nav class="SiteFooter-module-scss-module__JdOqwq__linksWrapper" aria-label="Footer navigation"><div class="SiteFooter-module-scss-module__JdOqwq__columnSection"><div class="SiteFooter-module-scss-module__JdOqwq__listSection"><h3 class="body-2 bold">Products</h3><ul class="SiteFooter-module-scss-module__JdOqwq__list"><li><a href="https://claude.com/product/overview" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">Claude</a></li><li><a href="https://claude.com/product/claude-code" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">Claude Code</a></li><li><a href="https://claude.com/claude-and-slack" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">Claude and Slack</a></li><li><a href="https://claude.com/claude-for-excel" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">Claude in Excel</a></li><li><a href="https://claude.com/pricing/max" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">Max plan</a></li><li><a href="https://claude.com/pricing/team" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">Team plan</a></li><li><a href="https://claude.com/pricing/enterprise" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">Enterprise plan</a></li><li><a href="https://claude.ai/download" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">Download app</a></li><li><a href="https://claude.com/pricing" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">Pricing</a></li><li><a href="https://claude.ai/" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">Log in to Claude</a></li></ul></div><div class="SiteFooter-module-scss-module__JdOqwq__listSection"><h3 class="body-2 bold">Models</h3><ul class="SiteFooter-module-scss-module__JdOqwq__list"><li><a href="https://www.anthropic.com/claude/opus" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2">Opus</a></li><li><a href="https://www.anthropic.com/claude/sonnet" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2">Sonnet</a></li><li><a href="https://www.anthropic.com/claude/haiku" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2">Haiku</a></li></ul></div></div><div class="SiteFooter-module-scss-module__JdOqwq__columnSection"><div class="SiteFooter-module-scss-module__JdOqwq__listSection"><h3 class="body-2 bold">Solutions</h3><ul class="SiteFooter-module-scss-module__JdOqwq__list"><li><a href="https://claude.com/solutions/agents" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">AI agents</a></li><li><a href="https://claude.com/solutions/code-modernization" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">Code modernization</a></li><li><a href="https://claude.com/solutions/coding" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">Coding</a></li><li><a href="https://claude.com/solutions/customer-support" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">Customer support</a></li><li><a href="https://claude.com/solutions/education" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">Education</a></li><li><a href="https://claude.com/solutions/financial-services" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">Financial services</a></li><li><a href="https://claude.com/solutions/government" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">Government</a></li><li><a href="https://claude.com/solutions/life-sciences" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">Life sciences</a></li></ul></div><div class="SiteFooter-module-scss-module__JdOqwq__listSection"><h3 class="body-2 bold">Claude Developer Platform</h3><ul class="SiteFooter-module-scss-module__JdOqwq__list"><li><a href="https://claude.com/platform/api" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">Overview</a></li><li><a href="https://platform.claude.com/docs" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">Developer docs</a></li><li><a href="https://claude.com/pricing#api" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">Pricing</a></li><li><a href="https://claude.com/partners/amazon-bedrock" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">Amazon Bedrock</a></li><li><a href="https://claude.com/partners/google-cloud-vertex-ai" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">Google Cloud’s Vertex AI</a></li><li><a href="http://console.anthropic.com/" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2">Console login</a></li></ul></div></div><div class="SiteFooter-module-scss-module__JdOqwq__columnSection"><div class="SiteFooter-module-scss-module__JdOqwq__listSection"><h3 class="body-2 bold">Learn</h3><ul class="SiteFooter-module-scss-module__JdOqwq__list"><li><a href="https://claude.com/blog" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">Blog</a></li><li><a href="/learn" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2">Courses</a></li><li><a href="https://claude.com/resources/use-cases" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">Use cases</a></li><li><a href="https://claude.com/partners/mcp" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">Connectors</a></li><li><a href="https://claude.com/customers" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">Customer stories</a></li><li><a href="/engineering" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2">Engineering at Anthropic</a></li><li><a href="/events" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2">Events</a></li><li><a href="https://claude.com/partners/powered-by-claude" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">Powered by Claude</a></li><li><a href="https://claude.com/partners/services" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">Service partners</a></li><li><a href="https://claude.com/programs/startups" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">Startups program</a></li></ul></div><div class="SiteFooter-module-scss-module__JdOqwq__listSection"><h3 class="body-2 bold">Company</h3><ul class="SiteFooter-module-scss-module__JdOqwq__list"><li><a href="/company" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2">Anthropic</a></li><li><a href="/careers" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2">Careers</a></li><li><a href="/economic-index" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2">Economic Futures</a></li><li><a href="/research" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2">Research</a></li><li><a href="/news" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2">News</a></li><li><a href="https://www.anthropic.com/news/announcing-our-updated-responsible-scaling-policy" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2">Responsible Scaling Policy</a></li><li><a href="https://trust.anthropic.com/" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2">Security and compliance</a></li><li><a href="/transparency" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2">Transparency</a></li></ul></div></div><div class="SiteFooter-module-scss-module__JdOqwq__columnSection"><div class="SiteFooter-module-scss-module__JdOqwq__listSection"><h3 class="body-2 bold">Help and security</h3><ul class="SiteFooter-module-scss-module__JdOqwq__list"><li><a href="https://www.anthropic.com/supported-countries" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2">Availability</a></li><li><a href="https://status.anthropic.com/" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2">Status</a></li><li><a href="https://support.claude.com/en/" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2" target="_blank" rel="noopener noreferrer">Support center</a></li></ul></div><div class="SiteFooter-module-scss-module__JdOqwq__listSection"><h3 class="body-2 bold">Terms and policies</h3><ul class="SiteFooter-module-scss-module__JdOqwq__list"><li><a href="https://www.anthropic.com/legal/privacy" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2">Privacy policy</a></li><li><a href="https://www.anthropic.com/responsible-disclosure-policy" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2">Responsible disclosure policy</a></li><li><a href="https://www.anthropic.com/legal/commercial-terms" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2">Terms of service: Commercial</a></li><li><a href="https://www.anthropic.com/legal/consumer-terms" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2">Terms of service: Consumer</a></li><li><a href="https://www.anthropic.com/legal/aup" class="SiteFooter-module-scss-module__JdOqwq__listItem body-2">Usage policy</a></li></ul></div></div></nav><div class="SiteFooter-module-scss-module__JdOqwq__socialWrapper"><small class="body-2 SiteFooter-module-scss-module__JdOqwq__copyright" role="contentinfo">© 2025 Anthropic PBC</small><ul class="SiteFooter-module-scss-module__JdOqwq__socialIcons" role="navigation" aria-label="Social media links"><li><a href="https://www.linkedin.com/company/anthropicresearch" aria-label="Visit our LinkedIn page" target="_blank" rel="noopener noreferrer"><svg class="Icon-module-scss-module__lqbdHG__icon" width="24" height="24" viewBox="0 0 32 32"><path d="M25.8182 4H6.18182C4.97636 4 4 4.97636 4 6.18182V25.8182C4 27.0236 4.97636 28 6.18182 28H25.8182C27.0236 28 28 27.0236 28 25.8182V6.18182C28 4.97636 27.0236 4 25.8182 4ZM11.5862 23.6364H8.368V13.2815H11.5862V23.6364ZM9.94436 11.8011C8.90691 11.8011 8.068 10.96 8.068 9.92473C8.068 8.88945 8.908 8.04945 9.94436 8.04945C10.9785 8.04945 11.8196 8.89055 11.8196 9.92473C11.8196 10.96 10.9785 11.8011 9.94436 11.8011ZM23.6407 23.6364H20.4247V18.6007C20.4247 17.3996 20.4029 15.8549 18.7524 15.8549C17.0778 15.8549 16.8204 17.1629 16.8204 18.5135V23.6364H13.6044V13.2815H16.6916V14.6964H16.7353C17.1651 13.8825 18.2145 13.024 19.78 13.024C23.0385 13.024 23.6407 15.1687 23.6407 17.9571V23.6364Z" fill="#b0aea5"></path></svg></a></li><li><a href="https://x.com/AnthropicAI" aria-label="Visit our X (formerly Twitter) profile" target="_blank" rel="noopener noreferrer"><svg class="Icon-module-scss-module__lqbdHG__icon" width="24" height="24" viewBox="0 0 32 32"><path d="M28 28L18.6145 14.0124L18.6305 14.0255L27.0929 4H24.265L17.3713 12.16L11.8968 4H4.48021L13.2425 17.0593L13.2414 17.0582L4 28H6.82792L14.4921 18.9215L20.5834 28H28ZM10.7763 6.18182L23.9449 25.8182H21.7039L8.52468 6.18182H10.7763Z" fill="#b0aea5"></path></svg></a></li><li><a href="https://www.youtube.com/@anthropic-ai" aria-label="Visit our YouTube channel" target="_blank" rel="noopener noreferrer"><svg class="Icon-module-scss-module__lqbdHG__icon" width="24" height="24" viewBox="0 0 32 32"><path d="M29.2184 9.4375C28.9596 8.06299 27.7263 7.06201 26.2951 6.74951C24.1533 6.3125 20.1896 6 15.901 6C11.615 6 7.58782 6.3125 5.44354 6.74951C4.01486 7.06201 2.77905 7.99951 2.52021 9.4375C2.25884 11 2 13.1875 2 16C2 18.8125 2.25884 21 2.58365 22.5625C2.84502 23.937 4.0783 24.938 5.50698 25.2505C7.78068 25.6875 11.6784 26 15.967 26C20.2556 26 24.1533 25.6875 26.427 25.2505C27.8557 24.938 29.089 24.0005 29.3504 22.5625C29.6092 21 29.934 18.749 30 16C29.868 13.1875 29.5432 11 29.2184 9.4375ZM12.3941 20.375V11.625L20.319 16L12.3941 20.375Z" fill="#b0aea5"></path></svg></a></li></ul></div></div></footer><!--$?--><template id="B:1"></template><!--/$--><script nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi">requestAnimationFrame(function(){$RT=performance.now()});</script><script src="/_next/static/chunks/c68b224ec2e5a0f0.js" nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi" id="_R_" async=""></script><title>Code execution with MCP: building more efficient AI agents \ Anthropic</title><meta name="description" content="Learn how code execution with the Model Context Protocol enables agents to handle more tools while using fewer tokens, reducing context overhead by up to 98.7%."/><meta name="msapplication-TileColor" content="141413"/><meta name="msapplication-config" content="/browserconfig.xml"/><meta property="og:title" content="Code execution with MCP: building more efficient AI agents"/><meta property="og:description" content="Learn how code execution with the Model Context Protocol enables agents to handle more tools while using fewer tokens, reducing context overhead by up to 98.7%."/><meta property="og:image" content="https://cdn.sanity.io/images/4zrzovbb/website/8071ace7b1158ab6d3f8fa04679cef31234425ab-2400x1260.png"/><meta property="og:image:alt" content="Image for MCP and code execution blog post."/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@AnthropicAI"/><meta name="twitter:creator" content="@AnthropicAI"/><meta name="twitter:title" content="Code execution with MCP: building more efficient AI agents"/><meta name="twitter:description" content="Learn how code execution with the Model Context Protocol enables agents to handle more tools while using fewer tokens, reducing context overhead by up to 98.7%."/><meta name="twitter:image" content="https://cdn.sanity.io/images/4zrzovbb/website/8071ace7b1158ab6d3f8fa04679cef31234425ab-2400x1260.png"/><meta name="twitter:image:alt" content="Image for MCP and code execution blog post."/><link rel="shortcut icon" href="/favicon.ico"/><link rel="icon" href="/images/icons/favicon-32x32.png"/><link rel="apple-touch-icon" href="/images/icons/apple-touch-icon.png"/><link rel="apple-touch-icon" href="/images/icons/apple-touch-icon.png" sizes="180x180"/><link rel="mask-icon" href="/images/icons/safari-pinned-tab.svg" color="141413"/><script nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi">document.querySelectorAll('body link[rel="icon"], body link[rel="apple-touch-icon"]').forEach(el => document.head.appendChild(el))</script><div hidden id="S:0"></div><script nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi">$RB=[];$RV=function(a){$RT=performance.now();for(var b=0;b<a.length;b+=2){var c=a[b],e=a[b+1];null!==e.parentNode&&e.parentNode.removeChild(e);var f=c.parentNode;if(f){var g=c.previousSibling,h=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d||"/&"===d)if(0===h)break;else h--;else"$"!==d&&"$?"!==d&&"$~"!==d&&"$!"!==d&&"&"!==d||h++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;e.firstChild;)f.insertBefore(e.firstChild,c);g.data="$";g._reactRetry&&requestAnimationFrame(g._reactRetry)}}a.length=0};
$RC=function(a,b){if(b=document.getElementById(b))(a=document.getElementById(a))?(a.previousSibling.data="$~",$RB.push(a,b),2===$RB.length&&("number"!==typeof $RT?requestAnimationFrame($RV.bind(null,$RB)):(a=performance.now(),setTimeout($RV.bind(null,$RB),2300>a&&2E3<a?2300-a:$RT+300-a)))):b.parentNode.removeChild(b)};$RC("B:0","S:0")</script><div hidden id="S:1"></div><script nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi">$RC("B:1","S:1")</script><script nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi">(self.__next_f=self.__next_f||[]).push([0])</script><script nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi">self.__next_f.push([1,"1:\"$Sreact.fragment\"\n4:I[339756,[\"/_next/static/chunks/d96012bcfc98706a.js\",\"/_next/static/chunks/d80b3790a119a285.js\"],\"default\"]\n5:I[837457,[\"/_next/static/chunks/d96012bcfc98706a.js\",\"/_next/static/chunks/d80b3790a119a285.js\"],\"default\"]\n9:I[168027,[\"/_next/static/chunks/d96012bcfc98706a.js\",\"/_next/static/chunks/d80b3790a119a285.js\"],\"default\"]\na:I[897367,[\"/_next/static/chunks/d96012bcfc98706a.js\",\"/_next/static/chunks/d80b3790a119a285.js\"],\"OutletBoundary\"]\nb:\"$Sreact.suspense\"\nd:I[897367,[\"/_next/static/chunks/d96012bcfc98706a.js\",\"/_next/static/chunks/d80b3790a119a285.js\"],\"ViewportBoundary\"]\nf:I[897367,[\"/_next/static/chunks/d96012bcfc98706a.js\",\"/_next/static/chunks/d80b3790a119a285.js\"],\"MetadataBoundary\"]\n11:I[264900,[\"/_next/static/chunks/1fb574e7be3f9a05.js\",\"/_next/static/chunks/5ae0d9ad512fb263.js\",\"/_next/static/chunks/c1896c986be1a2e2.js\"],\"default\"]\n12:I[96155,[\"/_next/static/chunks/1fb574e7be3f9a05.js\",\"/_next/static/chunks/5ae0d9ad512fb263.js\",\"/_next/static/chunks/c1896c986be1a2e2.js\"],\"default\"]\n14:I[775710,[\"/_next/static/chunks/1fb574e7be3f9a05.js\",\"/_next/static/chunks/5ae0d9ad512fb263.js\",\"/_next/static/chunks/c1896c986be1a2e2.js\",\"/_next/static/chunks/7792a96214bec1f0.js\",\"/_next/static/chunks/90869c85d8d8ba84.js\",\"/_next/static/chunks/55e41b6edc326dca.js\",\"/_next/static/chunks/2fd2aa01a4bc9178.js\",\"/_next/static/chunks/8bdf83f8bd0ec540.js\",\"/_next/static/chunks/046a135eda40f761.js\",\"/_next/static/chunks/8ff14dc5284a5c6d.js\",\"/_next/static/chunks/4d62cd54534b3ba6.js\",\"/_next/static/chunks/1d74fcc382f9306e.js\",\"/_next/static/chunks/8288730f5c5f5922.js\",\"/_next/static/chunks/e95d17fb31990dec.js\",\"/_next/static/chunks/2e3229a62c65aaec.js\"],\"default\"]\n15:I[212433,[\"/_next/static/chunks/1fb574e7be3f9a05.js\",\"/_next/static/chunks/5ae0d9ad512fb263.js\",\"/_next/static/chunks/c1896c986be1a2e2.js\",\"/_next/static/chunks/91a159b613adeb74.js\",\"/_next/static/chunks/90869c85d8d8ba84.js\",\"/_next/static/chunks/eeb90237787e1eca.js\",\"/_next/static/chunks/046a135eda40f761.js\",\"/_next/static/chunks/8bdf83f8bd0ec540.js\",\"/_next/static/chunks/2fd2aa01a4bc9178.js\",\"/_next/static/chunks/8ff14dc5284a5c6d.js\",\"/_next/static/chunks/8288730f5c5f5922.js\",\"/_next/static/chunks/2e3229a62c65aaec.js\",\"/_next/static/chunks/4014b723c1a53f30.js\",\"/_next/static/chunks/fba43d7d87521a3b.js\",\"/_next/static/chunks/1d74fcc382f9306e.js\"],\"default\"]\n17:I[307003,[\"/_next/static/chunks/1fb574e7be3f9a05.js\",\"/_next/static/chunks/5ae0d9ad512fb263.js\",\"/_next/static/chunks/c1896c986be1a2e2.js\",\"/_next/static/chunks/91a159b613adeb74.js\",\"/_next/static/chunks/90869c85d8d8ba84.js\",\"/_next/static/chunks/eeb90237787e1eca.js\",\"/_next/static/chunks/046a135eda40f761.js\",\"/_next/static/chunks/8bdf83f8bd0ec540.js\",\"/_next/static/chunks/2fd2aa01a4bc9178.js\",\"/_next/static/chunks/8ff14dc5284a5c6d.js\",\"/_next/static/chunks/8288730f5c5f5922.js\",\"/_next/static/chunks/2e3229a62c65aaec.js\",\"/_next/static/chunks/4014b723c1a53f30.js\",\"/_next/static/chunks/fba43d7d87521a3b.js\",\"/_next/static/chunks/1d74fcc382f9306e.js\"],\"default\"]\n18:I[27201,[\"/_next/static/chunks/d96012bcfc98706a.js\",\"/_next/static/chunks/d80b3790a119a285.js\"],\"IconMark\"]\n:HL[\"/_next/static/chunks/fed19462e770b5e0.css\",\"style\",{\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\"}]\n:HL[\"/_next/static/chunks/dcab5e8e8ad4cc11.css\",\"style\",{\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\"}]\n:HL[\"/_next/static/media/AnthropicSans_Italic_Variable-s.p.871b10c3.woff2\",\"font\",{\"crossOrigin\":\"\",\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/AnthropicSans_Roman_Variable-s.p.9c3450a2.woff2\",\"font\",{\"crossOrigin\":\"\",\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/AnthropicSerif_Italic_Variable-s.p.a41b7049.woff2\",\"font\",{\"crossOrigin\":\"\",\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/AnthropicSerif_Roman_Variable-s.p.5dd2f361.woff2\",\"font\",{\"crossOrigin\":\"\",\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\",\"ty"])</script><script nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi">self.__next_f.push([1,"pe\":\"font/woff2\"}]\n:HL[\"/_next/static/media/Copernicus_Book-s.p.f166c0ba.woff2\",\"font\",{\"crossOrigin\":\"\",\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/Copernicus_Medium-s.p.59728346.woff2\",\"font\",{\"crossOrigin\":\"\",\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/JetBrainsMono_VF-s.p.8dac7c36.ttf\",\"font\",{\"crossOrigin\":\"\",\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\",\"type\":\"font/ttf\"}]\n:HL[\"/_next/static/media/StyreneA_MediumItalic_Web-s.p.e9bc3c6e.woff2\",\"font\",{\"crossOrigin\":\"\",\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/StyreneA_Medium_Web-s.p.e5135f7e.woff2\",\"font\",{\"crossOrigin\":\"\",\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/StyreneA_RegularItalic_Web-s.p.7c6a646d.woff2\",\"font\",{\"crossOrigin\":\"\",\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/StyreneA_Regular_Web-s.p.429c699d.woff2\",\"font\",{\"crossOrigin\":\"\",\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/StyreneB_Medium_Web-s.p.88fa5a67.woff2\",\"font\",{\"crossOrigin\":\"\",\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/StyreneB_Regular_Web-s.p.cb3cc1a3.woff2\",\"font\",{\"crossOrigin\":\"\",\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/TiemposText_Medium-s.p.520d99f8.woff2\",\"font\",{\"crossOrigin\":\"\",\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/TiemposText_MediumItalic-s.p.10f44518.woff2\",\"font\",{\"crossOrigin\":\"\",\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/TiemposText_Regular-s.p.7f1d46d6.woff2\",\"font\",{\"crossOrigin\":\"\",\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/TiemposText_RegularItalic-s.p.1a798fcf.woff2\",\"font\",{\"crossOrigin\":\"\",\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/chunks/5854b2d87f13c141.css\",\"style\",{\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\"}]\n:HL[\"/_next/static/chunks/abb3e2075b301e6f.css\",\"style\",{\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\"}]\n:HL[\"/_next/static/chunks/5247a9f776a63f50.css\",\"style\",{\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\"}]\n:HL[\"/_next/static/chunks/3ef2df9cc3987918.css\",\"style\",{\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\"}]\n"])</script><script nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi">self.__next_f.push([1,"0:{\"P\":null,\"b\":\"5nmz-mB8DIL1i7NB-emHl\",\"c\":[\"\",\"engineering\",\"code-execution-with-mcp\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"(site)\",{\"children\":[\"engineering\",{\"children\":[[\"slug\",\"code-execution-with-mcp\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/fed19462e770b5e0.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\"}]],\"$L2\"]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/dcab5e8e8ad4cc11.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\"}],[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/1fb574e7be3f9a05.js\",\"async\":true,\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/5ae0d9ad512fb263.js\",\"async\":true,\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\"}],[\"$\",\"script\",\"script-2\",{\"src\":\"/_next/static/chunks/c1896c986be1a2e2.js\",\"async\":true,\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\"}]],\"$L3\"]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$L6\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/5854b2d87f13c141.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/abb3e2075b301e6f.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\"}],[\"$\",\"link\",\"2\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/5247a9f776a63f50.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\"}],[\"$\",\"link\",\"3\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/3ef2df9cc3987918.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\"}],[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/7792a96214bec1f0.js\",\"async\":true,\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/90869c85d8d8ba84.js\",\"async\":true,\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\"}],[\"$\",\"script\",\"script-2\",{\"src\":\"/_next/static/chunks/55e41b6edc326dca.js\",\"async\":true,\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\"}],[\"$\",\"script\",\"script-3\",{\"src\":\"/_next/static/chunks/2fd2aa01a4bc9178.js\",\"async\":true,\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\"}],[\"$\",\"script\",\"script-4\",{\"src\":\"/_next/static/chunks/8bdf83f8bd0ec540.js\",\"async\":true,\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\"}],[\"$\",\"script\",\"script-5\",{\"src\":\"/_next/static/chunks/046a135eda40f761.js\",\"async\":true,\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\"}],[\"$\",\"script\",\"script-6\",{\"src\":\"/_next/static/chunks/8ff14dc5284a5c6d.js\",\"async\":true,\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\"}],[\"$\",\"script\",\"script-7\",{\"src\":\"/_next/static/chunks/4d62cd54534b3ba6.js\",\"async\":true,\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\"}],[\"$\",\"script\",\"script-8\",{\"src\":\"/_next/static/chunks/1d74fcc382f9306e.js\",\"async\":true,\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\"}],[\"$\",\"script\",\"script-9\",{\"src\":\"/_next/static/chunks/8288730f5c5f5922.js\",\"async\":true,\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\"}],[\"$\",\"script\",\"script-10\",{\"src\":\"/_next/static/chunks/e95d17fb31990dec.js\",\"async\":true,\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\"}],[\"$\",\"script\",\"script-11\",{\"src\":\"/_next/static/chunks/2e3229a62c65aaec.js\",\"async\":true,\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\"}]],\"$L7\"]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false]},null,false,false],\"$L8\",false]],\"m\":\"$undefined\",\"G\":[\"$9\",[]],\"S\":false}\n"])</script><script nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi">self.__next_f.push([1,"7:[\"$\",\"$La\",null,{\"children\":[\"$\",\"$b\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@c\"}]}]\n8:[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$Ld\",null,{\"children\":\"$@e\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$Lf\",null,{\"children\":[\"$\",\"$b\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@10\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}]\n"])</script><script nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi">self.__next_f.push([1,"2:[\"$\",\"html\",null,{\"lang\":\"en\",\"className\":\"anthropicsans_38ab20ab-module__m_Ag9q__variable anthropicserif_9dcb6d5c-module__l8Ld2a__variable copernicus_f8782a09-module__ahfGZW__variable styrenea_5e06b95-module__JuxQ9a__variable styreneb_4765efd3-module__CFivSW__variable tiempostext_7f420b3d-module__SmwvBG__variable jetbrainsmono_7d7bdbc6-module__j_XgJq__variable\",\"children\":[\"$\",\"body\",null,{\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]\n"])</script><script nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi">self.__next_f.push([1,"3:[\"$\",\"$L11\",null,{\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\",\"children\":[[\"$\",\"$L12\",null,{}],[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$L13\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/abb3e2075b301e6f.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/5854b2d87f13c141.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi\"}]]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}]\n"])</script><script nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi">self.__next_f.push([1,"6:[\"$\",\"$L14\",null,{\"article\":{\"_createdAt\":\"2025-10-30T17:35:11Z\",\"_id\":\"15da8878-5f83-4cc7-85cb-c1a3c5cea708\",\"_rev\":\"bwKPjmaYrsWzvRbquECbUH\",\"_system\":{\"base\":{\"id\":\"15da8878-5f83-4cc7-85cb-c1a3c5cea708\",\"rev\":\"bwKPjmaYrsWzvRbquECOD5\"}},\"_type\":\"engineeringArticle\",\"_updatedAt\":\"2025-11-04T22:06:04Z\",\"body\":[{\"_key\":\"296bd09ab8b8\",\"_type\":\"block\",\"children\":[{\"_key\":\"aa17c16e631a0\",\"_type\":\"span\",\"marks\":[\"0caad24dea28\"],\"text\":\"The Model Context Protocol (MCP)\"},{\"_key\":\"aa17c16e631a1\",\"_type\":\"span\",\"marks\":[],\"text\":\" is an open standard for connecting AI agents to external systems. Connecting agents to tools and data traditionally requires a custom integration for each pairing, creating fragmentation and duplicated effort that makes it difficult to scale truly connected systems. MCP provides a universal protocol—developers implement MCP once in their agent and it unlocks an entire ecosystem of integrations.\"}],\"markDefs\":[{\"_key\":\"0caad24dea28\",\"_type\":\"link\",\"href\":\"https://modelcontextprotocol.io/\"}],\"style\":\"normal\"},{\"_key\":\"5bbd0468f96d\",\"_type\":\"block\",\"children\":[{\"_key\":\"bfcbe3e89c48\",\"_type\":\"span\",\"marks\":[],\"text\":\"Since launching MCP in November 2024, adoption has been rapid: the community has built thousands of \"},{\"_key\":\"aa17c16e631a2\",\"_type\":\"span\",\"marks\":[\"6da9393713b1\"],\"text\":\"MCP servers\"},{\"_key\":\"aa17c16e631a3\",\"_type\":\"span\",\"marks\":[],\"text\":\", \"},{\"_key\":\"aa17c16e631a4\",\"_type\":\"span\",\"marks\":[\"bc6f29aa4396\"],\"text\":\"SDKs\"},{\"_key\":\"aa17c16e631a5\",\"_type\":\"span\",\"marks\":[],\"text\":\" are available for all major programming languages, and the industry has adopted MCP as the de-facto standard for connecting agents to tools and data.\"}],\"markDefs\":[{\"_key\":\"6da9393713b1\",\"_type\":\"link\",\"blank\":true,\"href\":\"https://github.com/modelcontextprotocol/servers\"},{\"_key\":\"bc6f29aa4396\",\"_type\":\"link\",\"blank\":true,\"href\":\"https://modelcontextprotocol.io/docs/sdk\"}],\"style\":\"normal\"},{\"_key\":\"f410ca046723\",\"_type\":\"block\",\"children\":[{\"_key\":\"d3ffe9c772be\",\"_type\":\"span\",\"marks\":[],\"text\":\"Today developers routinely build agents with access to hundreds or thousands of tools across dozens of MCP servers. However, as the number of connected tools grows, loading all tool definitions upfront and passing intermediate results through the context window slows down agents and increases costs.\"}],\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"65f320b46865\",\"_type\":\"block\",\"children\":[{\"_key\":\"86eee14e9b790\",\"_type\":\"span\",\"marks\":[],\"text\":\"In this blog we'll explore how code execution can enable agents to interact with MCP servers more efficiently, handling more tools while using fewer tokens.\"}],\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"35945b692fdd\",\"_type\":\"block\",\"children\":[{\"_key\":\"b6ae3882f7110\",\"_type\":\"span\",\"marks\":[\"strong\"],\"text\":\"Excessive token consumption from tools makes agents less efficient\"}],\"markDefs\":[],\"style\":\"h2\"},{\"_key\":\"fc8216619afa\",\"_type\":\"block\",\"children\":[{\"_key\":\"40807b9f7f5c0\",\"_type\":\"span\",\"marks\":[],\"text\":\"As MCP usage scales, there are two common patterns that can increase agent cost and latency:\"}],\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"92d56a043950\",\"_type\":\"block\",\"children\":[{\"_key\":\"89786d4648560\",\"_type\":\"span\",\"marks\":[],\"text\":\"Tool definitions overload the context window;\"}],\"level\":1,\"listItem\":\"number\",\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"2043437700c4\",\"_type\":\"block\",\"children\":[{\"_key\":\"c2defbc1ecb50\",\"_type\":\"span\",\"marks\":[],\"text\":\"Intermediate tool results consume additional tokens.\"}],\"level\":1,\"listItem\":\"number\",\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"99a1585e6e2c\",\"_type\":\"block\",\"children\":[{\"_key\":\"5b6e3ffb68fc0\",\"_type\":\"span\",\"marks\":[\"strong\"],\"text\":\"1. Tool definitions overload the context window\"}],\"markDefs\":[],\"style\":\"h3\"},{\"_key\":\"047ea72a1900\",\"_type\":\"block\",\"children\":[{\"_key\":\"6188aa09a2990\",\"_type\":\"span\",\"marks\":[],\"text\":\"Most MCP clients load all tool definitions upfront directly into context, exposing them to the model using a direct tool-calling syntax. These tool definitions might look like: \"}],\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"fa068621fc9a\",\"_type\":\"codeBlock\",\"code\":\"gdrive.getDocument\\n     Description: Retrieves a document from Google Drive\\n     Parameters:\\n                documentId (required, string): The ID of the document to retrieve\\n                fields (optional, string): Specific fields to return\\n     Returns: Document object with title, body content, metadata, permissions, etc.\",\"markDefs\":null},{\"_key\":\"c58d7bbd73d7\",\"_type\":\"codeBlock\",\"code\":\"salesforce.updateRecord\\n    Description: Updates a record in Salesforce\\n    Parameters:\\n               objectType (required, string): Type of Salesforce object (Lead, Contact,      Account, etc.)\\n               recordId (required, string): The ID of the record to update\\n               data (required, object): Fields to update with their new values\\n     Returns: Updated record object with confirmation\",\"markDefs\":null},{\"_key\":\"cf6d124ba3ff\",\"_type\":\"block\",\"children\":[{\"_key\":\"c4a7c41513de0\",\"_type\":\"span\",\"marks\":[],\"text\":\"Tool descriptions occupy more context window space, increasing response time and costs. In cases where agents are connected to thousands of tools, they’ll need to process hundreds of thousands of tokens before reading a request.\"}],\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"0b9874de233c\",\"_type\":\"block\",\"children\":[{\"_key\":\"cbcf6f3251330\",\"_type\":\"span\",\"marks\":[\"strong\"],\"text\":\"2. Intermediate tool results consume additional tokens\"}],\"markDefs\":[],\"style\":\"h3\"},{\"_key\":\"5b5d6eb5fd30\",\"_type\":\"block\",\"children\":[{\"_key\":\"2d2a0cd558e10\",\"_type\":\"span\",\"marks\":[],\"text\":\"Most MCP clients allow models to directly call MCP tools. For example, you might ask your agent: \\\"Download my meeting transcript from Google Drive and attach it to the Salesforce lead.\\\"\"}],\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"872d82d35c00\",\"_type\":\"block\",\"children\":[{\"_key\":\"d56d200f81ba0\",\"_type\":\"span\",\"marks\":[],\"text\":\"The model will make calls like:\"}],\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"92971e10b747\",\"_type\":\"codeBlock\",\"code\":\"TOOL CALL: gdrive.getDocument(documentId: \\\"abc123\\\")\\n        → returns \\\"Discussed Q4 goals...\\\\n[full transcript text]\\\"\\n           (loaded into model context)\\n\\nTOOL CALL: salesforce.updateRecord(\\n\\t\\t\\tobjectType: \\\"SalesMeeting\\\",\\n\\t\\t\\trecordId: \\\"00Q5f000001abcXYZ\\\",\\n  \\t\\t\\tdata: { \\\"Notes\\\": \\\"Discussed Q4 goals...\\\\n[full transcript text written out]\\\" }\\n\\t\\t)\\n\\t\\t(model needs to write entire transcript into context again)\",\"markDefs\":null},{\"_key\":\"d651c8dea015\",\"_type\":\"block\",\"children\":[{\"_key\":\"681c068bdd740\",\"_type\":\"span\",\"marks\":[],\"text\":\"Every intermediate result must pass through the model. In this example, the full call transcript flows through twice. For a 2-hour sales meeting, that could mean processing an additional 50,000 tokens. Even larger documents may exceed context window limits, breaking the workflow.\"}],\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"4a3b8b57ee66\",\"_type\":\"block\",\"children\":[{\"_key\":\"c5b931b061e30\",\"_type\":\"span\",\"marks\":[],\"text\":\"With large documents or complex data structures, models may be more likely to make mistakes when copying data between tool calls.\"}],\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"ea1fc0e5abe5\",\"_type\":\"image\",\"asset\":{\"_ref\":\"image-9ecf165020005c09a22a9472cee6309555485619-1920x1080-png\",\"_type\":\"reference\"},\"caption\":[{\"_key\":\"387c256ce4c1\",\"_type\":\"block\",\"children\":[{\"_key\":\"cbe6a34943990\",\"_type\":\"span\",\"marks\":[],\"text\":\"The MCP client loads tool definitions into the model's context window and orchestrates a message loop where each tool call and result passes through the model between operations.\"}],\"markDefs\":[],\"style\":\"normal\"}],\"description\":\"Image of how the MCP client works with the MCP server and LLM.\",\"height\":1080,\"markDefs\":null,\"style\":\"inline\",\"url\":\"https://cdn.sanity.io/images/4zrzovbb/website/9ecf165020005c09a22a9472cee6309555485619-1920x1080.png\",\"width\":1920},{\"_key\":\"cebebe86d2a4\",\"_type\":\"block\",\"children\":[{\"_key\":\"f6a91eaa47f80\",\"_type\":\"span\",\"marks\":[\"strong\"],\"text\":\"Code execution with MCP improves context efficiency\"}],\"markDefs\":[],\"style\":\"h2\"},{\"_key\":\"530beb59de00\",\"_type\":\"block\",\"children\":[{\"_key\":\"ce8edc2feb990\",\"_type\":\"span\",\"marks\":[],\"text\":\"With code execution environments becoming more common for agents, a solution is to present MCP servers as code APIs rather than direct tool calls. The agent can then write code to interact with MCP servers. This approach addresses both challenges: agents can load only the tools they need and process data in the execution environment before passing results back to the model.\"}],\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"95f70b3143f1\",\"_type\":\"block\",\"children\":[{\"_key\":\"6901ffef73340\",\"_type\":\"span\",\"marks\":[],\"text\":\"There are a number of ways to do this. One approach is to generate a file tree of all available tools from connected MCP servers. Here's an implementation using TypeScript:\"}],\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"d54fcffb4e3d\",\"_type\":\"codeBlock\",\"code\":\"servers\\n├── google-drive\\n│   ├── getDocument.ts\\n│   ├── ... (other tools)\\n│   └── index.ts\\n├── salesforce\\n│   ├── updateRecord.ts\\n│   ├── ... (other tools)\\n│   └── index.ts\\n└── ... (other servers)\",\"markDefs\":null},{\"_key\":\"143bcf7ca7c4\",\"_type\":\"block\",\"children\":[{\"_key\":\"0f2b008639010\",\"_type\":\"span\",\"marks\":[],\"text\":\"Then each tool corresponds to a file, something like:\"}],\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"2ea38bb12ad3\",\"_type\":\"codeBlock\",\"code\":\"// ./servers/google-drive/getDocument.ts\\nimport { callMCPTool } from \\\"../../../client.js\\\";\\n\\ninterface GetDocumentInput {\\n  documentId: string;\\n}\\n\\ninterface GetDocumentResponse {\\n  content: string;\\n}\\n\\n/* Read a document from Google Drive */\\nexport async function getDocument(input: GetDocumentInput): Promise\u003cGetDocumentResponse\u003e {\\n  return callMCPTool\u003cGetDocumentResponse\u003e('google_drive__get_document', input);\\n}\\n\",\"markDefs\":null},{\"_key\":\"242920014262\",\"_type\":\"block\",\"children\":[{\"_key\":\"6ef56d414df40\",\"_type\":\"span\",\"marks\":[],\"text\":\"Our Google Drive to Salesforce example above becomes the code:\"}],\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"288850099f8a\",\"_type\":\"codeBlock\",\"code\":\"// Read transcript from Google Docs and add to Salesforce prospect\\nimport * as gdrive from './servers/google-drive';\\nimport * as salesforce from './servers/salesforce';\\n\\nconst transcript = (await gdrive.getDocument({ documentId: 'abc123' })).content;\\nawait salesforce.updateRecord({\\n  objectType: 'SalesMeeting',\\n  recordId: '00Q5f000001abcXYZ',\\n  data: { Notes: transcript }\\n});\\n\",\"markDefs\":null},{\"_key\":\"d754760b99b8\",\"_type\":\"block\",\"children\":[{\"_key\":\"49d998731e100\",\"_type\":\"span\",\"marks\":[],\"text\":\"The agent discovers tools by exploring the filesystem: listing the \"},{\"_key\":\"d82b0f530d45\",\"_type\":\"span\",\"marks\":[\"code\"],\"text\":\"./servers/ \"},{\"_key\":\"03b2540e98e7\",\"_type\":\"span\",\"marks\":[],\"text\":\"directory to find available servers (like \"},{\"_key\":\"006126080543\",\"_type\":\"span\",\"marks\":[\"code\"],\"text\":\"google-drive\"},{\"_key\":\"d89d628f3b3b\",\"_type\":\"span\",\"marks\":[],\"text\":\" and \"},{\"_key\":\"fde7f350cd0f\",\"_type\":\"span\",\"marks\":[\"code\"],\"text\":\"salesforce\"},{\"_key\":\"4e29da93d7c9\",\"_type\":\"span\",\"marks\":[],\"text\":\"), then reading the specific tool files it needs (like \"},{\"_key\":\"94514096b82c\",\"_type\":\"span\",\"marks\":[\"code\"],\"text\":\"getDocument.ts\"},{\"_key\":\"9492a602e339\",\"_type\":\"span\",\"marks\":[],\"text\":\" and \"},{\"_key\":\"963a141eeb04\",\"_type\":\"span\",\"marks\":[\"code\"],\"text\":\"updateRecord.ts\"},{\"_key\":\"9d3bfacff58a\",\"_type\":\"span\",\"marks\":[],\"text\":\") to understand each tool's interface. This lets the agent load only the definitions it needs for the current task. This reduces the token usage from 150,000 tokens to 2,000 tokens—a time and cost saving of 98.7%\"},{\"_key\":\"49d998731e101\",\"_type\":\"span\",\"marks\":[\"strong\"],\"text\":\".\"}],\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"2c9c6ec07dc1\",\"_type\":\"block\",\"children\":[{\"_key\":\"359ad6d519520\",\"_type\":\"span\",\"marks\":[],\"text\":\"Cloudflare \"},{\"_key\":\"359ad6d519521\",\"_type\":\"span\",\"marks\":[\"14b2aba2f56f\"],\"text\":\"published similar findings\"},{\"_key\":\"359ad6d519522\",\"_type\":\"span\",\"marks\":[],\"text\":\", referring to code execution with MCP as “Code Mode.\\\" The core insight is the same: LLMs are adept at writing code and developers should take advantage of this strength to build agents that interact with MCP servers more efficiently.\"}],\"markDefs\":[{\"_key\":\"14b2aba2f56f\",\"_type\":\"link\",\"blank\":true,\"href\":\"https://blog.cloudflare.com/code-mode/\"}],\"style\":\"normal\"},{\"_key\":\"0db834218953\",\"_type\":\"block\",\"children\":[{\"_key\":\"ff3065c1ee410\",\"_type\":\"span\",\"marks\":[\"strong\"],\"text\":\"Benefits of code execution with MCP\"}],\"markDefs\":[],\"style\":\"h2\"},{\"_key\":\"69536bcd6ea6\",\"_type\":\"block\",\"children\":[{\"_key\":\"f3e23647b0a20\",\"_type\":\"span\",\"marks\":[],\"text\":\"Code execution with MCP enables agents to use context more efficiently by loading tools on demand, filtering data before it reaches the model, and executing complex logic in a single step. There are also security and state management benefits to using this approach.\"}],\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"2a8b2e9615c1\",\"_type\":\"block\",\"children\":[{\"_key\":\"4872cc77c7100\",\"_type\":\"span\",\"marks\":[],\"text\":\"Progressive disclosure\"}],\"markDefs\":[],\"style\":\"h3\"},{\"_key\":\"84ac4565a456\",\"_type\":\"block\",\"children\":[{\"_key\":\"671d538e65580\",\"_type\":\"span\",\"marks\":[],\"text\":\"Models are great at navigating filesystems. Presenting tools as code on a filesystem allows models to read tool definitions on-demand, rather than reading them all up-front.\"}],\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"27e9f80a5b1d\",\"_type\":\"block\",\"children\":[{\"_key\":\"2982aee36ce60\",\"_type\":\"span\",\"marks\":[],\"text\":\"Alternatively, a \"},{\"_key\":\"67af7fbbf0d6\",\"_type\":\"span\",\"marks\":[\"code\"],\"text\":\"search_tools\"},{\"_key\":\"1e2983990b10\",\"_type\":\"span\",\"marks\":[],\"text\":\" tool can be added to the server to find relevant definitions. For example, when working with the hypothetical Salesforce server used above, the agent searches for \\\"salesforce\\\" and loads only those tools that it needs for the current task. Including a detail level parameter in the \"},{\"_key\":\"1d0ce47b4aa6\",\"_type\":\"span\",\"marks\":[\"code\"],\"text\":\"search_tools\"},{\"_key\":\"62c51d609101\",\"_type\":\"span\",\"marks\":[],\"text\":\" tool that allows the agent to select the level of detail required (such as name only, name and description, or the full definition with schemas) also helps the agent conserve context and find tools efficiently.\"}],\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"b740e5c61589\",\"_type\":\"block\",\"children\":[{\"_key\":\"f1ebcb05ba4a0\",\"_type\":\"span\",\"marks\":[],\"text\":\"Context efficient tool results\"}],\"markDefs\":[],\"style\":\"h3\"},{\"_key\":\"b5334f0ef0ca\",\"_type\":\"block\",\"children\":[{\"_key\":\"bde75ce336160\",\"_type\":\"span\",\"marks\":[],\"text\":\"When working with large datasets, agents can filter and transform results in code before returning them. Consider fetching a 10,000-row spreadsheet:\"}],\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"81029ea8307c\",\"_type\":\"codeBlock\",\"code\":\"// Without code execution - all rows flow through context\\nTOOL CALL: gdrive.getSheet(sheetId: 'abc123')\\n        → returns 10,000 rows in context to filter manually\\n\\n// With code execution - filter in the execution environment\\nconst allRows = await gdrive.getSheet({ sheetId: 'abc123' });\\nconst pendingOrders = allRows.filter(row =\u003e \\n  row[\\\"Status\\\"] === 'pending'\\n);\\nconsole.log(`Found ${pendingOrders.length} pending orders`);\\nconsole.log(pendingOrders.slice(0, 5)); // Only log first 5 for review\",\"markDefs\":null},{\"_key\":\"d129d9ea11a5\",\"_type\":\"block\",\"children\":[{\"_key\":\"410a640daafa0\",\"_type\":\"span\",\"marks\":[],\"text\":\"The agent sees five rows instead of 10,000. Similar patterns work for aggregations, joins across multiple data sources, or extracting specific fields—all without bloating the context window.\"}],\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"820ebe628ae0\",\"_type\":\"block\",\"children\":[{\"_key\":\"c7d3ec7bbb540\",\"_type\":\"span\",\"marks\":[\"strong\"],\"text\":\"More powerful and context-efficient control flow\"}],\"markDefs\":[],\"style\":\"h4\"},{\"_key\":\"b8876e2529a3\",\"_type\":\"block\",\"children\":[{\"_key\":\"2cf25ac856e00\",\"_type\":\"span\",\"marks\":[],\"text\":\"Loops, conditionals, and error handling can be done with familiar code patterns rather than chaining individual tool calls. For example, if you need a deployment notification in Slack, the agent can write:\"}],\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"4e05b6414c22\",\"_type\":\"codeBlock\",\"code\":\"let found = false;\\nwhile (!found) {\\n  const messages = await slack.getChannelHistory({ channel: 'C123456' });\\n  found = messages.some(m =\u003e m.text.includes('deployment complete'));\\n  if (!found) await new Promise(r =\u003e setTimeout(r, 5000));\\n}\\nconsole.log('Deployment notification received');\",\"markDefs\":null},{\"_key\":\"31706d5371fb\",\"_type\":\"block\",\"children\":[{\"_key\":\"3af5feac4a4a0\",\"_type\":\"span\",\"marks\":[],\"text\":\"This approach is more efficient than alternating between MCP tool calls and sleep commands through the agent loop.\"}],\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"f50215583790\",\"_type\":\"block\",\"children\":[{\"_key\":\"b5b3f9c4e3760\",\"_type\":\"span\",\"marks\":[],\"text\":\"Additionally, being able to write out a conditional tree that gets executed also saves on “time to first token” latency: rather than having to wait for a model to evaluate an if-statement, the agent can let the code execution environment do this.\"}],\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"a2c86839127d\",\"_type\":\"block\",\"children\":[{\"_key\":\"d457bdf595660\",\"_type\":\"span\",\"marks\":[],\"text\":\"Privacy-preserving operations\"}],\"markDefs\":[],\"style\":\"h3\"},{\"_key\":\"56da803cdec6\",\"_type\":\"block\",\"children\":[{\"_key\":\"15158242a92b0\",\"_type\":\"span\",\"marks\":[],\"text\":\"When agents use code execution with MCP, intermediate results stay in the execution environment by default. This way, the agent only sees what you explicitly log or return, meaning data you don’t wish to share with the model can flow through your workflow without ever entering the model's context.\"}],\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"317e320c3518\",\"_type\":\"block\",\"children\":[{\"_key\":\"52c93c6b36150\",\"_type\":\"span\",\"marks\":[],\"text\":\"For even more sensitive workloads, the agent harness can tokenize sensitive data automatically. For example, imagine you need to import customer contact details from a spreadsheet into Salesforce. The agent writes:\"}],\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"093765060414\",\"_type\":\"codeBlock\",\"code\":\"const sheet = await gdrive.getSheet({ sheetId: 'abc123' });\\nfor (const row of sheet.rows) {\\n  await salesforce.updateRecord({\\n    objectType: 'Lead',\\n    recordId: row.salesforceId,\\n    data: { \\n      Email: row.email,\\n      Phone: row.phone,\\n      Name: row.name\\n    }\\n  });\\n}\\nconsole.log(`Updated ${sheet.rows.length} leads`);\",\"markDefs\":null},{\"_key\":\"6ab5bdccf819\",\"_type\":\"block\",\"children\":[{\"_key\":\"82d34aabc43a0\",\"_type\":\"span\",\"marks\":[],\"text\":\"The MCP client intercepts the data and tokenizes PII before it reaches the model:\"}],\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"7eb4abb51e0b\",\"_type\":\"codeBlock\",\"code\":\"// What the agent would see, if it logged the sheet.rows:\\n[\\n  { salesforceId: '00Q...', email: '[EMAIL_1]', phone: '[PHONE_1]', name: '[NAME_1]' },\\n  { salesforceId: '00Q...', email: '[EMAIL_2]', phone: '[PHONE_2]', name: '[NAME_2]' },\\n  ...\\n]\",\"markDefs\":null},{\"_key\":\"9ef530633ecc\",\"_type\":\"block\",\"children\":[{\"_key\":\"03d4ca47052d0\",\"_type\":\"span\",\"marks\":[],\"text\":\"Then, when the data is shared in another MCP tool call, it is untokenized via a lookup in the MCP client. The real email addresses, phone numbers, and names flow from Google Sheets to Salesforce, but never through the model. This prevents the agent from accidentally logging or processing sensitive data. You can also use this to define deterministic security rules, choosing where data can flow to and from.\"}],\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"052e909f82e6\",\"_type\":\"block\",\"children\":[{\"_key\":\"953a9c8044440\",\"_type\":\"span\",\"marks\":[],\"text\":\"State persistence and skills\"}],\"markDefs\":[],\"style\":\"h3\"},{\"_key\":\"27637cb9331a\",\"_type\":\"block\",\"children\":[{\"_key\":\"387850f92f3f0\",\"_type\":\"span\",\"marks\":[],\"text\":\"Code execution with filesystem access allows agents to maintain state across operations. Agents can write intermediate results to files, enabling them to resume work and track progress:\"}],\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"9697c6411445\",\"_type\":\"codeBlock\",\"code\":\"const leads = await salesforce.query({ \\n  query: 'SELECT Id, Email FROM Lead LIMIT 1000' \\n});\\nconst csvData = leads.map(l =\u003e `${l.Id},${l.Email}`).join('\\\\n');\\nawait fs.writeFile('./workspace/leads.csv', csvData);\\n\\n// Later execution picks up where it left off\\nconst saved = await fs.readFile('./workspace/leads.csv', 'utf-8');\",\"markDefs\":null},{\"_key\":\"b4e3487ce77f\",\"_type\":\"block\",\"children\":[{\"_key\":\"e2bbe00864690\",\"_type\":\"span\",\"marks\":[],\"text\":\"Agents can also persist their own code as reusable functions. Once an agent develops working code for a task, it can save that implementation for future use:\"}],\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"e4d7df66c85b\",\"_type\":\"codeBlock\",\"code\":\"// In ./skills/save-sheet-as-csv.ts\\nimport * as gdrive from './servers/google-drive';\\nexport async function saveSheetAsCsv(sheetId: string) {\\n  const data = await gdrive.getSheet({ sheetId });\\n  const csv = data.map(row =\u003e row.join(',')).join('\\\\n');\\n  await fs.writeFile(`./workspace/sheet-${sheetId}.csv`, csv);\\n  return `./workspace/sheet-${sheetId}.csv`;\\n}\\n\\n// Later, in any agent execution:\\nimport { saveSheetAsCsv } from './skills/save-sheet-as-csv';\\nconst csvPath = await saveSheetAsCsv('abc123');\",\"markDefs\":null},{\"_key\":\"0660b2e9ca0f\",\"_type\":\"block\",\"children\":[{\"_key\":\"b343d88ec1d40\",\"_type\":\"span\",\"marks\":[],\"text\":\"This ties in closely to the concept of \"},{\"_key\":\"b343d88ec1d41\",\"_type\":\"span\",\"marks\":[\"6c2f383afed8\"],\"text\":\"Skills\"},{\"_key\":\"f5947ddf78f9\",\"_type\":\"span\",\"marks\":[],\"text\":\", folders of reusable instructions, scripts, and resources for models to improve performance on specialized tasks. Adding a SKILL.md file to these saved functions creates a structured skill that models can reference and use. Over time, this allows your agent to build a toolbox of higher-level capabilities, evolving the scaffolding that it needs to work most effectively.\"}],\"markDefs\":[{\"_key\":\"6c2f383afed8\",\"_type\":\"link\",\"href\":\"https://docs.claude.com/en/docs/agents-and-tools/agent-skills/overview\"}],\"style\":\"normal\"},{\"_key\":\"eea2250059be\",\"_type\":\"block\",\"children\":[{\"_key\":\"be3b11b6dd690\",\"_type\":\"span\",\"marks\":[],\"text\":\"Note that code execution introduces its own complexity. Running agent-generated code requires a secure execution environment with appropriate \"},{\"_key\":\"be3b11b6dd691\",\"_type\":\"span\",\"marks\":[\"da6489265843\"],\"text\":\"sandboxing\"},{\"_key\":\"be3b11b6dd692\",\"_type\":\"span\",\"marks\":[],\"text\":\", resource limits, and monitoring. These infrastructure requirements add operational overhead and security considerations that direct tool calls avoid. The benefits of code execution—reduced token costs, lower latency, and improved tool composition—should be weighed against these implementation costs.\"}],\"markDefs\":[{\"_key\":\"da6489265843\",\"_type\":\"link\",\"href\":\"https://www.anthropic.com/engineering/claude-code-sandboxing\"}],\"style\":\"normal\"},{\"_key\":\"f7397735d90d\",\"_type\":\"block\",\"children\":[{\"_key\":\"2ead52504abd0\",\"_type\":\"span\",\"marks\":[\"strong\"],\"text\":\"Summary\"}],\"markDefs\":[],\"style\":\"h2\"},{\"_key\":\"b1cb8362459d\",\"_type\":\"block\",\"children\":[{\"_key\":\"c2d48e7944f80\",\"_type\":\"span\",\"marks\":[],\"text\":\"MCP provides a foundational protocol for agents to connect to many tools and systems. However, once too many servers are connected, tool definitions and results can consume excessive tokens, reducing agent efficiency.\"}],\"markDefs\":[],\"style\":\"normal\"},{\"_key\":\"1084809b493f\",\"_type\":\"block\",\"children\":[{\"_key\":\"1fd9c7639c4f0\",\"_type\":\"span\",\"marks\":[],\"text\":\"Although many of the problems here feel novel—context management, tool composition, state persistence—they have known solutions from software engineering. Code execution applies these established patterns to agents, letting them use familiar programming constructs to interact with MCP servers more efficiently. If you implement this approach, we encourage you to share your findings with the \"},{\"_key\":\"1fd9c7639c4f1\",\"_type\":\"span\",\"marks\":[\"0f4c9450f35f\"],\"text\":\"MCP community\"},{\"_key\":\"1fd9c7639c4f2\",\"_type\":\"span\",\"marks\":[],\"text\":\".\"}],\"markDefs\":[{\"_key\":\"0f4c9450f35f\",\"_type\":\"link\",\"href\":\"https://modelcontextprotocol.io/community/communication\"}],\"style\":\"normal\"},{\"_key\":\"d08d17f1a0b6\",\"_type\":\"block\",\"children\":[{\"_key\":\"3a6defea682e\",\"_type\":\"span\",\"marks\":[],\"text\":\"Acknowledgments \"}],\"markDefs\":[],\"style\":\"h3\"},{\"_key\":\"d7d438f81aad\",\"_type\":\"block\",\"children\":[{\"_key\":\"e22745a7c1d30\",\"_type\":\"span\",\"marks\":[\"em\"],\"text\":\"This article was written by Adam Jones and Conor Kelly. Thanks to Jeremy Fox, Jerome Swannack, Stuart Ritchie, Molly Vorwerck, Matt Samuels, and Maggie Vo for feedback on drafts of this post.\"}],\"markDefs\":[],\"style\":\"normal\"}],\"cardImage\":{\"_type\":\"image\",\"asset\":{\"_ref\":\"image-42f40f6fae9ec2d7cf2e5a98908a16d0216b91be-1000x1000-svg\",\"_type\":\"reference\"},\"height\":1000,\"url\":\"https://cdn.sanity.io/images/4zrzovbb/website/42f40f6fae9ec2d7cf2e5a98908a16d0216b91be-1000x1000.svg\",\"width\":1000},\"hero\":{\"_type\":\"image\",\"asset\":{\"_ref\":\"image-42f40f6fae9ec2d7cf2e5a98908a16d0216b91be-1000x1000-svg\",\"_type\":\"reference\"},\"caption\":null,\"height\":1000,\"url\":\"https://cdn.sanity.io/images/4zrzovbb/website/42f40f6fae9ec2d7cf2e5a98908a16d0216b91be-1000x1000.svg\",\"width\":1000},\"meta\":{\"robotsIndexable\":true,\"seoDescription\":\"Learn how code execution with the Model Context Protocol enables agents to handle more tools while using fewer tokens, reducing context overhead by up to 98.7%.\",\"seoTitle\":\"Code execution with MCP: building more efficient AI agents\",\"socialImage\":{\"_type\":\"image\",\"asset\":{\"_createdAt\":\"2025-10-30T17:54:48Z\",\"_id\":\"image-8071ace7b1158ab6d3f8fa04679cef31234425ab-2400x1260-png\",\"_rev\":\"hRMcU4dW73rQ24hVhUfOov\",\"_type\":\"sanity.imageAsset\",\"_updatedAt\":\"2025-10-30T17:54:48Z\",\"assetId\":\"8071ace7b1158ab6d3f8fa04679cef31234425ab\",\"extension\":\"png\",\"metadata\":{\"_type\":\"sanity.imageMetadata\",\"blurHash\":\"MCR3N8xu~pxu9F%LfPt7j]WB?aayD%of%L\",\"dimensions\":{\"_type\":\"sanity.imageDimensions\",\"aspectRatio\":1.9047619047619047,\"height\":1260,\"width\":2400},\"hasAlpha\":true,\"isOpaque\":true,\"lqip\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABEElEQVR4nK2S207CUBRE+f9/MDFRY+KDQYWKhXIpJYQW5FKgKFja0hZKKfUPlvE8K3gSH+ZpJysze6bweYz5TxVOHQ/7gDj8YBe7pIlPsvXYJz7HQygP3O88ZnafhvZMu1VlOOgysAzsiUkcrsizSA7orx20apnrqwtuby55LN4JNesVPHcuB8yziDB4x+rp1NQS9ZoinKovT3QMDc915B1maUgYLHFmQ5zZK/bYwmhrmD2dwFvIAw/pt0uf6WREx2iIqOXSPXpTFUCpUvJjTLLb4K7W9K0+SumBilJEb6nYY5Nku5ZvOUsjttEGd7lgPDKZTwcE3pto/7e4Z3eYZ7HYXJZuxE9Pgf4E/OkV54BfIIEnCU9Fb0cAAAAASUVORK5CYII=\",\"palette\":{\"_type\":\"sanity.imagePalette\",\"darkMuted\":{\"_type\":\"sanity.imagePaletteSwatch\",\"background\":\"#44443d\",\"foreground\":\"#fff\",\"population\":0.09,\"title\":\"#fff\"},\"darkVibrant\":{\"_type\":\"sanity.imagePaletteSwatch\",\"background\":\"#724212\",\"foreground\":\"#fff\",\"population\":0,\"title\":\"#fff\"},\"dominant\":{\"_type\":\"sanity.imagePaletteSwatch\",\"background\":\"#c7c4cd\",\"foreground\":\"#000\",\"population\":1.3,\"title\":\"#fff\"},\"lightMuted\":{\"_type\":\"sanity.imagePaletteSwatch\",\"background\":\"#c7c4cd\",\"foreground\":\"#000\",\"population\":1.3,\"title\":\"#fff\"},\"lightVibrant\":{\"_type\":\"sanity.imagePaletteSwatch\",\"background\":\"#fcf4ec\",\"foreground\":\"#000\",\"population\":0.09,\"title\":\"#000\"},\"muted\":{\"_type\":\"sanity.imagePaletteSwatch\",\"background\":\"#7c746c\",\"foreground\":\"#fff\",\"population\":0.01,\"title\":\"#fff\"},\"vibrant\":{\"_type\":\"sanity.imagePaletteSwatch\",\"background\":\"#dc7f22\",\"foreground\":\"#fff\",\"population\":0,\"title\":\"#fff\"}}},\"mimeType\":\"image/png\",\"originalFilename\":\"eng-blog-social.png\",\"path\":\"images/4zrzovbb/website/8071ace7b1158ab6d3f8fa04679cef31234425ab-2400x1260.png\",\"sha1hash\":\"8071ace7b1158ab6d3f8fa04679cef31234425ab\",\"size\":57013,\"uploadId\":\"hshWs6QXXktaxlbSDoXnvx967CZPmt1P\",\"url\":\"https://cdn.sanity.io/images/4zrzovbb/website/8071ace7b1158ab6d3f8fa04679cef31234425ab-2400x1260.png\"},\"description\":\"Image for MCP and code execution blog post.\"}},\"publishedOn\":\"2025-11-04\",\"showSidebar\":false,\"slug\":{\"_type\":\"slug\",\"current\":\"code-execution-with-mcp\"},\"spotIllustration\":{\"_type\":\"image\",\"asset\":{\"_ref\":\"image-848e961961a97ada3a7edb2d1d17378792c3288d-500x500-svg\",\"_type\":\"reference\"},\"height\":500,\"url\":\"https://cdn.sanity.io/images/4zrzovbb/website/848e961961a97ada3a7edb2d1d17378792c3288d-500x500.svg\",\"width\":500},\"subjects\":[{\"_key\":\"open-source\",\"_type\":\"tag\",\"label\":\"Open Source\",\"value\":\"open-source\"}],\"summary\":\"Direct tool calls consume context for each definition and result. Agents scale better by writing code to call tools instead. Here's how it works with MCP.\",\"title\":\"Code execution with MCP: Building more efficient agents\"},\"siteSettings\":{\"_createdAt\":\"2023-11-03T16:49:36Z\",\"_id\":\"13c6e1a1-6f38-400c-ae18-89d73b6ba991\",\"_rev\":\"lRptwNvJCBglHQHh4Ck6pu\",\"_system\":{\"base\":{\"id\":\"13c6e1a1-6f38-400c-ae18-89d73b6ba991\",\"rev\":\"g6Sjq5R0MIVIB6yTMaXwdd\"}},\"_type\":\"siteSettings\",\"_updatedAt\":\"2025-11-20T20:32:17Z\",\"announcement\":null,\"claudeCta\":{\"desktopCtas\":null,\"mobileCtas\":[{\"title\":\"Log in to Claude\",\"url\":\"https://claude.ai/login\"},{\"title\":\"Download app\",\"url\":\"https://claude.ai/download\"}],\"sections\":[{\"category\":\"Products\",\"links\":[{\"title\":\"Claude\",\"url\":\"https://claude.com/product/overview\"},{\"title\":\"Claude Code\",\"url\":\"https://claude.com/product/claude-code\"},{\"title\":\"Claude Developer Platform\",\"url\":\"https://claude.com/platform/api\"},{\"title\":\"Pricing\",\"url\":\"https://claude.com/pricing\"},{\"title\":\"Contact sales\",\"url\":\"https://claude.com/contact-sales\"}]},{\"category\":\"Models\",\"links\":[{\"title\":\"Opus\",\"url\":\"/claude/opus\"},{\"title\":\"Sonnet\",\"url\":\"/claude/sonnet\"},{\"title\":\"Haiku\",\"url\":\"/claude/haiku\"}]},{\"category\":\"Log in\",\"links\":[{\"title\":\"Claude.ai\",\"url\":\"https://claude.ai\"},{\"title\":\"Claude Console\",\"url\":\"https://console.claude.com\"}]}],\"title\":\"Try Claude\",\"url\":\"https://claude.ai/\"},\"copyright\":\"© 2025 Anthropic PBC\",\"footerNavigation\":[{\"_key\":\"716b96b62292\",\"links\":[{\"title\":\"Claude\",\"url\":\"https://claude.com/product/overview\"},{\"title\":\"Claude Code\",\"url\":\"https://claude.com/product/claude-code\"},{\"title\":\"Claude and Slack\",\"url\":\"https://claude.com/claude-and-slack\"},{\"title\":\"Claude in Excel\",\"url\":\"https://claude.com/claude-for-excel\"},{\"title\":\"Max plan\",\"url\":\"https://claude.com/pricing/max\"},{\"title\":\"Team plan\",\"url\":\"https://claude.com/pricing/team\"},{\"title\":\"Enterprise plan\",\"url\":\"https://claude.com/pricing/enterprise\"},{\"title\":\"Download app\",\"url\":\"https://claude.ai/download\"},{\"title\":\"Pricing\",\"url\":\"https://claude.com/pricing\"},{\"title\":\"Log in to Claude\",\"url\":\"https://claude.ai/\"}],\"title\":\"Products\"},{\"_key\":\"0229138ff25d\",\"links\":[{\"title\":\"Opus\",\"url\":\"https://www.anthropic.com/claude/opus\"},{\"title\":\"Sonnet\",\"url\":\"https://www.anthropic.com/claude/sonnet\"},{\"title\":\"Haiku\",\"url\":\"https://www.anthropic.com/claude/haiku\"}],\"title\":\"Models\"},{\"_key\":\"df2df9219e3abce95d6d83387e2d9bd6\",\"links\":[{\"title\":\"AI agents\",\"url\":\"https://claude.com/solutions/agents\"},{\"title\":\"Code modernization\",\"url\":\"https://claude.com/solutions/code-modernization\"},{\"title\":\"Coding\",\"url\":\"https://claude.com/solutions/coding\"},{\"title\":\"Customer support\",\"url\":\"https://claude.com/solutions/customer-support\"},{\"title\":\"Education\",\"url\":\"https://claude.com/solutions/education\"},{\"title\":\"Financial services\",\"url\":\"https://claude.com/solutions/financial-services\"},{\"title\":\"Government\",\"url\":\"https://claude.com/solutions/government\"},{\"title\":\"Life sciences\",\"url\":\"https://claude.com/solutions/life-sciences\"}],\"title\":\"Solutions\"},{\"_key\":\"f286ca01fc7aaabd131f347b711a971b\",\"links\":[{\"title\":\"Overview\",\"url\":\"https://claude.com/platform/api\"},{\"title\":\"Developer docs\",\"url\":\"https://platform.claude.com/docs\"},{\"title\":\"Pricing\",\"url\":\"https://claude.com/pricing#api\"},{\"title\":\"Amazon Bedrock\",\"url\":\"https://claude.com/partners/amazon-bedrock\"},{\"title\":\"Google Cloud’s Vertex AI\",\"url\":\"https://claude.com/partners/google-cloud-vertex-ai\"},{\"title\":\"Console login\",\"url\":\"http://console.anthropic.com/\"}],\"title\":\"Claude Developer Platform\"},{\"_key\":\"4b255e67f68c270e0072c7564e084e24\",\"links\":[{\"title\":\"Blog\",\"url\":\"https://claude.com/blog\"},{\"title\":\"Courses\",\"url\":\"/learn\"},{\"title\":\"Use cases\",\"url\":\"https://claude.com/resources/use-cases\"},{\"title\":\"Connectors\",\"url\":\"https://claude.com/partners/mcp\"},{\"title\":\"Customer stories\",\"url\":\"https://claude.com/customers\"},{\"title\":\"Engineering at Anthropic\",\"url\":\"/engineering\"},{\"title\":\"Events\",\"url\":\"/events\"},{\"title\":\"Powered by Claude\",\"url\":\"https://claude.com/partners/powered-by-claude\"},{\"title\":\"Service partners\",\"url\":\"https://claude.com/partners/services\"},{\"title\":\"Startups program\",\"url\":\"https://claude.com/programs/startups\"}],\"title\":\"Learn\"},{\"_key\":\"4f2729951e15b0b870897e0444f5f3e1\",\"links\":[{\"title\":\"Anthropic\",\"url\":\"/company\"},{\"title\":\"Careers\",\"url\":\"/careers\"},{\"title\":\"Economic Futures\",\"url\":\"/economic-index\"},{\"title\":\"Research\",\"url\":\"/research\"},{\"title\":\"News\",\"url\":\"/news\"},{\"title\":\"Responsible Scaling Policy\",\"url\":\"https://www.anthropic.com/news/announcing-our-updated-responsible-scaling-policy\"},{\"title\":\"Security and compliance\",\"url\":\"https://trust.anthropic.com/\"},{\"title\":\"Transparency\",\"url\":\"/transparency\"}],\"title\":\"Company\"},{\"_key\":\"a886dd1838335844d635f2857b25d66a\",\"links\":[{\"title\":\"Availability\",\"url\":\"https://www.anthropic.com/supported-countries\"},{\"title\":\"Status\",\"url\":\"https://status.anthropic.com/\"},{\"title\":\"Support center\",\"url\":\"https://support.claude.com/en/\"}],\"title\":\"Help and security\"},{\"_key\":\"3c3b033c11fa832a35d43b87d55a5364\",\"links\":[{\"title\":\"Privacy choices\",\"url\":\"#\"},{\"title\":\"Privacy policy\",\"url\":\"https://www.anthropic.com/legal/privacy\"},{\"title\":\"Responsible disclosure policy\",\"url\":\"https://www.anthropic.com/responsible-disclosure-policy\"},{\"title\":\"Terms of service: Commercial\",\"url\":\"https://www.anthropic.com/legal/commercial-terms\"},{\"title\":\"Terms of service: Consumer\",\"url\":\"https://www.anthropic.com/legal/consumer-terms\"},{\"title\":\"Usage policy\",\"url\":\"https://www.anthropic.com/legal/aup\"}],\"title\":\"Terms and policies\"}],\"headerNavigation\":[{\"_key\":\"a340f9d4b859\",\"category\":\"Research\",\"displayType\":\"singleLink\",\"sections\":null,\"url\":\"/research\"},{\"_key\":\"a483c7dfd38a\",\"category\":\"Economic Futures\",\"displayType\":\"singleLink\",\"sections\":null,\"url\":\"/economic-futures\"},{\"_key\":\"82c471bd311d\",\"category\":\"Commitments\",\"displayType\":\"sections\",\"sections\":[{\"_key\":\"675871636e4d\",\"links\":[{\"title\":\" Transparency\",\"url\":\"/transparency\"},{\"title\":\"Responsible Scaling Policy\",\"url\":\"/news/announcing-our-updated-responsible-scaling-policy\"}],\"title\":\"Initiatives\"},{\"_key\":\"16af50a6e2dd\",\"links\":[{\"title\":\"Security and compliance\",\"url\":\"https://trust.anthropic.com/\"}],\"title\":\"Trust center\"}]},{\"_key\":\"861a11ed9931\",\"category\":\"Learn\",\"displayType\":\"sections\",\"sections\":[{\"_key\":\"9f9f720a8793\",\"links\":[{\"title\":\"Anthropic Academy\",\"url\":\"/learn\"},{\"title\":\"Use cases\",\"url\":\"https://claude.com/resources/use-cases\"},{\"title\":\"Engineering at Anthropic\",\"url\":\"/engineering\"},{\"title\":\"Developer docs\",\"url\":\"https://docs.claude.com\"}],\"title\":\"Learn\"},{\"_key\":\"6bd061c46b10\",\"links\":[{\"title\":\"About\",\"url\":\"/company\"},{\"title\":\"Careers\",\"url\":\"/careers\"},{\"title\":\"Events\",\"url\":\"/events\"}],\"title\":\"Company\"}]},{\"_key\":\"22e8d8d2923d\",\"category\":\"News\",\"displayType\":\"singleLink\",\"sections\":null,\"url\":\"/news\"}],\"internalName\":\"anthropic.com Site Settings\",\"linkedInUsername\":\"anthropicresearch\",\"meta\":{\"_createdAt\":\"2023-11-20T21:56:31Z\",\"_id\":\"0f6290ad-6d21-407d-8deb-ce02815d1383\",\"_rev\":\"NyW74GU9ZzyWgAYa8qUSlF\",\"_type\":\"metadata\",\"_updatedAt\":\"2023-11-20T23:54:09Z\",\"robotsIndexable\":true,\"seoDescription\":\"Anthropic is an AI safety and research company that's working to build reliable, interpretable, and steerable AI systems.\",\"seoTitle\":\"Anthropic\",\"socialImage\":{\"_type\":\"image\",\"asset\":{\"_createdAt\":\"2025-05-23T14:14:18Z\",\"_id\":\"image-c07f638082c569e8ce1e89ae95ee6f332a98ec08-2400x1260-jpg\",\"_rev\":\"v1N2wBpLqoO2Q3HXueYiJi\",\"_type\":\"sanity.imageAsset\",\"_updatedAt\":\"2025-05-23T14:14:18Z\",\"assetId\":\"c07f638082c569e8ce1e89ae95ee6f332a98ec08\",\"extension\":\"jpg\",\"metadata\":{\"_type\":\"sanity.imageMetadata\",\"blurHash\":\"MASPU,%M?b%Ms:-;j[j[j[fQ~qj[9FayWB\",\"dimensions\":{\"_type\":\"sanity.imageDimensions\",\"aspectRatio\":1.9047619047619047,\"height\":1260,\"width\":2400},\"hasAlpha\":false,\"isOpaque\":true,\"lqip\":\"data:image/jpeg;base64,/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAKABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAQFCP/EACAQAAEEAgEFAAAAAAAAAAAAAAABAgMEBRETEhQhIjH/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwDS96axCjO2r8yqvn21oiR3ci6TT8d0t395ELUGVAAB/9k=\",\"palette\":{\"_type\":\"sanity.imagePalette\",\"darkMuted\":{\"_type\":\"sanity.imagePaletteSwatch\",\"background\":\"#444440\",\"foreground\":\"#fff\",\"population\":0.05,\"title\":\"#fff\"},\"darkVibrant\":{\"_type\":\"sanity.imagePaletteSwatch\",\"background\":\"#68681c\",\"foreground\":\"#fff\",\"population\":0,\"title\":\"#fff\"},\"dominant\":{\"_type\":\"sanity.imagePaletteSwatch\",\"background\":\"#fcfcf4\",\"foreground\":\"#000\",\"population\":90.85,\"title\":\"#000\"},\"lightMuted\":{\"_type\":\"sanity.imagePaletteSwatch\",\"background\":\"#bcbcb4\",\"foreground\":\"#000\",\"population\":0.03,\"title\":\"#fff\"},\"lightVibrant\":{\"_type\":\"sanity.imagePaletteSwatch\",\"background\":\"#fcfcf4\",\"foreground\":\"#000\",\"population\":90.85,\"title\":\"#000\"},\"muted\":{\"_type\":\"sanity.imagePaletteSwatch\",\"background\":\"#7c7c74\",\"foreground\":\"#fff\",\"population\":0.02,\"title\":\"#fff\"},\"vibrant\":{\"_type\":\"sanity.imagePaletteSwatch\",\"background\":\"#c8c836\",\"foreground\":\"#000\",\"population\":0,\"title\":\"#fff\"}}},\"mimeType\":\"image/jpeg\",\"originalFilename\":\"Anthropic-OG-image.jpg\",\"path\":\"images/4zrzovbb/website/c07f638082c569e8ce1e89ae95ee6f332a98ec08-2400x1260.jpg\",\"sha1hash\":\"c07f638082c569e8ce1e89ae95ee6f332a98ec08\",\"size\":132598,\"uploadId\":\"pxmJEaCvYm0cHoZTfnCcZYXxrWKBhHf0\",\"url\":\"https://cdn.sanity.io/images/4zrzovbb/website/c07f638082c569e8ce1e89ae95ee6f332a98ec08-2400x1260.jpg\"},\"description\":\"Anthropic logo\"}},\"siteName\":\"Anthropic\",\"sitemapUrls\":[\"/\",\"/careers\",\"/company\",\"/events\",\"/events/aws-summit-dc\",\"/events/aws-summit-nyc\",\"/events/aws-summit-london\",\"/events/aws-summit-tokyo\",\"/events/claude-for-finance\",\"/events/google-cloud-next-2025\",\"/events/paris-builder-summit\",\"/events/seoul-builder-summit\",\"/learn\",\"/supported-countries\",\"/unsubscribe\"],\"twitterUsername\":\"AnthropicAI\",\"youtubeUsername\":\"anthropic-ai\"}}]\n"])</script><script nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi">self.__next_f.push([1,"e:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"2\",{\"name\":\"theme-color\",\"content\":\"#141413\"}]]\n"])</script><script nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi">self.__next_f.push([1,"13:[\"$\",\"$L15\",null,{\"siteSettings\":{\"_createdAt\":\"2023-11-03T16:49:36Z\",\"_id\":\"13c6e1a1-6f38-400c-ae18-89d73b6ba991\",\"_rev\":\"lRptwNvJCBglHQHh4Ck6pu\",\"_system\":{\"base\":{\"id\":\"13c6e1a1-6f38-400c-ae18-89d73b6ba991\",\"rev\":\"g6Sjq5R0MIVIB6yTMaXwdd\"}},\"_type\":\"siteSettings\",\"_updatedAt\":\"2025-11-20T20:32:17Z\",\"announcement\":null,\"claudeCta\":{\"desktopCtas\":null,\"mobileCtas\":[{\"title\":\"Log in to Claude\",\"url\":\"https://claude.ai/login\"},{\"title\":\"Download app\",\"url\":\"https://claude.ai/download\"}],\"sections\":[{\"category\":\"Products\",\"links\":[{\"title\":\"Claude\",\"url\":\"https://claude.com/product/overview\"},{\"title\":\"Claude Code\",\"url\":\"https://claude.com/product/claude-code\"},{\"title\":\"Claude Developer Platform\",\"url\":\"https://claude.com/platform/api\"},{\"title\":\"Pricing\",\"url\":\"https://claude.com/pricing\"},{\"title\":\"Contact sales\",\"url\":\"https://claude.com/contact-sales\"}]},{\"category\":\"Models\",\"links\":[{\"title\":\"Opus\",\"url\":\"/claude/opus\"},{\"title\":\"Sonnet\",\"url\":\"/claude/sonnet\"},{\"title\":\"Haiku\",\"url\":\"/claude/haiku\"}]},{\"category\":\"Log in\",\"links\":[{\"title\":\"Claude.ai\",\"url\":\"https://claude.ai\"},{\"title\":\"Claude Console\",\"url\":\"https://console.claude.com\"}]}],\"title\":\"Try Claude\",\"url\":\"https://claude.ai/\"},\"copyright\":\"© 2025 Anthropic PBC\",\"footerNavigation\":[{\"_key\":\"716b96b62292\",\"links\":[{\"title\":\"Claude\",\"url\":\"https://claude.com/product/overview\"},{\"title\":\"Claude Code\",\"url\":\"https://claude.com/product/claude-code\"},{\"title\":\"Claude and Slack\",\"url\":\"https://claude.com/claude-and-slack\"},{\"title\":\"Claude in Excel\",\"url\":\"https://claude.com/claude-for-excel\"},{\"title\":\"Max plan\",\"url\":\"https://claude.com/pricing/max\"},{\"title\":\"Team plan\",\"url\":\"https://claude.com/pricing/team\"},{\"title\":\"Enterprise plan\",\"url\":\"https://claude.com/pricing/enterprise\"},{\"title\":\"Download app\",\"url\":\"https://claude.ai/download\"},{\"title\":\"Pricing\",\"url\":\"https://claude.com/pricing\"},{\"title\":\"Log in to Claude\",\"url\":\"https://claude.ai/\"}],\"title\":\"Products\"},{\"_key\":\"0229138ff25d\",\"links\":[{\"title\":\"Opus\",\"url\":\"https://www.anthropic.com/claude/opus\"},{\"title\":\"Sonnet\",\"url\":\"https://www.anthropic.com/claude/sonnet\"},{\"title\":\"Haiku\",\"url\":\"https://www.anthropic.com/claude/haiku\"}],\"title\":\"Models\"},{\"_key\":\"df2df9219e3abce95d6d83387e2d9bd6\",\"links\":[{\"title\":\"AI agents\",\"url\":\"https://claude.com/solutions/agents\"},{\"title\":\"Code modernization\",\"url\":\"https://claude.com/solutions/code-modernization\"},{\"title\":\"Coding\",\"url\":\"https://claude.com/solutions/coding\"},{\"title\":\"Customer support\",\"url\":\"https://claude.com/solutions/customer-support\"},{\"title\":\"Education\",\"url\":\"https://claude.com/solutions/education\"},{\"title\":\"Financial services\",\"url\":\"https://claude.com/solutions/financial-services\"},{\"title\":\"Government\",\"url\":\"https://claude.com/solutions/government\"},{\"title\":\"Life sciences\",\"url\":\"https://claude.com/solutions/life-sciences\"}],\"title\":\"Solutions\"},{\"_key\":\"f286ca01fc7aaabd131f347b711a971b\",\"links\":[{\"title\":\"Overview\",\"url\":\"https://claude.com/platform/api\"},{\"title\":\"Developer docs\",\"url\":\"https://platform.claude.com/docs\"},{\"title\":\"Pricing\",\"url\":\"https://claude.com/pricing#api\"},{\"title\":\"Amazon Bedrock\",\"url\":\"https://claude.com/partners/amazon-bedrock\"},{\"title\":\"Google Cloud’s Vertex AI\",\"url\":\"https://claude.com/partners/google-cloud-vertex-ai\"},{\"title\":\"Console login\",\"url\":\"http://console.anthropic.com/\"}],\"title\":\"Claude Developer Platform\"},{\"_key\":\"4b255e67f68c270e0072c7564e084e24\",\"links\":[{\"title\":\"Blog\",\"url\":\"https://claude.com/blog\"},{\"title\":\"Courses\",\"url\":\"/learn\"},{\"title\":\"Use cases\",\"url\":\"https://claude.com/resources/use-cases\"},{\"title\":\"Connectors\",\"url\":\"https://claude.com/partners/mcp\"},{\"title\":\"Customer stories\",\"url\":\"https://claude.com/customers\"},{\"title\":\"Engineering at Anthropic\",\"url\":\"/engineering\"},{\"title\":\"Events\",\"url\":\"/events\"},{\"title\":\"Powered by Claude\",\"url\":\"https://claude.com/partners/powered-by-claude\"},{\"title\":\"Service partners\",\"url\":\"https://claude.com/partners/services\"},{\"title\":\"Startups program\",\"url\":\"https://claude.com/programs/startups\"}],\"title\":\"Learn\"},{\"_key\":\"4f2729951e15b0b870897e0444f5f3e1\",\"links\":[{\"title\":\"Anthropic\",\"url\":\"/company\"},{\"title\":\"Careers\",\"url\":\"/careers\"},{\"title\":\"Economic Futures\",\"url\":\"/economic-index\"},{\"title\":\"Research\",\"url\":\"/research\"},{\"title\":\"News\",\"url\":\"/news\"},{\"title\":\"Responsible Scaling Policy\",\"url\":\"https://www.anthropic.com/news/announcing-our-updated-responsible-scaling-policy\"},{\"title\":\"Security and compliance\",\"url\":\"https://trust.anthropic.com/\"},{\"title\":\"Transparency\",\"url\":\"/transparency\"}],\"title\":\"Company\"},{\"_key\":\"a886dd1838335844d635f2857b25d66a\",\"links\":[{\"title\":\"Availability\",\"url\":\"https://www.anthropic.com/supported-countries\"},{\"title\":\"Status\",\"url\":\"https://status.anthropic.com/\"},{\"title\":\"Support center\",\"url\":\"https://support.claude.com/en/\"}],\"title\":\"Help and security\"},{\"_key\":\"3c3b033c11fa832a35d43b87d55a5364\",\"links\":[{\"title\":\"Privacy choices\",\"url\":\"#\"},{\"title\":\"Privacy policy\",\"url\":\"https://www.anthropic.com/legal/privacy\"},{\"title\":\"Responsible disclosure policy\",\"url\":\"https://www.anthropic.com/responsible-disclosure-policy\"},{\"title\":\"Terms of service: Commercial\",\"url\":\"https://www.anthropic.com/legal/commercial-terms\"},{\"title\":\"Terms of service: Consumer\",\"url\":\"https://www.anthropic.com/legal/consumer-terms\"},{\"title\":\"Usage policy\",\"url\":\"https://www.anthropic.com/legal/aup\"}],\"title\":\"Terms and policies\"}],\"headerNavigation\":[{\"_key\":\"a340f9d4b859\",\"category\":\"Research\",\"displayType\":\"singleLink\",\"sections\":null,\"url\":\"/research\"},{\"_key\":\"a483c7dfd38a\",\"category\":\"Economic Futures\",\"displayType\":\"singleLink\",\"sections\":null,\"url\":\"/economic-futures\"},{\"_key\":\"82c471bd311d\",\"category\":\"Commitments\",\"displayType\":\"sections\",\"sections\":[{\"_key\":\"675871636e4d\",\"links\":[{\"title\":\" Transparency\",\"url\":\"/transparency\"},{\"title\":\"Responsible Scaling Policy\",\"url\":\"/news/announcing-our-updated-responsible-scaling-policy\"}],\"title\":\"Initiatives\"},{\"_key\":\"16af50a6e2dd\",\"links\":[{\"title\":\"Security and compliance\",\"url\":\"https://trust.anthropic.com/\"}],\"title\":\"Trust center\"}]},{\"_key\":\"861a11ed9931\",\"category\":\"Learn\",\"displayType\":\"sections\",\"sections\":[{\"_key\":\"9f9f720a8793\",\"links\":[{\"title\":\"Anthropic Academy\",\"url\":\"/learn\"},{\"title\":\"Use cases\",\"url\":\"https://claude.com/resources/use-cases\"},{\"title\":\"Engineering at Anthropic\",\"url\":\"/engineering\"},{\"title\":\"Developer docs\",\"url\":\"https://docs.claude.com\"}],\"title\":\"Learn\"},{\"_key\":\"6bd061c46b10\",\"links\":[{\"title\":\"About\",\"url\":\"/company\"},{\"title\":\"Careers\",\"url\":\"/careers\"},{\"title\":\"Events\",\"url\":\"/events\"}],\"title\":\"Company\"}]},{\"_key\":\"22e8d8d2923d\",\"category\":\"News\",\"displayType\":\"singleLink\",\"sections\":null,\"url\":\"/news\"}],\"internalName\":\"anthropic.com Site Settings\",\"linkedInUsername\":\"anthropicresearch\",\"meta\":{\"_createdAt\":\"2023-11-20T21:56:31Z\",\"_id\":\"0f6290ad-6d21-407d-8deb-ce02815d1383\",\"_rev\":\"NyW74GU9ZzyWgAYa8qUSlF\",\"_type\":\"metadata\",\"_updatedAt\":\"2023-11-20T23:54:09Z\",\"robotsIndexable\":true,\"seoDescription\":\"Anthropic is an AI safety and research company that's working to build reliable, interpretable, and steerable AI systems.\",\"seoTitle\":\"Anthropic\",\"socialImage\":{\"_type\":\"image\",\"asset\":{\"_createdAt\":\"2025-05-23T14:14:18Z\",\"_id\":\"image-c07f638082c569e8ce1e89ae95ee6f332a98ec08-2400x1260-jpg\",\"_rev\":\"v1N2wBpLqoO2Q3HXueYiJi\",\"_type\":\"sanity.imageAsset\",\"_updatedAt\":\"2025-05-23T14:14:18Z\",\"assetId\":\"c07f638082c569e8ce1e89ae95ee6f332a98ec08\",\"extension\":\"jpg\",\"metadata\":{\"_type\":\"sanity.imageMetadata\",\"blurHash\":\"MASPU,%M?b%Ms:-;j[j[j[fQ~qj[9FayWB\",\"dimensions\":{\"_type\":\"sanity.imageDimensions\",\"aspectRatio\":1.9047619047619047,\"height\":1260,\"width\":2400},\"hasAlpha\":false,\"isOpaque\":true,\"lqip\":\"data:image/jpeg;base64,/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAKABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAQFCP/EACAQAAEEAgEFAAAAAAAAAAAAAAABAgMEBRETEhQhIjH/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwDS96axCjO2r8yqvn21oiR3ci6TT8d0t395ELUGVAAB/9k=\",\"palette\":{\"_type\":\"sanity.imagePalette\",\"darkMuted\":{\"_type\":\"sanity.imagePaletteSwatch\",\"background\":\"#444440\",\"foreground\":\"#fff\",\"population\":0.05,\"title\":\"#fff\"},\"darkVibrant\":{\"_type\":\"sanity.imagePaletteSwatch\",\"background\":\"#68681c\",\"foreground\":\"#fff\",\"population\":0,\"title\":\"#fff\"},\"dominant\":{\"_type\":\"sanity.imagePaletteSwatch\",\"background\":\"#fcfcf4\",\"foreground\":\"#000\",\"population\":90.85,\"title\":\"#000\"},\"lightMuted\":{\"_type\":\"sanity.imagePaletteSwatch\",\"background\":\"#bcbcb4\",\"foreground\":\"#000\",\"population\":0.03,\"title\":\"#fff\"},\"lightVibrant\":{\"_type\":\"sanity.imagePaletteSwatch\",\"background\":\"#fcfcf4\",\"foreground\":\"#000\",\"population\":90.85,\"title\":\"#000\"},\"muted\":{\"_type\":\"sanity.imagePaletteSwatch\",\"background\":\"#7c7c74\",\"foreground\":\"#fff\",\"population\":0.02,\"title\":\"#fff\"},\"vibrant\":{\"_type\":\"sanity.imagePaletteSwatch\",\"background\":\"#c8c836\",\"foreground\":\"#000\",\"population\":0,\"title\":\"#fff\"}}},\"mimeType\":\"image/jpeg\",\"originalFilename\":\"Anthropic-OG-image.jpg\",\"path\":\"images/4zrzovbb/website/c07f638082c569e8ce1e89ae95ee6f332a98ec08-2400x1260.jpg\",\"sha1hash\":\"c07f638082c569e8ce1e89ae95ee6f332a98ec08\",\"size\":132598,\"uploadId\":\"pxmJEaCvYm0cHoZTfnCcZYXxrWKBhHf0\",\"url\":\"https://cdn.sanity.io/images/4zrzovbb/website/c07f638082c569e8ce1e89ae95ee6f332a98ec08-2400x1260.jpg\"},\"description\":\"Anthropic logo\"}},\"siteName\":\"Anthropic\",\"sitemapUrls\":[\"/\",\"/careers\",\"/company\",\"/events\",\"/events/aws-summit-dc\",\"/events/aws-summit-nyc\",\"/events/aws-summit-london\",\"/events/aws-summit-tokyo\",\"/events/claude-for-finance\",\"/events/google-cloud-next-2025\",\"/events/paris-builder-summit\",\"/events/seoul-builder-summit\",\"/learn\",\"/supported-countries\",\"/unsubscribe\"],\"twitterUsername\":\"AnthropicAI\",\"youtubeUsername\":\"anthropic-ai\",\"hideFooter\":true},\"page\":{\"_type\":\"page\",\"_id\":\"not-found\",\"_rev\":\"\",\"_createdAt\":\"\",\"_updatedAt\":\"\",\"title\":\"Not Found\",\"slug\":{\"_type\":\"slug\",\"current\":\"not-found\"},\"meta\":{},\"sections\":[]},\"children\":\"$L16\"}]\n"])</script><script nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi">self.__next_f.push([1,"16:[\"$\",\"$L17\",null,{}]\n"])</script><script nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi">self.__next_f.push([1,"10:[[\"$\",\"title\",\"0\",{\"children\":\"Code execution with MCP: building more efficient AI agents \\\\ Anthropic\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Learn how code execution with the Model Context Protocol enables agents to handle more tools while using fewer tokens, reducing context overhead by up to 98.7%.\"}],[\"$\",\"meta\",\"2\",{\"name\":\"msapplication-TileColor\",\"content\":\"141413\"}],[\"$\",\"meta\",\"3\",{\"name\":\"msapplication-config\",\"content\":\"/browserconfig.xml\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:title\",\"content\":\"Code execution with MCP: building more efficient AI agents\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:description\",\"content\":\"Learn how code execution with the Model Context Protocol enables agents to handle more tools while using fewer tokens, reducing context overhead by up to 98.7%.\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:image\",\"content\":\"https://cdn.sanity.io/images/4zrzovbb/website/8071ace7b1158ab6d3f8fa04679cef31234425ab-2400x1260.png\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:image:alt\",\"content\":\"Image for MCP and code execution blog post.\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:type\",\"content\":\"website\"}],[\"$\",\"meta\",\"9\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"10\",{\"name\":\"twitter:site\",\"content\":\"@AnthropicAI\"}],[\"$\",\"meta\",\"11\",{\"name\":\"twitter:creator\",\"content\":\"@AnthropicAI\"}],[\"$\",\"meta\",\"12\",{\"name\":\"twitter:title\",\"content\":\"Code execution with MCP: building more efficient AI agents\"}],[\"$\",\"meta\",\"13\",{\"name\":\"twitter:description\",\"content\":\"Learn how code execution with the Model Context Protocol enables agents to handle more tools while using fewer tokens, reducing context overhead by up to 98.7%.\"}],[\"$\",\"meta\",\"14\",{\"name\":\"twitter:image\",\"content\":\"https://cdn.sanity.io/images/4zrzovbb/website/8071ace7b1158ab6d3f8fa04679cef31234425ab-2400x1260.png\"}],[\"$\",\"meta\",\"15\",{\"name\":\"twitter:image:alt\",\"content\":\"Image for MCP and code execution blog post.\"}],[\"$\",\"link\",\"16\",{\"rel\":\"shortcut icon\",\"href\":\"/favicon.ico\"}],[\"$\",\"link\",\"17\",{\"rel\":\"icon\",\"href\":\"/images/icons/favicon-32x32.png\"}],[\"$\",\"link\",\"18\",{\"rel\":\"apple-touch-icon\",\"href\":\"/images/icons/apple-touch-icon.png\"}],[\"$\",\"link\",\"19\",{\"rel\":\"apple-touch-icon\",\"href\":\"/images/icons/apple-touch-icon.png\",\"sizes\":\"180x180\"}],[\"$\",\"link\",\"20\",{\"rel\":\"mask-icon\",\"href\":\"/images/icons/safari-pinned-tab.svg\",\"color\":\"141413\"}],[\"$\",\"$L18\",\"21\",{}]]\n"])</script><script nonce="N2JhZTM5YTEtZjNiYS00ZmE5LWIxMjAtYTk4MWE4ZmM2YjZi">self.__next_f.push([1,"c:null\n"])</script></body></html>