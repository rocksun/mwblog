<!doctype html><html lang="en"><head><title data-rh="true">How to Automate Data Classification in PostgreSQL With OpenAI | by Team Timescale | Timescale | Jan, 2025 | Medium</title><meta data-rh="true" charset="utf-8"/><meta data-rh="true" name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,maximum-scale=1"/><meta data-rh="true" name="theme-color" content="#000000"/><meta data-rh="true" name="twitter:app:name:iphone" content="Medium"/><meta data-rh="true" name="twitter:app:id:iphone" content="828256236"/><meta data-rh="true" property="al:ios:app_name" content="Medium"/><meta data-rh="true" property="al:ios:app_store_id" content="828256236"/><meta data-rh="true" property="al:android:package" content="com.medium.reader"/><meta data-rh="true" property="fb:app_id" content="542599432471018"/><meta data-rh="true" property="og:site_name" content="Medium"/><meta data-rh="true" property="og:type" content="article"/><meta data-rh="true" property="article:published_time" content="2025-01-17T17:24:03.231Z"/><meta data-rh="true" name="title" content="How to Automate Data Classification in PostgreSQL With OpenAI | by Team Timescale | Timescale | Jan, 2025 | Medium"/><meta data-rh="true" property="og:title" content="How to Automate Data Classification in PostgreSQL With OpenAI"/><meta data-rh="true" property="al:android:url" content="medium://p/ff14f9066de9"/><meta data-rh="true" property="al:ios:url" content="medium://p/ff14f9066de9"/><meta data-rh="true" property="al:android:app_name" content="Medium"/><meta data-rh="true" name="description" content="Data classification is a crucial but challenging task. Learn how to automate it in PostgreSQL using open-source extensions (pgvector; pgai) and OpenAI models."/><meta data-rh="true" property="og:description" content="Data classification is a crucial but challenging task. Learn how to automate it in PostgreSQL using open-source extensions &amp; OpenAI models."/><meta data-rh="true" property="og:url" content="https://medium.com/timescale/how-to-automate-data-classification-in-postgresql-with-openai-ff14f9066de9"/><meta data-rh="true" property="al:web:url" content="https://medium.com/timescale/how-to-automate-data-classification-in-postgresql-with-openai-ff14f9066de9"/><meta data-rh="true" property="og:image" content="https://miro.medium.com/v2/da:true/resize:fit:1200/0*aqvy9nSam8zLhloV"/><meta data-rh="true" property="og:image:alt" content="How to Automate Data Classification in PostgreSQL With OpenAI"/><meta data-rh="true" property="article:author" content="https://medium.com/@team-timescale"/><meta data-rh="true" name="author" content="Team Timescale"/><meta data-rh="true" name="robots" content="index,noarchive,follow,max-image-preview:large"/><meta data-rh="true" name="referrer" content="unsafe-url"/><meta data-rh="true" property="twitter:title" content="How to Automate Data Classification in PostgreSQL With OpenAI"/><meta data-rh="true" name="twitter:site" content="@timescaledb"/><meta data-rh="true" name="twitter:app:url:iphone" content="medium://p/ff14f9066de9"/><meta data-rh="true" property="twitter:description" content="Data classification is a crucial but challenging task. Learn how to automate it in PostgreSQL using open-source extensions &amp; OpenAI models."/><meta data-rh="true" name="twitter:image:src" content="https://miro.medium.com/v2/da:true/resize:fit:1200/0*aqvy9nSam8zLhloV"/><meta data-rh="true" name="twitter:image:alt" content="How to Automate Data Classification in PostgreSQL With OpenAI"/><meta data-rh="true" name="twitter:card" content="summary_large_image"/><meta data-rh="true" name="twitter:label1" content="Reading time"/><meta data-rh="true" name="twitter:data1" content="11 min read"/><link data-rh="true" rel="icon" href="https://miro.medium.com/v2/5d8de952517e8160e40ef9841c781cdc14a5db313057fa3c3de41c6f5b494b19"/><link data-rh="true" rel="search" type="application/opensearchdescription+xml" title="Medium" href="/osd.xml"/><link data-rh="true" rel="apple-touch-icon" sizes="152x152" href="https://miro.medium.com/v2/resize:fill:304:304/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="apple-touch-icon" sizes="120x120" href="https://miro.medium.com/v2/resize:fill:240:240/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="apple-touch-icon" sizes="76x76" href="https://miro.medium.com/v2/resize:fill:152:152/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="apple-touch-icon" sizes="60x60" href="https://miro.medium.com/v2/resize:fill:120:120/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="mask-icon" href="https://miro.medium.com/v2/resize:fill:1000:1000/7*GAOKVe--MXbEJmV9230oOQ.png" color="#171717"/><link data-rh="true" rel="preconnect" href="https://glyph.medium.com" crossOrigin=""/><link data-rh="true" id="glyph_preload_link" rel="preload" as="style" type="text/css" href="https://glyph.medium.com/css/unbound.css"/><link data-rh="true" id="glyph_link" rel="stylesheet" type="text/css" href="https://glyph.medium.com/css/unbound.css"/><link data-rh="true" rel="author" href="https://medium.com/@team-timescale"/><link data-rh="true" rel="canonical" href="https://www.timescale.com/blog/how-to-automate-data-classification-in-postgresql-with-openai"/><link data-rh="true" rel="alternate" href="android-app://com.medium.reader/https/medium.com/p/ff14f9066de9"/><script data-rh="true" type="application/ld+json">{"@context":"http:\u002F\u002Fschema.org","@type":"NewsArticle","image":["https:\u002F\u002Fmiro.medium.com\u002Fv2\u002Fda:true\u002Fresize:fit:1200\u002F0*aqvy9nSam8zLhloV"],"url":"https:\u002F\u002Fmedium.com\u002Ftimescale\u002Fhow-to-automate-data-classification-in-postgresql-with-openai-ff14f9066de9","dateCreated":"2025-01-17T17:24:03.231Z","datePublished":"2025-01-17T17:24:03.231Z","dateModified":"2025-01-17T18:28:15.340Z","headline":"How to Automate Data Classification in PostgreSQL With OpenAI","name":"How to Automate Data Classification in PostgreSQL With OpenAI","description":"Data classification is a crucial but challenging task. Learn how to automate it in PostgreSQL using open-source extensions (pgvector; pgai) and OpenAI models.","identifier":"ff14f9066de9","author":{"@type":"Person","name":"Team Timescale","url":"https:\u002F\u002Fmedium.com\u002F@team-timescale"},"creator":["Team Timescale"],"publisher":{"@type":"Organization","name":"Timescale","url":"https:\u002F\u002Fmedium.com\u002Ftimescale","logo":{"@type":"ImageObject","width":163,"height":60,"url":"https:\u002F\u002Fmiro.medium.com\u002Fv2\u002Fresize:fit:326\u002F1*gOEnwizcgWX1HSdbJslc9A.png"}},"mainEntityOfPage":"https:\u002F\u002Fmedium.com\u002Ftimescale\u002Fhow-to-automate-data-classification-in-postgresql-with-openai-ff14f9066de9"}</script><style type="text/css" data-fela-rehydration="562" data-fela-type="STATIC">html{box-sizing:border-box;-webkit-text-size-adjust:100%}*, *:before, *:after{box-sizing:inherit}body{margin:0;padding:0;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;color:rgba(0,0,0,0.8);position:relative;min-height:100vh}h1, h2, h3, h4, h5, h6, dl, dd, ol, ul, menu, figure, blockquote, p, pre, form{margin:0}menu, ol, ul{padding:0;list-style:none;list-style-image:none}main{display:block}a{color:inherit;text-decoration:none}a, button, input{-webkit-tap-highlight-color:transparent}img, svg{vertical-align:middle}button{background:transparent;overflow:visible}button, input, optgroup, select, textarea{margin:0}:root{--reach-tabs:1;--reach-menu-button:1}#speechify-root{font-family:Sohne, sans-serif}div[data-popper-reference-hidden="true"]{visibility:hidden;pointer-events:none}.grecaptcha-badge{visibility:hidden}
/*XCode style (c) Angel Garcia <angelgarcia.mail@gmail.com>*/.hljs {background: #fff;color: black;
}/* Gray DOCTYPE selectors like WebKit */
.xml .hljs-meta {color: #c0c0c0;
}.hljs-comment,
.hljs-quote {color: #007400;
}.hljs-tag,
.hljs-attribute,
.hljs-keyword,
.hljs-selector-tag,
.hljs-literal,
.hljs-name {color: #aa0d91;
}.hljs-variable,
.hljs-template-variable {color: #3F6E74;
}.hljs-code,
.hljs-string,
.hljs-meta .hljs-string {color: #c41a16;
}.hljs-regexp,
.hljs-link {color: #0E0EFF;
}.hljs-title,
.hljs-symbol,
.hljs-bullet,
.hljs-number {color: #1c00cf;
}.hljs-section,
.hljs-meta {color: #643820;
}.hljs-title.class_,
.hljs-class .hljs-title,
.hljs-type,
.hljs-built_in,
.hljs-params {color: #5c2699;
}.hljs-attr {color: #836C28;
}.hljs-subst {color: #000;
}.hljs-formula {background-color: #eee;font-style: italic;
}.hljs-addition {background-color: #baeeba;
}.hljs-deletion {background-color: #ffc8bd;
}.hljs-selector-id,
.hljs-selector-class {color: #9b703f;
}.hljs-doctag,
.hljs-strong {font-weight: bold;
}.hljs-emphasis {font-style: italic;
}
</style><style type="text/css" data-fela-rehydration="562" data-fela-type="KEYFRAME">@-webkit-keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}@-moz-keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}@keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}</style><style type="text/css" data-fela-rehydration="562" data-fela-type="RULE">.a{font-family:medium-content-sans-serif-font, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif}.b{font-weight:400}.c{background-color:rgba(255, 255, 255, 1)}.l{display:block}.m{position:sticky}.n{top:0}.o{z-index:500}.p{padding:0 24px}.q{align-items:center}.r{border-bottom:solid 1px #F2F2F2}.y{height:41px}.z{line-height:20px}.ab{display:flex}.ac{height:57px}.ae{flex:1 0 auto}.af{color:inherit}.ag{fill:inherit}.ah{font-size:inherit}.ai{border:inherit}.aj{font-family:inherit}.ak{letter-spacing:inherit}.al{font-weight:inherit}.am{padding:0}.an{margin:0}.ao{cursor:pointer}.ap:disabled{cursor:not-allowed}.aq:disabled{color:#6B6B6B}.ar:disabled{fill:#6B6B6B}.au{width:auto}.av path{fill:#242424}.aw{height:25px}.ax{margin-left:16px}.ay{border:none}.az{border-radius:20px}.ba{width:240px}.bb{background:#F9F9F9}.bc path{fill:#6B6B6B}.be{outline:none}.bf{font-family:sohne, "Helvetica Neue", Helvetica, Arial, sans-serif}.bg{font-size:14px}.bh{width:100%}.bi{padding:10px 20px 10px 0}.bj{background-color:transparent}.bk{color:#242424}.bl::placeholder{color:#6B6B6B}.bm{display:inline-block}.bn{margin-left:12px}.bo{margin-right:12px}.bp{border-radius:4px}.bq{margin-left:24px}.br{height:24px}.bx{background-color:#F9F9F9}.by{border-radius:50%}.bz{height:32px}.ca{width:32px}.cb{justify-content:center}.ch{max-width:680px}.ci{min-width:0}.cj{animation:k1 1.2s ease-in-out infinite}.ck{height:100vh}.cl{margin-bottom:16px}.cm{margin-top:48px}.cn{align-items:flex-start}.co{flex-direction:column}.cp{justify-content:space-between}.cq{margin-bottom:24px}.cw{width:80%}.cx{background-color:#F2F2F2}.dd{height:44px}.de{width:44px}.df{margin:auto 0}.dg{margin-bottom:4px}.dh{height:16px}.di{width:120px}.dj{width:80px}.dp{margin-bottom:8px}.dq{width:96%}.dr{width:98%}.ds{width:81%}.dt{margin-left:8px}.du{color:#6B6B6B}.dv{font-size:13px}.dw{height:100%}.ep{color:#FFFFFF}.eq{fill:#FFFFFF}.er{background:rgba(134, 132, 132, 1)}.es{border-color:rgba(134, 132, 132, 1)}.ew:disabled{cursor:inherit !important}.ex:disabled{opacity:0.3}.ey:disabled:hover{background:rgba(134, 132, 132, 1)}.ez:disabled:hover{border-color:rgba(134, 132, 132, 1)}.fa{border-radius:99em}.fb{border-width:1px}.fc{border-style:solid}.fd{box-sizing:border-box}.fe{text-decoration:none}.ff{text-align:center}.fi{margin-right:32px}.fj{position:relative}.fk{fill:#6B6B6B}.fn{background:transparent}.fo svg{margin-left:4px}.fp svg{fill:#6B6B6B}.fr{box-shadow:inset 0 0 0 1px rgba(0, 0, 0, 0.05)}.fs{position:absolute}.fz{margin:0 24px}.gd{background:rgba(255, 255, 255, 1)}.ge{border:1px solid #F2F2F2}.gf{box-shadow:0 1px 4px #F2F2F2}.gg{max-height:100vh}.gh{overflow-y:auto}.gi{left:0}.gj{top:calc(100vh + 100px)}.gk{bottom:calc(100vh + 100px)}.gl{width:10px}.gm{pointer-events:none}.gn{word-break:break-word}.go{word-wrap:break-word}.gp:after{display:block}.gq:after{content:""}.gr:after{clear:both}.gs{line-height:1.23}.gt{letter-spacing:0}.gu{font-style:normal}.gv{font-weight:700}.ia{align-items:baseline}.ib{width:48px}.ic{height:48px}.id{border:2px solid rgba(255, 255, 255, 1)}.ie{z-index:0}.if{box-shadow:none}.ig{border:1px solid rgba(0, 0, 0, 0.05)}.ih{margin-left:-12px}.ii{width:28px}.ij{height:28px}.ik{z-index:1}.il{width:24px}.im{margin-bottom:2px}.in{flex-wrap:nowrap}.io{font-size:16px}.ip{line-height:24px}.ir{margin:0 8px}.is{display:inline}.it{color:rgba(134, 132, 132, 1)}.iu{fill:rgba(134, 132, 132, 1)}.ix{flex:0 0 auto}.ja{flex-wrap:wrap}.jb{white-space:pre-wrap}.jc{margin-right:4px}.jd{overflow:hidden}.je{max-height:20px}.jf{text-overflow:ellipsis}.jg{display:-webkit-box}.jh{-webkit-line-clamp:1}.ji{-webkit-box-orient:vertical}.jj{word-break:break-all}.jl{padding-left:8px}.jm{padding-right:8px}.kn> *{flex-shrink:0}.ko{overflow-x:scroll}.kp::-webkit-scrollbar{display:none}.kq{scrollbar-width:none}.kr{-ms-overflow-style:none}.ks{width:74px}.kt{flex-direction:row}.ku{z-index:2}.kx{-webkit-user-select:none}.ky{border:0}.kz{fill:rgba(117, 117, 117, 1)}.lc{outline:0}.ld{user-select:none}.le> svg{pointer-events:none}.ln{cursor:progress}.lo{opacity:1}.lp{padding:4px 0}.ls{margin-top:0px}.lt{width:16px}.lv{display:inline-flex}.mb{max-width:100%}.mc{padding:8px 2px}.md svg{color:#6B6B6B}.mu{margin-left:auto}.mv{margin-right:auto}.mw{max-width:1680px}.nc{clear:both}.ne{cursor:zoom-in}.nf{z-index:auto}.nh{height:auto}.ni{line-height:1.58}.nj{letter-spacing:-0.004em}.nk{font-family:source-serif-pro, Georgia, Cambria, "Times New Roman", Times, serif}.of{margin-bottom:-0.46em}.og{margin-top:32px}.oh{margin-bottom:14px}.oi{padding-top:24px}.oj{padding-bottom:10px}.ok{background-color:#000000}.ol{height:3px}.om{width:3px}.on{margin-right:20px}.oo{text-decoration:underline}.op{line-height:1.12}.oq{letter-spacing:-0.022em}.or{font-weight:600}.pm{margin-bottom:-0.28em}.ps{line-height:1.18}.qg{margin-bottom:-0.31em}.qh{max-width:793px}.qs{max-width:1199px}.qt{overflow-x:auto}.qu{font-family:source-code-pro, Menlo, Monaco, "Courier New", Courier, monospace}.qv{padding:32px}.qw{border:1px solid #E5E5E5}.qx{line-height:1.4}.qy{margin-top:-0.2em}.qz{margin-bottom:-0.2em}.ra{white-space:pre}.rb{min-width:fit-content}.rc{padding:2px 4px}.rd{font-size:75%}.re> strong{font-family:inherit}.rf{margin:auto}.rg{padding-bottom:75%}.rh{height:0}.ri{font-style:italic}.rj{margin-bottom:26px}.rk{margin-top:6px}.rl{margin-top:8px}.rm{margin-right:8px}.rn{padding:8px 16px}.ro{border-radius:100px}.rp{transition:background 300ms ease}.rr{white-space:nowrap}.rs{border-top:none}.rt{margin-bottom:50px}.ru{height:52px}.rv{max-height:52px}.rw{box-sizing:content-box}.rx{position:static}.rz{max-width:155px}.sf{margin-bottom:64px}.sg{margin-bottom:48px}.su{border-radius:2px}.sw{height:64px}.sx{width:64px}.sy{align-self:flex-end}.sz{flex:1 1 auto}.tf{padding-right:4px}.tg{font-weight:500}.tn{margin-top:16px}.to{color:rgba(255, 255, 255, 1)}.tp{fill:rgba(255, 255, 255, 1)}.tq{background:rgba(25, 25, 25, 1)}.tr{border-color:rgba(25, 25, 25, 1)}.tu:disabled{opacity:0.1}.tv:disabled:hover{background:rgba(25, 25, 25, 1)}.tw:disabled:hover{border-color:rgba(25, 25, 25, 1)}.tx{margin-bottom:54px}.ty{height:0px}.tz{gap:18px}.ua{fill:rgba(61, 61, 61, 1)}.um{border-bottom:solid 1px #E5E5E5}.un{margin-top:72px}.uo{padding:24px 0}.up{margin-bottom:0px}.uq{margin-right:16px}.as:hover:not(:disabled){color:rgba(25, 25, 25, 1)}.at:hover:not(:disabled){fill:rgba(25, 25, 25, 1)}.et:hover{background:rgba(115, 113, 113, 1)}.eu:hover{border-color:rgba(115, 113, 113, 1)}.ev:hover{cursor:pointer}.fl:hover{color:#242424}.fm:hover{fill:#242424}.fq:hover svg{fill:#242424}.ft:hover{background-color:rgba(0, 0, 0, 0.1)}.iq:hover{text-decoration:underline}.iv:hover:not(:disabled){color:rgba(115, 113, 113, 1)}.iw:hover:not(:disabled){fill:rgba(115, 113, 113, 1)}.lb:hover{fill:rgba(8, 8, 8, 1)}.lq:hover{fill:#000000}.lr:hover p{color:#000000}.lu:hover{color:#000000}.me:hover svg{color:#000000}.rq:hover{background-color:#F2F2F2}.sv:hover{background-color:none}.ts:hover{background:#000000}.tt:hover{border-color:#242424}.ub:hover{fill:rgba(25, 25, 25, 1)}.bd:focus-within path{fill:#242424}.la:focus{fill:rgba(8, 8, 8, 1)}.mf:focus svg{color:#000000}.ng:focus{transform:scale(1.01)}.lf:active{border-style:none}</style><style type="text/css" data-fela-rehydration="562" data-fela-type="RULE" media="all and (min-width: 1080px)">.d{display:none}.bw{width:64px}.cg{margin:0 64px}.cv{height:48px}.dc{margin-bottom:52px}.do{margin-bottom:48px}.ef{font-size:14px}.eg{line-height:20px}.em{font-size:13px}.eo{padding:5px 12px}.fh{display:flex}.fy{margin-bottom:50px}.gc{max-width:680px}.hq{font-size:42px}.hr{margin-top:1.19em}.hs{margin-bottom:32px}.ht{line-height:52px}.hu{letter-spacing:-0.011em}.hz{align-items:center}.jz{border-top:solid 1px #F2F2F2}.ka{border-bottom:solid 1px #F2F2F2}.kb{margin:32px 0 0}.kc{padding:3px 8px}.kl> *{margin-right:24px}.km> :last-child{margin-right:0}.lm{margin-top:0px}.ma{margin:0}.nb{margin-top:40px}.ob{font-size:20px}.oc{margin-top:2.14em}.od{line-height:32px}.oe{letter-spacing:-0.003em}.pi{font-size:24px}.pj{margin-top:1.25em}.pk{line-height:30px}.pl{letter-spacing:-0.016em}.pr{margin-top:0.94em}.qd{margin-top:1.72em}.qe{line-height:24px}.qf{letter-spacing:0}.qm{margin-top:56px}.qr{margin-top:1.95em}.se{display:inline-block}.sh{flex-direction:row}.sk{margin-bottom:0}.sl{margin-right:20px}.ta{max-width:500px}.ug{margin:40px 0 0}.ul{padding-top:72px}</style><style type="text/css" data-fela-rehydration="562" data-fela-type="RULE" media="all and (max-width: 1079.98px)">.e{display:none}.ll{margin-top:0px}.sd{display:inline-block}</style><style type="text/css" data-fela-rehydration="562" data-fela-type="RULE" media="all and (max-width: 903.98px)">.f{display:none}.lk{margin-top:0px}.sc{display:inline-block}</style><style type="text/css" data-fela-rehydration="562" data-fela-type="RULE" media="all and (max-width: 727.98px)">.g{display:none}.li{margin-top:0px}.lj{margin-right:0px}.sb{display:inline-block}</style><style type="text/css" data-fela-rehydration="562" data-fela-type="RULE" media="all and (max-width: 551.98px)">.h{display:none}.s{display:flex}.t{justify-content:space-between}.bs{width:24px}.cc{margin:0 24px}.cr{height:40px}.cy{margin-bottom:44px}.dk{margin-bottom:32px}.dx{font-size:13px}.dy{line-height:20px}.eh{padding:0px 8px 1px}.fu{margin-bottom:2px}.gw{font-size:32px}.gx{margin-top:1.01em}.gy{margin-bottom:24px}.gz{line-height:38px}.ha{letter-spacing:-0.014em}.hv{align-items:flex-start}.iy{flex-direction:column}.jn{margin:24px -24px 0}.jo{padding:0}.kd> *{margin-right:8px}.ke> :last-child{margin-right:24px}.kv{margin-left:0px}.lg{margin-top:0px}.lh{margin-right:0px}.lw{margin:0}.mg{border:1px solid #F2F2F2}.mh{border-radius:99em}.mi{padding:0px 16px 0px 12px}.mj{height:38px}.mk{align-items:center}.mm svg{margin-right:8px}.mx{margin-top:32px}.nl{font-size:18px}.nm{margin-top:1.56em}.nn{line-height:28px}.no{letter-spacing:-0.003em}.os{font-size:20px}.ot{margin-top:0.93em}.ou{line-height:24px}.ov{letter-spacing:0}.pn{margin-top:0.67em}.pt{font-size:16px}.pu{margin-top:1.23em}.qi{margin-top:40px}.qn{margin-top:1.2em}.sa{display:inline-block}.ss{margin-bottom:20px}.st{margin-right:0}.te{max-width:100%}.th{font-size:24px}.ti{line-height:30px}.tj{letter-spacing:-0.016em}.uc{margin:32px 0 0}.uh{padding-top:48px}.ml:hover{border-color:#E5E5E5}</style><style type="text/css" data-fela-rehydration="562" data-fela-type="RULE" media="all and (min-width: 904px) and (max-width: 1079.98px)">.i{display:none}.bv{width:64px}.cf{margin:0 64px}.cu{height:48px}.db{margin-bottom:52px}.dn{margin-bottom:48px}.ed{font-size:14px}.ee{line-height:20px}.ek{font-size:13px}.el{padding:5px 12px}.fg{display:flex}.fx{margin-bottom:50px}.gb{max-width:680px}.hl{font-size:42px}.hm{margin-top:1.19em}.hn{margin-bottom:32px}.ho{line-height:52px}.hp{letter-spacing:-0.011em}.hy{align-items:center}.jv{border-top:solid 1px #F2F2F2}.jw{border-bottom:solid 1px #F2F2F2}.jx{margin:32px 0 0}.jy{padding:3px 8px}.kj> *{margin-right:24px}.kk> :last-child{margin-right:0}.lz{margin:0}.na{margin-top:40px}.nx{font-size:20px}.ny{margin-top:2.14em}.nz{line-height:32px}.oa{letter-spacing:-0.003em}.pe{font-size:24px}.pf{margin-top:1.25em}.pg{line-height:30px}.ph{letter-spacing:-0.016em}.pq{margin-top:0.94em}.qa{margin-top:1.72em}.qb{line-height:24px}.qc{letter-spacing:0}.ql{margin-top:56px}.qq{margin-top:1.95em}.si{flex-direction:row}.sm{margin-bottom:0}.sn{margin-right:20px}.tb{max-width:500px}.uf{margin:40px 0 0}.uk{padding-top:72px}</style><style type="text/css" data-fela-rehydration="562" data-fela-type="RULE" media="all and (min-width: 728px) and (max-width: 903.98px)">.j{display:none}.w{display:flex}.x{justify-content:space-between}.bu{width:64px}.ce{margin:0 48px}.ct{height:48px}.da{margin-bottom:52px}.dm{margin-bottom:48px}.eb{font-size:13px}.ec{line-height:20px}.ej{padding:0px 8px 1px}.fw{margin-bottom:50px}.ga{max-width:680px}.hg{font-size:42px}.hh{margin-top:1.19em}.hi{margin-bottom:32px}.hj{line-height:52px}.hk{letter-spacing:-0.011em}.hx{align-items:center}.jr{border-top:solid 1px #F2F2F2}.js{border-bottom:solid 1px #F2F2F2}.jt{margin:32px 0 0}.ju{padding:3px 8px}.kh> *{margin-right:24px}.ki> :last-child{margin-right:0}.ly{margin:0}.mz{margin-top:40px}.nt{font-size:20px}.nu{margin-top:2.14em}.nv{line-height:32px}.nw{letter-spacing:-0.003em}.pa{font-size:24px}.pb{margin-top:1.25em}.pc{line-height:30px}.pd{letter-spacing:-0.016em}.pp{margin-top:0.94em}.px{margin-top:1.72em}.py{line-height:24px}.pz{letter-spacing:0}.qk{margin-top:56px}.qp{margin-top:1.95em}.sj{flex-direction:row}.so{margin-bottom:0}.sp{margin-right:20px}.tc{max-width:500px}.ue{margin:40px 0 0}.uj{padding-top:72px}</style><style type="text/css" data-fela-rehydration="562" data-fela-type="RULE" media="all and (min-width: 552px) and (max-width: 727.98px)">.k{display:none}.u{display:flex}.v{justify-content:space-between}.bt{width:24px}.cd{margin:0 24px}.cs{height:40px}.cz{margin-bottom:44px}.dl{margin-bottom:32px}.dz{font-size:13px}.ea{line-height:20px}.ei{padding:0px 8px 1px}.fv{margin-bottom:2px}.hb{font-size:32px}.hc{margin-top:1.01em}.hd{margin-bottom:24px}.he{line-height:38px}.hf{letter-spacing:-0.014em}.hw{align-items:flex-start}.iz{flex-direction:column}.jp{margin:24px 0 0}.jq{padding:0}.kf> *{margin-right:8px}.kg> :last-child{margin-right:8px}.kw{margin-left:0px}.lx{margin:0}.mn{border:1px solid #F2F2F2}.mo{border-radius:99em}.mp{padding:0px 16px 0px 12px}.mq{height:38px}.mr{align-items:center}.mt svg{margin-right:8px}.my{margin-top:32px}.np{font-size:18px}.nq{margin-top:1.56em}.nr{line-height:28px}.ns{letter-spacing:-0.003em}.ow{font-size:20px}.ox{margin-top:0.93em}.oy{line-height:24px}.oz{letter-spacing:0}.po{margin-top:0.67em}.pv{font-size:16px}.pw{margin-top:1.23em}.qj{margin-top:40px}.qo{margin-top:1.2em}.sq{margin-bottom:20px}.sr{margin-right:0}.td{max-width:100%}.tk{font-size:24px}.tl{line-height:30px}.tm{letter-spacing:-0.016em}.ud{margin:32px 0 0}.ui{padding-top:48px}.ms:hover{border-color:#E5E5E5}</style><style type="text/css" data-fela-rehydration="562" data-fela-type="RULE" media="print">.ry{display:none}</style><style type="text/css" data-fela-rehydration="562" data-fela-type="RULE" media="(orientation: landscape) and (max-width: 903.98px)">.jk{max-height:none}</style><style type="text/css" data-fela-rehydration="562" data-fela-type="RULE" media="(prefers-reduced-motion: no-preference)">.nd{transition:transform 300ms cubic-bezier(0.2, 0, 0.2, 1)}</style></head><body><div id="root"><div class="a b c"><div class="d e f g h i j k"></div><script>document.domain = document.domain;</script><div class="l c"><div class="l m n o c"><div class="p q r s t u v w x i d y z"><a class="du ag dv bf ak b am an ao ap aq ar as at s u w i d q dw z" href="https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fff14f9066de9&amp;%7Efeature=LoOpenInAppButton&amp;%7Echannel=ShowPostUnderCollection&amp;source=---top_nav_layout_nav----------------------------------" rel="noopener follow">Open in app<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="none" viewBox="0 0 10 10" class="dt"><path fill="currentColor" d="M.985 8.485a.375.375 0 1 0 .53.53zM8.75 1.25h.375A.375.375 0 0 0 8.75.875zM8.375 6.5a.375.375 0 1 0 .75 0zM3.5.875a.375.375 0 1 0 0 .75zm-1.985 8.14 7.5-7.5-.53-.53-7.5 7.5zm6.86-7.765V6.5h.75V1.25zM3.5 1.625h5.25v-.75H3.5z"></path></svg></a><div class="ab q"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span><button class="bf b dx dy eh dz ea ei eb ec ej ek ee el em eg eo ep eq er es et eu ev ew ex ey ez fa fb fc fd bm fe ff" data-testid="headerSignUpButton">Sign up</button></span></p><div class="ax l"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSignInButton" rel="noopener follow" href="/m/signin?operation=login&amp;redirect=https%3A%2F%2Fmedium.com%2Ftimescale%2Fhow-to-automate-data-classification-in-postgresql-with-openai-ff14f9066de9&amp;source=post_page---top_nav_layout_nav-----------------------global_nav-----------">Sign in</a></span></p></div></div></div><div class="p q r ab ac"><div class="ab q ae"><a class="af ag ah ai aj ak al am an ao ap aq ar as at ab" aria-label="Homepage" data-testid="headerMediumLogo" rel="noopener follow" href="/?source=---top_nav_layout_nav----------------------------------"><svg xmlns="http://www.w3.org/2000/svg" width="719" height="160" fill="none" viewBox="0 0 719 160" class="au av aw"><path fill="#242424" d="m174.104 9.734.215-.047V8.02H130.39L89.6 103.89 48.81 8.021H1.472v1.666l.212.047c8.018 1.81 12.09 4.509 12.09 14.242V137.93c0 9.734-4.087 12.433-12.106 14.243l-.212.047v1.671h32.118v-1.665l-.213-.048c-8.018-1.809-12.089-4.509-12.089-14.242V30.586l52.399 123.305h2.972l53.925-126.743V140.75c-.687 7.688-4.721 10.062-11.982 11.701l-.215.05v1.652h55.948v-1.652l-.215-.05c-7.269-1.639-11.4-4.013-12.087-11.701l-.037-116.774h.037c0-9.733 4.071-12.432 12.087-14.242m25.555 75.488c.915-20.474 8.268-35.252 20.606-35.507 3.806.063 6.998 1.312 9.479 3.714 5.272 5.118 7.751 15.812 7.368 31.793zm-.553 5.77h65.573v-.275c-.186-15.656-4.721-27.834-13.466-36.196-7.559-7.227-18.751-11.203-30.507-11.203h-.263c-6.101 0-13.584 1.48-18.909 4.16-6.061 2.807-11.407 7.003-15.855 12.511-7.161 8.874-11.499 20.866-12.554 34.343q-.05.606-.092 1.212a50 50 0 0 0-.065 1.151 85.807 85.807 0 0 0-.094 5.689c.71 30.524 17.198 54.917 46.483 54.917 25.705 0 40.675-18.791 44.407-44.013l-1.886-.664c-6.557 13.556-18.334 21.771-31.738 20.769-18.297-1.369-32.314-19.922-31.042-42.395m139.722 41.359c-2.151 5.101-6.639 7.908-12.653 7.908s-11.513-4.129-15.418-11.63c-4.197-8.053-6.405-19.436-6.405-32.92 0-28.067 8.729-46.22 22.24-46.22 5.657 0 10.111 2.807 12.236 7.704zm43.499 20.008c-8.019-1.897-12.089-4.722-12.089-14.951V1.309l-48.716 14.353v1.757l.299-.024c6.72-.543 11.278.386 13.925 2.83 2.072 1.915 3.082 4.853 3.082 8.987v18.66c-4.803-3.067-10.516-4.56-17.448-4.56-14.059 0-26.909 5.92-36.176 16.672-9.66 11.205-14.767 26.518-14.767 44.278-.003 31.72 15.612 53.039 38.851 53.039 13.595 0 24.533-7.449 29.54-20.013v16.865h43.711v-1.746zM424.1 19.819c0-9.904-7.468-17.374-17.375-17.374-9.859 0-17.573 7.632-17.573 17.374s7.721 17.374 17.573 17.374c9.907 0 17.375-7.47 17.375-17.374m11.499 132.546c-8.019-1.897-12.089-4.722-12.089-14.951h-.035V43.635l-43.714 12.551v1.705l.263.024c9.458.842 12.047 4.1 12.047 15.152v81.086h43.751v-1.746zm112.013 0c-8.018-1.897-12.089-4.722-12.089-14.951V43.635l-41.621 12.137v1.71l.246.026c7.733.813 9.967 4.257 9.967 15.36v59.279c-2.578 5.102-7.415 8.131-13.274 8.336-9.503 0-14.736-6.419-14.736-18.073V43.638l-43.714 12.55v1.703l.262.024c9.459.84 12.05 4.097 12.05 15.152v50.17a56.3 56.3 0 0 0 .91 10.444l.787 3.423c3.701 13.262 13.398 20.197 28.59 20.197 12.868 0 24.147-7.966 29.115-20.43v17.311h43.714v-1.747zm169.818 1.788v-1.749l-.213-.05c-8.7-2.006-12.089-5.789-12.089-13.49v-63.79c0-19.89-11.171-31.761-29.883-31.761-13.64 0-25.141 7.882-29.569 20.16-3.517-13.01-13.639-20.16-28.606-20.16-13.146 0-23.449 6.938-27.869 18.657V43.643L545.487 55.68v1.715l.263.024c9.345.829 12.047 4.181 12.047 14.95v81.784h40.787v-1.746l-.215-.053c-6.941-1.631-9.181-4.606-9.181-12.239V66.998c1.836-4.289 5.537-9.37 12.853-9.37 9.086 0 13.692 6.296 13.692 18.697v77.828h40.797v-1.746l-.215-.053c-6.94-1.631-9.18-4.606-9.18-12.239V75.066a42 42 0 0 0-.578-7.26c1.947-4.661 5.86-10.177 13.475-10.177 9.214 0 13.691 6.114 13.691 18.696v77.828z"></path></svg></a><div class="ax h"><div class="ab ay az ba bb q bc bd"><div class="bm" aria-hidden="false" aria-describedby="searchResults" aria-labelledby="searchResults"></div><div class="bn bo ab"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.092 11.06a6.95 6.95 0 1 1 13.9 0 6.95 6.95 0 0 1-13.9 0m6.95-8.05a8.05 8.05 0 1 0 5.13 14.26l3.75 3.75a.56.56 0 1 0 .79-.79l-3.73-3.73A8.05 8.05 0 0 0 11.042 3z" clip-rule="evenodd"></path></svg></div><input role="combobox" aria-controls="searchResults" aria-expanded="false" aria-label="search" data-testid="headerSearchInput" tabindex="0" class="ay be bf bg z bh bi bj bk bl" placeholder="Search" value=""/></div></div></div><div class="h k w fg fh"><div class="fi ab"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerWriteButton" rel="noopener follow" href="/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fnew-story&amp;source=---top_nav_layout_nav-----------------------new_post_topnav-----------"><div class="bf b bg z du fj fk ab q fl fm"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-label="Write"><path fill="currentColor" d="M14 4a.5.5 0 0 0 0-1zm7 6a.5.5 0 0 0-1 0zm-7-7H4v1h10zM3 4v16h1V4zm1 17h16v-1H4zm17-1V10h-1v10zm-1 1a1 1 0 0 0 1-1h-1zM3 20a1 1 0 0 0 1 1v-1zM4 3a1 1 0 0 0-1 1h1z"></path><path stroke="currentColor" d="m17.5 4.5-8.458 8.458a.25.25 0 0 0-.06.098l-.824 2.47a.25.25 0 0 0 .316.316l2.47-.823a.25.25 0 0 0 .098-.06L19.5 6.5m-2-2 2.323-2.323a.25.25 0 0 1 .354 0l1.646 1.646a.25.25 0 0 1 0 .354L19.5 6.5m-2-2 2 2"></path></svg><div class="dt l">Write</div></div></a></span></div></div><div class="k j i d"><div class="fi ab"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSearchButton" rel="noopener follow" href="/search?source=---top_nav_layout_nav----------------------------------"><div class="bf b bg z du fj fk ab q fl fm"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-label="Search"><path fill="currentColor" fill-rule="evenodd" d="M4.092 11.06a6.95 6.95 0 1 1 13.9 0 6.95 6.95 0 0 1-13.9 0m6.95-8.05a8.05 8.05 0 1 0 5.13 14.26l3.75 3.75a.56.56 0 1 0 .79-.79l-3.73-3.73A8.05 8.05 0 0 0 11.042 3z" clip-rule="evenodd"></path></svg></div></a></div></div><div class="fi h k j"><div class="ab q"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span><button class="bf b dx dy eh dz ea ei eb ec ej ek ee el em eg eo ep eq er es et eu ev ew ex ey ez fa fb fc fd bm fe ff" data-testid="headerSignUpButton">Sign up</button></span></p><div class="ax l"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSignInButton" rel="noopener follow" href="/m/signin?operation=login&amp;redirect=https%3A%2F%2Fmedium.com%2Ftimescale%2Fhow-to-automate-data-classification-in-postgresql-with-openai-ff14f9066de9&amp;source=post_page---top_nav_layout_nav-----------------------global_nav-----------">Sign in</a></span></p></div></div></div><div class="l" aria-hidden="false"><button class="ay fn am ab q ao fo fp fq" aria-label="user options menu" data-testid="headerUserIcon"><div class="l fj"><img alt="" class="l fd by bz ca cx" src="https://miro.medium.com/v2/resize:fill:64:64/1*dmbNkD5D-u45r44go_cf0g.png" width="32" height="32" loading="lazy" role="presentation"/><div class="fr by l bz ca fs n ay ft"></div></div></button></div></div></div><div class="l"><div class="fu fv fw fx fy l"><div class="ab cb"><div class="ci bh fz ga gb gc"></div></div><article><div class="l"><div class="l"><span class="l"></span><section><div><div class="fs gi gj gk gl gm"></div><div class="gn go gp gq gr"><div class="ab cb"><div class="ci bh fz ga gb gc"><div><h1 id="cbf6" class="pw-post-title gs gt gu bf gv gw gx gy gz ha hb hc hd he hf hg hh hi hj hk hl hm hn ho hp hq hr hs ht hu bk" data-testid="storyTitle">How to Automate Data Classification in PostgreSQL With OpenAI</h1><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="hv hw hx hy hz ab"><div><div class="ab ia"><div><div class="bm" aria-hidden="false"><a rel="noopener follow" href="/@team-timescale?source=post_page---byline--ff14f9066de9--------------------------------"><div class="l ib ic by id ie"><div class="l fj"><img alt="Team Timescale" class="l fd by dd de cx" src="https://miro.medium.com/v2/resize:fill:88:88/1*1hiEAsTlce_ICvVpGm2Cgg.png" width="44" height="44" loading="lazy" data-testid="authorPhoto"/><div class="if by l dd de fs n ig ft"></div></div></div></a></div></div><div class="ih ab fj"><div><div class="bm" aria-hidden="false"><a href="https://medium.com/timescale?source=post_page---byline--ff14f9066de9--------------------------------" rel="noopener follow"><div class="l ii ij by id ik"><div class="l fj"><img alt="Timescale" class="l fd by br il cx" src="https://miro.medium.com/v2/resize:fill:48:48/1*1hiEAsTlce_ICvVpGm2Cgg.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto"/><div class="if by l br il fs n ig ft"></div></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="im ab q"><div class="ab q in"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b io ip bk"><a class="af ag ah ai aj ak al am an ao ap aq ar iq" data-testid="authorName" rel="noopener follow" href="/@team-timescale?source=post_page---byline--ff14f9066de9--------------------------------">Team Timescale</a></p></div></div></div><span class="ir is" aria-hidden="true"><span class="bf b bg z du">·</span></span><p class="bf b io ip du"><span><a class="it iu ah ai aj ak al am an ao ap aq ar ex iv iw" rel="noopener follow" href="/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fc84b80175451&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Ftimescale%2Fhow-to-automate-data-classification-in-postgresql-with-openai-ff14f9066de9&amp;user=Team+Timescale&amp;userId=c84b80175451&amp;source=post_page-c84b80175451--byline--ff14f9066de9---------------------post_header-----------">Follow</a></span></p></div></div></span></div></div><div class="l ix"><span class="bf b bg z du"><div class="ab cn iy iz ja"><div class="fu fv ab"><div class="bf b bg z du ab jb"><span class="jc l ix">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar iq ab q" data-testid="publicationName" href="https://medium.com/timescale?source=post_page---byline--ff14f9066de9--------------------------------" rel="noopener follow"><p class="bf b bg z jd je jf jg jh ji jj jk bk">Timescale</p></a></div></div></div><div class="h k"><span class="ir is" aria-hidden="true"><span class="bf b bg z du">·</span></span></div></div><span class="bf b bg z du"><div class="ab ae"><span data-testid="storyReadTime">11 min read</span><div class="jl jm l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z du">·</span></span></div>16 hours ago</div></span></div></span></div></div></div><div class="ab cp jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc"><div class="h k w fg fh q"><div class="ks l"><div class="ab q kt ku"><div class="pw-multi-vote-icon fj jc kv kw kx"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerClapButton" rel="noopener follow" href="/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftimescale%2Fff14f9066de9&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Ftimescale%2Fhow-to-automate-data-classification-in-postgresql-with-openai-ff14f9066de9&amp;user=Team+Timescale&amp;userId=c84b80175451&amp;source=---header_actions--ff14f9066de9---------------------clap_footer-----------"><div><div class="bm" aria-hidden="false"><div class="ky ao kz la lb lc am ld le lf kx"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM13.916 3.953l1.523-2.112-1.184-.39zM8.589 1.84l1.522 2.112-.337-2.501zM18.523 18.92c-.86.86-1.75 1.246-2.62 1.33a6 6 0 0 0 .407-.372c2.388-2.389 2.86-4.951 1.399-7.623l-.912-1.603-.79-1.672c-.26-.56-.194-.98.203-1.288a.7.7 0 0 1 .546-.132c.283.046.546.231.728.5l2.363 4.157c.976 1.624 1.141 4.237-1.324 6.702m-10.999-.438L3.37 14.328a.828.828 0 0 1 .585-1.408.83.83 0 0 1 .585.242l2.158 2.157a.365.365 0 0 0 .516-.516l-2.157-2.158-1.449-1.449a.826.826 0 0 1 1.167-1.17l3.438 3.44a.363.363 0 0 0 .516 0 .364.364 0 0 0 0-.516L5.293 9.513l-.97-.97a.826.826 0 0 1 0-1.166.84.84 0 0 1 1.167 0l.97.968 3.437 3.436a.36.36 0 0 0 .517 0 .366.366 0 0 0 0-.516L6.977 7.83a.82.82 0 0 1-.241-.584.82.82 0 0 1 .824-.826c.219 0 .43.087.584.242l5.787 5.787a.366.366 0 0 0 .587-.415l-1.117-2.363c-.26-.56-.194-.98.204-1.289a.7.7 0 0 1 .546-.132c.283.046.545.232.727.501l2.193 3.86c1.302 2.38.883 4.59-1.277 6.75-1.156 1.156-2.602 1.627-4.19 1.367-1.418-.236-2.866-1.033-4.079-2.246M10.75 5.971l2.12 2.12c-.41.502-.465 1.17-.128 1.89l.22.465-3.523-3.523a.8.8 0 0 1-.097-.368c0-.22.086-.428.241-.584a.847.847 0 0 1 1.167 0m7.355 1.705c-.31-.461-.746-.758-1.23-.837a1.44 1.44 0 0 0-1.11.275c-.312.24-.505.543-.59.881a1.74 1.74 0 0 0-.906-.465 1.47 1.47 0 0 0-.82.106l-2.182-2.182a1.56 1.56 0 0 0-2.2 0 1.54 1.54 0 0 0-.396.701 1.56 1.56 0 0 0-2.21-.01 1.55 1.55 0 0 0-.416.753c-.624-.624-1.649-.624-2.237-.037a1.557 1.557 0 0 0 0 2.2c-.239.1-.501.238-.715.453a1.56 1.56 0 0 0 0 2.2l.516.515a1.556 1.556 0 0 0-.753 2.615L7.01 19c1.32 1.319 2.909 2.189 4.475 2.449q.482.08.971.08c.85 0 1.653-.198 2.393-.579.231.033.46.054.686.054 1.266 0 2.457-.52 3.505-1.567 2.763-2.763 2.552-5.734 1.439-7.586z" clip-rule="evenodd"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l lg lh li lj lk ll lm"><p class="bf b dv z du"><span class="ln">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao ky lo lp ab q fk lq lr" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="ls"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"></path></svg></button></div></div></div><div class="ab q kd ke kf kg kh ki kj kk kl km kn ko kp kq kr"><div class="lt k j i d"></div><div class="h k"><div><div class="bm" aria-hidden="false"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerBookmarkButton" rel="noopener follow" href="/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fff14f9066de9&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Ftimescale%2Fhow-to-automate-data-classification-in-postgresql-with-openai-ff14f9066de9&amp;source=---header_actions--ff14f9066de9---------------------bookmark_footer-----------"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none" viewBox="0 0 25 25" class="du lu" aria-label="Add to list bookmark button"><path fill="currentColor" d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .805.396L12.5 17l5.695 4.396A.5.5 0 0 0 19 21v-8.5a.5.5 0 0 0-1 0v7.485l-5.195-4.012a.5.5 0 0 0-.61 0L7 19.985z"></path></svg></a></span></div></div></div><div class="fd lv cn"><div class="l ae"><div class="ab cb"><div class="lw lx ly lz ma mb ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af fk ah ai aj ak al mc an ao ap ex md me lr mf mg mh mi mj s mk ml mm mn mo mp mq u mr ms mt"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"></path></svg><div class="j i d"><p class="bf b bg z du">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af fk ah ai aj ak al mc an ao ap ex md me lr mf mg mh mi mj s mk ml mm mn mo mp mq u mr ms mt"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"></path></svg><div class="j i d"><p class="bf b bg z du">Share</p></div></button></div></div></div></div></div></div></div></div></div><figure class="mx my mz na nb nc mu mv paragraph-image"><div role="button" tabindex="0" class="nd ne fj nf bh ng"><div class="mu mv mw"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/0*aqvy9nSam8zLhloV 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/0*aqvy9nSam8zLhloV 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/0*aqvy9nSam8zLhloV 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/0*aqvy9nSam8zLhloV 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/0*aqvy9nSam8zLhloV 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/0*aqvy9nSam8zLhloV 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/0*aqvy9nSam8zLhloV 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/0*aqvy9nSam8zLhloV 640w, https://miro.medium.com/v2/resize:fit:720/0*aqvy9nSam8zLhloV 720w, https://miro.medium.com/v2/resize:fit:750/0*aqvy9nSam8zLhloV 750w, https://miro.medium.com/v2/resize:fit:786/0*aqvy9nSam8zLhloV 786w, https://miro.medium.com/v2/resize:fit:828/0*aqvy9nSam8zLhloV 828w, https://miro.medium.com/v2/resize:fit:1100/0*aqvy9nSam8zLhloV 1100w, https://miro.medium.com/v2/resize:fit:1400/0*aqvy9nSam8zLhloV 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="How to Automate Data Classification in PostgreSQL With OpenAI" class="bh mb nh c" width="700" height="400" loading="eager"/></picture></div></div></figure><p id="bf14" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">Businesses are inundated with data from various sources, including customer interactions, transactions, support queries, product reviews, and more. This makes data classification a crucial task. However, classifying unstructured data, such as customer reviews and support interactions, has always been challenging. The emergence of large language models (LLMs) is simplifying this process.</p><p id="a41c" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">In this tutorial, we’ll explore how to use the open-source pgai and pgvector extensions to automate data classification directly within PostgreSQL. This approach is particularly helpful if you already have data within PostgreSQL or want to build classification systems without relying on additional vector databases or frameworks.</p></div></div></div><div class="ab cb og oh oi oj" role="separator"><span class="ok by bm ol om on"></span><span class="ok by bm ol om on"></span><span class="ok by bm ol om"></span></div><div class="gn go gp gq gr"><div class="ab cb"><div class="ci bh fz ga gb gc"><p id="b516" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">🔖 To learn more about turning unstructured data into structured data, check out these resources:<br/>- <a class="af oo" href="https://www.timescale.com/learn/structured-vs-semi-structured-vs-unstructured-data-in-postgresql" rel="noopener ugc nofollow" target="_blank">Structured vs. Semi-Structured vs. Unstructured Data in PostgreSQL</a><br/>- <a class="af oo" href="https://timescale.ghost.io/blog/parsing-all-the-data-with-open-source-tools-unstructured-and-pgai/" rel="noopener ugc nofollow" target="_blank">Parsing All the Data With Open-Source Tools: Unstructured and Pgai</a></p></div></div></div><div class="ab cb og oh oi oj" role="separator"><span class="ok by bm ol om on"></span><span class="ok by bm ol om on"></span><span class="ok by bm ol om"></span></div><div class="gn go gp gq gr"><div class="ab cb"><div class="ci bh fz ga gb gc"><h1 id="1a37" class="op oq gu bf or os ot ou ov ow ox oy oz pa pb pc pd pe pf pg ph pi pj pk pl pm bk">Automating Data Classification in PostgreSQL: Tools</h1><p id="f2f7" class="pw-post-body-paragraph ni nj gu nk b nl pn nn no np po nr ns nt pp nv nw nx pq nz oa ob pr od oe of gn bk">Let’s first take a quick look at pgvector and pgai, the two open-source extensions we’ll use with PostgreSQL. We’ll also look at how OpenAI models can help with the process.</p><h2 id="a9fe" class="ps oq gu bf or pt pu dy ov pv pw ea oz nt px py pz nx qa qb qc ob qd qe qf qg bk">Pgvector: making PostgreSQL a vector database</h2><p id="200e" class="pw-post-body-paragraph ni nj gu nk b nl pn nn no np po nr ns nt pp nv nw nx pq nz oa ob pr od oe of gn bk"><a class="af oo" href="https://github.com/pgvector/pgvector" rel="noopener ugc nofollow" target="_blank">Pgvector</a> is a powerful open-source PostgreSQL extension that brings vector-handling capabilities to the database and allows you to store, query, and manage high-dimensional vectors directly within your tables. It is useful for building semantic search, recommendation systems, and data classification algorithms using PostgreSQL.</p><h2 id="0f81" class="ps oq gu bf or pt pu dy ov pv pw ea oz nt px py pz nx qa qb qc ob qd qe qf qg bk">Introduction to OpenAI models</h2><p id="7986" class="pw-post-body-paragraph ni nj gu nk b nl pn nn no np po nr ns nt pp nv nw nx pq nz oa ob pr od oe of gn bk">OpenAI offers a range of advanced language models that are updated as the technology advances. The flagship models, GPT-4o and GPT-4o Mini, are the latest ones at the time of writing this article. These models are multimodal, capable of processing text and image inputs while producing text outputs, and have been architected to tackle complex, multi-step tasks with high accuracy and speed.</p><p id="4e9e" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">GPT-4o, the most advanced model in the lineup, features a context window of up to 128,000 tokens, allowing it to maintain extensive contextual awareness across long conversations or documents. This model is faster and more cost-effective than previous iterations, such as GPT-4 Turbo.</p><p id="111d" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">For developers needing a lighter solution, the GPT-4o Mini is a smaller model and OpenAI’s cheapest model. It has higher intelligence than GPT-3.5-Turbo but is faster and cheaper, and it is meant for lightweight tasks.</p><p id="30e7" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">The previous generation models, GPT-4 Turbo and GPT-3.5 Turbo, remain available. GPT-4 Turbo also includes vision capabilities, supporting JSON mode and function calling for tasks involving text and images.</p><figure class="qi qj qk ql qm nc mu mv paragraph-image"><div role="button" tabindex="0" class="nd ne fj nf bh ng"><div class="mu mv qh"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*aMO1IBF8Cix5s9WvZoXnng.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*aMO1IBF8Cix5s9WvZoXnng.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*aMO1IBF8Cix5s9WvZoXnng.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*aMO1IBF8Cix5s9WvZoXnng.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*aMO1IBF8Cix5s9WvZoXnng.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*aMO1IBF8Cix5s9WvZoXnng.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aMO1IBF8Cix5s9WvZoXnng.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*aMO1IBF8Cix5s9WvZoXnng.png 640w, https://miro.medium.com/v2/resize:fit:720/1*aMO1IBF8Cix5s9WvZoXnng.png 720w, https://miro.medium.com/v2/resize:fit:750/1*aMO1IBF8Cix5s9WvZoXnng.png 750w, https://miro.medium.com/v2/resize:fit:786/1*aMO1IBF8Cix5s9WvZoXnng.png 786w, https://miro.medium.com/v2/resize:fit:828/1*aMO1IBF8Cix5s9WvZoXnng.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*aMO1IBF8Cix5s9WvZoXnng.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*aMO1IBF8Cix5s9WvZoXnng.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="GPT models" class="bh mb nh c" width="700" height="341" loading="lazy"/></picture></div></div></figure><h2 id="e3dd" class="ps oq gu bf or pt pu dy ov pv pw ea oz nt px py pz nx qa qb qc ob qd qe qf qg bk">What is pgai?</h2><p id="dfa3" class="pw-post-body-paragraph ni nj gu nk b nl pn nn no np po nr ns nt pp nv nw nx pq nz oa ob pr od oe of gn bk"><a class="af oo" href="https://github.com/timescale/pgai" rel="noopener ugc nofollow" target="_blank">Pgai is an open-source extension for PostgreSQL </a>that brings AI-powered capabilities directly to your database. You can use pgai to interact with machine learning models and build AI workflows within PostgreSQL, enabling you to create AI-powered systems without ever leaving your database environment.</p><p id="c8d2" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">The true power of pgai emerges when it is used in conjunction with pgvector and OpenAI. You can use pgai to harness the vector data stored in PostgreSQL via pgvector and call OpenAI methods to classify this data automatically. This combination allows you to build a fully automated data classification pipeline within PostgreSQL.</p><h1 id="c34d" class="op oq gu bf or os qn ou ov ow qo oy oz pa qp pc pd pe qq pg ph pi qr pk pl pm bk">Setting Up</h1><p id="fafc" class="pw-post-body-paragraph ni nj gu nk b nl pn nn no np po nr ns nt pp nv nw nx pq nz oa ob pr od oe of gn bk">First, you’ll need a working installation of PostgreSQL with the pgvector and pgai extensions. You can either install them <a class="af oo" href="https://github.com/timescale/pgai/tree/main?tab=readme-ov-file&amp;ref=timescale.com#install-from-source" rel="noopener ugc nofollow" target="_blank">manually</a> or use a pre-built Docker <a class="af oo" href="https://github.com/timescale/pgai/tree/main?tab=readme-ov-file&amp;ref=timescale.com#use-a-pre-built-docker-container" rel="noopener ugc nofollow" target="_blank">container</a>. Alternatively, you can simply use <a class="af oo" href="https://console.cloud.timescale.com/?ref=timescale.com" rel="noopener ugc nofollow" target="_blank">Timescale Cloud</a> for a free PostgreSQL cloud instance, pre-installed with pgai and pgvector.</p><p id="a1ee" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">Log in or create an account on Timescale Cloud, pick your service type, region, and compute, and then click on ‘Create a service’.</p><figure class="qi qj qk ql qm nc mu mv paragraph-image"><div role="button" tabindex="0" class="nd ne fj nf bh ng"><div class="mu mv qs"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/0*Dq0WIHBpV7WSxXlp 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/0*Dq0WIHBpV7WSxXlp 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/0*Dq0WIHBpV7WSxXlp 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/0*Dq0WIHBpV7WSxXlp 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/0*Dq0WIHBpV7WSxXlp 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/0*Dq0WIHBpV7WSxXlp 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Dq0WIHBpV7WSxXlp 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/0*Dq0WIHBpV7WSxXlp 640w, https://miro.medium.com/v2/resize:fit:720/0*Dq0WIHBpV7WSxXlp 720w, https://miro.medium.com/v2/resize:fit:750/0*Dq0WIHBpV7WSxXlp 750w, https://miro.medium.com/v2/resize:fit:786/0*Dq0WIHBpV7WSxXlp 786w, https://miro.medium.com/v2/resize:fit:828/0*Dq0WIHBpV7WSxXlp 828w, https://miro.medium.com/v2/resize:fit:1100/0*Dq0WIHBpV7WSxXlp 1100w, https://miro.medium.com/v2/resize:fit:1400/0*Dq0WIHBpV7WSxXlp 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="Create a Tmescale Cloud service" class="bh mb nh c" width="700" height="382" loading="lazy"/></picture></div></div></figure><p id="d7ae" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">Once your service is created, you’ll receive the connection string, username, password, database name, and port. You can also download the database config.</p><p id="d113" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">Let’s save the PostgreSQL database connection string as an environment variable.</p><pre class="qi qj qk ql qm qt qu qv bp qw bb bk"><span id="a0fb" class="qx oq gu qu b bg qy qz l ra rb">$ export PG_CONNECTION_STRING=&quot;your_postgresql_connection_string&quot;</span></pre><p id="6835" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">You will also need OpenAI API keys. Head to <a class="af oo" href="http://platform.openai.com/" rel="noopener ugc nofollow" target="_blank">platform.openai.com</a> to get one. Once you have it, save it in an environment variable as well.</p><pre class="qi qj qk ql qm qt qu qv bp qw bb bk"><span id="3107" class="qx oq gu qu b bg qy qz l ra rb">$ export OPENAI_API_KEY=&quot;{API_KEY}&quot;</span></pre><p id="25f9" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">Now you can use <code class="cx rc rd re qu b">psql</code> to connect in the following way:</p><pre class="qi qj qk ql qm qt qu qv bp qw bb bk"><span id="33e7" class="qx oq gu qu b bg qy qz l ra rb">$ PGOPTIONS=&quot;-c ai.openai_api_key=$OPENAI_API_KEY&quot; psql -d $PG_CONNECTION_STRING</span></pre><p id="b568" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">You can activate the pgai and pgvector extensions:</p><pre class="qi qj qk ql qm qt qu qv bp qw bb bk"><span id="20a4" class="qx oq gu qu b bg qy qz l ra rb">CREATE EXTENSION IF NOT EXISTS ai CASCADE;<br/>CREATE EXTENSION IF NOT EXISTS vector CASCADE;</span></pre><p id="2ddb" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">Let’s check if the pgai and pgvector extensions are enabled in the PostgreSQL database by running the following command:</p><pre class="qi qj qk ql qm qt qu qv bp qw bb bk"><span id="0456" class="qx oq gu qu b bg qy qz l ra rb">tsdb=&gt; \dx<br/>                                                    List of installed extensions<br/>        Name         | Version |   Schema   |                                      Description<br/>---------------------+---------+------------+---------------------------------------------------------------------------------------<br/> ai                  | 0.4.0   | ai         | helper functions for ai workflows<br/> pg_stat_statements  | 1.10    | public     | track planning and execution statistics of all SQL statements executed<br/> plpgsql             | 1.0     | pg_catalog | PL/pgSQL procedural language<br/> plpython3u          | 1.0     | pg_catalog | PL/Python3U untrusted procedural language<br/> timescaledb         | 2.17.2  | public     | Enables scalable inserts and complex queries for time-series data (Community Edition)<br/> timescaledb_toolkit | 1.18.0  | public     | Library of analytical hyperfunctions, time-series pipelining, and other SQL utilities<br/> vector              | 0.8.0   | public     | vector data type and ivfflat and hnsw access methods<br/>(7 rows)</span></pre><p id="fdc1" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">Let’s also check if the OpenAI function calls are working. You can test this by:</p><pre class="qi qj qk ql qm qt qu qv bp qw bb bk"><span id="0dc6" class="qx oq gu qu b bg qy qz l ra rb">SELECT *<br/>FROM ai.openai_list_models()<br/>ORDER BY created DESC;</span></pre><p id="d7d4" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">This code should return the list of all OpenAI models available:</p><pre class="qi qj qk ql qm qt qu qv bp qw bb bk"><span id="7357" class="qx oq gu qu b bg qy qz l ra rb">id              |        created         |    owned_by<br/>-----------------------------+------------------------+-----------------<br/> chatgpt-4o-latest           | 2024-08-13 02:12:11+00 | system<br/> gpt-4o-2024-08-06           | 2024-08-04 23:38:39+00 | system<br/> gpt-4o-mini                 | 2024-07-16 23:32:21+00 | system<br/> gpt-4o-mini-2024-07-18      | 2024-07-16 23:31:57+00 | system<br/> gpt-4o-2024-05-13           | 2024-05-10 19:08:52+00 | system<br/> gpt-4o                      | 2024-05-10 18:50:49+00 | system<br/> gpt-4-turbo-2024-04-09      | 2024-04-08 18:41:17+00 | system<br/> gpt-4-turbo                 | 2024-04-05 23:57:21+00 | system<br/> gpt-3.5-turbo-0125          | 2024-01-23 22:19:18+00 | system<br/> gpt-4-turbo-preview         | 2024-01-23 19:22:57+00 | system<br/> gpt-4-0125-preview          | 2024-01-23 19:20:12+00 | system<br/>…</span></pre><p id="1900" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">We can now proceed with the tutorial steps.</p><h1 id="64f5" class="op oq gu bf or os qn ou ov ow qo oy oz pa qp pc pd pe qq pg ph pi qr pk pl pm bk">Performing Data Classification in PostgreSQL Using Pgai</h1><p id="1b1e" class="pw-post-body-paragraph ni nj gu nk b nl pn nn no np po nr ns nt pp nv nw nx pq nz oa ob pr od oe of gn bk">In this tutorial, we will start with a list of product reviews. We will then use the pgai and pgvector extensions to classify the reviews into positive, negative, or neutral categories using the OpenAI API. You can use a similar approach to perform any other data classification task.</p><p id="f9c9" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">Let’s first create a <code class="cx rc rd re qu b">product_reviews</code> table with some sample data.</p><h2 id="3246" class="ps oq gu bf or pt pu dy ov pv pw ea oz nt px py pz nx qa qb qc ob qd qe qf qg bk">Create <code class="cx rc rd re qu b">product_reviews</code> table</h2><p id="e905" class="pw-post-body-paragraph ni nj gu nk b nl pn nn no np po nr ns nt pp nv nw nx pq nz oa ob pr od oe of gn bk">The following SQL command creates a table named <code class="cx rc rd re qu b">product_reviews</code> to store customer reviews of a product. The table includes columns for customer ID, date of review, product name, a short review, and a detailed review.</p><pre class="qi qj qk ql qm qt qu qv bp qw bb bk"><span id="9168" class="qx oq gu qu b bg qy qz l ra rb">-- Create the `product_reviews` table<br/>CREATE TABLE product_reviews (<br/>    -- Unique identifier for each customer<br/>    customer_id INT NOT NULL PRIMARY KEY,<br/>    -- Timestamp with timezone for the review date<br/>    date TIMESTAMPTZ,<br/>    -- Name of the product being reviewed                    <br/>    product TEXT,<br/>    -- A brief summary of the review                        <br/>    short_review TEXT,<br/>    -- The detailed review text                   <br/>    review TEXT                          <br/>);</span></pre><p id="ce89" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">Let’s confirm that the <code class="cx rc rd re qu b">product_reviews</code> table has been created successfully by running the following command:</p><pre class="qi qj qk ql qm qt qu qv bp qw bb bk"><span id="d9f9" class="qx oq gu qu b bg qy qz l ra rb">\dt</span></pre><p id="b50b" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">Output:</p><pre class="qi qj qk ql qm qt qu qv bp qw bb bk"><span id="dc60" class="qx oq gu qu b bg qy qz l ra rb">List of relations<br/> Schema |      Name       | Type  |  Owner  <br/>--------+-----------------+-------+----------<br/> public | product_reviews | table | postgres<br/>(1 row)</span></pre><h2 id="59d5" class="ps oq gu bf or pt pu dy ov pv pw ea oz nt px py pz nx qa qb qc ob qd qe qf qg bk">Insert sample product reviews</h2><p id="2976" class="pw-post-body-paragraph ni nj gu nk b nl pn nn no np po nr ns nt pp nv nw nx pq nz oa ob pr od oe of gn bk">Let’s insert sample reviews for products like laptops, phones, and tablets.</p><pre class="qi qj qk ql qm qt qu qv bp qw bb bk"><span id="e716" class="qx oq gu qu b bg qy qz l ra rb">-- Insert sample data into `product_reviews` table<br/>INSERT INTO product_reviews (customer_id, date, product, short_review, review) VALUES<br/>(1, &#x27;2022-01-01&#x27;, &#x27;laptop&#x27;, &#x27;Great!&#x27;, &#x27;Great laptop, very fast and reliable.&#x27;),<br/>(2, &#x27;2022-01-02&#x27;, &#x27;laptop&#x27;, &#x27;Good&#x27;, &#x27;Good laptop, but the battery life could be better.&#x27;),<br/>(3, &#x27;2022-01-03&#x27;, &#x27;laptop&#x27;, &#x27;Worst ever&#x27;, &#x27;This is the worst laptop I have ever used.&#x27;),<br/>(4, &#x27;2022-01-04&#x27;, &#x27;laptop&#x27;, &#x27;Not bad&#x27;, &#x27;Not bad, but the screen is a bit small.&#x27;),<br/>(5, &#x27;2022-01-05&#x27;, &#x27;phone&#x27;, &#x27;Excellent&#x27;, &#x27;Excellent phone, great camera and battery life.&#x27;),<br/>(6, &#x27;2022-01-06&#x27;, &#x27;phone&#x27;, &#x27;Decent&#x27;, &#x27;Decent phone, but the screen is not as good as I expected.&#x27;),<br/>(7, &#x27;2022-01-07&#x27;, &#x27;phone&#x27;, &#x27;Poor&#x27;, &#x27;Poor phone, battery life is terrible and camera quality is not good.&#x27;),<br/>(8, &#x27;2022-01-08&#x27;, &#x27;tablet&#x27;, &#x27;Awesome&#x27;, &#x27;Awesome tablet, very fast and responsive.&#x27;),<br/>(9, &#x27;2022-01-09&#x27;, &#x27;tablet&#x27;, &#x27;Satisfactory&#x27;, &#x27;Satisfactory tablet, but the screen resolution could be better.&#x27;),<br/>(10, &#x27;2022-01-10&#x27;, &#x27;tablet&#x27;, &#x27;Disappointing&#x27;, &#x27;Disappointing tablet, slow performance and battery drains quickly.&#x27;);</span></pre><h2 id="2542" class="ps oq gu bf or pt pu dy ov pv pw ea oz nt px py pz nx qa qb qc ob qd qe qf qg bk">Create <code class="cx rc rd re qu b">product_reviews_classification</code> table</h2><p id="dbf9" class="pw-post-body-paragraph ni nj gu nk b nl pn nn no np po nr ns nt pp nv nw nx pq nz oa ob pr od oe of gn bk">Next, we’ll create the <code class="cx rc rd re qu b">product_reviews_classification</code> table to store the data classification results, including customer ID and review type. You can use the SQL command below to create the table.</p><pre class="qi qj qk ql qm qt qu qv bp qw bb bk"><span id="87bf" class="qx oq gu qu b bg qy qz l ra rb">-- Create the `product_reviews_classification` table<br/>CREATE TABLE product_reviews_classification (<br/>    -- Unique identifier for each customer<br/>    customer_id INT NOT NULL PRIMARY KEY,<br/>    -- The classification type of the review (e.g., Positive, Negative, Neutral)<br/>    review_type TEXT                     <br/>);</span></pre><h2 id="acc6" class="ps oq gu bf or pt pu dy ov pv pw ea oz nt px py pz nx qa qb qc ob qd qe qf qg bk">Classify product reviews and insert them into the <code class="cx rc rd re qu b">product_reviews_classification</code> table</h2><p id="bece" class="pw-post-body-paragraph ni nj gu nk b nl pn nn no np po nr ns nt pp nv nw nx pq nz oa ob pr od oe of gn bk">To classify the product reviews under positive, negative, or neutral categories, we will use the OpenAI API. We will use the <code class="cx rc rd re qu b">openai_chat_complete</code> function in SQL provided by the pgai extension to perform the data classification task.</p><p id="9c2a" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">In the SQL command, we will perform three key steps.</p><p id="4f93" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk"><strong class="nk gv">Step 1: Format reviews with a structured template</strong></p><p id="0179" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">In the first step, we’ll format the raw reviews into a structured text format. We can do this by using the <code class="cx rc rd re qu b">format</code> function in SQL, which combines the <code class="cx rc rd re qu b">short_review</code> and <code class="cx rc rd re qu b">review</code> fields into a consistent template.</p><p id="dc22" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk"><strong class="nk gv">Step 2: Classify reviews using OpenAI and categorize the results</strong></p><p id="afc5" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">Next, we’ll take the formatted reviews and call OpenAI’s API to classify them as either <code class="cx rc rd re qu b">positive</code>, <code class="cx rc rd re qu b">negative</code>, or <code class="cx rc rd re qu b">neutral</code>. If the classification is one of the three expected categories, we will keep it; otherwise, we will default the review to <code class="cx rc rd re qu b">neutral</code>.</p><p id="1cd9" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk"><strong class="nk gv">Step 3: Insert classified reviews into the </strong><code class="cx rc rd re qu b"><strong class="nk gv">product_reviews_classification</strong></code><strong class="nk gv"> table</strong></p><p id="9924" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">Finally, we’ll insert the classified review data into the table <code class="cx rc rd re qu b">product_reviews_classification</code>.</p><p id="459d" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">Here’s the three-step SQL command that performs the classification task.</p><pre class="qi qj qk ql qm qt qu qv bp qw bb bk"><span id="f8f3" class="qx oq gu qu b bg qy qz l ra rb">-- Step 1: Format reviews with a structured template<br/>WITH formatted_reviews AS (<br/>    SELECT<br/>        customer_id,<br/>        format(<br/>            E&#x27;%s %s\nshort_review: %s\nreview: %s\n\t&#x27;,<br/>            short_review, review, short_review, review<br/>        ) AS product_final_review<br/>    FROM product_reviews<br/>),<br/><br/>-- Step 2: Classify reviews using OpenAI and categorize the results<br/>classified_reviews AS (<br/>    SELECT<br/>        customer_id,<br/>        CASE<br/>            WHEN result IN (&#x27;positive&#x27;, &#x27;negative&#x27;, &#x27;neutral&#x27;) THEN result<br/>            ELSE &#x27;neutral&#x27;<br/>        END AS review_type<br/>    FROM (<br/>        SELECT<br/>            customer_id,<br/>            ai.openai_chat_complete(<br/>                &#x27;gpt-4o&#x27;,<br/>                jsonb_build_array(<br/>                    jsonb_build_object(<br/>                        &#x27;role&#x27;, &#x27;system&#x27;,<br/>                        &#x27;content&#x27;, &#x27;You are an assistant that classifies product reviews into positive, negative, or neutral categories. You can only output one of these three categories: positive, negative, or neutral.&#x27;<br/>                    ),<br/>                    jsonb_build_object(<br/>                        &#x27;role&#x27;, &#x27;user&#x27;,<br/>                        &#x27;content&#x27;,<br/>                        concat(<br/>                            E&#x27;Classify the following product review into positive, negative, or neutral categories. You cannot output anything except &quot;positive&quot;, &quot;negative&quot;, &quot;neutral&quot;:\n\n&#x27;,<br/>                            string_agg(x.product_final_review, E&#x27;\n\n&#x27;)<br/>                        )<br/>                    )<br/>                )<br/>            )-&gt;&#x27;choices&#x27;-&gt;0-&gt;&#x27;message&#x27;-&gt;&gt;&#x27;content&#x27; AS result<br/>        FROM formatted_reviews x<br/>        GROUP BY customer_id<br/>    ) subquery<br/>)<br/><br/>-- Step 3: Insert classified reviews into the `product_reviews_classification` table<br/>INSERT INTO product_reviews_classification (customer_id, review_type)<br/>SELECT customer_id, review_type<br/>FROM classified_reviews<br/>;</span></pre><p id="4982" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">In the <code class="cx rc rd re qu b">openai_chat_complete</code> function, we’ll use the ‘gpt-4o’ model.</p><p id="174a" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">First, let’s confirm if the product reviews have been classified and inserted into the <code class="cx rc rd re qu b">product_reviews_classification</code> table by running the following command:</p><pre class="qi qj qk ql qm qt qu qv bp qw bb bk"><span id="3e11" class="qx oq gu qu b bg qy qz l ra rb">SELECT * FROM product_reviews_classification</span></pre><p id="97d9" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">Output:</p><pre class="qi qj qk ql qm qt qu qv bp qw bb bk"><span id="9008" class="qx oq gu qu b bg qy qz l ra rb">customer_id | review_type<br/>-------------+-------------<br/>           4 | neutral<br/>          10 | negative<br/>           6 | neutral<br/>           2 | neutral<br/>           9 | neutral<br/>           3 | negative<br/>           5 | positive<br/>           7 | negative<br/>           1 | positive<br/>           8 | positive<br/>(10 rows)</span></pre><p id="30cd" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">We can verify our results by performing a simple SQL join.</p><pre class="qi qj qk ql qm qt qu qv bp qw bb bk"><span id="f037" class="qx oq gu qu b bg qy qz l ra rb">-- Join the `product_reviews` and `product_reviews_classification` tables<br/>SELECT<br/>    pr.customer_id,<br/>    pr.review,<br/>    prc.review_type<br/>FROM<br/>    product_reviews pr<br/>JOIN<br/>    product_reviews_classification prc<br/>ON<br/>    pr.customer_id = prc.customer_id;</span></pre><p id="6fe0" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">Output:</p><pre class="qi qj qk ql qm qt qu qv bp qw bb bk"><span id="7c50" class="qx oq gu qu b bg qy qz l ra rb">customer_id |                                review                                | review_type<br/>-------------+----------------------------------------------------------------------+-------------<br/>           4 | Not bad, but the screen is a bit small.                              | neutral<br/>          10 | Disappointing tablet, slow performance and battery drains quickly.   | negative<br/>           6 | Decent phone, but the screen is not as good as I expected.           | neutral<br/>           2 | Good laptop, but the battery life could be better.                   | neutral<br/>           9 | Satisfactory tablet, but the screen resolution could be better.      | neutral<br/>           3 | This is the worst laptop I have ever used.                           | negative<br/>           5 | Excellent phone, great camera and battery life.                      | positive<br/>           7 | Poor phone, battery life is terrible and camera quality is not good. | negative<br/>           1 | Great laptop, very fast and reliable.                                | positive<br/>           8 | Awesome tablet, very fast and responsive.                            | positive<br/>(10 rows)</span></pre><p id="70e0" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">Great! We have successfully classified the product reviews by type by using the <code class="cx rc rd re qu b">openai_chat_complete</code> function by pgai.</p><h1 id="20b7" class="op oq gu bf or os qn ou ov ow qo oy oz pa qp pc pd pe qq pg ph pi qr pk pl pm bk">Automating Data Classification Task Using a Trigger</h1><p id="6dc7" class="pw-post-body-paragraph ni nj gu nk b nl pn nn no np po nr ns nt pp nv nw nx pq nz oa ob pr od oe of gn bk">Next, we’ll create a trigger that automates the data classification task. To do this, we first need to encapsulate the SQL command for data classification into a PostgreSQL function, which will be called by the trigger.</p><h2 id="e784" class="ps oq gu bf or pt pu dy ov pv pw ea oz nt px py pz nx qa qb qc ob qd qe qf qg bk">Step 1: Encapsulate the data classification task in a function</h2><pre class="qi qj qk ql qm qt qu qv bp qw bb bk"><span id="1311" class="qx oq gu qu b bg qy qz l ra rb">CREATE OR REPLACE FUNCTION classify_and_insert_review() RETURNS TRIGGER AS $$<br/>BEGIN<br/>    -- Step 1: Format the new review with a structured template<br/>    WITH formatted_reviews AS (<br/>        SELECT<br/>            NEW.customer_id AS customer_id,<br/>            format(<br/>                E&#x27;%s %s\nshort_review: %s\nreview: %s\n\t&#x27;,<br/>                NEW.short_review, NEW.review, NEW.short_review, NEW.review<br/>            ) AS product_final_review<br/>    ),<br/><br/>    -- Step 2: Classify the review using OpenAI and categorize the results<br/>    classified_reviews AS (<br/>        SELECT<br/>            customer_id,<br/>            CASE<br/>                WHEN result IN (&#x27;positive&#x27;, &#x27;negative&#x27;, &#x27;neutral&#x27;) THEN result<br/>                ELSE &#x27;neutral&#x27;<br/>            END AS review_type<br/>        FROM (<br/>            SELECT<br/>                customer_id,<br/>                ai.openai_chat_complete(<br/>                    &#x27;gpt-4o&#x27;,<br/>                    jsonb_build_array(<br/>                        jsonb_build_object(<br/>                            &#x27;role&#x27;, &#x27;system&#x27;,<br/>                            &#x27;content&#x27;, &#x27;You are an assistant that classifies product reviews into positive, negative, or neutral categories. You can only output one of these three categories: positive, negative, or neutral.&#x27;<br/>                        ),<br/>                        jsonb_build_object(<br/>                            &#x27;role&#x27;, &#x27;user&#x27;,<br/>                            &#x27;content&#x27;,<br/>                            format(<br/>                                E&#x27;Classify the following product review into positive, negative, or neutral categories. You cannot output anything except &quot;positive&quot;, &quot;negative&quot;, &quot;neutral&quot;:\n\n%s&#x27;,<br/>                                product_final_review<br/>                            )<br/>                        )<br/>                    )<br/>                )-&gt;&#x27;choices&#x27;-&gt;0-&gt;&#x27;message&#x27;-&gt;&gt;&#x27;content&#x27; AS result<br/>            FROM formatted_reviews<br/>        ) subquery<br/>    )<br/><br/>    -- Step 3: Insert classified review into the product_reviews_classification table<br/>    INSERT INTO product_reviews_classification (customer_id, review_type)<br/>    SELECT customer_id, review_type FROM classified_reviews;<br/><br/>    RETURN NEW;<br/>END;<br/>$$ LANGUAGE plpgsql;</span></pre><p id="19f8" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">This will create the function <code class="cx rc rd re qu b">classify_and_insert_review()</code>.</p><h2 id="1314" class="ps oq gu bf or pt pu dy ov pv pw ea oz nt px py pz nx qa qb qc ob qd qe qf qg bk">Step 2: Create the trigger</h2><p id="bfc5" class="pw-post-body-paragraph ni nj gu nk b nl pn nn no np po nr ns nt pp nv nw nx pq nz oa ob pr od oe of gn bk">Next, let’s create a trigger that will call the above function whenever a new row is inserted into the <code class="cx rc rd re qu b">product_reviews</code> table.</p><pre class="qi qj qk ql qm qt qu qv bp qw bb bk"><span id="4f4a" class="qx oq gu qu b bg qy qz l ra rb">CREATE TRIGGER classify_review_trigger<br/>AFTER INSERT ON product_reviews<br/>FOR EACH ROW<br/>EXECUTE FUNCTION classify_and_insert_review();</span></pre><p id="783e" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">Once this trigger is created, every time a new row is inserted into the <code class="cx rc rd re qu b">product_reviews</code> table, the function <code class="cx rc rd re qu b">classify_and_insert_review()</code> will be executed.</p><h1 id="3c7a" class="op oq gu bf or os qn ou ov ow qo oy oz pa qp pc pd pe qq pg ph pi qr pk pl pm bk">Next Steps</h1><p id="af8f" class="pw-post-body-paragraph ni nj gu nk b nl pn nn no np po nr ns nt pp nv nw nx pq nz oa ob pr od oe of gn bk">In this tutorial, we performed a simple classification task demonstrating how to use automatic data classification in PostgreSQL using OpenAI and pgai. We used the pgai extension to interact with the OpenAI API and classify product reviews into positive, negative, or neutral categories. We then created a trigger to automate the classification.</p><p id="d386" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">To start automating the classification of your data using PostgreSQL and OpenAI, check out <a class="af oo" href="https://www.timescale.com/ai?ref=timescale.com" rel="noopener ugc nofollow" target="_blank">Timescale Cloud’s AI stack</a>. It includes a complete suite of open-source PostgreSQL extensions — pgvector, pgai, pgai Vectorizer, and pgvectorscale — that will streamline your AI workflows without the overhead of managing multiple systems. Build smarter, more efficient AI solutions today using a <a class="af oo" href="https://console.cloud.timescale.com/signup?ref=timescale.com" rel="noopener ugc nofollow" target="_blank">free PostgreSQL database on Timescale Cloud</a>.</p><p id="7493" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk">If you want to build locally, you will find installation instructions for <a class="af oo" href="https://github.com/timescale/pgai?ref=timescale.com" rel="noopener ugc nofollow" target="_blank">pgai</a>, <a class="af oo" href="https://github.com/timescale/pgai/blob/main/docs/vectorizer.md?ref=timescale.com" rel="noopener ugc nofollow" target="_blank">pgai Vectorizer</a>, and <a class="af oo" href="https://github.com/timescale/pgvectorscale/?ref=timescale.com" rel="noopener ugc nofollow" target="_blank">pgvectorscale</a> in the respective repositories (GitHub ⭐s welcome!). Here’s an example tutorial using Llama 3 and Ollama to guide you along the way.</p><figure class="qi qj qk ql qm nc"><div class="rf jd l fj"><div class="rg rh l"></div></div></figure></div></div></div><div class="ab cb og oh oi oj" role="separator"><span class="ok by bm ol om on"></span><span class="ok by bm ol om on"></span><span class="ok by bm ol om"></span></div><div class="gn go gp gq gr"><div class="ab cb"><div class="ci bh fz ga gb gc"><p id="3a5e" class="pw-post-body-paragraph ni nj gu nk b nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of gn bk"><em class="ri">This article was written by Team Timescale </em>a<em class="ri">nd originally published </em><a class="af oo" href="https://www.timescale.com/blog/how-to-automate-data-classification-in-postgresql-with-openai" rel="noopener ugc nofollow" target="_blank"><em class="ri">here</em></a><em class="ri"> on the Timescale official blog on Nov. 22, 2022.</em></p></div></div></div></div></section></div></div></article></div><div class="ab cb"><div class="ci bh fz ga gb gc"><div class="rj rk ab ja"><div class="rl ab"><a class="rm ay am ao" rel="noopener follow" href="/tag/tutorials?source=post_page-----ff14f9066de9--------------------------------"><div class="rn fj cx ro ge rp rq bf b bg z bk rr">Tutorials</div></a></div><div class="rl ab"><a class="rm ay am ao" rel="noopener follow" href="/tag/postgres?source=post_page-----ff14f9066de9--------------------------------"><div class="rn fj cx ro ge rp rq bf b bg z bk rr">Postgres</div></a></div><div class="rl ab"><a class="rm ay am ao" rel="noopener follow" href="/tag/data-science?source=post_page-----ff14f9066de9--------------------------------"><div class="rn fj cx ro ge rp rq bf b bg z bk rr">Data Science</div></a></div><div class="rl ab"><a class="rm ay am ao" rel="noopener follow" href="/tag/programming?source=post_page-----ff14f9066de9--------------------------------"><div class="rn fj cx ro ge rp rq bf b bg z bk rr">Programming</div></a></div><div class="rl ab"><a class="rm ay am ao" rel="noopener follow" href="/tag/timescale?source=post_page-----ff14f9066de9--------------------------------"><div class="rn fj cx ro ge rp rq bf b bg z bk rr">Timescale</div></a></div></div></div></div><div class="l"></div><footer class="rs rt ru rv rw ab q rx ik c"><div class="l ae"><div class="ab cb"><div class="ci bh fz ga gb gc"><div class="ab cp ry"><div class="ab q kt"><div class="rz l"><span class="l sa sb sc e d"><div class="ab q kt ku"><div class="pw-multi-vote-icon fj jc kv kw kx"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerClapButton" rel="noopener follow" href="/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftimescale%2Fff14f9066de9&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Ftimescale%2Fhow-to-automate-data-classification-in-postgresql-with-openai-ff14f9066de9&amp;user=Team+Timescale&amp;userId=c84b80175451&amp;source=---footer_actions--ff14f9066de9---------------------clap_footer-----------"><div><div class="bm" aria-hidden="false"><div class="ky ao kz la lb lc am ld le lf kx"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM13.916 3.953l1.523-2.112-1.184-.39zM8.589 1.84l1.522 2.112-.337-2.501zM18.523 18.92c-.86.86-1.75 1.246-2.62 1.33a6 6 0 0 0 .407-.372c2.388-2.389 2.86-4.951 1.399-7.623l-.912-1.603-.79-1.672c-.26-.56-.194-.98.203-1.288a.7.7 0 0 1 .546-.132c.283.046.546.231.728.5l2.363 4.157c.976 1.624 1.141 4.237-1.324 6.702m-10.999-.438L3.37 14.328a.828.828 0 0 1 .585-1.408.83.83 0 0 1 .585.242l2.158 2.157a.365.365 0 0 0 .516-.516l-2.157-2.158-1.449-1.449a.826.826 0 0 1 1.167-1.17l3.438 3.44a.363.363 0 0 0 .516 0 .364.364 0 0 0 0-.516L5.293 9.513l-.97-.97a.826.826 0 0 1 0-1.166.84.84 0 0 1 1.167 0l.97.968 3.437 3.436a.36.36 0 0 0 .517 0 .366.366 0 0 0 0-.516L6.977 7.83a.82.82 0 0 1-.241-.584.82.82 0 0 1 .824-.826c.219 0 .43.087.584.242l5.787 5.787a.366.366 0 0 0 .587-.415l-1.117-2.363c-.26-.56-.194-.98.204-1.289a.7.7 0 0 1 .546-.132c.283.046.545.232.727.501l2.193 3.86c1.302 2.38.883 4.59-1.277 6.75-1.156 1.156-2.602 1.627-4.19 1.367-1.418-.236-2.866-1.033-4.079-2.246M10.75 5.971l2.12 2.12c-.41.502-.465 1.17-.128 1.89l.22.465-3.523-3.523a.8.8 0 0 1-.097-.368c0-.22.086-.428.241-.584a.847.847 0 0 1 1.167 0m7.355 1.705c-.31-.461-.746-.758-1.23-.837a1.44 1.44 0 0 0-1.11.275c-.312.24-.505.543-.59.881a1.74 1.74 0 0 0-.906-.465 1.47 1.47 0 0 0-.82.106l-2.182-2.182a1.56 1.56 0 0 0-2.2 0 1.54 1.54 0 0 0-.396.701 1.56 1.56 0 0 0-2.21-.01 1.55 1.55 0 0 0-.416.753c-.624-.624-1.649-.624-2.237-.037a1.557 1.557 0 0 0 0 2.2c-.239.1-.501.238-.715.453a1.56 1.56 0 0 0 0 2.2l.516.515a1.556 1.556 0 0 0-.753 2.615L7.01 19c1.32 1.319 2.909 2.189 4.475 2.449q.482.08.971.08c.85 0 1.653-.198 2.393-.579.231.033.46.054.686.054 1.266 0 2.457-.52 3.505-1.567 2.763-2.763 2.552-5.734 1.439-7.586z" clip-rule="evenodd"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l lg lh li lj lk ll lm"><p class="bf b dv z du"><span class="ln">--</span></p></div></div></span><span class="l h g f sd se"><div class="ab q kt ku"><div class="pw-multi-vote-icon fj jc kv kw kx"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerClapButton" rel="noopener follow" href="/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftimescale%2Fff14f9066de9&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Ftimescale%2Fhow-to-automate-data-classification-in-postgresql-with-openai-ff14f9066de9&amp;user=Team+Timescale&amp;userId=c84b80175451&amp;source=---footer_actions--ff14f9066de9---------------------clap_footer-----------"><div><div class="bm" aria-hidden="false"><div class="ky ao kz la lb lc am ld le lf kx"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM13.916 3.953l1.523-2.112-1.184-.39zM8.589 1.84l1.522 2.112-.337-2.501zM18.523 18.92c-.86.86-1.75 1.246-2.62 1.33a6 6 0 0 0 .407-.372c2.388-2.389 2.86-4.951 1.399-7.623l-.912-1.603-.79-1.672c-.26-.56-.194-.98.203-1.288a.7.7 0 0 1 .546-.132c.283.046.546.231.728.5l2.363 4.157c.976 1.624 1.141 4.237-1.324 6.702m-10.999-.438L3.37 14.328a.828.828 0 0 1 .585-1.408.83.83 0 0 1 .585.242l2.158 2.157a.365.365 0 0 0 .516-.516l-2.157-2.158-1.449-1.449a.826.826 0 0 1 1.167-1.17l3.438 3.44a.363.363 0 0 0 .516 0 .364.364 0 0 0 0-.516L5.293 9.513l-.97-.97a.826.826 0 0 1 0-1.166.84.84 0 0 1 1.167 0l.97.968 3.437 3.436a.36.36 0 0 0 .517 0 .366.366 0 0 0 0-.516L6.977 7.83a.82.82 0 0 1-.241-.584.82.82 0 0 1 .824-.826c.219 0 .43.087.584.242l5.787 5.787a.366.366 0 0 0 .587-.415l-1.117-2.363c-.26-.56-.194-.98.204-1.289a.7.7 0 0 1 .546-.132c.283.046.545.232.727.501l2.193 3.86c1.302 2.38.883 4.59-1.277 6.75-1.156 1.156-2.602 1.627-4.19 1.367-1.418-.236-2.866-1.033-4.079-2.246M10.75 5.971l2.12 2.12c-.41.502-.465 1.17-.128 1.89l.22.465-3.523-3.523a.8.8 0 0 1-.097-.368c0-.22.086-.428.241-.584a.847.847 0 0 1 1.167 0m7.355 1.705c-.31-.461-.746-.758-1.23-.837a1.44 1.44 0 0 0-1.11.275c-.312.24-.505.543-.59.881a1.74 1.74 0 0 0-.906-.465 1.47 1.47 0 0 0-.82.106l-2.182-2.182a1.56 1.56 0 0 0-2.2 0 1.54 1.54 0 0 0-.396.701 1.56 1.56 0 0 0-2.21-.01 1.55 1.55 0 0 0-.416.753c-.624-.624-1.649-.624-2.237-.037a1.557 1.557 0 0 0 0 2.2c-.239.1-.501.238-.715.453a1.56 1.56 0 0 0 0 2.2l.516.515a1.556 1.556 0 0 0-.753 2.615L7.01 19c1.32 1.319 2.909 2.189 4.475 2.449q.482.08.971.08c.85 0 1.653-.198 2.393-.579.231.033.46.054.686.054 1.266 0 2.457-.52 3.505-1.567 2.763-2.763 2.552-5.734 1.439-7.586z" clip-rule="evenodd"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l lg lh li lj lk ll lm"><p class="bf b dv z du"><span class="ln">--</span></p></div></div></span></div><div class="bq ab"><div><div class="bm" aria-hidden="false"><button class="ao ky lo lp ab q fk lq lr" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="ls"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"></path></svg></button></div></div></div></div><div class="ab q"><div class="on l ix"><div><div class="bm" aria-hidden="false"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerBookmarkButton" rel="noopener follow" href="/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fff14f9066de9&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Ftimescale%2Fhow-to-automate-data-classification-in-postgresql-with-openai-ff14f9066de9&amp;source=---footer_actions--ff14f9066de9---------------------bookmark_footer-----------"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none" viewBox="0 0 25 25" class="du lu" aria-label="Add to list bookmark button"><path fill="currentColor" d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .805.396L12.5 17l5.695 4.396A.5.5 0 0 0 19 21v-8.5a.5.5 0 0 0-1 0v7.485l-5.195-4.012a.5.5 0 0 0-.61 0L7 19.985z"></path></svg></a></span></div></div></div><div class="on l ix"><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="footerSocialShareButton" class="af fk ah ai aj ak al mc an ao ap ex md me lr mf"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"></path></svg></button></div></div></div></div></div></div></div></div></div></footer><div class="sf l"><div class="ab cb"><div class="ci bh fz ga gb gc"><div class="sg l"><div class="ab sh si sj iz iy"><div class="sk sl sm sn so sp sq sr ss st ab cp"><div class="h k"><a href="https://medium.com/timescale?source=post_page---post_publication_info--ff14f9066de9--------------------------------" rel="noopener follow"><div class="fj ab"><img alt="Timescale" class="su ib ic cx" src="https://miro.medium.com/v2/resize:fill:96:96/1*1hiEAsTlce_ICvVpGm2Cgg.png" width="48" height="48" loading="lazy"/><div class="su l ic ib fs n fr sv"></div></div></a></div><div class="j i d"><a href="https://medium.com/timescale?source=post_page---post_publication_info--ff14f9066de9--------------------------------" rel="noopener follow"><div class="fj ab"><img alt="Timescale" class="su sx sw cx" src="https://miro.medium.com/v2/resize:fill:128:128/1*1hiEAsTlce_ICvVpGm2Cgg.png" width="64" height="64" loading="lazy"/><div class="su l sw sx fs n fr sv"></div></div></a></div><div class="j i d sy ix"><div class="ab"></div></div></div><div class="ab co sz"><div class="ta tb tc td te l"><a class="af ag ah aj ak al am an ao ap aq ar as at ab q" href="https://medium.com/timescale?source=post_page---post_publication_info--ff14f9066de9--------------------------------" rel="noopener follow"><h2 class="pw-author-name bf tg th ti tj tk tl tm nt py pz nx qb qc ob qe qf bk"><span class="gn tf">Published in <!-- -->Timescale</span></h2></a><div class="rl ab ia"><div class="l ix"><span class="pw-follower-count bf b bg z du"><a class="af ag ah ai aj ak al am an ao ap aq ar iq" rel="noopener follow" href="/timescale/followers?source=post_page---post_publication_info--ff14f9066de9--------------------------------">3.3K Followers</a></span></div><div class="bf b bg z du ab jb"><span class="ir l" aria-hidden="true"><span class="bf b bg z du">·</span></span><a class="af ag ah ai aj ak al am an ao ap aq ar iq" rel="noopener follow" href="/timescale/how-to-automate-data-classification-in-postgresql-with-openai-ff14f9066de9?source=post_page---post_publication_info--ff14f9066de9--------------------------------">Last published <!-- -->16 hours ago</a></div></div><div class="tn l"><p class="bf b bg z bk"><span class="gn">Timescale is the cloud database engineered for performance and resource efficiency, even with large workloads — resulting in speed, scale, and savings.</span></p></div></div></div><div class="h k"><div class="ab"></div></div></div></div><div class="ab sh si sj iz iy"><div class="sk sl sm sn so sp sq sr ss st ab cp"><div class="h k"><a tabindex="0" rel="noopener follow" href="/@team-timescale?source=post_page---post_author_info--ff14f9066de9--------------------------------"><div class="l fj"><img alt="Team Timescale" class="l fd by ic ib cx" src="https://miro.medium.com/v2/resize:fill:96:96/1*1hiEAsTlce_ICvVpGm2Cgg.png" width="48" height="48" loading="lazy"/><div class="fr by l ic ib fs n ay sv"></div></div></a></div><div class="j i d"><a tabindex="0" rel="noopener follow" href="/@team-timescale?source=post_page---post_author_info--ff14f9066de9--------------------------------"><div class="l fj"><img alt="Team Timescale" class="l fd by sw sx cx" src="https://miro.medium.com/v2/resize:fill:128:128/1*1hiEAsTlce_ICvVpGm2Cgg.png" width="64" height="64" loading="lazy"/><div class="fr by l sw sx fs n ay sv"></div></div></a></div><div class="j i d sy ix"><div class="ab"><span><button class="bf b bg z to rn tp tq tr ts tt ev ew tu tv tw fa fb fc fd bm fe ff">Follow</button></span></div></div></div><div class="ab co sz"><div class="ta tb tc td te l"><a class="af ag ah aj ak al am an ao ap aq ar as at ab q" rel="noopener follow" href="/@team-timescale?source=post_page---post_author_info--ff14f9066de9--------------------------------"><h2 class="pw-author-name bf tg th ti tj tk tl tm nt py pz nx qb qc ob qe qf bk"><span class="gn tf">Written by <!-- -->Team Timescale</span></h2></a><div class="rl ab ia"><div class="l ix"><span class="pw-follower-count bf b bg z du"><a class="af ag ah ai aj ak al am an ao ap aq ar iq" rel="noopener follow" href="/@team-timescale/followers?source=post_page---post_author_info--ff14f9066de9--------------------------------">23 Followers</a></span></div><div class="bf b bg z du ab jb"><span class="ir l" aria-hidden="true"><span class="bf b bg z du">·</span></span><a class="af ag ah ai aj ak al am an ao ap aq ar iq" rel="noopener follow" href="/@team-timescale/following?source=post_page---post_author_info--ff14f9066de9--------------------------------">111 Following</a></div></div><div class="tn l"><p class="bf b bg z bk"><span class="gn">Timescale blog posts, reposted for the Medium community interested in building time-series, real-time analytics, AI, and vector data applications.</span></p></div></div></div><div class="h k"><div class="ab"><span><button class="bf b bg z to rn tp tq tr ts tt ev ew tu tv tw fa fb fc fd bm fe ff">Follow</button></span></div></div></div></div></div></div><div class="tx l"><div class="ty bh r sf"></div><div class="ab cb"><div class="ci bh fz ga gb gc"><div class="ab q cp"><h2 class="bf tg os ou ov ow oy oz pa pc pd pe pg ph pi pk pl bk">No responses yet</h2><div class="ab tz"><div><div class="bm" aria-hidden="false"><a class="ua ub" href="https://policy.medium.com/medium-rules-30e5502c4eb4?source=post_page---post_responses--ff14f9066de9--------------------------------" rel="noopener follow" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 25 25"><path fill-rule="evenodd" d="M11.987 5.036a.754.754 0 0 1 .914-.01c.972.721 1.767 1.218 2.6 1.543.828.322 1.719.485 2.887.505a.755.755 0 0 1 .741.757c-.018 3.623-.43 6.256-1.449 8.21-1.034 1.984-2.662 3.209-4.966 4.083a.75.75 0 0 1-.537-.003c-2.243-.874-3.858-2.095-4.897-4.074-1.024-1.951-1.457-4.583-1.476-8.216a.755.755 0 0 1 .741-.757c1.195-.02 2.1-.182 2.923-.503.827-.322 1.6-.815 2.519-1.535m.468.903c-.897.69-1.717 1.21-2.623 1.564-.898.35-1.856.527-3.026.565.037 3.45.469 5.817 1.36 7.515.884 1.684 2.25 2.762 4.284 3.571 2.092-.81 3.465-1.89 4.344-3.575.886-1.698 1.299-4.065 1.334-7.512-1.149-.039-2.091-.217-2.99-.567-.906-.353-1.745-.873-2.683-1.561m-.009 9.155a2.672 2.672 0 1 0 0-5.344 2.672 2.672 0 0 0 0 5.344m0 1a3.672 3.672 0 1 0 0-7.344 3.672 3.672 0 0 0 0 7.344m-1.813-3.777.525-.526.916.917 1.623-1.625.526.526-2.149 2.152z" clip-rule="evenodd"></path></svg></a></div></div></div></div><div class="uc ud ue uf ug l"></div></div></div></div><div class="uh ui uj uk ul l bx"><div class="h k j"><div class="ty bh um un"></div><div class="ab cb"><div class="ci bh fz ga gb gc"><div class="uo ab kt ja"><div class="up uq l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://help.medium.com/hc/en-us?source=post_page-----ff14f9066de9--------------------------------" rel="noopener follow"><p class="bf b dv z du">Help</p></a></div><div class="up uq l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.statuspage.io/?source=post_page-----ff14f9066de9--------------------------------" rel="noopener follow"><p class="bf b dv z du">Status</p></a></div><div class="up uq l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" rel="noopener follow" href="/about?autoplay=1&amp;source=post_page-----ff14f9066de9--------------------------------"><p class="bf b dv z du">About</p></a></div><div class="up uq l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" rel="noopener follow" href="/jobs-at-medium/work-at-medium-959d1a85284e?source=post_page-----ff14f9066de9--------------------------------"><p class="bf b dv z du">Careers</p></a></div><div class="up uq l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="pressinquiries@medium.com?source=post_page-----ff14f9066de9--------------------------------" rel="noopener follow"><p class="bf b dv z du">Press</p></a></div><div class="up uq l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://blog.medium.com/?source=post_page-----ff14f9066de9--------------------------------" rel="noopener follow"><p class="bf b dv z du">Blog</p></a></div><div class="up uq l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----ff14f9066de9--------------------------------" rel="noopener follow"><p class="bf b dv z du">Privacy</p></a></div><div class="up uq l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----ff14f9066de9--------------------------------" rel="noopener follow"><p class="bf b dv z du">Terms</p></a></div><div class="up uq l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://speechify.com/medium?source=post_page-----ff14f9066de9--------------------------------" rel="noopener follow"><p class="bf b dv z du">Text to speech</p></a></div><div class="up l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" rel="noopener follow" href="/business?source=post_page-----ff14f9066de9--------------------------------"><p class="bf b dv z du">Teams</p></a></div></div></div></div></div></div></div></div></div></div><script>window.__BUILD_ID__="main-20250117-215112-6b7ae8b923"</script><script>window.__GRAPHQL_URI__ = "https://medium.com/_/graphql"</script><script>window.__PRELOADED_STATE__ = {"algolia":{"queries":{}},"cache":{"experimentGroupSet":true,"reason":"","group":"enabled","tags":["group-edgeCachePosts","post-ff14f9066de9","user-c84b80175451","collection-7fa310224bc5"],"serverVariantState":"44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a","middlewareEnabled":true,"cacheStatus":"DYNAMIC","shouldUseCache":true,"vary":[],"lohpSummerUpsellEnabled":false},"client":{"hydrated":false,"isUs":false,"isNativeMedium":false,"isSafariMobile":false,"isSafari":false,"isFirefox":false,"routingEntity":{"type":"DEFAULT","explicit":false},"viewerIsBot":false},"debug":{"requestId":"d2fc86ec-4bea-4935-bc9a-6513465e0f26","requestTag":"","hybridDevServices":[],"originalSpanCarrier":{"traceparent":"00-9e364f605058911a94b4323c267b1861-72f123085b744471-01"}},"multiVote":{"clapsPerPost":{}},"navigation":{"branch":{"show":null,"hasRendered":null,"blockedByCTA":false},"hideGoogleOneTap":false,"hasRenderedAlternateUserBanner":null,"currentLocation":"https:\u002F\u002Fmedium.com\u002Ftimescale\u002Fhow-to-automate-data-classification-in-postgresql-with-openai-ff14f9066de9","host":"medium.com","hostname":"medium.com","referrer":"","hasSetReferrer":false,"susiModal":{"step":null,"operation":"register"},"postRead":false,"partnerProgram":{"selectedCountryCode":null},"queryString":"","currentHash":""},"config":{"nodeEnv":"production","version":"main-20250117-215112-6b7ae8b923","target":"production","productName":"Medium","publicUrl":"https:\u002F\u002Fcdn-client.medium.com\u002Flite","authDomain":"medium.com","authGoogleClientId":"216296035834-k1k6qe060s2tp2a2jam4ljdcms00sttg.apps.googleusercontent.com","favicon":"production","glyphUrl":"https:\u002F\u002Fglyph.medium.com","branchKey":"key_live_ofxXr2qTrrU9NqURK8ZwEhknBxiI6KBm","algolia":{"appId":"MQ57UUUQZ2","apiKeySearch":"394474ced050e3911ae2249ecc774921","indexPrefix":"medium_","host":"-dsn.algolia.net"},"recaptchaKey":"6Lfc37IUAAAAAKGGtC6rLS13R1Hrw_BqADfS1LRk","recaptcha3Key":"6Lf8R9wUAAAAABMI_85Wb8melS7Zj6ziuf99Yot5","recaptchaEnterpriseKeyId":"6Le-uGgpAAAAAPprRaokM8AKthQ9KNGdoxaGUvVp","datadog":{"applicationId":"6702d87d-a7e0-42fe-bbcb-95b469547ea0","clientToken":"pub853ea8d17ad6821d9f8f11861d23dfed","rumToken":"pubf9cc52896502b9413b68ba36fc0c7162","context":{"deployment":{"target":"production","tag":"main-20250117-215112-6b7ae8b923","commit":"6b7ae8b92358be5b2a56dc9839e734a3beaa45df"}},"datacenter":"us"},"googleAnalyticsCode":"G-7JY7T788PK","googlePay":{"apiVersion":"2","apiVersionMinor":"0","merchantId":"BCR2DN6TV7EMTGBM","merchantName":"Medium","instanceMerchantId":"13685562959212738550"},"applePay":{"version":3},"signInWallCustomDomainCollectionIds":["3a8144eabfe3","336d898217ee","61061eb0c96b","138adf9c44c","819cc2aaeee0"],"mediumMastodonDomainName":"me.dm","mediumOwnedAndOperatedCollectionIds":["8a9336e5bb4","b7e45b22fec3","193b68bd4fba","8d6b8a439e32","54c98c43354d","3f6ecf56618","d944778ce714","92d2092dc598","ae2a65f35510","1285ba81cada","544c7006046e","fc8964313712","40187e704f1c","88d9857e584e","7b6769f2748b","bcc38c8f6edf","cef6983b292","cb8577c9149e","444d13b52878","713d7dbc99b0","ef8e90590e66","191186aaafa0","55760f21cdc5","9dc80918cc93","bdc4052bbdba","8ccfed20cbb2"],"tierOneDomains":["medium.com","thebolditalic.com","arcdigital.media","towardsdatascience.com","uxdesign.cc","codeburst.io","psiloveyou.xyz","writingcooperative.com","entrepreneurshandbook.co","prototypr.io","betterhumans.coach.me","theascent.pub"],"topicsToFollow":["d61cf867d93f","8a146bc21b28","1eca0103fff3","4d562ee63426","aef1078a3ef5","e15e46793f8d","6158eb913466","55f1c20aba7a","3d18b94f6858","4861fee224fd","63c6f1f93ee","1d98b3a9a871","decb52b64abf","ae5d4995e225","830cded25262"],"topicToTagMappings":{"accessibility":"accessibility","addiction":"addiction","android-development":"android-development","art":"art","artificial-intelligence":"artificial-intelligence","astrology":"astrology","basic-income":"basic-income","beauty":"beauty","biotech":"biotech","blockchain":"blockchain","books":"books","business":"business","cannabis":"cannabis","cities":"cities","climate-change":"climate-change","comics":"comics","coronavirus":"coronavirus","creativity":"creativity","cryptocurrency":"cryptocurrency","culture":"culture","cybersecurity":"cybersecurity","data-science":"data-science","design":"design","digital-life":"digital-life","disability":"disability","economy":"economy","education":"education","equality":"equality","family":"family","feminism":"feminism","fiction":"fiction","film":"film","fitness":"fitness","food":"food","freelancing":"freelancing","future":"future","gadgets":"gadgets","gaming":"gaming","gun-control":"gun-control","health":"health","history":"history","humor":"humor","immigration":"immigration","ios-development":"ios-development","javascript":"javascript","justice":"justice","language":"language","leadership":"leadership","lgbtqia":"lgbtqia","lifestyle":"lifestyle","machine-learning":"machine-learning","makers":"makers","marketing":"marketing","math":"math","media":"media","mental-health":"mental-health","mindfulness":"mindfulness","money":"money","music":"music","neuroscience":"neuroscience","nonfiction":"nonfiction","outdoors":"outdoors","parenting":"parenting","pets":"pets","philosophy":"philosophy","photography":"photography","podcasts":"podcast","poetry":"poetry","politics":"politics","privacy":"privacy","product-management":"product-management","productivity":"productivity","programming":"programming","psychedelics":"psychedelics","psychology":"psychology","race":"race","relationships":"relationships","religion":"religion","remote-work":"remote-work","san-francisco":"san-francisco","science":"science","self":"self","self-driving-cars":"self-driving-cars","sexuality":"sexuality","social-media":"social-media","society":"society","software-engineering":"software-engineering","space":"space","spirituality":"spirituality","sports":"sports","startups":"startup","style":"style","technology":"technology","transportation":"transportation","travel":"travel","true-crime":"true-crime","tv":"tv","ux":"ux","venture-capital":"venture-capital","visual-design":"visual-design","work":"work","world":"world","writing":"writing"},"defaultImages":{"avatar":{"imageId":"1*dmbNkD5D-u45r44go_cf0g.png","height":150,"width":150},"orgLogo":{"imageId":"7*V1_7XP4snlmqrc_0Njontw.png","height":110,"width":500},"postLogo":{"imageId":"bd978bb536350a710e8efb012513429cabdc4c28700604261aeda246d0f980b7","height":810,"width":1440},"postPreviewImage":{"imageId":"1*hn4v1tCaJy7cWMyb0bpNpQ.png","height":386,"width":579}},"collectionStructuredData":{"8d6b8a439e32":{"name":"Elemental","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F980\u002F1*9ygdqoKprhwuTVKUM0DLPA@2x.png","width":980,"height":159}}},"3f6ecf56618":{"name":"Forge","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F596\u002F1*uULpIlImcO5TDuBZ6lm7Lg@2x.png","width":596,"height":183}}},"ae2a65f35510":{"name":"GEN","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F264\u002F1*RdVZMdvfV3YiZTw6mX7yWA.png","width":264,"height":140}}},"88d9857e584e":{"name":"LEVEL","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*JqYMhNX6KNNb2UlqGqO2WQ.png","width":540,"height":108}}},"7b6769f2748b":{"name":"Marker","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F383\u002F1*haCUs0wF6TgOOvfoY-jEoQ@2x.png","width":383,"height":92}}},"444d13b52878":{"name":"OneZero","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*cw32fIqCbRWzwJaoQw6BUg.png","width":540,"height":123}}},"8ccfed20cbb2":{"name":"Zora","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*tZUQqRcCCZDXjjiZ4bDvgQ.png","width":540,"height":106}}}},"embeddedPostIds":{"coronavirus":"cd3010f9d81f"},"sharedCdcMessaging":{"COVID_APPLICABLE_TAG_SLUGS":[],"COVID_APPLICABLE_TOPIC_NAMES":[],"COVID_APPLICABLE_TOPIC_NAMES_FOR_TOPIC_PAGE":[],"COVID_MESSAGES":{"tierA":{"text":"For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":66,"end":73,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"tierB":{"text":"Anyone can publish on Medium per our Policies, but we don’t fact-check every story. For more info about the coronavirus, see cdc.gov.","markups":[{"start":37,"end":45,"href":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Fcategories\u002F201931128-Policies-Safety"},{"start":125,"end":132,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"paywall":{"text":"This article has been made free for everyone, thanks to Medium Members. For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":56,"end":70,"href":"https:\u002F\u002Fmedium.com\u002Fmembership"},{"start":138,"end":145,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"unbound":{"text":"This article is free for everyone, thanks to Medium Members. For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":45,"end":59,"href":"https:\u002F\u002Fmedium.com\u002Fmembership"},{"start":127,"end":134,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]}},"COVID_BANNER_POST_ID_OVERRIDE_WHITELIST":["3b31a67bff4a"]},"sharedVoteMessaging":{"TAGS":["politics","election-2020","government","us-politics","election","2020-presidential-race","trump","donald-trump","democrats","republicans","congress","republican-party","democratic-party","biden","joe-biden","maga"],"TOPICS":["politics","election"],"MESSAGE":{"text":"Find out more about the U.S. election results here.","markups":[{"start":46,"end":50,"href":"https:\u002F\u002Fcookpolitical.com\u002F2020-national-popular-vote-tracker"}]},"EXCLUDE_POSTS":["397ef29e3ca5"]},"embedPostRules":[],"recircOptions":{"v1":{"limit":3},"v2":{"limit":8}},"braintreeClientKey":"production_zjkj96jm_m56f8fqpf7ngnrd4","braintree":{"enabled":true,"merchantId":"m56f8fqpf7ngnrd4","merchantAccountId":{"usd":"AMediumCorporation_instant","eur":"amediumcorporation_EUR","cad":"amediumcorporation_CAD"},"publicKey":"ds2nn34bg2z7j5gd","braintreeEnvironment":"production","dashboardUrl":"https:\u002F\u002Fwww.braintreegateway.com\u002Fmerchants","gracePeriodDurationInDays":14,"mediumMembershipPlanId":{"monthly":"ce105f8c57a3","monthlyV2":"e8a5e126-792b-4ee6-8fba-d574c1b02fc5","monthlyWithTrial":"d5ee3dbe3db8","monthlyPremium":"fa741a9b47a2","yearly":"a40ad4a43185","yearlyV2":"3815d7d6-b8ca-4224-9b8c-182f9047866e","yearlyStaff":"d74fb811198a","yearlyWithTrial":"b3bc7350e5c7","yearlyPremium":"e21bd2c12166","monthlyOneYearFree":"e6c0637a-2bad-4171-ab4f-3c268633d83c","monthly25PercentOffFirstYear":"235ecc62-0cdb-49ae-9378-726cd21c504b","monthly20PercentOffFirstYear":"ba518864-9c13-4a99-91ca-411bf0cac756","monthly15PercentOffFirstYear":"594c029b-9f89-43d5-88f8-8173af4e070e","monthly10PercentOffFirstYear":"c6c7bc9a-40f2-4b51-8126-e28511d5bdb0","monthlyForStudents":"629ebe51-da7d-41fd-8293-34cd2f2030a8","yearlyOneYearFree":"78ba7be9-0d9f-4ece-aa3e-b54b826f2bf1","yearly25PercentOffFirstYear":"2dbb010d-bb8f-4eeb-ad5c-a08509f42d34","yearly20PercentOffFirstYear":"47565488-435b-47f8-bf93-40d5fbe0ebc8","yearly15PercentOffFirstYear":"8259809b-0881-47d9-acf7-6c001c7f720f","yearly10PercentOffFirstYear":"9dd694fb-96e1-472c-8d9e-3c868d5c1506","yearlyForStudents":"e29345ef-ab1c-4234-95c5-70e50fe6bc23","monthlyCad":"p52orjkaceei","yearlyCad":"h4q9g2up9ktt"},"braintreeDiscountId":{"oneMonthFree":"MONTHS_FREE_01","threeMonthsFree":"MONTHS_FREE_03","sixMonthsFree":"MONTHS_FREE_06","fiftyPercentOffOneYear":"FIFTY_PERCENT_OFF_ONE_YEAR"},"3DSecureVersion":"2","defaultCurrency":"usd","providerPlanIdCurrency":{"4ycw":"usd","rz3b":"usd","3kqm":"usd","jzw6":"usd","c2q2":"usd","nnsw":"usd","q8qw":"usd","d9y6":"usd","fx7w":"cad","nwf2":"cad"}},"paypalClientId":"AXj1G4fotC2GE8KzWX9mSxCH1wmPE3nJglf4Z2ig_amnhvlMVX87otaq58niAg9iuLktVNF_1WCMnN7v","paypal":{"host":"https:\u002F\u002Fapi.paypal.com:443","clientMode":"production","serverMode":"live","webhookId":"4G466076A0294510S","monthlyPlan":{"planId":"P-9WR0658853113943TMU5FDQA","name":"Medium Membership (Monthly) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"yearlyPlan":{"planId":"P-7N8963881P8875835MU5JOPQ","name":"Medium Membership (Annual) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"oneYearGift":{"name":"Medium Membership (1 Year, Digital Gift Code)","description":"Unlimited access to the best and brightest stories on Medium. Gift codes can be redeemed at medium.com\u002Fredeem.","price":"50.00","currency":"USD","sku":"membership-gift-1-yr"},"oldMonthlyPlan":{"planId":"P-96U02458LM656772MJZUVH2Y","name":"Medium Membership (Monthly)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"oldYearlyPlan":{"planId":"P-59P80963JF186412JJZU3SMI","name":"Medium Membership (Annual)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"monthlyPlanWithTrial":{"planId":"P-66C21969LR178604GJPVKUKY","name":"Medium Membership (Monthly) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"yearlyPlanWithTrial":{"planId":"P-6XW32684EX226940VKCT2MFA","name":"Medium Membership (Annual) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"oldMonthlyPlanNoSetupFee":{"planId":"P-4N046520HR188054PCJC7LJI","name":"Medium Membership (Monthly)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"oldYearlyPlanNoSetupFee":{"planId":"P-7A4913502Y5181304CJEJMXQ","name":"Medium Membership (Annual)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"sdkUrl":"https:\u002F\u002Fwww.paypal.com\u002Fsdk\u002Fjs"},"stripePublishableKey":"pk_live_7FReX44VnNIInZwrIIx6ghjl","log":{"json":true,"level":"info"},"imageUploadMaxSizeMb":25,"staffPicks":{"title":"Staff Picks","catalogId":"c7bc6e1ee00f"}},"session":{"xsrf":""}}</script><script>window.__APOLLO_STATE__ = {"ROOT_QUERY":{"__typename":"Query","viewer":null,"collectionByDomainOrSlug({\"domainOrSlug\":\"timescale\"})":{"__ref":"Collection:7fa310224bc5"},"postResult({\"id\":\"ff14f9066de9\"})":{"__ref":"Post:ff14f9066de9"}},"Collection:7fa310224bc5":{"__typename":"Collection","id":"7fa310224bc5","customStyleSheet":null,"colorPalette":{"__typename":"ColorPalette","highlightSpectrum":{"__typename":"ColorSpectrum","backgroundColor":"#FFFFFFFF","colorPoints":[{"__typename":"ColorPoint","color":"#FFF5F2F1","point":0},{"__typename":"ColorPoint","color":"#FFF3F0EF","point":0.1},{"__typename":"ColorPoint","color":"#FFF1EEED","point":0.2},{"__typename":"ColorPoint","color":"#FFEFECEC","point":0.3},{"__typename":"ColorPoint","color":"#FFEDEAEA","point":0.4},{"__typename":"ColorPoint","color":"#FFEBE8E8","point":0.5},{"__typename":"ColorPoint","color":"#FFE9E6E6","point":0.6},{"__typename":"ColorPoint","color":"#FFE7E5E4","point":0.7},{"__typename":"ColorPoint","color":"#FFE5E3E2","point":0.8},{"__typename":"ColorPoint","color":"#FFE4E1E0","point":0.9},{"__typename":"ColorPoint","color":"#FFE2DFDE","point":1}]},"defaultBackgroundSpectrum":{"__typename":"ColorSpectrum","backgroundColor":"#FFFFFFFF","colorPoints":[{"__typename":"ColorPoint","color":"#FF868484","point":0},{"__typename":"ColorPoint","color":"#FF7C7B7A","point":0.1},{"__typename":"ColorPoint","color":"#FF737171","point":0.2},{"__typename":"ColorPoint","color":"#FF696867","point":0.3},{"__typename":"ColorPoint","color":"#FF5F5E5E","point":0.4},{"__typename":"ColorPoint","color":"#FF555454","point":0.5},{"__typename":"ColorPoint","color":"#FF4A4949","point":0.6},{"__typename":"ColorPoint","color":"#FF3F3E3E","point":0.7},{"__typename":"ColorPoint","color":"#FF343333","point":0.8},{"__typename":"ColorPoint","color":"#FF272727","point":0.9},{"__typename":"ColorPoint","color":"#FF1A1A1A","point":1}]},"tintBackgroundSpectrum":{"__typename":"ColorSpectrum","backgroundColor":"#FF000000","colorPoints":[{"__typename":"ColorPoint","color":"#FF000000","point":0},{"__typename":"ColorPoint","color":"#FF1E1D1D","point":0.1},{"__typename":"ColorPoint","color":"#FF3C3B3B","point":0.2},{"__typename":"ColorPoint","color":"#FF565555","point":0.3},{"__typename":"ColorPoint","color":"#FF6F6D6D","point":0.4},{"__typename":"ColorPoint","color":"#FF868484","point":0.5},{"__typename":"ColorPoint","color":"#FF9C9A99","point":0.6},{"__typename":"ColorPoint","color":"#FFB1AEAE","point":0.7},{"__typename":"ColorPoint","color":"#FFC5C3C2","point":0.8},{"__typename":"ColorPoint","color":"#FFD9D6D6","point":0.9},{"__typename":"ColorPoint","color":"#FFECE9E9","point":1}]}},"domain":null,"slug":"timescale","googleAnalyticsId":null,"name":"Timescale","subscriberCount":3362,"description":"Timescale is the cloud database engineered for performance and resource efficiency, even with large workloads — resulting in speed, scale, and savings.","avatar":{"__ref":"ImageMetadata:1*1hiEAsTlce_ICvVpGm2Cgg.png"},"latestPostsConnection({\"paging\":{\"limit\":1}})":{"__typename":"PostConnection","posts":[{"__ref":"Post:ff14f9066de9"}]},"viewerEdge":{"__ref":"CollectionViewerEdge:collectionId:7fa310224bc5-viewerId:lo_ed9e5e2be005"},"twitterUsername":"timescaledb","facebookPageId":null,"logo":{"__ref":"ImageMetadata:1*gOEnwizcgWX1HSdbJslc9A.png"},"favicon":{"__ref":"ImageMetadata:"}},"ImageMetadata:1*1hiEAsTlce_ICvVpGm2Cgg.png":{"__typename":"ImageMetadata","id":"1*1hiEAsTlce_ICvVpGm2Cgg.png"},"User:c84b80175451":{"__typename":"User","id":"c84b80175451","customDomainState":null,"hasSubdomain":false,"username":"team-timescale","linkedAccounts":{"__ref":"LinkedAccounts:c84b80175451"},"isSuspended":false,"name":"Team Timescale","imageId":"1*1hiEAsTlce_ICvVpGm2Cgg.png","verifications":{"__typename":"VerifiedInfo","isBookAuthor":false},"socialStats":{"__typename":"SocialStats","followerCount":23,"followingCount":93,"collectionFollowingCount":18},"bio":"Timescale blog posts, reposted for the Medium community interested in building time-series, real-time analytics, AI, and vector data applications.","membership":null,"allowNotes":true,"viewerEdge":{"__ref":"UserViewerEdge:userId:c84b80175451-viewerId:lo_ed9e5e2be005"},"twitterScreenName":""},"Post:ff14f9066de9":{"__typename":"Post","id":"ff14f9066de9","firstPublishedAt":1737134643231,"creator":{"__ref":"User:c84b80175451"},"collection":{"__ref":"Collection:7fa310224bc5"},"isSeries":false,"mediumUrl":"https:\u002F\u002Fmedium.com\u002Ftimescale\u002Fhow-to-automate-data-classification-in-postgresql-with-openai-ff14f9066de9","sequence":null,"uniqueSlug":"how-to-automate-data-classification-in-postgresql-with-openai-ff14f9066de9","content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fwww.google.com\"}})":{"__typename":"PostContent","isLockedPreviewOnly":false,"bodyModel":{"__typename":"RichText","sections":[{"__typename":"Section","name":"4ee9","startIndex":0,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"3751","startIndex":4,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"e4b0","startIndex":5,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"b8fa","startIndex":89,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null}],"paragraphs":[{"__ref":"Paragraph:1d50de2699dc_0"},{"__ref":"Paragraph:1d50de2699dc_1"},{"__ref":"Paragraph:1d50de2699dc_2"},{"__ref":"Paragraph:1d50de2699dc_3"},{"__ref":"Paragraph:1d50de2699dc_4"},{"__ref":"Paragraph:1d50de2699dc_5"},{"__ref":"Paragraph:1d50de2699dc_6"},{"__ref":"Paragraph:1d50de2699dc_7"},{"__ref":"Paragraph:1d50de2699dc_8"},{"__ref":"Paragraph:1d50de2699dc_9"},{"__ref":"Paragraph:1d50de2699dc_10"},{"__ref":"Paragraph:1d50de2699dc_11"},{"__ref":"Paragraph:1d50de2699dc_12"},{"__ref":"Paragraph:1d50de2699dc_13"},{"__ref":"Paragraph:1d50de2699dc_14"},{"__ref":"Paragraph:1d50de2699dc_15"},{"__ref":"Paragraph:1d50de2699dc_16"},{"__ref":"Paragraph:1d50de2699dc_17"},{"__ref":"Paragraph:1d50de2699dc_18"},{"__ref":"Paragraph:1d50de2699dc_19"},{"__ref":"Paragraph:1d50de2699dc_20"},{"__ref":"Paragraph:1d50de2699dc_21"},{"__ref":"Paragraph:1d50de2699dc_22"},{"__ref":"Paragraph:1d50de2699dc_23"},{"__ref":"Paragraph:1d50de2699dc_24"},{"__ref":"Paragraph:1d50de2699dc_25"},{"__ref":"Paragraph:1d50de2699dc_26"},{"__ref":"Paragraph:1d50de2699dc_27"},{"__ref":"Paragraph:1d50de2699dc_28"},{"__ref":"Paragraph:1d50de2699dc_29"},{"__ref":"Paragraph:1d50de2699dc_30"},{"__ref":"Paragraph:1d50de2699dc_31"},{"__ref":"Paragraph:1d50de2699dc_32"},{"__ref":"Paragraph:1d50de2699dc_33"},{"__ref":"Paragraph:1d50de2699dc_34"},{"__ref":"Paragraph:1d50de2699dc_35"},{"__ref":"Paragraph:1d50de2699dc_36"},{"__ref":"Paragraph:1d50de2699dc_37"},{"__ref":"Paragraph:1d50de2699dc_38"},{"__ref":"Paragraph:1d50de2699dc_39"},{"__ref":"Paragraph:1d50de2699dc_40"},{"__ref":"Paragraph:1d50de2699dc_41"},{"__ref":"Paragraph:1d50de2699dc_42"},{"__ref":"Paragraph:1d50de2699dc_43"},{"__ref":"Paragraph:1d50de2699dc_44"},{"__ref":"Paragraph:1d50de2699dc_45"},{"__ref":"Paragraph:1d50de2699dc_46"},{"__ref":"Paragraph:1d50de2699dc_47"},{"__ref":"Paragraph:1d50de2699dc_48"},{"__ref":"Paragraph:1d50de2699dc_49"},{"__ref":"Paragraph:1d50de2699dc_50"},{"__ref":"Paragraph:1d50de2699dc_51"},{"__ref":"Paragraph:1d50de2699dc_52"},{"__ref":"Paragraph:1d50de2699dc_53"},{"__ref":"Paragraph:1d50de2699dc_54"},{"__ref":"Paragraph:1d50de2699dc_55"},{"__ref":"Paragraph:1d50de2699dc_56"},{"__ref":"Paragraph:1d50de2699dc_57"},{"__ref":"Paragraph:1d50de2699dc_58"},{"__ref":"Paragraph:1d50de2699dc_59"},{"__ref":"Paragraph:1d50de2699dc_60"},{"__ref":"Paragraph:1d50de2699dc_61"},{"__ref":"Paragraph:1d50de2699dc_62"},{"__ref":"Paragraph:1d50de2699dc_63"},{"__ref":"Paragraph:1d50de2699dc_64"},{"__ref":"Paragraph:1d50de2699dc_65"},{"__ref":"Paragraph:1d50de2699dc_66"},{"__ref":"Paragraph:1d50de2699dc_67"},{"__ref":"Paragraph:1d50de2699dc_68"},{"__ref":"Paragraph:1d50de2699dc_69"},{"__ref":"Paragraph:1d50de2699dc_70"},{"__ref":"Paragraph:1d50de2699dc_71"},{"__ref":"Paragraph:1d50de2699dc_72"},{"__ref":"Paragraph:1d50de2699dc_73"},{"__ref":"Paragraph:1d50de2699dc_74"},{"__ref":"Paragraph:1d50de2699dc_75"},{"__ref":"Paragraph:1d50de2699dc_76"},{"__ref":"Paragraph:1d50de2699dc_77"},{"__ref":"Paragraph:1d50de2699dc_78"},{"__ref":"Paragraph:1d50de2699dc_79"},{"__ref":"Paragraph:1d50de2699dc_80"},{"__ref":"Paragraph:1d50de2699dc_81"},{"__ref":"Paragraph:1d50de2699dc_82"},{"__ref":"Paragraph:1d50de2699dc_83"},{"__ref":"Paragraph:1d50de2699dc_84"},{"__ref":"Paragraph:1d50de2699dc_85"},{"__ref":"Paragraph:1d50de2699dc_86"},{"__ref":"Paragraph:1d50de2699dc_87"},{"__ref":"Paragraph:1d50de2699dc_88"},{"__ref":"Paragraph:1d50de2699dc_89"}]},"validatedShareKey":"","shareKeyCreator":null},"inResponseToEntityType":null,"isLocked":false,"isMarkedPaywallOnly":false,"lockedSource":"LOCKED_POST_SOURCE_NONE","primaryTopic":null,"topics":[{"__typename":"Topic","slug":"programming"}],"isPublished":true,"latestPublishedVersion":"1d50de2699dc","visibility":"PUBLIC","postResponses":{"__typename":"PostResponses","count":0},"responseDistribution":"NOT_DISTRIBUTED","clapCount":0,"allowResponses":true,"isLimitedState":false,"title":"How to Automate Data Classification in PostgreSQL With OpenAI","socialTitle":"","socialDek":"","canonicalUrl":"https:\u002F\u002Fwww.timescale.com\u002Fblog\u002Fhow-to-automate-data-classification-in-postgresql-with-openai","metaDescription":"","latestPublishedAt":1737134643231,"readingTime":10.025471698113208,"previewContent":{"__typename":"PreviewContent","subtitle":"Data classification is a crucial but challenging task. Learn how to automate it in PostgreSQL using open-source extensions & OpenAI models."},"previewImage":{"__ref":"ImageMetadata:0*aqvy9nSam8zLhloV"},"isShortform":false,"seoTitle":"","updatedAt":1737138495340,"shortformType":"SHORTFORM_TYPE_LINK","seoDescription":"Data classification is a crucial but challenging task. Learn how to automate it in PostgreSQL using open-source extensions (pgvector; pgai) and OpenAI models.","viewerEdge":{"__ref":"PostViewerEdge:postId:ff14f9066de9-viewerId:lo_ed9e5e2be005"},"isSuspended":false,"license":"ALL_RIGHTS_RESERVED","tags":[{"__ref":"Tag:tutorials"},{"__ref":"Tag:postgres"},{"__ref":"Tag:data-science"},{"__ref":"Tag:programming"},{"__ref":"Tag:timescale"}],"isNewsletter":false,"statusForCollection":"APPROVED","pendingCollection":null,"detectedLanguage":"en","wordCount":2511,"layerCake":0,"responsesLocked":false},"LinkedAccounts:c84b80175451":{"__typename":"LinkedAccounts","mastodon":null,"id":"c84b80175451"},"Paragraph:1d50de2699dc_0":{"__typename":"Paragraph","id":"1d50de2699dc_0","name":"cbf6","type":"H3","href":null,"layout":null,"metadata":null,"text":"How to Automate Data Classification in PostgreSQL With OpenAI","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:0*aqvy9nSam8zLhloV":{"__typename":"ImageMetadata","id":"0*aqvy9nSam8zLhloV","originalHeight":960,"originalWidth":1680,"focusPercentX":null,"focusPercentY":null,"alt":"How to Automate Data Classification in PostgreSQL With OpenAI"},"Paragraph:1d50de2699dc_1":{"__typename":"Paragraph","id":"1d50de2699dc_1","name":"0564","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:0*aqvy9nSam8zLhloV"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_2":{"__typename":"Paragraph","id":"1d50de2699dc_2","name":"bf14","type":"P","href":null,"layout":null,"metadata":null,"text":"Businesses are inundated with data from various sources, including customer interactions, transactions, support queries, product reviews, and more. This makes data classification a crucial task. However, classifying unstructured data, such as customer reviews and support interactions, has always been challenging. The emergence of large language models (LLMs) is simplifying this process.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_3":{"__typename":"Paragraph","id":"1d50de2699dc_3","name":"a41c","type":"P","href":null,"layout":null,"metadata":null,"text":"In this tutorial, we’ll explore how to use the open-source pgai and pgvector extensions to automate data classification directly within PostgreSQL. This approach is particularly helpful if you already have data within PostgreSQL or want to build classification systems without relying on additional vector databases or frameworks.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_4":{"__typename":"Paragraph","id":"1d50de2699dc_4","name":"b516","type":"P","href":null,"layout":null,"metadata":null,"text":"🔖 To learn more about turning unstructured data into structured data, check out these resources:\n- Structured vs. Semi-Structured vs. Unstructured Data in PostgreSQL\n- Parsing All the Data With Open-Source Tools: Unstructured and Pgai","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":100,"end":166,"href":"https:\u002F\u002Fwww.timescale.com\u002Flearn\u002Fstructured-vs-semi-structured-vs-unstructured-data-in-postgresql","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":169,"end":235,"href":"https:\u002F\u002Ftimescale.ghost.io\u002Fblog\u002Fparsing-all-the-data-with-open-source-tools-unstructured-and-pgai\u002F","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_5":{"__typename":"Paragraph","id":"1d50de2699dc_5","name":"1a37","type":"H3","href":null,"layout":null,"metadata":null,"text":"Automating Data Classification in PostgreSQL: Tools","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_6":{"__typename":"Paragraph","id":"1d50de2699dc_6","name":"f2f7","type":"P","href":null,"layout":null,"metadata":null,"text":"Let’s first take a quick look at pgvector and pgai, the two open-source extensions we’ll use with PostgreSQL. We’ll also look at how OpenAI models can help with the process.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_7":{"__typename":"Paragraph","id":"1d50de2699dc_7","name":"a9fe","type":"H4","href":null,"layout":null,"metadata":null,"text":"Pgvector: making PostgreSQL a vector database","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_8":{"__typename":"Paragraph","id":"1d50de2699dc_8","name":"200e","type":"P","href":null,"layout":null,"metadata":null,"text":"Pgvector is a powerful open-source PostgreSQL extension that brings vector-handling capabilities to the database and allows you to store, query, and manage high-dimensional vectors directly within your tables. It is useful for building semantic search, recommendation systems, and data classification algorithms using PostgreSQL.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":8,"href":"https:\u002F\u002Fgithub.com\u002Fpgvector\u002Fpgvector","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_9":{"__typename":"Paragraph","id":"1d50de2699dc_9","name":"0f81","type":"H4","href":null,"layout":null,"metadata":null,"text":"Introduction to OpenAI models","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_10":{"__typename":"Paragraph","id":"1d50de2699dc_10","name":"7986","type":"P","href":null,"layout":null,"metadata":null,"text":"OpenAI offers a range of advanced language models that are updated as the technology advances. The flagship models, GPT-4o and GPT-4o Mini, are the latest ones at the time of writing this article. These models are multimodal, capable of processing text and image inputs while producing text outputs, and have been architected to tackle complex, multi-step tasks with high accuracy and speed.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_11":{"__typename":"Paragraph","id":"1d50de2699dc_11","name":"4e9e","type":"P","href":null,"layout":null,"metadata":null,"text":"GPT-4o, the most advanced model in the lineup, features a context window of up to 128,000 tokens, allowing it to maintain extensive contextual awareness across long conversations or documents. This model is faster and more cost-effective than previous iterations, such as GPT-4 Turbo.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_12":{"__typename":"Paragraph","id":"1d50de2699dc_12","name":"111d","type":"P","href":null,"layout":null,"metadata":null,"text":"For developers needing a lighter solution, the GPT-4o Mini is a smaller model and OpenAI’s cheapest model. It has higher intelligence than GPT-3.5-Turbo but is faster and cheaper, and it is meant for lightweight tasks.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_13":{"__typename":"Paragraph","id":"1d50de2699dc_13","name":"30e7","type":"P","href":null,"layout":null,"metadata":null,"text":"The previous generation models, GPT-4 Turbo and GPT-3.5 Turbo, remain available. GPT-4 Turbo also includes vision capabilities, supporting JSON mode and function calling for tasks involving text and images.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*aMO1IBF8Cix5s9WvZoXnng.png":{"__typename":"ImageMetadata","id":"1*aMO1IBF8Cix5s9WvZoXnng.png","originalHeight":386,"originalWidth":793,"focusPercentX":null,"focusPercentY":null,"alt":"GPT models"},"Paragraph:1d50de2699dc_14":{"__typename":"Paragraph","id":"1d50de2699dc_14","name":"932c","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*aMO1IBF8Cix5s9WvZoXnng.png"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_15":{"__typename":"Paragraph","id":"1d50de2699dc_15","name":"e3dd","type":"H4","href":null,"layout":null,"metadata":null,"text":"What is pgai?","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_16":{"__typename":"Paragraph","id":"1d50de2699dc_16","name":"dfa3","type":"P","href":null,"layout":null,"metadata":null,"text":"Pgai is an open-source extension for PostgreSQL that brings AI-powered capabilities directly to your database. You can use pgai to interact with machine learning models and build AI workflows within PostgreSQL, enabling you to create AI-powered systems without ever leaving your database environment.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":48,"href":"https:\u002F\u002Fgithub.com\u002Ftimescale\u002Fpgai","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_17":{"__typename":"Paragraph","id":"1d50de2699dc_17","name":"c8d2","type":"P","href":null,"layout":null,"metadata":null,"text":"The true power of pgai emerges when it is used in conjunction with pgvector and OpenAI. You can use pgai to harness the vector data stored in PostgreSQL via pgvector and call OpenAI methods to classify this data automatically. This combination allows you to build a fully automated data classification pipeline within PostgreSQL.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_18":{"__typename":"Paragraph","id":"1d50de2699dc_18","name":"c34d","type":"H3","href":null,"layout":null,"metadata":null,"text":"Setting Up","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_19":{"__typename":"Paragraph","id":"1d50de2699dc_19","name":"fafc","type":"P","href":null,"layout":null,"metadata":null,"text":"First, you’ll need a working installation of PostgreSQL with the pgvector and pgai extensions. You can either install them manually or use a pre-built Docker container. Alternatively, you can simply use Timescale Cloud for a free PostgreSQL cloud instance, pre-installed with pgai and pgvector.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":123,"end":131,"href":"https:\u002F\u002Fgithub.com\u002Ftimescale\u002Fpgai\u002Ftree\u002Fmain?tab=readme-ov-file&ref=timescale.com#install-from-source","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":158,"end":167,"href":"https:\u002F\u002Fgithub.com\u002Ftimescale\u002Fpgai\u002Ftree\u002Fmain?tab=readme-ov-file&ref=timescale.com#use-a-pre-built-docker-container","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":203,"end":218,"href":"https:\u002F\u002Fconsole.cloud.timescale.com\u002F?ref=timescale.com","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_20":{"__typename":"Paragraph","id":"1d50de2699dc_20","name":"a1ee","type":"P","href":null,"layout":null,"metadata":null,"text":"Log in or create an account on Timescale Cloud, pick your service type, region, and compute, and then click on ‘Create a service’.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:0*Dq0WIHBpV7WSxXlp":{"__typename":"ImageMetadata","id":"0*Dq0WIHBpV7WSxXlp","originalHeight":654,"originalWidth":1199,"focusPercentX":null,"focusPercentY":null,"alt":"Create a Tmescale Cloud service"},"Paragraph:1d50de2699dc_21":{"__typename":"Paragraph","id":"1d50de2699dc_21","name":"33c5","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:0*Dq0WIHBpV7WSxXlp"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_22":{"__typename":"Paragraph","id":"1d50de2699dc_22","name":"d7ae","type":"P","href":null,"layout":null,"metadata":null,"text":"Once your service is created, you’ll receive the connection string, username, password, database name, and port. You can also download the database config.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_23":{"__typename":"Paragraph","id":"1d50de2699dc_23","name":"d113","type":"P","href":null,"layout":null,"metadata":null,"text":"Let’s save the PostgreSQL database connection string as an environment variable.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_24":{"__typename":"Paragraph","id":"1d50de2699dc_24","name":"a0fb","type":"PRE","href":null,"layout":null,"metadata":null,"text":"$ export PG_CONNECTION_STRING=\"your_postgresql_connection_string\"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"shell"},"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_25":{"__typename":"Paragraph","id":"1d50de2699dc_25","name":"6835","type":"P","href":null,"layout":null,"metadata":null,"text":"You will also need OpenAI API keys. Head to platform.openai.com to get one. Once you have it, save it in an environment variable as well.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":44,"end":63,"href":"http:\u002F\u002Fplatform.openai.com\u002F","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_26":{"__typename":"Paragraph","id":"1d50de2699dc_26","name":"3107","type":"PRE","href":null,"layout":null,"metadata":null,"text":"$ export OPENAI_API_KEY=\"{API_KEY}\"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"shell"},"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_27":{"__typename":"Paragraph","id":"1d50de2699dc_27","name":"25f9","type":"P","href":null,"layout":null,"metadata":null,"text":"Now you can use psql to connect in the following way:","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":16,"end":20,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_28":{"__typename":"Paragraph","id":"1d50de2699dc_28","name":"33e7","type":"PRE","href":null,"layout":null,"metadata":null,"text":"$ PGOPTIONS=\"-c ai.openai_api_key=$OPENAI_API_KEY\" psql -d $PG_CONNECTION_STRING","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"shell"},"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_29":{"__typename":"Paragraph","id":"1d50de2699dc_29","name":"b568","type":"P","href":null,"layout":null,"metadata":null,"text":"You can activate the pgai and pgvector extensions:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_30":{"__typename":"Paragraph","id":"1d50de2699dc_30","name":"20a4","type":"PRE","href":null,"layout":null,"metadata":null,"text":"CREATE EXTENSION IF NOT EXISTS ai CASCADE;\nCREATE EXTENSION IF NOT EXISTS vector CASCADE;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"sql"},"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_31":{"__typename":"Paragraph","id":"1d50de2699dc_31","name":"2ddb","type":"P","href":null,"layout":null,"metadata":null,"text":"Let’s check if the pgai and pgvector extensions are enabled in the PostgreSQL database by running the following command:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_32":{"__typename":"Paragraph","id":"1d50de2699dc_32","name":"0456","type":"PRE","href":null,"layout":null,"metadata":null,"text":"tsdb=\u003E \\dx\n                                                    List of installed extensions\n        Name         | Version |   Schema   |                                      Description\n---------------------+---------+------------+---------------------------------------------------------------------------------------\n ai                  | 0.4.0   | ai         | helper functions for ai workflows\n pg_stat_statements  | 1.10    | public     | track planning and execution statistics of all SQL statements executed\n plpgsql             | 1.0     | pg_catalog | PL\u002FpgSQL procedural language\n plpython3u          | 1.0     | pg_catalog | PL\u002FPython3U untrusted procedural language\n timescaledb         | 2.17.2  | public     | Enables scalable inserts and complex queries for time-series data (Community Edition)\n timescaledb_toolkit | 1.18.0  | public     | Library of analytical hyperfunctions, time-series pipelining, and other SQL utilities\n vector              | 0.8.0   | public     | vector data type and ivfflat and hnsw access methods\n(7 rows)","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"sql"},"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_33":{"__typename":"Paragraph","id":"1d50de2699dc_33","name":"fdc1","type":"P","href":null,"layout":null,"metadata":null,"text":"Let’s also check if the OpenAI function calls are working. You can test this by:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_34":{"__typename":"Paragraph","id":"1d50de2699dc_34","name":"0dc6","type":"PRE","href":null,"layout":null,"metadata":null,"text":"SELECT *\nFROM ai.openai_list_models()\nORDER BY created DESC;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"sql"},"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_35":{"__typename":"Paragraph","id":"1d50de2699dc_35","name":"d7d4","type":"P","href":null,"layout":null,"metadata":null,"text":"This code should return the list of all OpenAI models available:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_36":{"__typename":"Paragraph","id":"1d50de2699dc_36","name":"7357","type":"PRE","href":null,"layout":null,"metadata":null,"text":"id              |        created         |    owned_by\n-----------------------------+------------------------+-----------------\n chatgpt-4o-latest           | 2024-08-13 02:12:11+00 | system\n gpt-4o-2024-08-06           | 2024-08-04 23:38:39+00 | system\n gpt-4o-mini                 | 2024-07-16 23:32:21+00 | system\n gpt-4o-mini-2024-07-18      | 2024-07-16 23:31:57+00 | system\n gpt-4o-2024-05-13           | 2024-05-10 19:08:52+00 | system\n gpt-4o                      | 2024-05-10 18:50:49+00 | system\n gpt-4-turbo-2024-04-09      | 2024-04-08 18:41:17+00 | system\n gpt-4-turbo                 | 2024-04-05 23:57:21+00 | system\n gpt-3.5-turbo-0125          | 2024-01-23 22:19:18+00 | system\n gpt-4-turbo-preview         | 2024-01-23 19:22:57+00 | system\n gpt-4-0125-preview          | 2024-01-23 19:20:12+00 | system\n…","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"yaml"},"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_37":{"__typename":"Paragraph","id":"1d50de2699dc_37","name":"1900","type":"P","href":null,"layout":null,"metadata":null,"text":"We can now proceed with the tutorial steps.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_38":{"__typename":"Paragraph","id":"1d50de2699dc_38","name":"64f5","type":"H3","href":null,"layout":null,"metadata":null,"text":"Performing Data Classification in PostgreSQL Using Pgai","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_39":{"__typename":"Paragraph","id":"1d50de2699dc_39","name":"1b1e","type":"P","href":null,"layout":null,"metadata":null,"text":"In this tutorial, we will start with a list of product reviews. We will then use the pgai and pgvector extensions to classify the reviews into positive, negative, or neutral categories using the OpenAI API. You can use a similar approach to perform any other data classification task.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_40":{"__typename":"Paragraph","id":"1d50de2699dc_40","name":"f9c9","type":"P","href":null,"layout":null,"metadata":null,"text":"Let’s first create a product_reviews table with some sample data.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":21,"end":36,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_41":{"__typename":"Paragraph","id":"1d50de2699dc_41","name":"3246","type":"H4","href":null,"layout":null,"metadata":null,"text":"Create product_reviews table","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":7,"end":22,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_42":{"__typename":"Paragraph","id":"1d50de2699dc_42","name":"e905","type":"P","href":null,"layout":null,"metadata":null,"text":"The following SQL command creates a table named product_reviews to store customer reviews of a product. The table includes columns for customer ID, date of review, product name, a short review, and a detailed review.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":48,"end":63,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_43":{"__typename":"Paragraph","id":"1d50de2699dc_43","name":"9168","type":"PRE","href":null,"layout":null,"metadata":null,"text":"-- Create the `product_reviews` table\nCREATE TABLE product_reviews (\n    -- Unique identifier for each customer\n    customer_id INT NOT NULL PRIMARY KEY,\n    -- Timestamp with timezone for the review date\n    date TIMESTAMPTZ,\n    -- Name of the product being reviewed                    \n    product TEXT,\n    -- A brief summary of the review                        \n    short_review TEXT,\n    -- The detailed review text                   \n    review TEXT                          \n);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"sql"},"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_44":{"__typename":"Paragraph","id":"1d50de2699dc_44","name":"ce89","type":"P","href":null,"layout":null,"metadata":null,"text":"Let’s confirm that the product_reviews table has been created successfully by running the following command:","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":23,"end":38,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_45":{"__typename":"Paragraph","id":"1d50de2699dc_45","name":"d9f9","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\\dt","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"css"},"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_46":{"__typename":"Paragraph","id":"1d50de2699dc_46","name":"b50b","type":"P","href":null,"layout":null,"metadata":null,"text":"Output:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_47":{"__typename":"Paragraph","id":"1d50de2699dc_47","name":"dc60","type":"PRE","href":null,"layout":null,"metadata":null,"text":"List of relations\n Schema |      Name       | Type  |  Owner  \n--------+-----------------+-------+----------\n public | product_reviews | table | postgres\n(1 row)","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"sql"},"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_48":{"__typename":"Paragraph","id":"1d50de2699dc_48","name":"59d5","type":"H4","href":null,"layout":null,"metadata":null,"text":"Insert sample product reviews","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_49":{"__typename":"Paragraph","id":"1d50de2699dc_49","name":"2976","type":"P","href":null,"layout":null,"metadata":null,"text":"Let’s insert sample reviews for products like laptops, phones, and tablets.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_50":{"__typename":"Paragraph","id":"1d50de2699dc_50","name":"e716","type":"PRE","href":null,"layout":null,"metadata":null,"text":"-- Insert sample data into `product_reviews` table\nINSERT INTO product_reviews (customer_id, date, product, short_review, review) VALUES\n(1, '2022-01-01', 'laptop', 'Great!', 'Great laptop, very fast and reliable.'),\n(2, '2022-01-02', 'laptop', 'Good', 'Good laptop, but the battery life could be better.'),\n(3, '2022-01-03', 'laptop', 'Worst ever', 'This is the worst laptop I have ever used.'),\n(4, '2022-01-04', 'laptop', 'Not bad', 'Not bad, but the screen is a bit small.'),\n(5, '2022-01-05', 'phone', 'Excellent', 'Excellent phone, great camera and battery life.'),\n(6, '2022-01-06', 'phone', 'Decent', 'Decent phone, but the screen is not as good as I expected.'),\n(7, '2022-01-07', 'phone', 'Poor', 'Poor phone, battery life is terrible and camera quality is not good.'),\n(8, '2022-01-08', 'tablet', 'Awesome', 'Awesome tablet, very fast and responsive.'),\n(9, '2022-01-09', 'tablet', 'Satisfactory', 'Satisfactory tablet, but the screen resolution could be better.'),\n(10, '2022-01-10', 'tablet', 'Disappointing', 'Disappointing tablet, slow performance and battery drains quickly.');","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"sql"},"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_51":{"__typename":"Paragraph","id":"1d50de2699dc_51","name":"2542","type":"H4","href":null,"layout":null,"metadata":null,"text":"Create product_reviews_classification table","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":7,"end":37,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_52":{"__typename":"Paragraph","id":"1d50de2699dc_52","name":"dbf9","type":"P","href":null,"layout":null,"metadata":null,"text":"Next, we’ll create the product_reviews_classification table to store the data classification results, including customer ID and review type. You can use the SQL command below to create the table.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":23,"end":53,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_53":{"__typename":"Paragraph","id":"1d50de2699dc_53","name":"87bf","type":"PRE","href":null,"layout":null,"metadata":null,"text":"-- Create the `product_reviews_classification` table\nCREATE TABLE product_reviews_classification (\n    -- Unique identifier for each customer\n    customer_id INT NOT NULL PRIMARY KEY,\n    -- The classification type of the review (e.g., Positive, Negative, Neutral)\n    review_type TEXT                     \n);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"sql"},"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_54":{"__typename":"Paragraph","id":"1d50de2699dc_54","name":"acc6","type":"H4","href":null,"layout":null,"metadata":null,"text":"Classify product reviews and insert them into the product_reviews_classification table","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":50,"end":80,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_55":{"__typename":"Paragraph","id":"1d50de2699dc_55","name":"bece","type":"P","href":null,"layout":null,"metadata":null,"text":"To classify the product reviews under positive, negative, or neutral categories, we will use the OpenAI API. We will use the openai_chat_complete function in SQL provided by the pgai extension to perform the data classification task.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":125,"end":145,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_56":{"__typename":"Paragraph","id":"1d50de2699dc_56","name":"9c2a","type":"P","href":null,"layout":null,"metadata":null,"text":"In the SQL command, we will perform three key steps.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_57":{"__typename":"Paragraph","id":"1d50de2699dc_57","name":"4f93","type":"P","href":null,"layout":null,"metadata":null,"text":"Step 1: Format reviews with a structured template","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":49,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_58":{"__typename":"Paragraph","id":"1d50de2699dc_58","name":"0179","type":"P","href":null,"layout":null,"metadata":null,"text":"In the first step, we’ll format the raw reviews into a structured text format. We can do this by using the format function in SQL, which combines the short_review and review fields into a consistent template.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":107,"end":113,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":150,"end":162,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":167,"end":173,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_59":{"__typename":"Paragraph","id":"1d50de2699dc_59","name":"dc22","type":"P","href":null,"layout":null,"metadata":null,"text":"Step 2: Classify reviews using OpenAI and categorize the results","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":64,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_60":{"__typename":"Paragraph","id":"1d50de2699dc_60","name":"afc5","type":"P","href":null,"layout":null,"metadata":null,"text":"Next, we’ll take the formatted reviews and call OpenAI’s API to classify them as either positive, negative, or neutral. If the classification is one of the three expected categories, we will keep it; otherwise, we will default the review to neutral.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":88,"end":96,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":98,"end":106,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":111,"end":118,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":241,"end":248,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_61":{"__typename":"Paragraph","id":"1d50de2699dc_61","name":"1cd9","type":"P","href":null,"layout":null,"metadata":null,"text":"Step 3: Insert classified reviews into the product_reviews_classification table","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":43,"end":73,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":79,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_62":{"__typename":"Paragraph","id":"1d50de2699dc_62","name":"9924","type":"P","href":null,"layout":null,"metadata":null,"text":"Finally, we’ll insert the classified review data into the table product_reviews_classification.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":64,"end":94,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_63":{"__typename":"Paragraph","id":"1d50de2699dc_63","name":"459d","type":"P","href":null,"layout":null,"metadata":null,"text":"Here’s the three-step SQL command that performs the classification task.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_64":{"__typename":"Paragraph","id":"1d50de2699dc_64","name":"f8f3","type":"PRE","href":null,"layout":null,"metadata":null,"text":"-- Step 1: Format reviews with a structured template\nWITH formatted_reviews AS (\n    SELECT\n        customer_id,\n        format(\n            E'%s %s\\nshort_review: %s\\nreview: %s\\n\\t',\n            short_review, review, short_review, review\n        ) AS product_final_review\n    FROM product_reviews\n),\n\n-- Step 2: Classify reviews using OpenAI and categorize the results\nclassified_reviews AS (\n    SELECT\n        customer_id,\n        CASE\n            WHEN result IN ('positive', 'negative', 'neutral') THEN result\n            ELSE 'neutral'\n        END AS review_type\n    FROM (\n        SELECT\n            customer_id,\n            ai.openai_chat_complete(\n                'gpt-4o',\n                jsonb_build_array(\n                    jsonb_build_object(\n                        'role', 'system',\n                        'content', 'You are an assistant that classifies product reviews into positive, negative, or neutral categories. You can only output one of these three categories: positive, negative, or neutral.'\n                    ),\n                    jsonb_build_object(\n                        'role', 'user',\n                        'content',\n                        concat(\n                            E'Classify the following product review into positive, negative, or neutral categories. You cannot output anything except \"positive\", \"negative\", \"neutral\":\\n\\n',\n                            string_agg(x.product_final_review, E'\\n\\n')\n                        )\n                    )\n                )\n            )-\u003E'choices'-\u003E0-\u003E'message'-\u003E\u003E'content' AS result\n        FROM formatted_reviews x\n        GROUP BY customer_id\n    ) subquery\n)\n\n-- Step 3: Insert classified reviews into the `product_reviews_classification` table\nINSERT INTO product_reviews_classification (customer_id, review_type)\nSELECT customer_id, review_type\nFROM classified_reviews\n;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"sql"},"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_65":{"__typename":"Paragraph","id":"1d50de2699dc_65","name":"4982","type":"P","href":null,"layout":null,"metadata":null,"text":"In the openai_chat_complete function, we’ll use the ‘gpt-4o’ model.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":7,"end":27,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_66":{"__typename":"Paragraph","id":"1d50de2699dc_66","name":"174a","type":"P","href":null,"layout":null,"metadata":null,"text":"First, let’s confirm if the product reviews have been classified and inserted into the product_reviews_classification table by running the following command:","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":87,"end":117,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_67":{"__typename":"Paragraph","id":"1d50de2699dc_67","name":"3e11","type":"PRE","href":null,"layout":null,"metadata":null,"text":"SELECT * FROM product_reviews_classification","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"sql"},"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_68":{"__typename":"Paragraph","id":"1d50de2699dc_68","name":"97d9","type":"P","href":null,"layout":null,"metadata":null,"text":"Output:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_69":{"__typename":"Paragraph","id":"1d50de2699dc_69","name":"9008","type":"PRE","href":null,"layout":null,"metadata":null,"text":"customer_id | review_type\n-------------+-------------\n           4 | neutral\n          10 | negative\n           6 | neutral\n           2 | neutral\n           9 | neutral\n           3 | negative\n           5 | positive\n           7 | negative\n           1 | positive\n           8 | positive\n(10 rows)","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"sql"},"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_70":{"__typename":"Paragraph","id":"1d50de2699dc_70","name":"30cd","type":"P","href":null,"layout":null,"metadata":null,"text":"We can verify our results by performing a simple SQL join.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_71":{"__typename":"Paragraph","id":"1d50de2699dc_71","name":"f037","type":"PRE","href":null,"layout":null,"metadata":null,"text":"-- Join the `product_reviews` and `product_reviews_classification` tables\nSELECT\n    pr.customer_id,\n    pr.review,\n    prc.review_type\nFROM\n    product_reviews pr\nJOIN\n    product_reviews_classification prc\nON\n    pr.customer_id = prc.customer_id;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"vbnet"},"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_72":{"__typename":"Paragraph","id":"1d50de2699dc_72","name":"6fe0","type":"P","href":null,"layout":null,"metadata":null,"text":"Output:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_73":{"__typename":"Paragraph","id":"1d50de2699dc_73","name":"7c50","type":"PRE","href":null,"layout":null,"metadata":null,"text":"customer_id |                                review                                | review_type\n-------------+----------------------------------------------------------------------+-------------\n           4 | Not bad, but the screen is a bit small.                              | neutral\n          10 | Disappointing tablet, slow performance and battery drains quickly.   | negative\n           6 | Decent phone, but the screen is not as good as I expected.           | neutral\n           2 | Good laptop, but the battery life could be better.                   | neutral\n           9 | Satisfactory tablet, but the screen resolution could be better.      | neutral\n           3 | This is the worst laptop I have ever used.                           | negative\n           5 | Excellent phone, great camera and battery life.                      | positive\n           7 | Poor phone, battery life is terrible and camera quality is not good. | negative\n           1 | Great laptop, very fast and reliable.                                | positive\n           8 | Awesome tablet, very fast and responsive.                            | positive\n(10 rows)","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"csharp"},"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_74":{"__typename":"Paragraph","id":"1d50de2699dc_74","name":"70e0","type":"P","href":null,"layout":null,"metadata":null,"text":"Great! We have successfully classified the product reviews by type by using the openai_chat_complete function by pgai.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":80,"end":100,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_75":{"__typename":"Paragraph","id":"1d50de2699dc_75","name":"20b7","type":"H3","href":null,"layout":null,"metadata":null,"text":"Automating Data Classification Task Using a Trigger","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_76":{"__typename":"Paragraph","id":"1d50de2699dc_76","name":"6dc7","type":"P","href":null,"layout":null,"metadata":null,"text":"Next, we’ll create a trigger that automates the data classification task. To do this, we first need to encapsulate the SQL command for data classification into a PostgreSQL function, which will be called by the trigger.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_77":{"__typename":"Paragraph","id":"1d50de2699dc_77","name":"e784","type":"H4","href":null,"layout":null,"metadata":null,"text":"Step 1: Encapsulate the data classification task in a function","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_78":{"__typename":"Paragraph","id":"1d50de2699dc_78","name":"1311","type":"PRE","href":null,"layout":null,"metadata":null,"text":"CREATE OR REPLACE FUNCTION classify_and_insert_review() RETURNS TRIGGER AS $$\nBEGIN\n    -- Step 1: Format the new review with a structured template\n    WITH formatted_reviews AS (\n        SELECT\n            NEW.customer_id AS customer_id,\n            format(\n                E'%s %s\\nshort_review: %s\\nreview: %s\\n\\t',\n                NEW.short_review, NEW.review, NEW.short_review, NEW.review\n            ) AS product_final_review\n    ),\n\n    -- Step 2: Classify the review using OpenAI and categorize the results\n    classified_reviews AS (\n        SELECT\n            customer_id,\n            CASE\n                WHEN result IN ('positive', 'negative', 'neutral') THEN result\n                ELSE 'neutral'\n            END AS review_type\n        FROM (\n            SELECT\n                customer_id,\n                ai.openai_chat_complete(\n                    'gpt-4o',\n                    jsonb_build_array(\n                        jsonb_build_object(\n                            'role', 'system',\n                            'content', 'You are an assistant that classifies product reviews into positive, negative, or neutral categories. You can only output one of these three categories: positive, negative, or neutral.'\n                        ),\n                        jsonb_build_object(\n                            'role', 'user',\n                            'content',\n                            format(\n                                E'Classify the following product review into positive, negative, or neutral categories. You cannot output anything except \"positive\", \"negative\", \"neutral\":\\n\\n%s',\n                                product_final_review\n                            )\n                        )\n                    )\n                )-\u003E'choices'-\u003E0-\u003E'message'-\u003E\u003E'content' AS result\n            FROM formatted_reviews\n        ) subquery\n    )\n\n    -- Step 3: Insert classified review into the product_reviews_classification table\n    INSERT INTO product_reviews_classification (customer_id, review_type)\n    SELECT customer_id, review_type FROM classified_reviews;\n\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"vbnet"},"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_79":{"__typename":"Paragraph","id":"1d50de2699dc_79","name":"19f8","type":"P","href":null,"layout":null,"metadata":null,"text":"This will create the function classify_and_insert_review().","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":30,"end":58,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_80":{"__typename":"Paragraph","id":"1d50de2699dc_80","name":"1314","type":"H4","href":null,"layout":null,"metadata":null,"text":"Step 2: Create the trigger","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_81":{"__typename":"Paragraph","id":"1d50de2699dc_81","name":"bfc5","type":"P","href":null,"layout":null,"metadata":null,"text":"Next, let’s create a trigger that will call the above function whenever a new row is inserted into the product_reviews table.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":103,"end":118,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_82":{"__typename":"Paragraph","id":"1d50de2699dc_82","name":"4f4a","type":"PRE","href":null,"layout":null,"metadata":null,"text":"CREATE TRIGGER classify_review_trigger\nAFTER INSERT ON product_reviews\nFOR EACH ROW\nEXECUTE FUNCTION classify_and_insert_review();","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"sql"},"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_83":{"__typename":"Paragraph","id":"1d50de2699dc_83","name":"783e","type":"P","href":null,"layout":null,"metadata":null,"text":"Once this trigger is created, every time a new row is inserted into the product_reviews table, the function classify_and_insert_review() will be executed.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":72,"end":87,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":108,"end":136,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_84":{"__typename":"Paragraph","id":"1d50de2699dc_84","name":"3c7a","type":"H3","href":null,"layout":null,"metadata":null,"text":"Next Steps","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_85":{"__typename":"Paragraph","id":"1d50de2699dc_85","name":"af8f","type":"P","href":null,"layout":null,"metadata":null,"text":"In this tutorial, we performed a simple classification task demonstrating how to use automatic data classification in PostgreSQL using OpenAI and pgai. We used the pgai extension to interact with the OpenAI API and classify product reviews into positive, negative, or neutral categories. We then created a trigger to automate the classification.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_86":{"__typename":"Paragraph","id":"1d50de2699dc_86","name":"d386","type":"P","href":null,"layout":null,"metadata":null,"text":"To start automating the classification of your data using PostgreSQL and OpenAI, check out Timescale Cloud’s AI stack. It includes a complete suite of open-source PostgreSQL extensions — pgvector, pgai, pgai Vectorizer, and pgvectorscale — that will streamline your AI workflows without the overhead of managing multiple systems. Build smarter, more efficient AI solutions today using a free PostgreSQL database on Timescale Cloud.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":91,"end":117,"href":"https:\u002F\u002Fwww.timescale.com\u002Fai?ref=timescale.com","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":387,"end":430,"href":"https:\u002F\u002Fconsole.cloud.timescale.com\u002Fsignup?ref=timescale.com","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:1d50de2699dc_87":{"__typename":"Paragraph","id":"1d50de2699dc_87","name":"7493","type":"P","href":null,"layout":null,"metadata":null,"text":"If you want to build locally, you will find installation instructions for pgai, pgai Vectorizer, and pgvectorscale in the respective repositories (GitHub ⭐s welcome!). Here’s an example tutorial using Llama 3 and Ollama to guide you along the way.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":74,"end":78,"href":"https:\u002F\u002Fgithub.com\u002Ftimescale\u002Fpgai?ref=timescale.com","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":80,"end":95,"href":"https:\u002F\u002Fgithub.com\u002Ftimescale\u002Fpgai\u002Fblob\u002Fmain\u002Fdocs\u002Fvectorizer.md?ref=timescale.com","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":101,"end":114,"href":"https:\u002F\u002Fgithub.com\u002Ftimescale\u002Fpgvectorscale\u002F?ref=timescale.com","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"MediaResource:b6632112df02261143f919782313f388":{"__typename":"MediaResource","id":"b6632112df02261143f919782313f388","iframeSrc":"https:\u002F\u002Fcdn.embedly.com\u002Fwidgets\u002Fmedia.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2F-ikCYKcPoqU%3Ffeature%3Doembed&display_name=YouTube&url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D-ikCYKcPoqU&image=https%3A%2F%2Fi.ytimg.com%2Fvi%2F-ikCYKcPoqU%2Fhqdefault.jpg&type=text%2Fhtml&schema=youtube","iframeHeight":480,"iframeWidth":640,"title":"Local RAG Using Llama 3, Ollama, and PostgreSQL"},"Paragraph:1d50de2699dc_88":{"__typename":"Paragraph","id":"1d50de2699dc_88","name":"fbb7","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":{"__typename":"Iframe","mediaResource":{"__ref":"MediaResource:b6632112df02261143f919782313f388"}},"mixtapeMetadata":null},"Paragraph:1d50de2699dc_89":{"__typename":"Paragraph","id":"1d50de2699dc_89","name":"3a5e","type":"P","href":null,"layout":null,"metadata":null,"text":"This article was written by Team Timescale and originally published here on the Timescale official blog on Nov. 22, 2022.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":68,"end":72,"href":"https:\u002F\u002Fwww.timescale.com\u002Fblog\u002Fhow-to-automate-data-classification-in-postgresql-with-openai","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":0,"end":43,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":44,"end":121,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"CollectionViewerEdge:collectionId:7fa310224bc5-viewerId:lo_ed9e5e2be005":{"__typename":"CollectionViewerEdge","id":"collectionId:7fa310224bc5-viewerId:lo_ed9e5e2be005","isEditor":false,"isMuting":false},"UserViewerEdge:userId:c84b80175451-viewerId:lo_ed9e5e2be005":{"__typename":"UserViewerEdge","id":"userId:c84b80175451-viewerId:lo_ed9e5e2be005","isMuting":false},"ImageMetadata:1*gOEnwizcgWX1HSdbJslc9A.png":{"__typename":"ImageMetadata","id":"1*gOEnwizcgWX1HSdbJslc9A.png","originalWidth":1919,"originalHeight":703},"PostViewerEdge:postId:ff14f9066de9-viewerId:lo_ed9e5e2be005":{"__typename":"PostViewerEdge","shouldIndexPostForExternalSearch":true,"id":"postId:ff14f9066de9-viewerId:lo_ed9e5e2be005"},"Tag:tutorials":{"__typename":"Tag","id":"tutorials","displayTitle":"Tutorials","normalizedTagSlug":"tutorial"},"Tag:postgres":{"__typename":"Tag","id":"postgres","displayTitle":"Postgres","normalizedTagSlug":"postgres"},"Tag:data-science":{"__typename":"Tag","id":"data-science","displayTitle":"Data Science","normalizedTagSlug":"data-science"},"Tag:programming":{"__typename":"Tag","id":"programming","displayTitle":"Programming","normalizedTagSlug":"programming"},"Tag:timescale":{"__typename":"Tag","id":"timescale","displayTitle":"Timescale","normalizedTagSlug":"timescale"},"ImageMetadata:":{"__typename":"ImageMetadata","id":""}}</script><script>window.__MIDDLEWARE_STATE__={"session":{"xsrf":""},"cache":{"cacheStatus":"MISS"}}</script><script src="https://cdn-client.medium.com/lite/static/js/manifest.a9746fa6.js"></script><script src="https://cdn-client.medium.com/lite/static/js/9865.1496d74a.js"></script><script src="https://cdn-client.medium.com/lite/static/js/main.f7075ec1.js"></script><script src="https://cdn-client.medium.com/lite/static/js/instrumentation.d9108df7.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/reporting.ff22a7a5.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/9120.5df29668.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5049.d1ead72d.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/4436.36c1a067.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6618.db187378.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2707.a4e221ac.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/9977.933c1c9a.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/8599.73cb8339.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5250.0e056565.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/8346.be5bef41.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2648.26563adf.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/8393.826a25fb.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/4863.c36d9f71.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6589.033bea7a.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5642.fa10157c.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6546.0da5aa17.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6834.8aa8d357.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/4492.3e85e9f5.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/839.1c286b32.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/3259.1779fbde.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/7975.60bcefe8.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/7394.edd53d56.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5794.9e8ff5dd.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/8204.d36bf1b6.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/4391.59acaed3.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/PostPage.MainContent.c747fa0a.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/8414.6565ad5f.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/3974.8d3e0217.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2527.acc94d39.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/PostResponsesContent.f8aff1b9.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/responses.editor.5a11f4da.chunk.js"></script><script>window.main();</script><script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'903dadb9fa14c05e',t:'MTczNzE5MzgwNC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body></html>