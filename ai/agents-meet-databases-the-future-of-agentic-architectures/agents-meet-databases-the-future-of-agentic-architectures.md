<!--
title: 智能体邂逅数据库：Agentic架构的未来
cover: https://cdn.thenewstack.io/media/2025/08/ac47183f-digital.jpg
summary: 文章探讨了AI智能体与数据库交互的两种主要途径：使用MCP服务器进行标准化集成和构建自定义集成。强调了准确性、安全性和性能在智能体架构中的重要性，并指出选择合适的数据库对于智能体的未来至关重要。
-->

文章探讨了AI智能体与数据库交互的两种主要途径：使用MCP服务器进行标准化集成和构建自定义集成。强调了准确性、安全性和性能在智能体架构中的重要性，并指出选择合适的数据库对于智能体的未来至关重要。

> 译自：[Agents Meet Databases: The Future of Agentic Architectures](https://thenewstack.io/agents-meet-databases-the-future-of-agentic-architectures/)
> 
> 作者：Thibaut Gourdel

NVIDIA 首席执行官 Jensen Huang 将 2025 年誉为“智能体的元年”，OpenAI 首席产品官 Kevin Weil 也表达了类似观点，AI 智能体正日益受到各行业组织的关注。这些自主系统通常需要与数据库交互，因为世界上大部分有价值的数据都存储在数据库中。

根据 IDC 的《Data Age 2025》报告，到 2025 年，企业将管理全球近 60% 的数据，其中大部分数据都以数据库的形式组织。因此，数据库将成为智能体架构的核心，智能体部署的成功将取决于它们与数据库连接和交互的程度。

[模型上下文协议（MCP）](https://thenewstack.io/model-context-protocol-a-primer-for-the-developers/) 由 Anthropic 公司最初开发，现已迅速普及，成为将工具和数据连接到 [智能体系统](https://thenewstack.io/agentic-ai-tools-for-building-and-managing-agentic-systems/) 的标准化方法，为智能体与数据库的互操作性提供了一种新途径。但这也给 AI 开发者带来了关键问题：涉及数据库的智能体架构实际上是什么样的？构建时应该考虑哪些因素？

## 智能体快速概览

智能体是基于 [大型语言模型（LLM）](https://thenewstack.io/what-is-a-large-language-model/) 的系统，可以访问各种工具——这些工具是它们可以用来执行超出自身原生能力的任务的功能或资源。智能体的定义在于能够自主决定何时以及如何使用这些工具，无论是独立使用、在结构化工作流程中使用，还是在人工参与的情况下使用。

[![智能体的核心组件：感知、规划、工具和记忆。](https://cdn.thenewstack.io/media/2025/08/dc7cc142-image1-1024x371.png)](https://cdn.thenewstack.io/media/2025/08/dc7cc142-image1-1024x371.png)

*智能体的核心组件：感知、规划、工具和记忆。*

赋予智能体直接查询和交互数据库数据的能力，可以实现一系列强大的用例。例如，根据可用的集合和模式生成应用程序代码，或检索最新的客户信息以解决支持问题。

这引入了几个架构设计决策，以确保性能、可扩展性和安全性。特别是，数据库查询工具的公开方式起着至关重要的作用。在向 [AI 智能体](https://thenewstack.io/ai-agents-a-comprehensive-introduction-for-developers/) 提供数据库查询功能时，主要有两种途径：使用带有 MCP 的标准化工具，或构建针对特定需求量身定制的自定义集成。

## 路径 1：使用 MCP 服务器进行标准化集成

MCP 服务器提供了一种即插即用的方法，用于将智能体与数据库集成。[MongoDB MCP 服务器](https://www.mongodb.com/company/blog/announcing-mongodb-mcp-server) 例如，简化了与 MongoDB 数据库的连接，并通过 MCP 查询数据，使各种基于智能体的助手（如 Cursor、Windsurf、Claude Desktop 或任何支持 MCP 的智能体系统）能够轻松地与你的数据交互。

MCP 为智能体提供了一个用于数据库交互的标准化接口。这些服务器可以在本地或远程部署。远程服务器允许多个客户端访问同一个实例，非常适合共享环境。在本地和远程部署之间的选择取决于你的性能、可扩展性和安全需求。特别是，远程部署可能需要额外的考虑因素，例如身份验证机制，以确保安全访问。

[![架构图，显示了与 MongoDB MCP 服务器连接的智能体。](https://cdn.thenewstack.io/media/2025/08/a9215165-image2-1024x462.png)](https://cdn.thenewstack.io/media/2025/08/a9215165-image2-1024x462.png)

架构图，显示了与 MongoDB MCP 服务器连接的智能体。

这种方法的优点是：

* **所有权转移**：使用官方支持的服务器意味着提供商负责持续的支持和更新，使智能体能够访问不断改进的功能，而无需构建和部署这些智能体的团队进行手动代码更新。
* **类似插件的集成**：开箱即用的解决方案是团队原型设计或部署与数据库交互的生产级智能体的最快方式，类似于插件系统。
* **适用于操作型数据库使用**：这种方法非常适合最常见的数据库交互，例如基本的 CRUD 风格的查询和数据库管理操作。

使用预构建的 MCP 服务器的主要权衡是自定义的限制；与构建自定义集成相比，你对工具在底层的工作方式的精确控制较少。虽然 MCP 简化了将预定义工具与智能体集成，但它仍然需要仔细考虑，因为 MCP 本身并不安全（稍后会详细介绍）。

## 路径 2：用于控制和灵活性的自定义集成

对于需要更精细地控制数据库交互的团队，构建自定义实现提供了一条更灵活的途径。像 LangChain 这样的框架简化并加速了这个过程。例如，[MongoDB-LangChain 集成包](https://github.com/langchain-ai/langchain-mongodb) 提供了用于实现 [自然语言查询](https://www.mongodb.com/docs/manual/natural-language-to-mongodb/) 的工具，允许开发人员构建与 MongoDB 交互的 AI 应用程序和智能体。这为数据探索和自主智能体（如客户支持助手）检索数据提供了直观的界面。

这个工具包是可定制和可扩展的。构建智能体的开发人员可以精确地定义哪些数据库操作暴露给智能体，包括模式检查、查询生成、验证或更复杂的场景，并专门设计如何调用这些工具。

这种方法的主要优点是：

* **完全控制和所有权**：你可以完全控制工具的行为以及智能体可以执行的确切数据库操作。
* **支持高级用例**：这种方法允许支持标准预构建工具可能无法涵盖的高级和特定领域的用例。
* **自定义优化**：自定义实现可以与内部数据策略和特定业务逻辑紧密结合，因此可以针对你的需求进行优化。

然而，自定义开发通常会带来一些权衡，比如更高的开发成本和对集成的完全所有权责任。这条路径非常适合为独特的工作流程量身定制智能体的团队，智能体是核心产品，或者合规性、隐私或性能要求超过了标准解决方案可以支持的范围。

## 准确性、安全性和性能注意事项

无论是通过 MCP 还是自定义工具，授予智能体直接数据库访问权限都会带来重大的准确性、安全性和性能挑战。随着这些技术的发展，实施预防措施并遵守最佳实践对于可靠且可扩展的智能体操作至关重要。

### 准确性：确保可靠的查询生成

查询准确性在很大程度上取决于 LLM 的能力和所提供的模式或数据样本的质量。模糊或不完整的元数据不可避免地会导致不正确或次优的查询。在实现智能体的文本到查询系统时，务必强制执行输入/输出验证，实施严格的测试，并为复杂、敏感的操作建立护栏或人工审查。

### 安全性：维护保护和护栏

AI 智能体直接访问数据库会带来前所未有的隐私和数据治理挑战。由于 LLM 的固有行为，MCP 带来了新的安全威胁，例如提示注入和工具中毒。虽然 MCP 相关的威胁和风险缓解措施相对较新，但包括 [Red Hat](https://www.redhat.com/en/blog/model-context-protocol-mcp-understanding-security-risks-and-controls) 和 [Writer](https://writer.com/engineering/mcp-security-considerations/) 在内的多个组织已经对其进行了研究和记录。应强制执行严格的护栏，以降低恶意活动和敏感数据泄露的风险。

作为一般的最佳实践，智能体必须在严格的最小权限原则下运行，使用仅授予其特定任务权限的角色和策略。

另一个关键问题是当智能体访问数据时，与 LLM 提供商共享敏感信息。组织需要对哪些信息（例如，数据库名称、集合名称、数据样本）到达 LLM 进行架构控制，并能够完全禁用它。

为了解决这些安全问题，分层访问控制模型至关重要。

* **上游**：精细的角色访问控制确保智能体仅与授权的服务和数据交互，符合最小权限原则。
* **下游**：可以应用额外的限制来限制功能或 [强制执行只读访问](https://github.com/mongodb-js/mongodb-mcp-server?tab=readme-ov-file#configuration)。这些控制降低了风险，并确保对智能体与数据库的交互进行适当的治理。

### 性能：管理不可预测的智能体工作负载

LLM 的非确定性本质使得智能体工作负载模式本质上是不可预测的。智能体可以频繁地与数据库交互，这可能会严重影响性能，从而产生关键的操作挑战。在这种情况下，选择一个在保持其主要作用的同时允许智能体有效扩展的数据库至关重要。

将智能体工作负载与其他数据库操作隔离提供了两个关键优势：首先，它确保只有指定的实例处理智能体工作负载，从而在保持生产性能的同时实现灵活的智能体可扩展性。其次，它允许在这些实例上进行定制配置，例如将它们设置为只读模式，以针对特定用例进行优化。

对于 MongoDB 而言，这转化为使用 [副本集](https://www.mongodb.com/docs/manual/core/workload-isolation/)，它支持独立扩展读取和写入操作。此外，[自动扩展](https://www.mongodb.com/docs/atlas/cluster-autoscaling/) 以及 [专用、优化的搜索节点](https://www.mongodb.com/company/blog/product-release-announcements/search-nodes-now-public-preview-performance-scale-dedicated-infrastructure) 进一步增强了智能体在搜索密集型任务中的性能。将工作负载隔离与自动扩展相结合对于部署可靠且可扩展的智能体至关重要。

## 智能体的未来取决于数据库

随着 AI 智能体不断发展成为强大的自主系统，它们直接与企业数据交互的能力变得至关重要。由于数据库存储了世界上大部分信息，因此启用访问不再是可选的。MCP 提供了一种标准化的、快速的智能体与数据库集成路径，非常适合常见的用例。对于更深入的自定义，构建定制的集成提供了精细的控制和可扩展性。

无论选择哪种路径，开发人员都必须优先考虑准确性，强制执行严格的安全控制并确保可扩展性。在这个智能体的新时代，真正的竞争优势在于选择一个符合这些要求的现代且灵活的数据库。