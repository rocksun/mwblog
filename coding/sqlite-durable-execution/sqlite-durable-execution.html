<!DOCTYPE html><html itemscope="" lang="en-us" itemtype="http://schema.org/WebPage"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5"><meta name="theme-name" content="hugoplate"><link rel="shortcut icon" href="https://threedots.tech/images/favicon_hu0d95454e65643b4b3a38fde8f31a0ef0_20324_96x0_resize_lanczos_3.png" type="image/x-icon"><link rel="icon" href="https://threedots.tech/images/favicon_hu0d95454e65643b4b3a38fde8f31a0ef0_20324_96x0_resize_lanczos_3.png" type="image/x-icon"><link rel="icon" type="image/png" sizes="48x48" href="https://threedots.tech/images/favicon_hu0d95454e65643b4b3a38fde8f31a0ef0_20324_48x0_resize_lanczos_3.png"><link rel="icon" type="image/png" sizes="96x96" href="https://threedots.tech/images/favicon_hu0d95454e65643b4b3a38fde8f31a0ef0_20324_96x0_resize_lanczos_3.png"><link rel="apple-touch-icon" sizes="144x144" href="https://threedots.tech/images/favicon_hu0d95454e65643b4b3a38fde8f31a0ef0_20324_144x0_resize_lanczos_3.png"><link rel="manifest" href="https://threedots.tech/manifest.webmanifest"><meta name="msapplication-TileColor" content="#ddd"><meta name="theme-color" content="#ffffff"><title>Durable Background Execution with Go and SQLite | Three Dots Labs blog</title>
<meta name="author" content="Dima Kotik"><meta name="description" content="A DNS outage is like a flash flood. It hits you and disappears as if it were never there. “It was probably the DNS” became a meme. But, half the time, we do not know the exact cause. The outage is seldom long enough to diagnose, sequester, replicate, simulate, and test the failure conditions. How can we be certain that this type of failure will not compromise our systems again in the future?"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@ThreeDotsLabs"><meta name="twitter:title" content="Durable Background Execution with Go and SQLite"><meta name="twitter:description" content="A DNS outage is like a flash flood. It hits you and disappears as if it were never there. “It was probably the DNS” became a meme. But, half the time, we do not know the exact cause. The outage is seldom long enough to diagnose, sequester, replicate, simulate, and test the failure conditions. How can we be certain that this type of failure will not compromise our systems again in the future?"><meta name="twitter:image" content="https://threedots.tech/images/covers/sqlite-durable-execution-social.png"><meta name="twitter:creator" content="@dkotik"><meta property="og:type" content="article"><meta property="og:title" content="Durable Background Execution with Go and SQLite"><meta property="og:description" content="A DNS outage is like a flash flood. It hits you and disappears as if it were never there. “It was probably the DNS” became a meme. But, half the time, we do not know the exact cause. The outage is seldom long enough to diagnose, sequester, replicate, simulate, and test the failure conditions. How can we be certain that this type of failure will not compromise our systems again in the future?"><meta property="og:url" content="https://threedots.tech/post/sqlite-durable-execution/"><meta property="og:image" content="https://threedots.tech/images/covers/sqlite-durable-execution-social.png"><link rel="canonical" href="https://threedots.tech/post/sqlite-durable-execution/"><link rel="alternative" href="https://threedots.tech/index.xml" title="Learn Building Modern Go applications" type="application/atom+xml"><meta name="renderer" content="webkit"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta http-equiv="Cache-Control" content="no-transform"><meta name="robots" content="index,follow"><meta name="referrer" content="origin-when-cross-origin"><meta name="google-site-verification" content="_moDmnnBNVLBN1rzNxyGUGdPHE20YgbmrtzLIbxaWFc"><script>let indexURL="https://threedots.tech/searchindex.json",includeSectionsInSearch=["post","learn","episode"],no_results_for="No results for",empty_search_results_placeholder="Type something to search.."</script><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="preconnect" href="https://use.fontawesome.com" crossorigin=""><link rel="preconnect" href="//cdnjs.cloudflare.com"><link rel="preconnect" href="//www.googletagmanager.com"><link rel="preconnect" href="//www.google-analytics.com"><link rel="dns-prefetch" href="https://use.fontawesome.com"><link rel="dns-prefetch" href="//ajax.googleapis.com"><link rel="dns-prefetch" href="//cdnjs.cloudflare.com"><link rel="dns-prefetch" href="//www.googletagmanager.com"><link rel="dns-prefetch" href="//www.google-analytics.com"><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="dns-prefetch" href="//connect.facebook.net"><link rel="dns-prefetch" href="//platform.linkedin.com"><link rel="dns-prefetch" href="//platform.twitter.com"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;600&family=Quicksand:wght@700&family=Source+Serif+Pro:ital,wght@0,400;0,600;1,400&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script><link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;600&amp;family=Quicksand:wght@700&amp;family=Source+Serif+Pro:ital,wght@0,400;0,600;1,400&amp;display=swap" type="text/css" rel="stylesheet"><link href="/css/style.min.7450f787205fbd2b3c279553109efa16ce0ec2405b4f4c5566284ed59ab3f601.css" integrity="sha256-dFD3hyBfvSs8J5VTEJ76Fs4OwkBbT0xVZihO1Zqz9gE=" rel="stylesheet"><link defer="" async="" rel="stylesheet" href="/css/style-lazy.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css" integrity="sha256-47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=" media="print" onload="this.media=&quot;all&quot;,this.onload=null"></head><body><script defer="" data-domain="threedots.tech" src="https://threedots.tech/js/pm.js"></script><script>window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)}</script><script>let postReadingTimeMinutes=10,wordCount=2109</script><div class="suspension"><span title="Go to top" class="to-top is-hide"><svg class="arrow-up icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6.0-33.9L207 39c9.4-9.4 24.6-9.4 33.9.0l194.3 194.3c9.4 9.4 9.4 24.6.0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3.0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"></path></svg></span><a title="Go to comments" class="to-comment" href="#disqus_thread"><svg class="comment icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 32C114.6 32 0 125.1.0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3.0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4.0 256-93.1 256-208S397.4 32 256 32z"></path></svg></a></div><header class="header sticky top-0 z-30"><nav class="navbar container"><div class="order-0"><a class="navbar-brand block" href="https://threedots.tech/"><img fetchpriority="high" loading="eager" decoding="async" class="img logo-light" width="200" height="31" src="https://threedots.tech/images/logo.svg" alt="Three Dots Labs" onerror="this.onerror=null,this.src=&quot;&quot;">
<img fetchpriority="high" loading="eager" decoding="async" class="img logo-dark" width="200" height="31" src="https://threedots.tech/images/logo-darkmode.svg" alt="Three Dots Labs" onerror="this.onerror=null,this.src=&quot;&quot;"></a></div><input id="nav-toggle" type="checkbox" class="hidden">
<label for="nav-toggle" class="order-3 cursor-pointer flex items-center lg:hidden text-dark dark:text-white lg:order-1"><svg id="show-button" class="h-6 fill-current block" viewBox="0 0 20 20"><title>Menu Open</title><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0V0z"></path></svg><svg id="hide-button" class="h-6 fill-current hidden" viewBox="0 0 20 20"><title>Menu Close</title><polygon points="11 9 22 9 22 11 11 11 11 22 9 22 9 11 -2 11 -2 9 9 9 9 -2 11 -2" transform="rotate(45 10 10)"></polygon></svg></label><ul id="nav-menu" class="navbar-nav order-3 hidden lg:flex w-full pb-6 lg:order-1 lg:w-auto lg:space-x-2 lg:pb-0 xl:space-x-8"><li class="nav-item"><a class="nav-link" href="https://threedots.tech/">Home</a></li><li class="nav-item"><a class="nav-link" href="https://threedots.tech/post/">Blog</a></li><li class="nav-item"><a class="nav-link" href="https://threedots.tech/newsletter/">Newsletter</a></li><li class="nav-item"><a class="nav-link" href="https://threedots.tech/no-silver-bullet/">Live &amp; Podcast</a></li><li class="nav-item"><a class="nav-link" href="https://threedots.tech/learn/">Training &amp; Courses</a></li><li class="mt-4 inline-block lg:hidden"><a class="btn btn-primary btn-sm" href="https://threedots.tech/go-with-the-domain/?utm_source=topbar"><span class="pr-2"><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M249.6 471.5c10.8 3.8 22.4-4.1 22.4-15.5V78.6c0-4.2-1.6-8.4-5-11C247.4 52 202.4 32 144 32 93.5 32 46.3 45.3 18.1 56.1 6.8 60.5.0 71.7.0 83.8V454.1c0 11.9 12.8 20.2 24.1 16.5C55.6 460.1 105.5 448 144 448c33.9.0 79 14 105.6 23.5zm76.8.0C353 462 398.1 448 432 448c38.5.0 88.4 12.1 119.9 22.6 11.3 3.8 24.1-4.6 24.1-16.5V83.8c0-12.1-6.8-23.3-18.1-27.6C529.7 45.3 482.5 32 432 32c-58.4.0-103.4 20-123 35.6-3.3 2.6-5 6.8-5 11V456c0 11.4 11.7 19.3 22.4 15.5z"></path></svg></span>Get our e-book</a></li></ul><div class="order-1 ml-auto flex items-center md:order-2 lg:ml-0"><button aria-label="search" class="border-border text-dark hover:text-primary dark:border-darkmode-border mr-5 inline-block border-r pr-5 text-xl dark:text-white dark:hover:text-darkmode-primary" data-target="search-modal"><svg class="search icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg></button><div class="theme-switcher mr-5"><input id="theme-switcher" data-theme-switcher="" type="checkbox">
<label for="theme-switcher"><span class="sr-only">theme switcher</span>
<span><svg class="absolute left-[4px] top-[4px] z-10 opacity-100 dark:opacity-0" viewBox="0 0 56 56" fill="#fff" height="16" width="16"><path d="M30 4.6c0-1-.9-2-2-2a2 2 0 00-2 2v5c0 1 .9 2 2 2s2-1 2-2zm9.6 9a2 2 0 000 2.8c.8.8 2 .8 2.9.0L46 13a2 2 0 000-2.9 2 2 0 00-3 0zm-26 2.8c.7.8 2 .8 2.8.0.8-.7.8-2 0-2.9L13 10c-.7-.7-2-.8-2.9.0-.7.8-.7 2.1.0 3zM28 16A12 12 0 0016 28a12 12 0 0012 12 12 12 0 0012-12A12 12 0 0028 16zm23.3 14c1.1.0 2-.9 2-2s-.9-2-2-2h-4.9a2 2 0 00-2 2c0 1.1 1 2 2 2zM4.7 26a2 2 0 00-2 2c0 1.1.9 2 2 2h4.9c1 0 2-.9 2-2s-1-2-2-2zm37.8 13.6a2 2 0 00-3 0 2 2 0 000 2.9l3.6 3.5a2 2 0 002.9.0c.8-.8.8-2.1.0-3zM10 43.1a2 2 0 000 2.9c.8.7 2.1.8 3 0l3.4-3.5c.8-.8.8-2.1.0-2.9s-2-.8-2.9.0zm20 3.4c0-1.1-.9-2-2-2a2 2 0 00-2 2v4.9c0 1 .9 2 2 2s2-1 2-2z"></path></svg><svg class="absolute left-[4px] top-[4px] z-10 opacity-0 dark:opacity-100" viewBox="0 0 24 24" fill="none" height="16" width="16"><path fill="#000" fill-rule="evenodd" clip-rule="evenodd" d="M8.2 2.2c1-.4 2 .6 1.6 1.5-1 3-.4 6.4 1.8 8.7a8.4 8.4.0 008.7 1.8c1-.3 2 .5 1.5 1.5v.1A10.3 10.3.0 0112.4 22 10.3 10.3.0 013.2 6.7c1-2 2.9-3.5 4.9-4.4z"></path></svg></span></label></div><script>var darkMode=!1,themeSwitch;localStorage.getItem("theme")==="dark"?darkMode=!0:localStorage.getItem("theme")==="light"&&(darkMode=!1),darkMode&&document.documentElement.classList.toggle("dark"),themeSwitch=document.querySelectorAll("[data-theme-switcher]"),document.addEventListener("DOMContentLoaded",()=>{[].forEach.call(themeSwitch,function(e){e.checked=!!darkMode,e.addEventListener("click",()=>{document.documentElement.classList.toggle("dark"),localStorage.setItem("theme",document.documentElement.classList.contains("dark")?"dark":"light")})})})</script><a href="https://threedots.tech/go-with-the-domain/?utm_source=topbar" class="btn btn-primary hidden lg:inline-block"><span class="pr-2"><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M249.6 471.5c10.8 3.8 22.4-4.1 22.4-15.5V78.6c0-4.2-1.6-8.4-5-11C247.4 52 202.4 32 144 32 93.5 32 46.3 45.3 18.1 56.1 6.8 60.5.0 71.7.0 83.8V454.1c0 11.9 12.8 20.2 24.1 16.5C55.6 460.1 105.5 448 144 448c33.9.0 79 14 105.6 23.5zm76.8.0C353 462 398.1 448 432 448c38.5.0 88.4 12.1 119.9 22.6 11.3 3.8 24.1-4.6 24.1-16.5V83.8c0-12.1-6.8-23.3-18.1-27.6C529.7 45.3 482.5 32 432 32c-58.4.0-103.4 20-123 35.6-3.3 2.6-5 6.8-5 11V456c0 11.4 11.7 19.3 22.4 15.5z"></path></svg></span>Get our e-book</a></div></nav></header><div class="search-modal" aria-hidden="true" style="--color-primary:#121212"><div data-target="close-search-modal" class="search-modal-overlay"></div><div class="search-wrapper" data-image="true" data-description="true" data-tags="true" data-categories="true"><div class="search-wrapper-header"><label for="search-modal-input" style="margin-top:-1px"><span class="sr-only">search icon</span>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" height="18" width="18" class="search-icon" data-type="search" style="display: initial;"><path fill="currentcolor" d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8.0 45.3s-32.8 12.5-45.3.0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9.0 208S93.1.0 208 0 416 93.1 416 208zM208 352a144 144 0 100-288 144 144 0 100 288z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" height="18" width="18" class="search-reset" data-type="reset" style="display: none;"><path fill="currentcolor" d="M256 512A256 256 0 10256 0a256 256 0 100 512zM175 175c9.4-9.4 24.6-9.4 33.9.0l47 47 47-47c9.4-9.4 24.6-9.4 33.9.0s9.4 24.6.0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6.0 33.9s-24.6 9.4-33.9.0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9.0s-9.4-24.6.0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6.0-33.9z"></path></svg></label><input id="search-modal-input" type="text" data-search-input="" autocomplete="off" aria-label="Search" placeholder="Search Post ..."></div><div class="search-wrapper-body"><div class="search-result" data-search-result=""></div><span class="search-result-empty">Type something to search..</span></div><div class="search-wrapper-footer"><span><kbd><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentcolor" viewBox="0 0 16 16"><path d="M3.204 11h9.592L8 5.519 3.204 11zm-.753-.659 4.796-5.48a1 1 0 011.506.0l4.796 5.48c.566.647.106 1.659-.753 1.659H3.204a1 1 0 01-.753-1.659z"></path></svg></kbd><kbd><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentcolor" style="margin-top:1px" viewBox="0 0 16 16"><path d="M3.204 5h9.592L8 10.481 3.204 5zm-.753.659 4.796 5.48a1 1 0 001.506.0l4.796-5.48c.566-.647.106-1.659-.753-1.659H3.204a1 1 0 00-.753 1.659z"></path></svg></kbd>to navigate
</span><span><kbd><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentcolor" style="display:inline-block" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M14.5 1.5a.5.5.0 01.5.5v4.8a2.5 2.5.0 01-2.5 2.5H2.707l3.347 3.346a.5.5.0 01-.708.708l-4.2-4.2a.5.5.0 010-.708l4-4a.5.5.0 11.708.708L2.707 8.3H12.5A1.5 1.5.0 0014 6.8V2a.5.5.0 01.5-.5z"></path></svg></kbd>to select
</span><span class="search-result-info"></span>
<span data-target="close-search-modal"><kbd>ESC</kbd> to close</span></div></div></div><main><section class="section pt-7"><div class="container"><div class="row justify-center"><article class="lg:col-7"><h1 class="h2 mb-2">Durable Background Execution with Go and SQLite</h1><ul class="mb-4"><li class="inline-block mb-5"></li><li class="mr-4 inline-block"><div class="flex flex-row"><div class="shrink-0"><div class="mr-4"><a href="https://github.com/dkotik" target="_blank"><img src="https://threedots.tech/img/avatars/dima_hu557279180f2a046af7d3632dc8c6e1b0_23237_100x100_resize_q80_h2_lanczos.webp" loading="lazy" srcset="https://threedots.tech/img/avatars/dima_hu557279180f2a046af7d3632dc8c6e1b0_23237_100x100_resize_q80_h2_lanczos.webp 1x, https://threedots.tech/img/avatars/dima_hu557279180f2a046af7d3632dc8c6e1b0_23237_200x200_resize_q80_h2_lanczos.webp 2x, https://threedots.tech/img/avatars/dima_hu557279180f2a046af7d3632dc8c6e1b0_23237_300x300_resize_q80_h2_lanczos.webp 3x, https://threedots.tech/img/avatars/dima_hu557279180f2a046af7d3632dc8c6e1b0_23237_90x90_resize_q80_h2_lanczos.webp 90w" decoding="async" alt="Avatar" class="rounded-full inline img" width="100" height="100" onerror="this.onerror=&quot;null&quot;,this.src=&quot;/img/avatars/dima_hu557279180f2a046af7d3632dc8c6e1b0_23237_100x100_resize_q80_lanczos.jpeg&quot;"></a></div></div><div><p class="author-meta"><a href="https://twitter.com/dkotik" target="_blank" class="author-name h4"><b>Dima Kotik</b></a><br><ps class="author-meta-bio">Durable execution specialist in Go.</ps></p></div></div></li></ul><div class="content mb-10"><p><strong>A DNS outage is like a flash flood. It hits you and disappears as if it were never there.</strong> “It was probably the DNS” became a meme. But, half the time, we do not know the exact cause. The outage is seldom long enough to diagnose, sequester, replicate, simulate, and test the failure conditions. How can we be certain that this type of failure will not compromise our systems again in the future? The DNS can fail spectacularly in a variety of ways.</p><p>A better way to address intermittent failures, such as DNS outages, is to accept them as unavoidable occasional execution disruptions. We might not be able to address each of them exhaustively, but we can design our system to handle almost any interruption of its internal logic. <strong>We can harden the system against the disruptions to attain <em>durable execution</em>.</strong></p><h2 id="what-is-durable-execution">What is Durable Execution?</h2><p><em>Durable execution</em> is a guarantee that a program output is correct regardless of failures anywhere in the execution process.</p><p>Competitive business applications require <em>durable execution</em>. When it is absent, an employee will spend an hour or two fixing each incorrect output when it is detected. In large business applications, incorrect output often goes undetected for weeks, resulting in expensive chaos around holidays.</p><p>Are we talking about bugs? No. Bugs are the program. Some intermittent bugs erode durability, but the durability loss is most often a result of an interruption of the execution process. The interruption can be caused by a network outage, service failure, security breach, or a delinquent update. All of those reasons are common. <em>Durable execution</em> does not care what caused it. It is a promise to recover from almost any failure or combination of failures and deliver the correct output.</p><p>Event-Driven Architecture (EDA) is the industry best practice for supporting <em>durable execution</em>. However, most EDA production systems are not provably durable. What happened?</p><div class="notice note"><div class="notice-head"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 9v5m0 5c-4.97056.0-9-4.0294-9-9 0-4.97056 4.02944-9 9-9 4.9706.0 9 4.02944 9 9 0 4.9706-4.0294 9-9 9zM10.0498 6V6.1L9.9502 6.1002V6H10.0498z" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><p>Note</p></div><div class="notice-body"><p></p><p>In the second guest post on our blog, we welcome Dima Kotik, who contributed the SQLite Pub/Sub backend to Watermill.
Please give Dima a warm welcome! 🎉</p><p><em>Miłosz &amp; Robert</em></p><p></p></div></div><h2 id="durable-execution-requires-immediate-input-storage">Durable Execution Requires Immediate Input Storage</h2><p>There is a difference between a guarantee and a wish. A guarantee has some proof, a history of recovery from a variety of system crashes. It begins with emulating crash conditions in integration tests. After writing many such tests, you will realize a simple but profound principle: <strong><em>durable execution</em> begins with writing execution state into storage</strong>. There is no other way to proceed, because anything present in random-access memory or ephemeral storage is liable to disappear if the system crashes.</p><p>The first step of a durable system is to stash its input <strong>before any processing takes place</strong> after parsing and validation. Security is more important than durability, so input validation takes precedence.</p><h2 id="stash-the-input-after-parsing-and-validation">Stash the Input After Parsing and Validation</h2><p>Wait, what? I have to commit all the system input immediately into storage? Yes. Is that even possible? Not all at once, but this is not as daunting a task as one might imagine.</p><p>If you are using event-driven architecture with an publisher/subscriber management library like <a href="https://watermill.io/" target="_blank">Watermill</a>, you are already halfway there. Watermill is one of the most popular event buses in the Go ecosystem.</p><p>Watermill is an unusually flexible library in that it can bridge events from a large number of different backends. Your core business logic may stream events to a PostgreSQL database, and your input may initially be stored in a SQLite databases of your edge nodes to achieve durability without sacrificing performance. Watermill can link the two to tango together seamlessly.</p><p>Unfortunately, many business applications that utilize Watermill continue to use the Go channel ephemeral backend here and there despite the documentation urging developers not to do it. This backend is a basic in-memory implementation based on Go channels intended for testing purposes. The events are queued into an asynchronous channel. They will disappear when the system crashes. They will clog up the server with a long queue if the execution process slows down for any reason. They will compete for resources with a critical server process.</p><p>In other words, do not write input into random-access memory. You are asking for trouble.</p><p>There is an easy persistent drop-in replacement for an ephemeral backend. It is not a silver bullet, but it is an easy first step towards durable computing. Try the new <a href="https://watermill.io/pubsubs/sqlite/" target="_blank">Watermill SQLite backend</a>. It does not require setting up any additional infrastructure, and it is more performant and reliable than any other storage method because it does not need a network connection or a custom transport protocol. It writes to a file on a disk. <strong>It does not require CGO</strong>.</p><p>Suppose we are processing book orders, and we would like to store the orders as events in an SQLite database:</p><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">db</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">sql</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="s">"sqlite"</span><span class="p">,</span> <span class="s">"orders.sqlite3?journal_mode=WAL&amp;busy_timeout=1000&amp;cache=shared"</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">defer</span> <span class="nx">db</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">db</span><span class="p">.</span><span class="nf">SetMaxOpenConns</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1">// driver limitation
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">publisher</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">wmsqlitemodernc</span><span class="p">.</span><span class="nf">NewPublisher</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="nx">db</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">wmsqlitemodernc</span><span class="p">.</span><span class="nx">PublisherOptions</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">InitializeSchema</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">msg</span> <span class="o">:=</span> <span class="nx">message</span><span class="p">.</span><span class="nf">NewMessage</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="nx">watermill</span><span class="p">.</span><span class="nf">NewUUID</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// serialized order event
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">[]</span><span class="nb">byte</span><span class="p">(</span><span class="s">`{"order_id": "1", "title": "1984", "customer": "Queen Elizabeth II", "address": "Buckingham Palace"}`</span><span class="p">),</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">publisher</span><span class="p">.</span><span class="nf">Publish</span><span class="p">(</span><span class="s">"book_orders"</span><span class="p">,</span> <span class="nx">msg</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>For cloud instances, ensure that you are writing the SQLite file to a persistent volume, which is mounted explicitly. The root file system is typically ephemeral. You may want to eventually migrate the collected input into your main database after thinking about performance implications.</p><p>The matching subscriber is not any different from normal Watermill usage other than the backend initialization:</p><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">subscriber</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">wmsqlitemodernc</span><span class="p">.</span><span class="nf">NewSubscriber</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="nx">db</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="nx">wmsqlitemodernc</span><span class="p">.</span><span class="nx">SubscriberOptions</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">InitializeSchema</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">messages</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">subscriber</span><span class="p">.</span><span class="nf">Subscribe</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nf">Background</span><span class="p">(),</span> <span class="s">"book_orders"</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="nx">msg</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">messages</span> <span class="p">{</span> <span class="c1">// consume messages from the channel
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nf">processBookOrder</span><span class="p">(</span><span class="nx">db</span><span class="p">,</span> <span class="nx">msg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>The SQLite publisher and subscriber are drop-in replacements. <strong>They can be also used without Watermill router.</strong>
In other words, you can just use low-level <code>Publish</code> and <code>Subscribe</code> methods.</p><p>Full examples are provided in <a href="https://watermill.io/pubsubs/sqlite/" target="_blank">documentation</a>. Nothing else needs to change in your code to achieve this first step towards <em>durable execution</em>: write the input events to persistent storage.</p><p>For complete durability, however, the event handlers for each step of processing the book orders must have two provable qualities:</p><ol><li><strong>Idempotency</strong>: the handler can consume the same event multiple times without generating more than one downstream event.</li><li><strong>Atomicity</strong>: the handler either completes successfully or fails completely. It must never succeed partially.</li></ol><p>The combination of these properties with persistent storage ensures <em>durable execution</em>. When the a step in business logic fails for any reason, it is attempted again from the last safe system state.</p><h2 id="prove-idempotency-with-event-duplication">Prove Idempotency with Event Duplication</h2><p>Idempotent event handlers must not change system state when processing identical events. In other words, any repetition of input any number of times makes no difference to the system. We can achieve this effect by de-duplicating events, but it is best that the program logic itself tolerates repetition.</p><p>First, ensure that the event message is acknowledged only after the all the business logic has been executed successfully:</p><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">processBookOrder</span><span class="p">(</span><span class="nx">db</span> <span class="o">*</span><span class="nx">sql</span><span class="p">.</span><span class="nx">DB</span><span class="p">,</span> <span class="nx">msg</span> <span class="o">*</span><span class="nx">watermill</span><span class="p">.</span><span class="nx">Message</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// use only one database transaction per event handler
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">tx</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">db</span><span class="p">.</span><span class="nf">BeginTx</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nf">Background</span><span class="p">(),</span> <span class="o">&amp;</span><span class="nx">sql</span><span class="p">.</span><span class="nx">TxOptions</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">Isolation</span><span class="p">:</span> <span class="nx">sql</span><span class="p">.</span><span class="nx">LevelReadCommitted</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">defer</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">_</span> <span class="p">=</span> <span class="nx">tx</span><span class="p">.</span><span class="nf">Rollback</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="nx">msg</span><span class="p">.</span><span class="nf">Nack</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">err</span> <span class="p">=</span> <span class="nx">tx</span><span class="p">.</span><span class="nf">Commit</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// acknowledge the message ONLY AFTER successful transaction commit
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">// what happens if the the execution fails here?
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">msg</span><span class="p">.</span><span class="nf">Ack</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">msg</span><span class="p">.</span><span class="nf">Nack</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// process input using the business domain logic
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>What happens if the transaction succeeds but the message acknowledgment fails on line 16? If the handler is idempotent, the event will be reprocessed, but the system state will not change. An easy way to achieve this is to constrain the database table field <code>order_id</code> to be unique. Then, drop the error if it is caused by a unique constraint violation:</p><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Example for SQLite3 "modernc.org/sqlite/lib"
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">liteErr</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:=</span> <span class="nx">err</span><span class="p">.(</span><span class="o">*</span><span class="nx">sqlite</span><span class="p">.</span><span class="nx">Error</span><span class="p">);</span> <span class="nx">ok</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">code</span> <span class="o">:=</span> <span class="nx">liteErr</span><span class="p">.</span><span class="nf">Code</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="nx">code</span> <span class="o">==</span> <span class="nx">lib</span><span class="p">.</span><span class="nx">SQLITE_CONSTRAINT_PRIMARYKEY</span> <span class="o">||</span> <span class="nx">code</span> <span class="o">==</span> <span class="nx">lib</span><span class="p">.</span><span class="nx">SQLITE_CONSTRAINT_UNIQUE</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// duplicate order id is normal behavior
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">// it means that the event was already processed
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">// ignore this error
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Example for PostgreSQL's "github.com/lib/pq" driver
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">const</span>  <span class="nx">UniqueViolationErr</span> <span class="p">=</span> <span class="nx">pq</span><span class="p">.</span><span class="nf">ErrorCode</span><span class="p">(</span><span class="s">"23505"</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">errors</span><span class="p">.</span><span class="nf">Is</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">UniqueViolationErr</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// duplicate order id is normal behavior
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// it means that the event was already processed
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// ignore this error
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></div><p>What if there are multiple SQL table key constraints? The best solution is to have an idempotency test in place. Then, methodically groom the business logic until it tolerates repetition and passes the test. Use <a href="https://watermill.io/docs/middlewares/#duplicator" target="_blank">duplicator</a> handler middleware to clone messages and check that the final program state is the same as running the test without the duplicator.</p><h2 id="prove-atomicity-with-chaos-engineering">Prove Atomicity with Chaos Engineering</h2><p>Once we achieve idempotency, how can we prove atomicity for every step of the business logic process?</p><p>At-least-once atomic execution is theoretically facilitated by Watermill, but there are subtle ways of subverting it. If you rely on low-level primitives, always acknowledge the message <strong>after</strong> all the business logic finishes. And, ensure that business logic is granular enough that <strong>all of it</strong> runs anew in case of an interruption.</p><p>A simple rule to follow is that <strong>all state changes in one event handler must apply within the same database transaction</strong>. If you have two database transactions, you will never achieve <em>durable execution</em>. If you are publishing another event inside the event handler, that event publisher must operate within the same transaction as the event handler. The <a href="https://threedots.tech/post/distributed-transactions-in-go/#the-outbox-pattern" target="_blank">outbox pattern</a> is essential when making any additional changes to the database together with publishing the event.</p><p>How do you prove atomicity with a test? Write a chaos middleware to pair it with the retry middleware for your testing setup:</p><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">ApplyChaos</span><span class="p">(</span><span class="nx">h</span> <span class="nx">message</span><span class="p">.</span><span class="nx">HandlerFunc</span><span class="p">)</span> <span class="nx">message</span><span class="p">.</span><span class="nx">HandlerFunc</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">failNextOperation</span> <span class="o">:=</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="kd">func</span><span class="p">(</span><span class="nx">msg</span> <span class="o">*</span><span class="nx">message</span><span class="p">.</span><span class="nx">Message</span><span class="p">)</span> <span class="p">([]</span><span class="o">*</span><span class="nx">message</span><span class="p">.</span><span class="nx">Message</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">result</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nf">h</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nx">failNextOperation</span> <span class="p">=</span> <span class="p">!</span><span class="nx">failNextOperation</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="nx">failNextOperation</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">errors</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="s">"world chaos cancelled the event handler"</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">result</span><span class="p">,</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>This middleware will break the event handlers half the time. The retry middleware should ensure that the operations complete even with half of the system experiencing outages.</p><p>How do you prove that an event handler is atomic? Write another middleware that pollutes the message context:</p><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">PolluteContextWithChaos</span><span class="p">(</span><span class="nx">h</span> <span class="nx">message</span><span class="p">.</span><span class="nx">HandlerFunc</span><span class="p">)</span> <span class="nx">message</span><span class="p">.</span><span class="nx">HandlerFunc</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="kd">func</span><span class="p">(</span><span class="nx">msg</span> <span class="o">*</span><span class="nx">message</span><span class="p">.</span><span class="nx">Message</span><span class="p">)</span> <span class="p">([]</span><span class="o">*</span><span class="nx">message</span><span class="p">.</span><span class="nx">Message</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">polluted</span><span class="p">,</span> <span class="nx">cancel</span> <span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">WithCancel</span><span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nf">Context</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">        <span class="k">defer</span> <span class="nf">cancel</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="k">go</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="o">&lt;-</span><span class="nx">time</span><span class="p">.</span><span class="nf">After</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Millisecond</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="nf">cancel</span><span class="p">()</span> <span class="c1">// simulate premature cancellation
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">}()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nx">msg</span><span class="p">.</span><span class="nf">SetContext</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nf">h</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>If all your input and output operations are context-aware (they should be - it is best practice), the premature context cancellation will simulate an execution interruption inside the event handler. This simple example cancels after one millisecond.</p><p>Simulate a variety of pseudo-random cancellation patterns. Never use true random, because it will make the tests brittle. Check that the output is the same, and you are well on your way to a durable system.</p><h2 id="conclusion">Conclusion</h2><p>Business applications need <em>durable execution</em>. Programs that have an innate ability to recover from almost any error or crash are a joy to work with. Durability can be achieved with proper system design and a rigorous testing discipline.</p><p>You can see how <em>durable execution</em> can get complicated quickly, but the first step is the easiest. <strong>Write the input event to a persistent volume.</strong> It will give you some durability right away. You can work out the rest of it later. <a href="https://watermill.io/pubsubs/sqlite/" target="_blank">SQLite Pub/Sub backend</a> for Watermill is a great choice to try this. This new driver works <strong>without CGO</strong> and, like Watermill, is free and open source.</p><p>Cloud providers have begun to offer distributed SQLite clusters for use cases that offer some durability and the fastest possible read speeds. Those projects are a strong indicator that SQLite-powered storage is a viable and increasingly desirable option for <em>durable execution</em>:</p><ol><li><a href="https://fly.io/docs/litefs/" target="_blank">LiteFS</a> keeps all the classic SQLite conventions like the single-writer constraint. This gives good reasons to anticipate that in the future <em>durable execution</em> could also become fast even with global transactions.</li><li><a href="https://turso.tech/" target="_blank">Turso</a> comfortably runs on edge or mobile devices with poor connectivity.</li><li>Cloudflare <a href="https://blog.cloudflare.com/sqlite-in-durable-objects/" target="_blank">durable objects</a> are an SQLite persistence companion to Cloudflare Workers.</li></ol><p>There are two disadvantages to those commerical offerings compared to Watermill over SQLite Pub/Sub: (1) the vendor lock-in and (2) some difficulties in binding database transactions to event handlers reliably. This means that Watermill might get you farther past persistence towards idempotency and atomicity on the journey to provable <em>durable execution</em>. Give it a try!</p></div></article><div><div id="newsletter-footer" class="rounded-lg px-7 py-7 text-center row justify-content"><div class="mx-auto mb-0 text-center lg:col-7"><h2 class="mb-4">Did you like this article?</h2><p>We work on a lot of new useful content.
We can let you know when a new post appears.
Your e-mail will be safe and not shared with anyone. 🔒<br><br>You will also receive a free <a href="https://threedots.tech/go-with-the-domain/">"Go With The Domain" e-book</a>!</p></div><a href="https://threedots.tech/go-with-the-domain/"><div class="book-container book-big"><div class="book"><div class="front"><div class="cover img-crisp-edges"><img loading="" decoding="async" src="https://threedots.tech/img/go-with-domain-cover-retina.jpg" alt="Cover" class="rounded-full inline img" height="424" width="300"></div></div><div class="left-side"><h2><span>Go With The Domain</span>
<span>Three Dots Labs</span></h2></div></div></div></a><div id="newsletter-content" class="admonition-content newsletter row mb-10"><div id="mlb2-199774120" class="ml-form-embedContainer ml-subscribe-form ml-subscribe-form-199774120 formkit-form mx-auto"><form class="ml-block-form md:col-10 lg:col-6 mx-auto text-center" action="https://assets.mailerlite.com/jsonp/1209776/forms/139592997332322260/subscribe" data-code="" method="post" target="_blank" onsubmit="subscribedToNewsletter()" data-ml-submit-bound="true"><div class="ml-form-error notice warning" style="display:none"><div class="notice-body"><p>Failed to subscribe, please try again later.</p></div></div><div class="ml-form-formContent"><div class="ml-form-fieldRow ml-last-item mb-6"><div class="ml-field-group ml-field-name ml-validate-required"><input aria-label="name" aria-required="true" type="text" class="form-control form-input" data-inputmask="" name="fields[name]" placeholder="Your name" autocomplete="given-name"></div></div><div class="ml-form-fieldRow mb-6"><div class="ml-field-group ml-field-email ml-validate-email ml-validate-required"><input aria-label="email" aria-required="true" type="email" class="form-control form-input" data-inputmask="" name="fields[email]" placeholder="E-mail" autocomplete="email"></div></div></div><input type="hidden" name="fields[ref_url]" value="https://threedots.tech/post/sqlite-durable-execution/">
<input type="hidden" name="fields[form]" value="blog-footer">
<input type="hidden" name="fields[blog_tags]" value="watermill;golang;events;event-driven">
<input type="hidden" name="fields[blog_series]" value="Guest post">
<input type="hidden" name="ml-submit" value="1"><div class="ml-form-embedSubmit btn btn-primary rounded"><button type="submit" class="primary">
Subscribe
<svg class="arrow-right icon w-4 ml-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9.0L441 239c9.4 9.4 9.4 24.6.0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9.0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3.0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"></path></svg></button>
<button disabled="" style="display:none" type="button" class="loading">
<span class="ml-form-embedSubmitLoad"></span>
<span class="sr-only">Loading...</span></button></div><input type="hidden" name="anticsrf" value="true"></form></div></div><script>function ml_webform_success_199774120(){window.top.location.href="/mailing/confirmation-required/"}</script><script>window.onload=function(){fetch("https://assets.mailerlite.com/jsonp/1209776/forms/139592997332322260/takel")}</script></div><div class="row items-start justify-between"><div class="lg:col-6 mb-2 flex items-center lg:mb-0"><h5 class="mr-3">Tags:</h5><ul><li class="inline-block"><a class="bg-theme-light hover:bg-primary dark:bg-darkmode-theme-light dark:hover:bg-darkmode-primary dark:hover:text-dark m-1 block rounded px-3 py-1 hover:text-white" href="https://threedots.tech/tags/watermill/">watermill</a></li><li class="inline-block"><a class="bg-theme-light hover:bg-primary dark:bg-darkmode-theme-light dark:hover:bg-darkmode-primary dark:hover:text-dark m-1 block rounded px-3 py-1 hover:text-white" href="https://threedots.tech/tags/golang/">golang</a></li><li class="inline-block"><a class="bg-theme-light hover:bg-primary dark:bg-darkmode-theme-light dark:hover:bg-darkmode-primary dark:hover:text-dark m-1 block rounded px-3 py-1 hover:text-white" href="https://threedots.tech/tags/events/">events</a></li><li class="inline-block"><a class="bg-theme-light hover:bg-primary dark:bg-darkmode-theme-light dark:hover:bg-darkmode-primary dark:hover:text-dark m-1 block rounded px-3 py-1 hover:text-white" href="https://threedots.tech/tags/event-driven/">event-driven</a></li></ul></div><div class="lg:col-6 flex xl:justify-end"><div class="share-icons"><h5 class="share-title">Share :</h5><a class="share-link share-facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fthreedots.tech%2fpost%2fsqlite-durable-execution%2f" target="_blank" rel="noopener" aria-label="share facebook"><span class="share-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"></path></svg></span></a><a class="share-link share-twitter" href="https://twitter.com/intent/tweet/?text=Share&amp;url=https%3a%2f%2fthreedots.tech%2fpost%2fsqlite-durable-execution%2f" target="_blank" rel="noopener" aria-label="share twitter"><span aria-hidden="true" class="share-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8 2H1l8.26 11.015L1.45 22H4.1l6.388-7.349L16 22h7l-8.608-11.478L21.8 2h-2.65l-5.986 6.886zm9 18L5 4h2l12 16z"></path></svg></span></a><a class="share-link share-email" href="mailto:?subject=Share&amp;body=https%3a%2f%2fthreedots.tech%2fpost%2fsqlite-durable-execution%2f" target="_self" rel="noopener" aria-label="share email"><span aria-hidden="true" class="share-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 4H2C.9 4 0 4.9.0 6v12c0 1.1.9 2 2 2h20c1.1.0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.25 14.43l-3.5 2c-.08.05-.17.07-.25.07-.17.0-.34-.1-.43-.25-.14-.24-.06-.55.18-.68l3.5-2c.24-.14.55-.06.68.18.14.24.06.55-.18.68zm4.75.07c-.1.0-.2-.03-.27-.08l-8.5-5.5c-.23-.15-.3-.46-.15-.7.15-.22.46-.3.7-.14L12 13.4l8.23-5.32c.23-.15.54-.08.7.15.14.23.07.54-.16.7l-8.5 5.5c-.08.04-.17.07-.27.07zm8.93 1.75c-.1.16-.26.25-.43.25-.08.0-.17-.02-.25-.07l-3.5-2c-.24-.13-.32-.44-.18-.68s.44-.32.68-.18l3.5 2c.24.13.32.44.18.68z"></path></svg></span></a><a class="share-link share-reddit" href="https://reddit.com/submit/?url=https%3a%2f%2fthreedots.tech%2fpost%2fsqlite-durable-execution%2f&amp;resubmit=true&amp;title=Share" target="_blank" rel="noopener" aria-label="share reddit"><span aria-hidden="true" class="share-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 11.5c0-1.65-1.35-3-3-3-.96.0-1.86.48-2.42 1.24-1.64-1-3.75-1.64-6.07-1.72.08-1.1.4-3.05 1.52-3.7.72-.4 1.73-.24 3 .5C17.2 6.3 18.46 7.5 20 7.5c1.65.0 3-1.35 3-3s-1.35-3-3-3c-1.38.0-2.54.94-2.88 2.22-1.43-.72-2.64-.8-3.6-.25-1.64.94-1.95 3.47-2 4.55-2.33.08-4.45.7-6.1 1.72C4.86 8.98 3.96 8.5 3 8.5c-1.65.0-3 1.35-3 3 0 1.32.84 2.44 2.05 2.84-.03.22-.05.44-.05.66.0 3.86 4.5 7 10 7s10-3.14 10-7c0-.22-.02-.44-.05-.66 1.2-.4 2.05-1.54 2.05-2.84zM2.3 13.37C1.5 13.07 1 12.35 1 11.5c0-1.1.9-2 2-2 .64.0 1.22.32 1.6.82-1.1.85-1.92 1.9-2.3 3.05zm3.7.13c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm9.8 4.8c-1.08.63-2.42.96-3.8.96-1.4.0-2.74-.34-3.8-.95-.24-.13-.32-.44-.2-.68.15-.24.46-.32.7-.18 1.83 1.06 4.76 1.06 6.6.0.23-.13.53-.05.67.2.14.23.06.54-.18.67zm.2-2.8c-1.1.0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm5.7-2.13c-.38-1.16-1.2-2.2-2.3-3.05.38-.5.97-.82 1.6-.82 1.1.0 2 .9 2 2 0 .84-.53 1.57-1.3 1.87z"></path></svg></span></a></div></div><div class="lg:col-6 mb-10 flex items-center lg:mb-0"><h5 class="mr-3">Last update:</h5><ul><li class="inline-block mt-1">October 20, 2025</li></ul></div></div><div class="mt-20"><div id="disqus_thread"></div><div style="display:none" id="disqus_page_id">https://threedots.tech/post/sqlite-durable-execution/</div><script type="application/javascript">var disqus_config=function(){this.page.identifier=document.getElementById("disqus_page_id").textContent},disqus_observer=new IntersectionObserver(function(e){e[0].isIntersecting&&(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//three-dots-tech.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}(),disqus_observer.disconnect())},{threshold:[0]});disqus_observer.observe(document.querySelector("#disqus_thread"))</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a></div></div></div><div class="section pb-0 related-posts"><h2 class="h3 mb-12">Related Posts</h2><div class="row"><div class="lg:col-6"><div class="bg-body dark:bg-darkmode-body"><div class="text-center"><img src="https://threedots.tech/images/covers/watermill-1-5_hu22a7fc9b1d83818a9eabc1db02bf8aa4_66349_1000x1000_resize_q80_h2_lanczos_3.webp" loading="lazy" srcset="https://threedots.tech/images/covers/watermill-1-5_hu22a7fc9b1d83818a9eabc1db02bf8aa4_66349_1000x1000_resize_q80_h2_lanczos_3.webp 1x, https://threedots.tech/images/covers/watermill-1-5_hu22a7fc9b1d83818a9eabc1db02bf8aa4_66349_900x900_resize_q80_h2_lanczos_3.webp 900w" decoding="async" alt="SQLite Pub/Sub, Quickstart, and more — Watermill 1.5 Released" class="md:w-48 w-9/12 mb-5 md:mb-16 md:ml-5 md:mt-16 md:float-right rounded mt-6 inline-block img" width="1000" height="1000" onerror="this.onerror=&quot;null&quot;,this.src=&quot;/images/covers/watermill-1-5_hu22a7fc9b1d83818a9eabc1db02bf8aa4_66349_1000x1000_resize_lanczos_3.png&quot;"></div><h4 class="mb-3"><a href="https://threedots.tech/post/watermill-1-5/">SQLite Pub/Sub, Quickstart, and more — Watermill 1.5 Released</a></h4><ul class="mb-4"><li class="inline-block"><div class="flex flex-row"><div class="shrink-0"><a href="https://threedots.tech/about/"><div class="mr-3"><img src="https://threedots.tech/img/avatars/milosz_hu4beb1346b2c5dd46b9f6b2848f1af8e8_747300_50x50_resize_q80_h2_lanczos_3.webp" loading="lazy" srcset="https://threedots.tech/img/avatars/milosz_hu4beb1346b2c5dd46b9f6b2848f1af8e8_747300_50x50_resize_q80_h2_lanczos_3.webp 1x, https://threedots.tech/img/avatars/milosz_hu4beb1346b2c5dd46b9f6b2848f1af8e8_747300_100x100_resize_q80_h2_lanczos_3.webp 2x, https://threedots.tech/img/avatars/milosz_hu4beb1346b2c5dd46b9f6b2848f1af8e8_747300_150x150_resize_q80_h2_lanczos_3.webp 3x, https://threedots.tech/img/avatars/milosz_hu4beb1346b2c5dd46b9f6b2848f1af8e8_747300_45x45_resize_q80_h2_lanczos_3.webp 45w" decoding="async" alt="Avatar" class="rounded-full inline img" width="50" height="50" onerror="this.onerror=&quot;null&quot;,this.src=&quot;/img/avatars/milosz_hu4beb1346b2c5dd46b9f6b2848f1af8e8_747300_50x50_resize_lanczos_3.png&quot;"></div></a></div><div class="m-auto text-slate-800 dark:text-gray-300"><a href="https://threedots.tech/about/"><span class="mr-3 font-bold">Miłosz Smółka</span></a></div></div></li></ul><a href="https://threedots.tech/post/watermill-1-5/"><p class="mb-6 text-justify">It’s been almost a year since the last Watermill release post, and we have a bunch of news to share!
In case you’re new here, Watermill is a Go library for building event-driven applications the easy way. It’s like an HTTP router but for messages. Watermill is a library, not a framework, so there’s no vendor lock-in.
Watermill is now close to 9k GitHub stars and 79 contributors, just on the main repository.</p><button class="btn btn-outline-primary btn-sm" aria-label="Read 'SQLite Pub/Sub, Quickstart, and more — Watermill 1.5 Released'">
Read More</button></a></div></div><div class="lg:col-6"><div class="bg-body dark:bg-darkmode-body"><div class="text-center"><img src="https://threedots.tech/images/covers/watermill-1-4_hu22a7fc9b1d83818a9eabc1db02bf8aa4_66349_1000x1000_resize_q80_h2_lanczos_3.webp" loading="lazy" srcset="https://threedots.tech/images/covers/watermill-1-4_hu22a7fc9b1d83818a9eabc1db02bf8aa4_66349_1000x1000_resize_q80_h2_lanczos_3.webp 1x, https://threedots.tech/images/covers/watermill-1-4_hu22a7fc9b1d83818a9eabc1db02bf8aa4_66349_900x900_resize_q80_h2_lanczos_3.webp 900w" decoding="async" alt="Watermill 1.4 Released (Event-Driven Go Library)" class="md:w-48 w-9/12 mb-5 md:mb-16 md:ml-5 md:mt-16 md:float-right rounded mt-6 inline-block img" width="1000" height="1000" onerror="this.onerror=&quot;null&quot;,this.src=&quot;/images/covers/watermill-1-4_hu22a7fc9b1d83818a9eabc1db02bf8aa4_66349_1000x1000_resize_lanczos_3.png&quot;"></div><h4 class="mb-3"><a href="https://threedots.tech/post/watermill-1-4/">Watermill 1.4 Released (Event-Driven Go Library)</a></h4><ul class="mb-4"><li class="inline-block"><div class="flex flex-row"><div class="shrink-0"><a href="https://threedots.tech/about/"><div class="mr-3"><img src="https://threedots.tech/img/avatars/milosz_hu4beb1346b2c5dd46b9f6b2848f1af8e8_747300_50x50_resize_q80_h2_lanczos_3.webp" loading="lazy" srcset="https://threedots.tech/img/avatars/milosz_hu4beb1346b2c5dd46b9f6b2848f1af8e8_747300_50x50_resize_q80_h2_lanczos_3.webp 1x, https://threedots.tech/img/avatars/milosz_hu4beb1346b2c5dd46b9f6b2848f1af8e8_747300_100x100_resize_q80_h2_lanczos_3.webp 2x, https://threedots.tech/img/avatars/milosz_hu4beb1346b2c5dd46b9f6b2848f1af8e8_747300_150x150_resize_q80_h2_lanczos_3.webp 3x, https://threedots.tech/img/avatars/milosz_hu4beb1346b2c5dd46b9f6b2848f1af8e8_747300_45x45_resize_q80_h2_lanczos_3.webp 45w" decoding="async" alt="Avatar" class="rounded-full inline img" width="50" height="50" onerror="this.onerror=&quot;null&quot;,this.src=&quot;/img/avatars/milosz_hu4beb1346b2c5dd46b9f6b2848f1af8e8_747300_50x50_resize_lanczos_3.png&quot;"></div></a></div><div class="m-auto text-slate-800 dark:text-gray-300"><a href="https://threedots.tech/about/"><span class="mr-3 font-bold">Miłosz Smółka</span></a></div></div></li></ul><a href="https://threedots.tech/post/watermill-1-4/"><p class="mb-6 text-justify">It’s Autumn over here, and it usually means another release of Watermill! 🍂 It’s hard to believe it’s already been five years since the v1.0 release.
In case you’re new to Watermill, here’s TL;DR.
Watermill is a Go library for building message-driven or event-driven applications the easy way. Think of it like an HTTP router but for messages. It’s a library, not a framework, so you don’t need to change your architecture to use it.</p><button class="btn btn-outline-primary btn-sm" aria-label="Read 'Watermill 1.4 Released (Event-Driven Go Library)'">
Read More</button></a></div></div></div></div></div></section></main><footer class="bg-theme-light dark:bg-darkmode-theme-light"><div class="container"><div class="row items-center py-10"><div class="lg:col-3 mb-8 text-center lg:mb-0 lg:text-left"><a class="navbar-brand inline-block" href="https://threedots.tech/"><img fetchpriority="high" decoding="async" class="img logo-light" width="200" height="31" src="https://threedots.tech/images/logo.svg" alt="Three Dots Labs" onerror="this.onerror=null,this.src=&quot;&quot;">
<img fetchpriority="high" decoding="async" class="img logo-dark" width="200" height="31" src="https://threedots.tech/images/logo-darkmode.svg" alt="Three Dots Labs" onerror="this.onerror=null,this.src=&quot;&quot;"></a></div><div class="lg:col-6 mb-8 text-center lg:mb-0"><ul><li class="m-3 inline-block"><a href="/contact/">Contact</a></li><li class="m-3 inline-block"><a href="/privacy-policy/">Privacy Policy</a></li><li class="m-3 inline-block"><a href="/about/">About us</a></li></ul></div><div class="lg:col-3 mb-8 text-center lg:mb-0 lg:mt-0 lg:text-right"><ul class="social-icons"><li><a target="_blank" aria-label="github" rel="nofollow noopener" href="https://github.com/ThreeDotsLabs"><svg class="github icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></li><li><a target="_blank" aria-label="rss" rel="nofollow noopener" href="https://threedots.tech/index.xml"><svg class="rss icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328.0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765.0 183.105.0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686.0 38.981.0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"></path></svg></a></li><li><a target="_blank" aria-label="twitter" rel="nofollow noopener" href="https://twitter.com/ThreeDotsLabs"><svg class="twitter-x icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentcolor" viewBox="0 0 16 16"><path d="M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.601.75zm-.86 13.028h1.36L4.323 2.145H2.865z"></path></svg></a></li><li><a target="_blank" aria-label="linkedin" rel="nofollow noopener" href="https://www.linkedin.com/company/three-dots-labs/"><svg class="linkedin-in icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1.0 83.5.0 53.8a53.79 53.79.0 01107.58.0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29.0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"></path></svg></a></li><li><a target="_blank" aria-label="facebook" rel="nofollow noopener" href="https://www.facebook.com/ThreeDotsLabs"><svg class="facebook-f icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43.0 225.36.0c-73.22.0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"></path></svg></a></li></ul></div></div></div><div class="border-border dark:border-darkmode-border border-t py-7"><div class="text-light dark:text-darkmode-light container text-center"><p>© Three Dots Labs 2014 — 2025</p><p class="mt-2 text-sm">We are a bootstrapped company.
By supporting us, you support independent creators.</p></div></div></footer><script crossorigin="anonymous" integrity="sha256-LYz2ORPp3CKELKSrSPEzjJAKI5LV0o9T7zr7INnVxYA=" src="https://threedots.tech/js/script.min.2d8cf63913e9dc22842ca4ab48f1338c900a2392d5d28f53ef3afb20d9d5c580.js"></script><script defer="" async="" crossorigin="anonymous" integrity="sha256-10v7FWU1hmwrpYyydNUJLRwYN1NcFyoHAwsE1bLHjUU=" src="https://threedots.tech/js/script-lazy.min.d74bfb156535866c2ba58cb274d5092d1c1837535c172a07030b04d5b2c78d45.js"></script><script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js")</script><script defer="" src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon="{&quot;version&quot;:&quot;2024.11.0&quot;,&quot;token&quot;:&quot;99113f6f77b34efa91f8784356f3ae8a&quot;,&quot;r&quot;:1,&quot;server_timing&quot;:{&quot;name&quot;:{&quot;cfCacheStatus&quot;:true,&quot;cfEdge&quot;:true,&quot;cfExtPri&quot;:true,&quot;cfL4&quot;:true,&quot;cfOrigin&quot;:true,&quot;cfSpeedBrain&quot;:true},&quot;location_startswith&quot;:null}}" crossorigin="anonymous"></script>
</body></html>