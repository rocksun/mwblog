<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="theme-color" content="#3498db"/><meta charSet="utf-8" data-gatsby-head="true"/><meta http-equiv="x-ua-compatible" content="ie=edge" data-gatsby-head="true"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" data-gatsby-head="true"/><meta name="description" content="Creating GoREST has taken about a month so far (though I haven’t worked on it full-time - I’m counting from the first commit). Because of that, I’ve written this article to prevent others from making the same mistakes that took a considerable amount of time and effort to fix." data-gatsby-head="true"/><meta name="keywords" content="golang,GoREST,go-rest,backend,rest" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:url" content="https://mostafaqanbaryan.com/how-to-write-a-backend-the-worst-way-creation-of-go-rest/" data-gatsby-head="true"/><meta property="og:title" content="How to Write a Backend the Worst Way﹕ Creation of GoREST | by Mostafa Qanbaryan" data-gatsby-head="true"/><meta property="og:description" content="Creating GoREST has taken about a month so far (though I haven’t worked on it full-time - I’m counting from the first commit). Because of that, I’ve written this article to prevent others from making the same mistakes that took a considerable amount of time and effort to fix." data-gatsby-head="true"/><meta property="og:image" content="https://mostafaqanbaryan.com/static/9f5b64c8f1cfd8c12a0a9dfaaa239893/b53df/featured.png" data-gatsby-head="true"/><meta name="image" content="https://mostafaqanbaryan.com/static/9f5b64c8f1cfd8c12a0a9dfaaa239893/b53df/featured.png" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta name="twitter:title" content="How to Write a Backend the Worst Way﹕ Creation of GoREST | by Mostafa Qanbaryan" data-gatsby-head="true"/><meta name="twitter:url" content="https://mostafaqanbaryan.com/how-to-write-a-backend-the-worst-way-creation-of-go-rest/" data-gatsby-head="true"/><meta name="twitter:description" content="Creating GoREST has taken about a month so far (though I haven’t worked on it full-time - I’m counting from the first commit). Because of that, I’ve written this article to prevent others from making the same mistakes that took a considerable amount of time and effort to fix." data-gatsby-head="true"/><meta name="twitter:image" content="https://mostafaqanbaryan.com/static/9f5b64c8f1cfd8c12a0a9dfaaa239893/b53df/featured.png" data-gatsby-head="true"/><meta name="twitter:creator" content="Mostafa Qanbaryan" data-gatsby-head="true"/><style data-href="/styles.b3622f1573c9b5a13a23.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#000;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;tab-size:4;text-align:left;text-shadow:0 1px #fff;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#b3d4fc;text-shadow:none}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:hsla(0,0%,100%,.5);color:#9a6e3a}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><style data-styled="" data-styled-version="5.3.9"></style><link rel="icon" href="/favicon-32x32.png?v=b20963e5386fbe2d3f9a949aa901ab35" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=b20963e5386fbe2d3f9a949aa901ab35"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=b20963e5386fbe2d3f9a949aa901ab35"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=b20963e5386fbe2d3f9a949aa901ab35"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=b20963e5386fbe2d3f9a949aa901ab35"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=b20963e5386fbe2d3f9a949aa901ab35"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=b20963e5386fbe2d3f9a949aa901ab35"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=b20963e5386fbe2d3f9a949aa901ab35"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=b20963e5386fbe2d3f9a949aa901ab35"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><style data-styled="" data-styled-version="5.3.9">html{line-height:1.15;-webkit-text-size-adjust:100%;}/*!sc*/
body{margin:0;}/*!sc*/
main{display:block;}/*!sc*/
h1{font-size:2em;margin:0.67em 0;}/*!sc*/
hr{box-sizing:content-box;height:0;overflow:visible;}/*!sc*/
pre{font-family:monospace,monospace;font-size:1em;}/*!sc*/
a{background-color:transparent;}/*!sc*/
abbr[title]{border-bottom:none;-webkit-text-decoration:underline;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;}/*!sc*/
b,strong{font-weight:bolder;}/*!sc*/
code,kbd,samp{font-family:monospace,monospace;font-size:1em;}/*!sc*/
small{font-size:80%;}/*!sc*/
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;}/*!sc*/
sub{bottom:-0.25em;}/*!sc*/
sup{top:-0.5em;}/*!sc*/
img{border-style:none;}/*!sc*/
button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0;}/*!sc*/
button,input{overflow:visible;}/*!sc*/
button,select{text-transform:none;}/*!sc*/
button,[type="button"],[type="reset"],[type="submit"]{-webkit-appearance:button;}/*!sc*/
button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0;}/*!sc*/
button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText;}/*!sc*/
fieldset{padding:0.35em 0.75em 0.625em;}/*!sc*/
legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}/*!sc*/
progress{vertical-align:baseline;}/*!sc*/
textarea{overflow:auto;}/*!sc*/
[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0;}/*!sc*/
[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto;}/*!sc*/
[type="search"]{-webkit-appearance:textfield;outline-offset:-2px;}/*!sc*/
[type="search"]::-webkit-search-decoration{-webkit-appearance:none;}/*!sc*/
::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}/*!sc*/
details{display:block;}/*!sc*/
summary{display:list-item;}/*!sc*/
template{display:none;}/*!sc*/
[hidden]{display:none;}/*!sc*/
*,*:before,*:after{box-sizing:inherit;}/*!sc*/
html{-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;box-sizing:border-box;}/*!sc*/
body{background:#f9fafc;font-family:Lora,sans-serif;font-size:16px;line-height:1.5;padding:50px 0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}/*!sc*/
.gatsby-resp-image-background-image{border-radius:6px;}/*!sc*/
.gatsby-highlight{border-bottom:1px solid #e0e6ed;border-top:1px solid #e0e6ed;margin:15px -100px;padding:0;}/*!sc*/
.gatsby-highlight pre[class*="language-"]{margin:0;padding:25px 100px;}/*!sc*/
pre[class*="language-"]{background:rgba(245,245,245,1);color:rgb(65,76,94);}/*!sc*/
@media only screen and (max-width:870px){.gatsby-highlight{margin:15px -15px;}.gatsby-highlight pre[class*="language-"]{padding:25px;}}/*!sc*/
data-styled.g2[id="sc-global-fdFNiA1"]{content:"sc-global-fdFNiA1,"}/*!sc*/
.bFNPgi{margin:0 auto;max-width:870px;}/*!sc*/
data-styled.g3[id="Container-sc-gtg6qz-0"]{content:"bFNPgi,"}/*!sc*/
.dxQfJa{border:5px solid #3598db;border-radius:50%;height:150px;margin:0 auto 15px auto;overflow:hidden;width:150px;-webkit-flex:0 0 150px;-ms-flex:0 0 150px;flex:0 0 150px;}/*!sc*/
.dxQfJa img{padding:5px;border-radius:50%;}/*!sc*/
data-styled.g4[id="Wrapper-sc-1blyxwa-0"]{content:"dxQfJa,"}/*!sc*/
.bEqntq{border-radius:6px;position:relative;max-width:100%;}/*!sc*/
data-styled.g5[id="Image__StyledImage-sc-y3at70-0"]{content:"bEqntq,"}/*!sc*/
.dAkhPs{margin-top:15px;text-align:center;}/*!sc*/
data-styled.g6[id="Wrapper-sc-1j95xyf-0"]{content:"dAkhPs,"}/*!sc*/
.gmbPcW{font-family:'Indie Flower',sans-serif;border:1px solid #bfc8d2;border-radius:15px;color:#3e465b;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;margin:5px;padding:5px 10px;-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
.gmbPcW svg{display:inline-block;height:20px;margin-right:5px;stroke:#6e849c;vertical-align:middle;width:20px;}/*!sc*/
.gmbPcW:hover{border-color:#3e465b;}/*!sc*/
data-styled.g7[id="SocialLink-sc-1t5osse-0"]{content:"gmbPcW,"}/*!sc*/
.eQEeif{font-family:Lora,sans-serif;color:#3e465b;font-size:1.7rem;line-height:1.5;margin:0;padding:0 30px;text-align:center;}/*!sc*/
data-styled.g8[id="H1-sc-v20zsa-0"]{content:"eQEeif,"}/*!sc*/
.khorTA{font-family:Dosis,Lora,sans-serif;color:#65738c;display:block;font-size:1.2rem;line-height:1.8rem;}/*!sc*/
data-styled.g11[id="P-sc-1phssr4-0"]{content:"khorTA,"}/*!sc*/
.iA-dMfG{font-family:Lora,sans-serif;color:#3e465b;font-size:1.5rem;font-weight:700;line-height:1.5;}/*!sc*/
data-styled.g12[id="H2-sc-15h7d0q-0"]{content:"iA-dMfG,"}/*!sc*/
.uhFiu{color:#3498db;-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
data-styled.g13[id="Link__MyLink-sc-16lir2c-0"]{content:"uhFiu,"}/*!sc*/
.jCSvXP{margin:0 auto;max-width:650px;padding:0 50px 50px;}/*!sc*/
data-styled.g14[id="Wrapper-sc-1hhivhj-0"]{content:"jCSvXP,"}/*!sc*/
.kQIMXz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}/*!sc*/
data-styled.g16[id="Flex__StyledDiv-sc-15dy9jg-0"]{content:"kQIMXz,"}/*!sc*/
.bjIPwy{font-size:1.7rem;}/*!sc*/
data-styled.g17[id="PageHeader__Title-sc-fet53j-0"]{content:"bjIPwy,"}/*!sc*/
.bniOQm{background:#fff;border:1px solid #e0e6ed;box-shadow:0 1px 5px rgba(0,0,0,0.05);margin-bottom:30px;padding:75px 100px;}/*!sc*/
@media only screen and (max-width:870px){.bniOQm{border-left:none;border-right:none;padding:75px 15px;}}/*!sc*/
data-styled.g18[id="Card-sc-1pst17q-0"]{content:"bniOQm,"}/*!sc*/
.leuYlz{border:1px solid #bfc8d2;border-radius:25px;color:#3e465b;display:inline-block;font-size:10px;font-weight:700;margin:0 10px;padding:5px 15px;-webkit-text-decoration:none;text-decoration:none;text-transform:uppercase;}/*!sc*/
.leuYlz:hover{border-color:#000;}/*!sc*/
data-styled.g20[id="Button-sc-1f9gjm8-0"]{content:"leuYlz,"}/*!sc*/
.eifGGv{box-shadow:0 0 6px rgba(0,0,0,0.2) !important;border-radius:6px;overflow:hidden;max-width:100%;}/*!sc*/
data-styled.g21[id="GatsbyImage__StyledImage-sc-kztnrh-0"]{content:"eifGGv,"}/*!sc*/
.iJrYZU{margin:-65px -90px 50px;}/*!sc*/
@media only screen and (max-width:870px){.iJrYZU{margin:-65px -5px 50px;}}/*!sc*/
data-styled.g22[id="Wrapper-sc-yt5b28-0"]{content:"iJrYZU,"}/*!sc*/
.coZFeV{max-width:100%;}/*!sc*/
data-styled.g23[id="FeaturedImage__Image-sc-jzbr3q-0"]{content:"coZFeV,"}/*!sc*/
.erzCIz{color:#3498db;font-weight:700;-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
.erzCIz:hover{-webkit-text-decoration:underline;text-decoration:underline;}/*!sc*/
data-styled.g24[id="Link__StyledLink-sc-1mbdmd1-0"]{content:"erzCIz,"}/*!sc*/
.iKMHKD{font-family:'Indie Flower',sans-serif;color:#777e82;display:block;margin-top:15px;margin-bottom:15px;margin-left:0px;margin-right:0px;}/*!sc*/
data-styled.g25[id="Date-sc-1x1un0-0"]{content:"iKMHKD,"}/*!sc*/
.kGIVBE{background:#9c9da3;display:block;margin:40px auto;height:1px;width:150px;}/*!sc*/
data-styled.g26[id="HalfBorder__Border-sc-r1ejzc-0"]{content:"kGIVBE,"}/*!sc*/
.kiOxox{font-family:Lora,sans-serif;color:#3e465b;font-size:1.35rem;font-weight:700;line-height:1.5;}/*!sc*/
data-styled.g32[id="H3-sc-oa9zpy-0"]{content:"kiOxox,"}/*!sc*/
.iTegOH{margin-top:15px;margin-bottom:15px;margin-left:0px;margin-right:0px;}/*!sc*/
data-styled.g35[id="useRenderAst__StyledP-sc-a2ev0j-0"]{content:"iTegOH,"}/*!sc*/
.dExpbn{margin-bottom:15px;margin-left:0px;margin-right:0px;margin-top:3rem;}/*!sc*/
data-styled.g36[id="useRenderAst__StyledH2-sc-a2ev0j-1"]{content:"dExpbn,"}/*!sc*/
.ecFgBS{margin-top:15px;margin-bottom:15px;margin-left:0px;margin-right:0px;}/*!sc*/
data-styled.g37[id="useRenderAst__StyledH3-sc-a2ev0j-2"]{content:"ecFgBS,"}/*!sc*/
.ilEMaS{margin-left:0px;}/*!sc*/
data-styled.g40[id="useRenderAst__List-sc-a2ev0j-5"]{content:"ilEMaS,"}/*!sc*/
.ckovHX{font-size:1.1rem;font-family:Dosis,Lora,sans-serif;color:#65738c;}/*!sc*/
data-styled.g41[id="useRenderAst__ListItem-sc-a2ev0j-6"]{content:"ckovHX,"}/*!sc*/
.eUrflm{font-family:Lora,monospace;border-radius:100px;padding:0.25rem 0.5rem;background-color:rgb(230 230 250 / 40%);font-size:1rem;}/*!sc*/
data-styled.g42[id="useRenderAst__Code-sc-a2ev0j-7"]{content:"eUrflm,"}/*!sc*/
.fZpHwL blockquote{border-left:5px solid #e0e6ed;line-height:1.7;margin-top:15px;margin-bottom:15px;margin-right:0px;margin-left:75px;padding:10px 10px 10px 15px;}/*!sc*/
.fZpHwL blockquote p{margin:0;}/*!sc*/
.fZpHwL ul,.fZpHwL ol{line-height:1.7;margin-top:15px;margin-bottom:15px;margin-right:0;margin-left:0;padding:0 30px;}/*!sc*/
.fZpHwL ul p,.fZpHwL ol p,.fZpHwL ul ul,.fZpHwL ol ul,.fZpHwL ul ol,.fZpHwL ol ol{margin:0;}/*!sc*/
.fZpHwL ul ul,.fZpHwL ol ul,.fZpHwL ul ol,.fZpHwL ol ol{padding:0 0 0 30px;}/*!sc*/
.fZpHwL img{margin-top:15px;margin-bottom:15px;margin-right:0;margin-left:0;}/*!sc*/
data-styled.g45[id="Article-sc-18vk0zc-0"]{content:"fZpHwL,"}/*!sc*/
.fgNCAW{margin-top:50px;text-align:center;}/*!sc*/
data-styled.g46[id="PageNav__Wrapper-sc-1t36ebr-0"]{content:"fgNCAW,"}/*!sc*/
.YXYyj{margin-top:50px;text-align:center;}/*!sc*/
data-styled.g47[id="Wrapper-sc-1quni3o-0"]{content:"YXYyj,"}/*!sc*/
.hGWBRf{border:1px solid #bfc8d2;border-radius:15px;display:inline-block;margin:5px;padding:5px 15px;-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
.hGWBRf svg{display:inline-block;height:20px;stroke:#6e849c;vertical-align:middle;width:20px;}/*!sc*/
.hGWBRf:hover{border-color:#3e465b;}/*!sc*/
data-styled.g48[id="ShareButton-sc-qn9adb-0"]{content:"hGWBRf,"}/*!sc*/
.bLKOyn{font-family:'Indie Flower',sans-serif;font-size:1.5rem;}/*!sc*/
data-styled.g49[id="Share__Title-sc-19spv6b-0"]{content:"bLKOyn,"}/*!sc*/
.iHZwBE{margin-top:0;margin-bottom:0;margin-left:0px;margin-right:0px;}/*!sc*/
data-styled.g50[id="HireMe__StyledP-sc-a0s3ol-0"]{content:"iHZwBE,"}/*!sc*/
</style><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link href="https://fonts.googleapis.com/css2?family=Dosis&amp;family=Indie+Flower&amp;family=Lora:wght@500&amp;display=swap" rel="stylesheet"/><title data-gatsby-head="true">How to Write a Backend the Worst Way﹕ Creation of GoREST | by Mostafa Qanbaryan</title><link rel="shortcut icon" href="data:image/vnd.microsoft.icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAQAABILAAASCwAAAAAAAAAAAADbmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmjX/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uaNf/bmTP/2pUq/9uZM//bmjT/25o1/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25o1/9ybN//alSv/25o1/+KtXP/bmDL/2pYt/9qVK//cmzb/25o1/9uZM//bmTP/25kz/9uZM//bmTP/25o0/9qVK//YjyD/36RJ/+W1bf/25s//3J07/+CoUv/irFv/2JAh/9mUKP/bmTT/25kz/9uZM//bmTP/25k0/9qVLP/hqVT/8tq3///////pwob/8tq1/+OvYf/ksmb///////Xjyf/jsWX/2pYt/9uZM//bmTP/3Js2/9mTJ//uz6H///////DUq//eo0j/1owZ/+7Nnf/tzJr/140b/9ydPP/syJP///////ThxP/aliz/25o0/9uaNf/alSv/57t5//nv4P/25s//68eR/9ybOP/ltGv/896//9qWL//pwIP/9eLG//nw4//rx5H/2pYu/9uaNP/bmTP/25o0/9mTKP/blzH/57t4//rx5f/ty5n/3Js3//Xjyf/pwYX/+/Tq/+rDif/cnDn/2ZIl/9uZNP/bmTP/25kz/9uZM//bmjX/25kz/9iRJP/ZlCr/3Z9A/9mUKf/z38D/5bRs/9iRJf/YkST/25gx/9yaNv/bmTP/25kz/9uZM//bmTP/25kz/9uZM//cmjb/25o0/9uYMP/bmDH/3Z4//9ybOf/bmDH/3Js3/9uZNP/bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTT/25kz/9uYMP/bmDH/25k0/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTT/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==" data-gatsby-head="true"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><section class="Container-sc-gtg6qz-0 bFNPgi"><header class="Wrapper-sc-1hhivhj-0 jCSvXP"><div class="Flex__StyledDiv-sc-15dy9jg-0 kQIMXz"><div class="Wrapper-sc-1blyxwa-0 dxQfJa"><a href="/"><img alt="Mostafa Qanbaryan" title="Mostafa Qanbaryan" src="data:image/jpeg;base64,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" class="Image__StyledImage-sc-y3at70-0 bEqntq"/></a></div><div><h2 style="margin:0;margin-left:10px" class="H2-sc-15h7d0q-0 PageHeader__Title-sc-fet53j-0 iA-dMfG bjIPwy"><a class="Link__MyLink-sc-16lir2c-0 uhFiu" href="/">Mostafa Qanbaryan</a></h2><p style="margin:0;margin-left:10px" class="P-sc-1phssr4-0 khorTA">I&#x27;m a decent developer... but not a good writer!</p><div class="Wrapper-sc-1j95xyf-0 dAkhPs"><a href="https://mostafaqanbaryan.com" target="_blank" rel="noopener" class="SocialLink-sc-1t5osse-0 gmbPcW"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>Website</a><a href="https://github.com/mostafaqanbaryan" target="_blank" rel="noopener" class="SocialLink-sc-1t5osse-0 gmbPcW"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>Github</a><a href="https://ca.linkedin.com/in/mostafaqanbaryan" target="_blank" rel="noopener" class="SocialLink-sc-1t5osse-0 gmbPcW"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg>LinkedIn</a></div></div></div></header></section><section class="Container-sc-gtg6qz-0 bFNPgi"><div class="Card-sc-1pst17q-0 bniOQm"><div><a aria-current="page" rel="follow" target="_self" class="Link__StyledLink-sc-1mbdmd1-0 erzCIz" href="/how-to-write-a-backend-the-worst-way-creation-of-go-rest/"><div class="Wrapper-sc-yt5b28-0 iJrYZU"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained GatsbyImage__StyledImage-sc-kztnrh-0 eifGGv FeaturedImage__Image-sc-jzbr3q-0 coZFeV"><div style="max-width:1080px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;612&#x27;%20width=&#x27;1080&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#183848;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="/static/9f5b64c8f1cfd8c12a0a9dfaaa239893/b7882/featured.webp 270w,/static/9f5b64c8f1cfd8c12a0a9dfaaa239893/b109d/featured.webp 540w,/static/9f5b64c8f1cfd8c12a0a9dfaaa239893/ee1c1/featured.webp 1080w" sizes="(min-width: 1080px) 1080px, 100vw"/><img data-gatsby-image-ssr="" title="How to Write a Backend the Worst Way﹕ Creation of GoREST" data-main-image="" style="opacity:0" sizes="(min-width: 1080px) 1080px, 100vw" decoding="async" loading="lazy" data-src="/static/9f5b64c8f1cfd8c12a0a9dfaaa239893/b53df/featured.png" data-srcset="/static/9f5b64c8f1cfd8c12a0a9dfaaa239893/be1f1/featured.png 270w,/static/9f5b64c8f1cfd8c12a0a9dfaaa239893/f5db2/featured.png 540w,/static/9f5b64c8f1cfd8c12a0a9dfaaa239893/b53df/featured.png 1080w" alt="How to Write a Backend the Worst Way﹕ Creation of GoREST"/></picture><noscript><picture><source type="image/webp" srcSet="/static/9f5b64c8f1cfd8c12a0a9dfaaa239893/b7882/featured.webp 270w,/static/9f5b64c8f1cfd8c12a0a9dfaaa239893/b109d/featured.webp 540w,/static/9f5b64c8f1cfd8c12a0a9dfaaa239893/ee1c1/featured.webp 1080w" sizes="(min-width: 1080px) 1080px, 100vw"/><img data-gatsby-image-ssr="" title="How to Write a Backend the Worst Way﹕ Creation of GoREST" data-main-image="" style="opacity:0" sizes="(min-width: 1080px) 1080px, 100vw" decoding="async" loading="lazy" src="/static/9f5b64c8f1cfd8c12a0a9dfaaa239893/b53df/featured.png" srcSet="/static/9f5b64c8f1cfd8c12a0a9dfaaa239893/be1f1/featured.png 270w,/static/9f5b64c8f1cfd8c12a0a9dfaaa239893/f5db2/featured.png 540w,/static/9f5b64c8f1cfd8c12a0a9dfaaa239893/b53df/featured.png 1080w" alt="How to Write a Backend the Worst Way﹕ Creation of GoREST"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div></a><span class="Date-sc-1x1un0-0 iKMHKD">March 29, 2025</span><h1 class="H1-sc-v20zsa-0 eQEeif">How to Write a Backend the Worst Way﹕ Creation of GoREST</h1><span class="HalfBorder__Border-sc-r1ejzc-0 kGIVBE"></span></div><article class="Article-sc-18vk0zc-0 fZpHwL"><div><p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">Creating <a href="https://github.com/mostafaqanbaryan/go-rest" rel="nofollow,noopener" target="_blank" class="Link__StyledLink-sc-1mbdmd1-0 erzCIz">GoREST</a> has taken about a month so far (though I haven’t worked on it full-time - I’m counting from the first commit).</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">Because of that, I’ve written this article to prevent others from making the same mistakes that took a considerable amount of time and effort to fix.</p>
<!-- -->
<h2 class="H2-sc-15h7d0q-0 useRenderAst__StyledH2-sc-a2ev0j-1 iA-dMfG dExpbn">Introduction</h2>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">You may know I’m a PHP developer with a few years of experience under my belt. Like many PHP developers, I’ve been working with Laravel and been enjoying it. But right now I’m changing course to Golang.</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">I expected to experience some culture shock when starting to learn Golang, because unlike PHP with Laravel, there’s no single dominant framework that everyone uses, and no universally accepted standard way to structure applications (or at least that was my impression).</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">So I’m going to explain in this article how I created a RESTful API backend with Go in the worst way possible.</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">If you don’t want to read the whole article, here is the repository for you:</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH"><a href="https://github.com/mostafaqanbaryan/go-rest" rel="nofollow,noopener" target="_blank" class="Link__StyledLink-sc-1mbdmd1-0 erzCIz">https://github.com/mostafaqanbaryan/go-rest</a></p>
<h2 class="H2-sc-15h7d0q-0 useRenderAst__StyledH2-sc-a2ev0j-1 iA-dMfG dExpbn">The Worst Way Possible!</h2>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">As I said before, I’m fairly new to Go. Obviously, many concepts are not clear to me. I’m also new to writing tests, as I didn’t before.</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">So I decided to write a RESTful API backend with Golang and TDD (Test Driven Development) to kill two birds with one stone; and boy, am I gonna regret that!</p>
<h2 class="H2-sc-15h7d0q-0 useRenderAst__StyledH2-sc-a2ev0j-1 iA-dMfG dExpbn">Frameworks, Routers, or Raw?</h2>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">Coming from Laravel, I initially assumed I needed a framework for my backend. However, reading the Golang documentation and consulting the community, I’ve noticed that many Go developers tend to avoid using frameworks.</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">I’ve coded different projects with PHP without frameworks before, and it wasn’t terrible. However, PHP lacks many built-in tools that modern languages like Go provide, which explains why Laravel became so popular as it filled those gaps.</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">But in Golang, frameworks are not necessary. You could easily write a RESTful API backend without a framework. But I didn’t want to miss the opportunity to check a few of them.</p>
<h3 class="H3-sc-oa9zpy-0 useRenderAst__StyledH3-sc-a2ev0j-2 kiOxox ecFgBS">Gorm</h3>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH"><a href="https://gorm.io/" rel="nofollow,noopener" target="_blank" class="Link__StyledLink-sc-1mbdmd1-0 erzCIz">Gorm</a> is the first framework that I’ve checked out. It’s an easy-to-use ORM that handles a lot of stuff for you.</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">I refactored a project that was written with Gorm and I really enjoyed it. But while refactoring, I realized that testing the code wasn’t easy. So, It seems like I failed to kill both birds with one stone.</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">And who am I kidding? I prefer to work with <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">SQL</code> instead of query builders! It’s easier to read and write.</p>
<h3 class="H3-sc-oa9zpy-0 useRenderAst__StyledH3-sc-a2ev0j-2 kiOxox ecFgBS">Chi</h3>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH"><a href="https://github.com/go-chi/chi" rel="nofollow,noopener" target="_blank" class="Link__StyledLink-sc-1mbdmd1-0 erzCIz">Chi</a> is a lightweight, and idiomatic router for building Go HTTP services and an ideal alternative for a framework.</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">In the beginning, I actually started with Chi. After a few days and a little search, I realized that it’s really similar to the standard <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">http</code> package in Golang, and most of <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">Chi</code>’s code is merged to the core of Golang project, and that’s really great!</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">However, it seems using <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">Chi</code> doesn’t have any big advantages over the standard <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">http</code> package anymore (<a href="https://www.reddit.com/r/golang/comments/1avn6ih/is_chi_relevant_anymore/" rel="nofollow,noopener" target="_blank" class="Link__StyledLink-sc-1mbdmd1-0 erzCIz">of course there is middleware and grouping</a>).</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">So I decided to use something else.</p>
<h3 class="H3-sc-oa9zpy-0 useRenderAst__StyledH3-sc-a2ev0j-2 kiOxox ecFgBS">Echo</h3>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH"><a href="https://echo.labstack.com/" rel="nofollow,noopener" target="_blank" class="Link__StyledLink-sc-1mbdmd1-0 erzCIz">Echo</a> is a high performance, extensible, minimalist, relatively new framework that I had no former knowledge of.</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">Echo has a few features that I didn’t want to write myself, for example:</p>
<ul class="useRenderAst__List-sc-a2ev0j-5 ilEMaS">
<li class="useRenderAst__ListItem-sc-a2ev0j-6 ckovHX">Responses are easier to handle. It’s easier to write:</li>
</ul>
<deckgo-highlight-code language="go">
          <code slot="code" class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">return c.String(http.StatusOK, &quot;Welcome&quot;)</code>
        </deckgo-highlight-code>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH"><sup>than:</sup></p>
<deckgo-highlight-code language="go">
          <code slot="code" class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">w.Write([]byte(&quot;Welcome&quot;))
return</code>
        </deckgo-highlight-code>
<ul class="useRenderAst__List-sc-a2ev0j-5 ilEMaS">
<li class="useRenderAst__ListItem-sc-a2ev0j-6 ckovHX">It has a lot of <a href="https://echo.labstack.com/docs/category/middleware" rel="nofollow,noopener" target="_blank" class="Link__StyledLink-sc-1mbdmd1-0 erzCIz">middlewares</a></li>
<li class="useRenderAst__ListItem-sc-a2ev0j-6 ckovHX">Because it works with the standard <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">http</code> package, writing tests is easy. Just need to create the <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">context</code> and you’re good to go:</li>
</ul>
<deckgo-highlight-code language="go">
          <code slot="code" class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">req := httptest.NewRequest(http.MethodPost, &quot;/&quot;, strings.NewReader(userJSON))
req.Header.Set(echo.HeaderContentType, echo.MIMEApplicationJSON)
rec := httptest.NewRecorder()
c := e.NewContext(req, rec)</code>
        </deckgo-highlight-code>
<ul class="useRenderAst__List-sc-a2ev0j-5 ilEMaS">
<li class="useRenderAst__ListItem-sc-a2ev0j-6 ckovHX">Echo includes more features that I didn’t check out yet, so be sure to <a href="https://echo.labstack.com/docs" rel="nofollow,noopener" target="_blank" class="Link__StyledLink-sc-1mbdmd1-0 erzCIz">read the documentation</a>.</li>
</ul>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH"><em>Of course there are other great frameworks and routers out there like <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">fiber</code> and <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">gin</code>, and the standard <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">http</code> package also works great for a project like this. But I’ve decided to use <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">Echo</code> for now.</em></p>
<h2 class="H2-sc-15h7d0q-0 useRenderAst__StyledH2-sc-a2ev0j-1 iA-dMfG dExpbn">Project structure</h2>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">If you’ve worked with Laravel, you know it enforces a specific project structure. But in Go (or any language without using a framework actually), you can structure your project however you want… which can actually be problematic!</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">When I was refactoring the <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">Gorm</code> project that I had, I found the <a href="https://github.com/golang-standards/project-layout" rel="nofollow,noopener" target="_blank" class="Link__StyledLink-sc-1mbdmd1-0 erzCIz">Golang Standard Project Layout</a> which was beautiful and unique, followed by various projects.</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">However, there was a problem. Despite being great, It didn’t say anything about writing REST-API backends with TDD and the Repository Pattern.</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">So at first, I created my project like this:</p>
<deckgo-highlight-code>
          <code slot="code" class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">cmd/
    web/
        main.go
internal/
    entities/
        user.go
    errors/
        ...
    handlers/
        ...
    repositories/
        ...
    services/
        ...</code>
        </deckgo-highlight-code>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">And I was happy. The problem started when I wanted to inject repositories into my services.</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">Having all the services in the same package meant that I couldn’t have for example, separate <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">repo</code> structs for each service.</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">At this point, you know that I’ve failed to implement TDD in my project, but I was trying! I knew I had to change the structure of my project. So I decided to make it more like <a href="https://en.wikipedia.org/wiki/Domain-driven_design" rel="nofollow,noopener" target="_blank" class="Link__StyledLink-sc-1mbdmd1-0 erzCIz">DDD</a>:</p>
<deckgo-highlight-code>
          <code slot="code" class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">cmd/
    web/
        main.go
internal
    auth
        errors\
            ...
        http\
            ...
        repository\
            ...
        service\
            ...
    user\
        errors\
            ...
        http\
            ...
        repository\
            ...
        service\
            ...
</code>
        </deckgo-highlight-code>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">Now we’re talking! Now I can inject the repositories into the services with duplicate names and test each of them easily.</p>
<h2 class="H2-sc-15h7d0q-0 useRenderAst__StyledH2-sc-a2ev0j-1 iA-dMfG dExpbn">Testing… 1, 2, 3?</h2>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">As I said, I wanted to try TDD because the minute I read <a href="https://quii.gitbook.io/learn-go-with-tests/" rel="nofollow,noopener" target="_blank" class="Link__StyledLink-sc-1mbdmd1-0 erzCIz">Learn Go with tests</a> by <a href="https://twitter.com/quii" rel="nofollow,noopener" target="_blank" class="Link__StyledLink-sc-1mbdmd1-0 erzCIz">@quii</a>, I fell in love with it! I’ve read it a few times, and I’m never tired of reading it. It’s really good!</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">But I still didn’t learn how to start writing a RESTful API backend with TDD (because I didn’t realize that <a href="https://quii.gitbook.io/learn-go-with-tests/build-an-application/http-server" rel="nofollow,noopener" target="_blank" class="Link__StyledLink-sc-1mbdmd1-0 erzCIz">@quii already talked about in the book</a>)</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">So I decided to start with the basics. I created a simple <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">main.go</code>, <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">repository.go</code> and a <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">service.go</code> and after that, wrote a unit test for <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">service.go</code>.</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">Here is what the first sample looked like:</p>
<deckgo-highlight-code language="go">
          <code slot="code" class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">
// user_repository_mock.go

type UserRepositoryMock struct { }

func NewUserRepositoryMock() UserRepositoryMock {
 	return UserRepositoryMock{}
}

func (r UserRepositoryMock) FindByUsername(username string) (*entities.User, error) {
 	return nil, errors.UserNotFound{}
}</code>
        </deckgo-highlight-code>
<deckgo-highlight-code language="go">
          <code slot="code" class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">
// service.go

type UserRepository interface {
	FindByUsername(string) (entities.User, error)
}

type UserService struct {
 	repo UserRepository
}

func NewUserService(userRepository UserRepository) UserService {
 	return UserService{
 		repo: userRepository,
 	}
}

func (s UserService) Login(username, password string) (*entities.User, error) {
 	user, err := s.repo.FindByUsername(username)
 	if err != nil {
 		return nil, err
 	}

 	if password != user.Password {
 		return nil, errors.PasswordIsWrong{}
 	}

 	return user, nil
}</code>
        </deckgo-highlight-code>
<deckgo-highlight-code language="go">
          <code slot="code" class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">
// service_test.go

func TestUserService(t *testing.T) {
 	t.Run(&quot;Login not found&quot;, func(t *testing.T) {
 		userRepository := repositories.NewUserRepositoryMock()
 		userService := NewUserService(userRepository)
 		_, err := userService.Login(&quot;test&quot;, &quot;test&quot;)
 		if !errors.Is(err, UserNotFound{}) {
 			t.Fatalf(&quot;want &lt;%v&gt;, got: &lt;%v&gt;&quot;, UserNotFound{}, err)
 		}
 	})
}</code>
        </deckgo-highlight-code>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">I thought that was a good start, but what the hell should I do in <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">UserRepositoryMock</code>?
In the real <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">UserRepository</code>, I checked the user against a <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">database</code>. But I had no idea whether I should do the same thing for <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">UserRepositoryMock</code> and mock a <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">database</code> or not?</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">By mocking each method separately in query builders, testing would be easy. For example I could easily mock <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">select</code> or <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">insert</code> method. But while working with <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">sqlc</code>, I faced some challenges in writing tests.</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">So I had to decide:</p>
<ul class="useRenderAst__List-sc-a2ev0j-5 ilEMaS contains-task-list">
<li class="useRenderAst__ListItem-sc-a2ev0j-6 ckovHX task-list-item"><input type="checkbox" disabled=""/> Do I want to test all my queries?</li>
<li class="useRenderAst__ListItem-sc-a2ev0j-6 ckovHX task-list-item"><input type="checkbox" disabled=""/> Or do I want to test my services?</li>
</ul>
<h3 class="H3-sc-oa9zpy-0 useRenderAst__StyledH3-sc-a2ev0j-2 kiOxox ecFgBS">Testing queries</h3>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">Don’t ever do this! Testing queries or query builders (or in this case, <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">sqlc</code>) is a bad idea. Why you may ask? Here are some of the reasons:</p>
<ul class="useRenderAst__List-sc-a2ev0j-5 ilEMaS">
<li class="useRenderAst__ListItem-sc-a2ev0j-6 ckovHX">You’re testing a 3rd party package, not your code.</li>
<li class="useRenderAst__ListItem-sc-a2ev0j-6 ckovHX">For testing queries, you need an actual <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">database</code>, and that makes it an integration test.</li>
<li class="useRenderAst__ListItem-sc-a2ev0j-6 ckovHX">Running integration tests is slow.</li>
</ul>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">I’m proud to say that I did create a <a href="https://github.com/mostafaqanbaryan/go-rest/commit/864ca86d266825383151ce52f5d5c19c69831bb7#diff-47417e701aa4c04563c04211b28e891ffa5592f0ea2046e8d4c8a8cbf9aa0313" rel="nofollow,noopener" target="_blank" class="Link__StyledLink-sc-1mbdmd1-0 erzCIz">mock driver for sqlc</a> and before that, <a href="https://github.com/mostafaqanbaryan/go-rest/commit/89268a3153f6e9022196fb9d73b7c45305ac6d07#diff-17182578d392c41d39095ed310494918bbfd5168347d249e164804e114e291e9" rel="nofollow,noopener" target="_blank" class="Link__StyledLink-sc-1mbdmd1-0 erzCIz">for database/mysql</a> too, and… that was a waste of my time.</p>
<h3 class="H3-sc-oa9zpy-0 useRenderAst__StyledH3-sc-a2ev0j-2 kiOxox ecFgBS">Testing services</h3>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">Testing a <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">service</code> is a better method than testing a <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">query</code> given its serious downsides. You can create mock/stub repositories and test your services against them.</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">So now I know what should I do in my <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">UserRepositoryMock</code>: I should have a stub and work with that.</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">The <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">UserRepositoryMock</code> should be like the real <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">UserRepository</code>, but without the <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">database</code> logic:</p>
<deckgo-highlight-code language="go">
          <code slot="code" class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">
// user_repository_mock.go

type MockUserRepository struct {
	List map[int64]*entities.User
}

func (r MockUserRepository) FindByUsername(username string) (entities.User, error) {
	for _, user := range r.List {
		if username == user.Username {
			return *user, nil
		}
	}

	return entities.User{}, driverErrors.ErrRecordNotFound
}
</code>
        </deckgo-highlight-code>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">With this change, <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">service_test.go</code> worked exactly as intended.</p>
<h2 class="H2-sc-15h7d0q-0 useRenderAst__StyledH2-sc-a2ev0j-1 iA-dMfG dExpbn">So, Is This TDD?</h2>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">Well, no. If I wanted to use TDD, I shouldn’t have written my RESTful API backend with the Repository Pattern at first. Instead, I should have created a simple <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">main_test.go</code> and worked it up.</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">Since it was my first time using Golang for something like this (<a rel="follow" target="_self" class="Link__StyledLink-sc-1mbdmd1-0 erzCIz" href="/golang-vs-php/">I have written some services with Go before</a>), I needed to create a structure for my project and select some tools beforehand.</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">But after that, I changed the structure of the project a little <em>(again)</em>, removed all the <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">service_test.go</code> files, moved the tests to <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">http_test.go</code>, and tested the handlers. I had a few good reasons for switching from testing a <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">service</code> to testing handlers:</p>
<ul class="useRenderAst__List-sc-a2ev0j-5 ilEMaS">
<li class="useRenderAst__ListItem-sc-a2ev0j-6 ckovHX">Although testing a <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">service</code> is a great way to test the business logic, it’s not good for testing a RESTful API backend.</li>
<li class="useRenderAst__ListItem-sc-a2ev0j-6 ckovHX">Testing requests like a user lead to testing validations and model bindings in the handlers.</li>
<li class="useRenderAst__ListItem-sc-a2ev0j-6 ckovHX">For testing the handlers separately, I would have to duplicate a lot of tests between the <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">http_test.go</code> and the <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">service_test.go</code> files, and somebody would have to maintain them.</li>
<li class="useRenderAst__ListItem-sc-a2ev0j-6 ckovHX">Currently, the services are really thin and don’t have big logics in them. So there is no need to test them separately.</li>
</ul>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">So the final structure of the project is like this:</p>
<deckgo-highlight-code>
          <code slot="code" class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">cmd/
    web/
        main.go
internal/
    auth/
        errors/
            errors.go
        http/
            handler.go
        service/
            service.go
    database/
        queries/
    http/
        http.go
        http_test.go
    testutils/
        mock/
            auth_repository.go
            user_repository.go
    user/
        errors/
            errors.go
        http/
            handler.go
        service/
            service.go</code>
        </deckgo-highlight-code>
<h2 class="H2-sc-15h7d0q-0 useRenderAst__StyledH2-sc-a2ev0j-1 iA-dMfG dExpbn">Migrations</h2>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">Migrations are a significant part of any project.</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">Originally, I selected <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">go-migrate</code> to do the migrations. But I realized that it wasn’t the best tool for the job.</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">The problem was that <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">go-migrate</code> only worked with <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">SQL</code>, and it was not possible to create something in the code.</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">For instance, to create a record for my <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">admin</code> in the <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">users</code> table, I needed to generate a hash for the password using <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">argon2</code>. So either I had to generate the hash beforehand, or I could use the function already defined in my code.</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">Because of that, I’ve decided to use <a href="https://github.com/pressly/goose" rel="nofollow,noopener" target="_blank" class="Link__StyledLink-sc-1mbdmd1-0 erzCIz">goose</a> instead.</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH"><code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">goose</code> lets you choose what kind of migration you want to work with.</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">For example, I could have a migration for creating tables in <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">SQL</code> (because <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">sqlc</code> needs its schema to work), and create another one as a <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">.go</code> file. It’s really powerful.</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">After some time, I added another <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">main.go</code> to <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">cmd/cli</code> and created a separate executable for handling commands. Currently, it’s only used for migrations via <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">goose</code>. But it could be used for other things like cronjobs or scripts as well.</p>
<h2 class="H2-sc-15h7d0q-0 useRenderAst__StyledH2-sc-a2ev0j-1 iA-dMfG dExpbn">Conclusion</h2>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">So that’s how <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">GoREST</code> is built. Of course, there is much more done here than said, like <a href="https://github.com/go-playground/validator" rel="nofollow,noopener" target="_blank" class="Link__StyledLink-sc-1mbdmd1-0 erzCIz">validation</a>, configuring <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">sqlc</code> to work with the validator, using <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">docker-compose</code> for launching <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">MySQL</code> and <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">Redis</code>, <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">air</code> for hot-reload, and so on.</p>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">Currently, it only has a few endpoints, including <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">/auth/login</code> and <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">/auth/register</code> and a simple <code class="useRenderAst__Code-sc-a2ev0j-7 eUrflm">/me</code> endpoint. All this code exists at the <a href="https://github.com/mostafaqanbaryan/go-rest" rel="nofollow,noopener" target="_blank" class="Link__StyledLink-sc-1mbdmd1-0 erzCIz">GoREST repository in my GitHub</a>, but it’s not going to be the final version of the project. I’m going to <a href="https://github.com/mostafaqanbaryan/go-rest#-todo-roadmap" rel="nofollow,noopener" target="_blank" class="Link__StyledLink-sc-1mbdmd1-0 erzCIz">add more features</a> to it, such as:</p>
<ul class="useRenderAst__List-sc-a2ev0j-5 ilEMaS">
<li class="useRenderAst__ListItem-sc-a2ev0j-6 ckovHX">OpenAPI specs</li>
<li class="useRenderAst__ListItem-sc-a2ev0j-6 ckovHX">An auth middleware</li>
<li class="useRenderAst__ListItem-sc-a2ev0j-6 ckovHX">A rate limiter</li>
<li class="useRenderAst__ListItem-sc-a2ev0j-6 ckovHX">More general endpoints</li>
<li class="useRenderAst__ListItem-sc-a2ev0j-6 ckovHX">Handling Logger</li>
<li class="useRenderAst__ListItem-sc-a2ev0j-6 ckovHX">A mechanism for cron jobs</li>
<li class="useRenderAst__ListItem-sc-a2ev0j-6 ckovHX">Separating services into instances and implementing (g)rpc</li>
<li class="useRenderAst__ListItem-sc-a2ev0j-6 ckovHX">…</li>
</ul>
<p class="P-sc-1phssr4-0 useRenderAst__StyledP-sc-a2ev0j-0 khorTA iTegOH">So, I hope you find my struggles educational as I certainly learned from them.</p></div></article><div class="Wrapper-sc-1quni3o-0 YXYyj"><span class="HalfBorder__Border-sc-r1ejzc-0 kGIVBE"></span><p class="P-sc-1phssr4-0 Share__Title-sc-19spv6b-0 khorTA bLKOyn">Share This Post</p><a href="https://www.facebook.com/sharer/sharer.php?u=" target="_blank" aria-label="Share on Facebook" rel="noopener" class="ShareButton-sc-qn9adb-0 hGWBRf"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg></a><a href="https://twitter.com/intent/tweet?text=How%20to%20Write%20a%20Backend%20the%20Worst%20Way%EF%B9%95%20Creation%20of%20GoREST&amp;url=" target="_blank" aria-label="Share on Twitter" rel="noopener" class="ShareButton-sc-qn9adb-0 hGWBRf"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg></a><a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=&amp;title=How%20to%20Write%20a%20Backend%20the%20Worst%20Way%EF%B9%95%20Creation%20of%20GoREST" target="_blank" aria-label="Share on LinkedIn" rel="noopener" class="ShareButton-sc-qn9adb-0 hGWBRf"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg></a><a href="/cdn-cgi/l/email-protection#9aa5e9eff8f0fff9eea7d2f5edbfa8aaeef5bfa8aacde8f3eeffbfa8aafbbfa8aad8fbf9f1fff4febfa8aaeef2ffbfa8aacdf5e8e9eebfa8aacdfbe3bfdfdcbfd8a3bfa3afbfa8aad9e8fffbeef3f5f4bfa8aaf5fcbfa8aaddf5c8dfc9cebcfbf7eaa1f8f5fee3a7" aria-label="Share by Email" rel="noopener" class="ShareButton-sc-qn9adb-0 hGWBRf"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg></a></div></div><div style="padding-top:2rem;padding-bottom:2rem" class="Card-sc-1pst17q-0 bniOQm"><p class="P-sc-1phssr4-0 HireMe__StyledP-sc-a0s3ol-0 khorTA iHZwBE">If you want to #Contact me, I&#x27;m in <a href="https://ca.linkedin.com/in/mostafaqanbaryan" rel="follow" target="_self" class="Link__StyledLink-sc-1mbdmd1-0 erzCIz">LinkedIn</a></p></div><div class="PageNav__Wrapper-sc-1t36ebr-0 fgNCAW"><a rel="prev" class="Button-sc-1f9gjm8-0 leuYlz" href="/golang-vs-php/">← <!-- -->Golang or PHP?</a></div></section></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/how-to-write-a-backend-the-worst-way-creation-of-go-rest/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-df00d63bcd6d8745c1fb.js\"],\"component---cache-caches-gatsby-plugin-offline-app-shell-js\":[\"/component---cache-caches-gatsby-plugin-offline-app-shell-js-1c4cb2f5f60cb22e32d6.js\"],\"component---src-pages-404-jsx\":[\"/component---src-pages-404-jsx-15e1386888f3bc6b9a55.js\"],\"component---src-templates-blog-post-jsx\":[\"/component---src-templates-blog-post-jsx-033737f48d229ad7e215.js\"],\"component---src-templates-index-jsx\":[\"/component---src-templates-index-jsx-29d9da192c895b321139.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="a3228c09f50b95b1fa7b";</script><script src="/webpack-runtime-7a11b84b3c5d425ed3a2.js" async></script><script src="/framework-faca51e2a779912b1cbb.js" async></script><script src="/app-df00d63bcd6d8745c1fb.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>