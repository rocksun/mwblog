糟糕的代码不仅仅是不方便，它还是一个重大的负担，可能导致代价高昂的故障和沮丧的开发团队。 随着AI生成代码的使用越来越多，将有问题的代码引入软件系统的可能性也在增加。 无论软件开发领域如何发展，始终如一地应用最佳实践对于保持代码质量至关重要。

让我们探讨一下技术债务的概念、好代码和坏代码之间的区别、必要的最佳实践以及将它们集成到您的开发工作流程中的实用策略。

## 忽视代码质量的代价

“我们会将它添加到待办事项列表”这句话通常预示着[技术债务](https://www.sonarsource.com/learn/technical-debt/)的累积。 这是指将来需要做的额外工作，以纠正当前采取的更快、更便捷的解决方案的后果，例如架构捷径或仓促的开发。 就像金融债务一样，技术债务会随着时间的推移而累积“利息”，解决起来变得越来越昂贵。

想想2023年1月发生的事件，当时美国有超过1300个航班被取消，还有10000多个航班延误。 原因是什么？ 在数据库更新期间意外删除的文件[导致空中任务通知 (NOTAM) 系统瘫痪](https://www.cnbc.com/2023/01/11/faa-orders-airlines-to-pause-departures-until-9-am-et-after-system-outage.html)。 这不是一个孤立的事件； 多年来，忽视技术债务一直是一个持续存在的问题。

本质上，[技术债务源于未解决的技术决策](https://thenewstack.io/technical-debt-continues-to-mount-heres-how-to-solve-it/)，包括编写糟糕的代码，这些代码在整个软件系统中扩散，导致未来的复杂情况。 当这些脆弱的系统最终崩溃时，修复的成本远远超过了最初防止债务的成本。 此外，开发人员平均花费[23% 的时间在技术债务上](https://dl.acm.org/doi/10.1145/3194164.3194178)，从而导致认知压力、不满、倦怠，甚至更多的债务。

看似简单的解决方案是避免推送糟糕的代码。 然而，日常的截止日期、现有系统的复杂性以及对快速修复的需求通常使这成为一个相当大的挑战。 始终如一地编写清晰、可维护的代码需要纪律、意识和强大的开发实践的实施。

## **好、坏和丑：定义“好代码”**

什么构成“糟糕的代码”？ 它包含很多东西：硬编码的密钥、过于复杂的函数、缺失的单元测试、不必要的重复、不清晰的文档等等。 虽然有些糟糕的代码很难理解，但其他形式可能很容易理解，但仍然存在效率低下、缺乏可维护性或设计不佳的问题。 较难理解的代码更容易出现错误和漏洞，因为其复杂性使得开发人员难以正确解释其逻辑，从而在修改、调试或集成过程中导致错误。

如果您发现自己反复重读一段代码，那么它很可能需要重构。 代码理解的困难不仅仅是不方便，它还会严重使调试复杂化，尤其是在关键的故障期间。 那时[代码真正变得“丑陋”](https://thenewstack.io/code-quality-becomes-even-more-vital-in-the-ai-era/)。

那么，什么是“好代码”？ 虽然可读性是一个组成部分，但仅凭此特性来定义好代码是过于简单化了。 好的代码还包含诸如可维护性、效率、意图清晰和遵守最佳实践等因素。 好代码的具体属性可能因编程语言、系统架构和框架而异。 然而，从根本上讲，高质量的代码是可维护、可靠和安全的。

## **任何语言的代码质量最佳实践**

* **切勿硬编码密钥：** 将敏感信息直接硬编码到您的代码中是技术债务和安全风险的重要来源。 2022 年 10 月，[丰田发现一个硬编码的密钥在公共存储库中暴露了](https://nhimg.org/toyota-breach)近五年。 像 API 令牌这样的敏感信息应该始终从安全环境中检索，而不是嵌入在代码本身中。
* **通过拥抱 DRY 原则来减少冗余：** “不要重复自己”(DRY) 原则是根本性的。 减少冗余可以最大限度地减少漏洞，并使代码更易于维护。 努力识别并消除任何可能的重复。
* **定义、划分和解耦职责以实现可维护性：** 单一职责原则 (SRP) 提倡通过将类和模块缩小到单个任务来简化代码。 此原则扩展到我们定义、划分和解耦服务和架构组件的方式，最终减轻技术债务。 具有多个职责的过度复杂的功能变得更难阅读、测试和维护。 通过将任务分解为单独的、集中的函数，您可以定义和解耦它们，从而使代码更易于理解、测试、维护和扩展。
* **编写有效的代码注释和文档：** 有意义的注释可以提高代码的可读性，但过多的或写得不好的注释会阻碍代码的可读性。 谨慎地使用注释来解释代码背后的“原因”，而不仅仅是“什么”。 变量和函数的有意义的名称通常可以减少对大量注释的需求。 此外，使用文档字符串来记录函数和类的目的、参数和返回值。
* **保持一致性并构建持久的代码遗产：** 在整个代码库中强制执行统一的风格是保持一致性的最简单方法，包括缩进和命名约定等选择。 一致的代码风格简化了最佳实践的采用，从而实现单元测试标准的统一、更安全的重构和更好的文档。 它还有助于新团队成员的入职。

## **从理论到实践：实施编码标准**

理解最佳实践是一回事； 实施它们是另一回事。 请记住，最佳实践是指旨在授权开发人员进行协作和高效工作的指南，而不是为了控制他们。 它们应该激发和启用，而不是限制。

* **向他人学习：** 积极阅读信誉良好的开源项目的代码，以深入了解不同的风格、观点和用例。
* **利用自动化并左移：** 尽早将[静态代码分析](https://thenewstack.io/level-up-your-software-quality-with-static-code-analysis/)工具、linters 和代码审查集成到您的开发工作流程中。 这些工具可以自动识别潜在问题并强制执行编码标准，从而最大限度地减少糟糕代码的影响，并使您能够专注于更复杂的问题。
* **培养好奇心并接受例外情况：** 了解编码风格强制执行背后的原理。 有时，可能有充分的理由偏离标准，但这些例外情况应该是有意识的和有据可查的。

避免技术债务不仅仅是编写“好的”代码； 而是对清晰性、可维护性和协作的持续承诺。 通过采用最佳实践，您可以构建更强大、可扩展和可持续的软件系统。 此外，使用像 [SonarQube](https://www.sonarsource.com/products/sonarqube/) 这样的工具大规模地强制执行代码质量，这些工具与现有的开发管道无缝集成，有助于使这更容易。

今天投入编写好的[代码的努力将在减少维护成本方面获得可观的回报](https://thenewstack.io/unraveling-the-costs-of-bad-code-in-software-development/)，更少的故障以及明天更高效和更满意的开发团队。