
<!--
title: 超越代码：规模化的真正工作
cover: https://cdn.thenewstack.io/media/2025/06/0b989e3f-austin-distel-guij0yszpig-unsplash-scaled.jpg
summary: 全球化扩展别只关注代码！关注用户真实痛点：网络差、设备旧、支付难。Twilio的SMS困境、电商支付失败都在提醒我们，要理解当地电信法规，集成local支付，设计离线模式。设计要考虑不同视角，压力测试基础设施，拥抱“边缘案例”，构建有弹性的云原生系统。
-->

全球化扩展别只关注代码！关注用户真实痛点：网络差、设备旧、支付难。Twilio的SMS困境、电商支付失败都在提醒我们，要理解当地电信法规，集成local支付，设计离线模式。设计要考虑不同视角，压力测试基础设施，拥抱“边缘案例”，构建有弹性的云原生系统。

> 译自：[Beyond the Code: The Real Work of Scaling](https://thenewstack.io/beyond-the-code-the-real-work-of-scaling/)
> 
> 作者：Rahul Chandel

在考虑全球化和扩展到新兴市场时，战略幻灯片和董事会演示文稿通常看起来令人印象深刻：数百万用户、未开发的机会以及对全球扩展的兴奋。对于工程领导者，我们专注于基本组件——确保技术可靠运行：稳定可靠的基础设施、高效的代码、可预测的部署以及所有用于规划技术推广以交付到新位置的要素。

然而，我们没有看到或准备好的真正挑战是关于我们正在扩展的地区日常生活的微妙之处——持续、不可靠和缓慢的连接的现实，人们可以负担的不同设备，当地的支付方式，文化背景，以及理解和使用技术的世界观。

我们观察到用户以我们的模拟无法预测的方式挣扎，遇到我们的代码无法触及的无形障碍。在这一点上，我们意识到最具挑战性的[规模化部分不是工程](https://thenewstack.io/the-6-pillars-of-platform-engineering-part-1-security/)，而是同理心——拥有像重视技术本身一样重视人类使用的领导力。

## 认为你的代码可以应对季风吗？

当然，你可以预测你的云平台在可测试条件下的行为，但这是否意味着你已经为孟买季风季节做好了准备，届时电网会闪烁。移动网络因暴雨而中断？或者当当地节日突然出现并关闭该区域时，最后一英里交付的混乱因素？我了解到的是，规模化的重大障碍并不总是技术错误，而是基于先前经验的假设。

### 来自类似 Twilio 的（通信 API）：

**挑战**：考虑[支持全球平台](https://thenewstack.io/how-team-topologies-supports-platform-engineering/)的挑战，该平台依赖 SMS 通信来传递时间敏感的信息（例如，用于验证或通知的 OTP）。当它扩展到由于运营商问题（例如，印度或非洲部分地区）无法发送 SMS 的新市场时，其增长前景（和信誉）可能会因很少或没有 SMS 交付而迅速恶化。

**现实**：此时，该公司了解到它遇到了流量问题，需要注册发件人 ID（在印度像 DLT 系统一样存在），由于必须遵守国家 DND 注册表而阻止了消息，不可靠的本地运营商导致消息丢失，或者找到可靠但昂贵的路由。实际上，典型的国际网关通常不起作用。

**领导决策**：领导层应该抽出时间来了解当地的电信法规，与具有增强运营商关系的本地 SMS 聚合商建立关系，提供动态路由以选择最佳可用路径，并可能[开发使用语音 OTP 或不可靠数据](https://thenewstack.io/can-companies-really-self-host-at-scale/)连接进行推送通知的后备方案（此外，可以考虑基于 WhatsApp 的消息传递，在某些位置，基于搜索结果的可传递性似乎更高）。

**教训**：通信基础设施在全球范围内并不公平或公正。如果不努力了解电信公司本地到国际的参与、通过法规进行领导以及必要的适应渠道，成功只会遇到障碍。

### 支付系统场景

**挑战**：考虑一家全球电子商务[公司或 SaaS](https://thenewstack.io/how-saas-companies-can-monetize-generative-ai/)提供商扩展到东南亚（如印度尼西亚和菲律宾）或非洲，并期望最终用户通过信用卡支付的挑战。几乎每笔交易都显示下降。

**现实**：它现在发现信用卡普及率很低。用户主要使用本地电子钱包、银行转账、移动货币（例如 M-Pesa）或货到付款进行支付。此外，由于移动互联网连接有限，结账流程需要集成本地支付方式，并且用户失败的概率约为 50-90%（请参阅搜索结果）。每个国家/地区都有自己的监管要求，导致市场分散。
**领导层决策**：领导层应优先考虑集成本地支付方式。同样重要的是，彻底重新设计结账流程，以应对较差的连接性。例如，使用 USSD 菜单完成移动支付的结账，仅使用最少的数据进行下载，进行服务器端回调以确认交易状态（即使客户端在结账期间断开连接），或者采用可能需要部分离线支付选项的支付方式。确保每个市场都同样符合合规性。教训：支付本地化不是可选项，并且没有足够强大的技术或[所需的服务解决方案](https://thenewstack.io/every-startup-needs-a-seamless-cloud-solution/)来解决支付过程中不可靠的连接问题，而支付实际上是在此过程中完成的。

## 跨文化和背景领导的指导原则

这些不是硬性规定，而是在[扩展的复杂挑战](https://thenewstack.io/scaling-from-simple-to-complex-cache-challenges-and-solutions/)中非常有帮助的思维模式。

**鼓励设计中不同的视角**：不在回音室中进行设计至关重要。务必征求并采纳在您的目标市场工作和生活的[工程师和团队成员](https://thenewstack.io/how-crewai-enables-ai-agents-as-collaborative-team-members/)的见解。这些都是有用的视角，可以帮助您挑战自己的假设并及早发现盲点。

**通过真实用户互动寻求理解**：模拟器和指标很有用，但它们无法取代看到真实用户与您的产品互动所产生的共情。观察某人在二手的低成本设备上耐心地与您的应用程序作斗争，或者浏览令人困惑的工作流程，可以教会您无法在数据中捕获的东西。

**“边缘案例”可能成为主流**：在一个市场中被标记为小问题或小用户群的问题，可能代表另一个市场的核心问题或大部分用户。考虑提高与这些在本地相关的问题互动的重要性，例如允许为没有银行账户的用户提供 SMS 支付，从而将他们转变为有银行账户的客户，但在与您的其他市场活动不同的战略背景下。

**争取弹性**：在各种条件下（例如，离线同步、低带宽模式）维护系统的弹性是有代价的，并且通常还需要与其他优先级进行权衡。关键是沟通这些决策的价值及其在降低风险方面的长期利益，因为风险可以被定义为可持续增长的“非必需品”。承认并庆祝

**主要收获：**

**认识到数字鸿沟是进化的一部分：** 快速的数字进化存在，因为它们竞相扩大用户，但与此同时，它们必须承认存在大量受因素（速度、可靠性、成本、访问、设备）限制的人群，并且它们不能简单地为频谱的顶部进行设计。

**首先进行压力测试**：[设计人员不仅需要对服务器进行负载压力测试](https://thenewstack.io/devs-need-system-design-tools-not-diagramming-tools/)，还需要对关于基础设施依赖以及用户与该基础设施可靠性相关联的能力的任何假设进行压力测试。例如，您的组织如何为用户受到影响其网络的停电影响的情况进行设计，例如雨天或极端天气（例如，季风）？信号受到基础设施问题的影响，例如低带宽信号强度。在此期间进行测试可能只会显示带宽限制的预期持续时间。

**当出现问题时（反思并重建信任）**：建立透明度和问责制。也许可以广泛分享经验教训（内部甚至通过公开的事后分析）？承认失败会为重建的信任增添可信度。嵌入经验教训。促进结构化讨论（例如，包括您市场变量的“假设”研讨会），以帮助将过去的失败转化为未来的规划，以避免重复失败。

**结论**

在新兴市场的经验强化了一个重要的教训：我们的技术应该适应当地的实际情况，而不是相反。有[需要克服的挑战](https://thenewstack.io/how-to-overcome-challenges-in-an-api-centric-architecture/)，这并非某些应用程序处理间歇性连接、破坏性支付生态系统、设备普及或我们可以从中摆脱出来的能力的情况。必须内置弹性。在为产品设计有效的离线模式时，请考虑如何充分集成本地支付系统，而不是复制现有系统并进行与当地条件相关的必要压力测试；这些不是边缘案例。这些是构建可持续且重要的全球产品的关键方面。
[YOUTUBE.COM/THENEWSTACK](https://youtube.com/thenewstack?sub_confirmation=1)

技术发展日新月异，不要错过任何一集。订阅我们的 YouTube 频道，即可观看我们所有的播客、访谈、演示等。