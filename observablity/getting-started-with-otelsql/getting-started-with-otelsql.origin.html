<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=manifest href=/favicons/site.webmanifest><link rel=mask-icon href=/favicons/safari-pinned-tab.svg color=#4f62ad><meta name=msapplication-config content="/favicons/browserconfig.xml"><meta name=msapplication-TileColor content="#4f62ad"><meta name=theme-color content="#4f62ad"><title>Getting started with otelsql, the OpenTelemetry instrumentation for Go SQL | OpenTelemetry</title>
<meta name=description content="otelsql is an instrumentation library for the database/sql library of the Go programming language. It generates traces and metrics from the application when interacting with databases. By doing that, the library allows you to identify errors or slowdowns in your SQL queries that potentially impact the performance of your application.
Let&amp;rsquo;s go dive into how to use this library!
Getting Started otelsql is a wrapper layer for interfaces from database/sql. When users use the wrapped database interfaces, the otelsql generates the telemetry data and passes operations to the underlying database."><meta property="og:title" content="Getting started with otelsql, the OpenTelemetry instrumentation for Go SQL"><meta property="og:description" content="otelsql is an instrumentation library for the database/sql library of the Go programming language. It generates traces and metrics from the application when interacting with databases. By doing that, the library allows you to identify errors or slowdowns in your SQL queries that potentially impact the performance of your application.
Let&rsquo;s go dive into how to use this library!
Getting Started otelsql is a wrapper layer for interfaces from database/sql. When users use the wrapped database interfaces, the otelsql generates the telemetry data and passes operations to the underlying database."><meta property="og:type" content="article"><meta property="og:url" content="https://opentelemetry.io/blog/2024/getting-started-with-otelsql/"><meta property="og:image" content="https://opentelemetry.io/img/social/logo-wordmark-001.png"><meta property="article:section" content="blog"><meta property="article:published_time" content="2024-03-04T00:00:00+00:00"><meta property="article:modified_time" content="2024-03-04T13:18:12-08:00"><meta property="og:site_name" content="OpenTelemetry"><meta itemprop=name content="Getting started with otelsql, the OpenTelemetry instrumentation for Go SQL"><meta itemprop=description content="otelsql is an instrumentation library for the database/sql library of the Go programming language. It generates traces and metrics from the application when interacting with databases. By doing that, the library allows you to identify errors or slowdowns in your SQL queries that potentially impact the performance of your application.
Let&rsquo;s go dive into how to use this library!
Getting Started otelsql is a wrapper layer for interfaces from database/sql. When users use the wrapped database interfaces, the otelsql generates the telemetry data and passes operations to the underlying database."><meta itemprop=datePublished content="2024-03-04T00:00:00+00:00"><meta itemprop=dateModified content="2024-03-04T13:18:12-08:00"><meta itemprop=wordCount content="1689"><meta itemprop=image content="https://opentelemetry.io/img/social/logo-wordmark-001.png"><meta itemprop=keywords content><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://opentelemetry.io/img/social/logo-wordmark-001.png"><meta name=twitter:title content="Getting started with otelsql, the OpenTelemetry instrumentation for Go SQL"><meta name=twitter:description content="otelsql is an instrumentation library for the database/sql library of the Go programming language. It generates traces and metrics from the application when interacting with databases. By doing that, the library allows you to identify errors or slowdowns in your SQL queries that potentially impact the performance of your application.
Let&rsquo;s go dive into how to use this library!
Getting Started otelsql is a wrapper layer for interfaces from database/sql. When users use the wrapped database interfaces, the otelsql generates the telemetry data and passes operations to the underlying database."><link rel=preload href=/scss/main.min.2530e0acce972b35574f4e94ea72f49634f3a5cc1a0b610dfeab70c1b37ae4e3.css as=style><link href=/scss/main.min.2530e0acce972b35574f4e94ea72f49634f3a5cc1a0b610dfeab70c1b37ae4e3.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.3.min.js integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ==" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-QZHM7YEG07"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-QZHM7YEG07")}</script></head><body class="td-page td-blog"><header><nav class="td-navbar navbar-dark js-navbar-scroll"><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"><svg xmlns="http://www.w3.org/2000/svg" role="img" aria-labelledby="opentelemetry-logo-title" viewBox="-15.54 -18.54 1016.08 381.08"><title id="opentelemetry-logo-title">The OpenTelemetry Logo</title><style>svg{enable-background:new 0 0 985.5 345.7}</style><path fill="#fff" d="M185.6 188.8c-14.6 14.6-14.6 38.3.0 52.9s38.3 14.6 52.9.0c14.6-14.6 14.6-38.3.0-52.9-14.6-14.6-38.3-14.6-52.9.0zm39.6 39.6c-7.2 7.2-19 7.2-26.2.0s-7.2-19 0-26.2 19-7.2 26.2.0 7.2 19 0 26.2zm35.4-32h15.7v7.9c3.8-5.2 9.1-9 17.2-9 12.9.0 25.2 10.1 25.2 28.6v.2c0 18.5-12.1 28.6-25.2 28.6-8.4.0-13.5-3.8-17.2-8.3v23.7h-15.7v-71.7zm42.4 27.8v-.2c0-9.2-6.2-15.3-13.5-15.3s-13.4 6.1-13.4 15.3v.2c0 9.2 6.1 15.3 13.4 15.3 7.3-.1 13.5-6 13.5-15.3zm26.8.1v-.2c0-15.7 11.2-28.7 27.2-28.7 18.4.0 26.8 14.3 26.8 29.9.0 1.2-.1 2.7-.2 4.1h-38.3c1.5 7.1 6.5 10.8 13.5 10.8 5.2.0 9-1.6 13.4-5.6l8.9 7.9c-5.1 6.4-12.5 10.3-22.5 10.3-16.6-.1-28.8-11.7-28.8-28.5zm38.8-4.7c-.9-7-5-11.7-11.6-11.7-6.5.0-10.7 4.6-11.9 11.7h23.5zm26.4-23.2h16v8c3.7-4.7 8.4-9 16.5-9 12.1.0 19.1 8 19.1 20.9v36.4h-16v-31.4c0-7.6-3.6-11.4-9.7-11.4s-10 3.9-10 11.4v31.4h-16v-56.3zM237.9 4.9 215 27.8c-4.5 4.5-4.5 11.8.0 16.3l89.5 89.5c4.5 4.5 11.8 4.5 16.3.0l22.9-22.9c4.5-4.5 4.5-11.8.0-16.3L254.2 4.9c-4.5-4.5-11.8-4.5-16.3.0zM77.4 297.6c4.1-4.1 4.1-10.7.0-14.8l-11.7-11.7c-4.1-4.1-10.7-4.1-14.8.0l-24 24-6.6-6.6c-3.6-3.6-9.6-3.6-13.2.0s-3.6 9.6.0 13.2l39.7 39.7c3.6 3.6 9.6 3.6 13.2.0s3.6-9.6.0-13.2l-6.6-6.6 24-24zm121.2-227-50.9 50.9c-4.5 4.5-4.5 12 0 16.5l31.4 31.4c22.2-16 53.4-14 73.4 6l25.4-25.4c4.5-4.5 4.5-12 0-16.5l-62.8-62.8c-4.6-4.6-12-4.6-16.5-.1zm-32.7 112.1-18.6-18.6c-4.3-4.3-11.5-4.3-15.8.0L66 229.6c-4.3 4.3-4.3 11.5.0 15.8l37.1 37.1c4.3 4.3 11.5 4.3 15.8.0l42.1-42.1c-8.8-18.5-7.2-40.7 4.9-57.7zM476.2 193h-22.8v-15.2h62.1V193h-22.8v59.7h-16.5V193zm39.4 31.2v-.2c0-15.7 11.2-28.7 27.2-28.7 18.4.0 26.8 14.3 26.8 29.9.0 1.2-.1 2.7-.2 4.1h-38.3c1.5 7.1 6.5 10.8 13.5 10.8 5.2.0 9-1.6 13.4-5.6l8.9 7.9c-5.1 6.4-12.5 10.3-22.5 10.3-16.6.0-28.8-11.6-28.8-28.5zm38.8-4.6c-.9-7-5-11.7-11.6-11.7-6.5.0-10.7 4.6-11.9 11.7h23.5zm26.3-41.8h15.6v74.9h-15.6v-74.9zm26.7 46.5v-.2c0-15.7 11.2-28.7 27.2-28.7 18.4.0 26.8 14.3 26.8 29.9.0 1.2-.1 2.7-.2 4.1h-38.3c1.5 7.1 6.5 10.8 13.5 10.8 5.2.0 9-1.6 13.4-5.6l8.9 7.9c-5.1 6.4-12.5 10.3-22.5 10.3-16.5-.1-28.8-11.7-28.8-28.5zm38.9-4.6c-.9-7-5-11.7-11.6-11.7-6.5.0-10.7 4.6-11.9 11.7h23.5zm26.3-23.3h16v8c3.7-4.7 8.5-9 16.6-9 7.3.0 12.9 3.3 15.8 8.9 4.9-5.8 10.8-8.9 18.5-8.9 11.9.0 19 7.1 19 20.7v36.6h-16v-31.4c0-7.6-3.4-11.4-9.3-11.4-6 0-9.7 3.9-9.7 11.4v31.4h-16v-31.4c0-7.6-3.4-11.4-9.3-11.4-6 0-9.7 3.9-9.7 11.4v31.4h-16v-56.3zm97 27.8v-.2c0-15.7 11.2-28.7 27.2-28.7 18.4.0 26.8 14.3 26.8 29.9.0 1.2-.1 2.7-.2 4.1h-38.3c1.5 7.1 6.5 10.8 13.5 10.8 5.2.0 9-1.6 13.4-5.6l8.9 7.9c-5.1 6.4-12.5 10.3-22.5 10.3-16.6.0-28.8-11.6-28.8-28.5zm38.8-4.6c-.9-7-5-11.7-11.6-11.7-6.5.0-10.7 4.6-11.9 11.7h23.5zm28.1 16.1v-26.9h-6.8V195h6.8v-14.5h16.1V195H866v13.8h-13.3V233c0 3.7 1.6 5.5 5.2 5.5 3 0 5.6-.7 7.9-2v12.9c-3.4 2-7.3 3.3-12.7 3.3-9.9.0-16.6-3.9-16.6-17zm41.6-39.7h16.2v11.5c3.3-7.9 8.6-13 18.2-12.6v17h-.9c-10.8.0-17.4 6.5-17.4 20.2v21.1H878V196zm85.9-.6h17.2l-22.4 59.8c-4.5 11.9-9.3 16.3-19.2 16.3-6 0-10.4-1.5-14.7-4l5.5-12c2.2 1.3 4.9 2.3 7.1 2.3 2.8.0 4.4-.9 5.8-3.8l-22.9-58.6h17.5l13.3 39.7 12.8-39.7z"/></svg></span><span class=navbar-brand__name>OpenTelemetry</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/docs/><span>Docs</span></a></li><li class=nav-item><a class=nav-link href=/ecosystem/><span>Ecosystem</span></a></li><li class=nav-item><a class=nav-link href=/status/><span>Status</span></a></li><li class=nav-item><a class=nav-link href=/community/><span>Community</span></a></li><li class=nav-item><a class="nav-link active" href=/blog/><span>Blog</span></a></li></ul></div><div class="d-none d-lg-block"><div class=td-search><div class=td-search__icon></div><input type=search class="td-search__input form-control td-search-input" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><div class=td-search><div class=td-search__icon></div><input type=search class="td-search__input form-control td-search-input" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="td-sidebar-nav collapse td-sidebar-nav--search-disabled foldable-nav" id=td-section-nav><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-blog-li><a href=/blog/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-blog><span>Blog</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-blog2024-li><input type=checkbox id=m-blog2024-check checked>
<label for=m-blog2024-check><a href=/blog/2024/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-blog2024><span>2024</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-blog2024getting-started-with-otelsql-li><input type=checkbox id=m-blog2024getting-started-with-otelsql-check checked>
<label for=m-blog2024getting-started-with-otelsql-check><a href=/blog/2024/getting-started-with-otelsql/ title="Getting started with otelsql, the OpenTelemetry instrumentation for Go SQL" class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id=m-blog2024getting-started-with-otelsql><span class=td-sidebar-nav-active-item>Getting started with otelsql</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2024otel-collector-anti-patterns-li><input type=checkbox id=m-blog2024otel-collector-anti-patterns-check>
<label for=m-blog2024otel-collector-anti-patterns-check><a href=/blog/2024/otel-collector-anti-patterns/ title="OpenTelemetry Collector Antipatterns" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2024otel-collector-anti-patterns><span>OTel Collector Antipatterns</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2024kubecon-eu-li><input type=checkbox id=m-blog2024kubecon-eu-check>
<label for=m-blog2024kubecon-eu-check><a href=/blog/2024/kubecon-eu/ title="Join us for OpenTelemetry Talks and Activities at KubeCon + CloudNativeCon Europe 2024" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2024kubecon-eu><span>KubeCon EU '24</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2024demo-skyscanner-li><input type=checkbox id=m-blog2024demo-skyscanner-check>
<label for=m-blog2024demo-skyscanner-check><a href=/blog/2024/demo-skyscanner/ title="Making observability fun: How we increased engineers' confidence in incident management using a game" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2024demo-skyscanner><span>Skyscanner using OTel Demo</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2024outreachy-how-why-sakshi-li><input type=checkbox id=m-blog2024outreachy-how-why-sakshi-check>
<label for=m-blog2024outreachy-how-why-sakshi-check><a href=/blog/2024/outreachy-how-why-sakshi/ title="Outreachy - How, When & Why?" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2024outreachy-how-why-sakshi><span>Outreachy Internship</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-blog2023-li><input type=checkbox id=m-blog2023-check>
<label for=m-blog2023-check><a href=/blog/2023/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-blog2023><span>2023</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023humans-of-otel-li><input type=checkbox id=m-blog2023humans-of-otel-check>
<label for=m-blog2023humans-of-otel-check><a href=/blog/2023/humans-of-otel/ title="The Humans of OpenTelemetry" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023humans-of-otel><span>Humans of OTel</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023spring-native-li><input type=checkbox id=m-blog2023spring-native-check>
<label for=m-blog2023spring-native-check><a href=/blog/2023/spring-native/ title="Observe your Spring Native Image application with OpenTelemetry" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023spring-native><span>Observe Spring Native</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023otel-in-focus-break-li><input type=checkbox id=m-blog2023otel-in-focus-break-check>
<label for=m-blog2023otel-in-focus-break-check><a href=/blog/2023/otel-in-focus-break/ title="OpenTelemetry in Focus: Wrapping Up a Successful 2023" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023otel-in-focus-break><span>OTel in Focus Wrap-Up</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023any-metric-receiver-li><input type=checkbox id=m-blog2023any-metric-receiver-check>
<label for=m-blog2023any-metric-receiver-check><a href=/blog/2023/any-metric-receiver/ title="Receive any custom metric with the OpenTelemetry Collector" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023any-metric-receiver><span>Any Metric Receiver</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023perf-testing-li><input type=checkbox id=m-blog2023perf-testing-check>
<label for=m-blog2023perf-testing-check><a href=/blog/2023/perf-testing/ title="OTel component performance benchmarks" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023perf-testing><span>Performance benchmarks</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023logs-collection-li><input type=checkbox id=m-blog2023logs-collection-check>
<label for=m-blog2023logs-collection-check><a href=/blog/2023/logs-collection/ title="Collecting Logs with OpenTelemetry Python" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023logs-collection><span>Python Logs Collection</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023otterize-otel-li><input type=checkbox id=m-blog2023otterize-otel-check>
<label for=m-blog2023otterize-otel-check><a href=/blog/2023/otterize-otel/ title="Adding OpenTelemetry support to the Otterize network mapper" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023otterize-otel><span>OTel integration for Otterize network mapper</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023otel-arrow-li><input type=checkbox id=m-blog2023otel-arrow-check>
<label for=m-blog2023otel-arrow-check><a href=/blog/2023/otel-arrow/ title="Achieve a 10x Reduction in Telemetry Traffic Using OpenTelemetry Protocol with Apache Arrow" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023otel-arrow><span>OpenTelemetry Protocol with Apache Arrow</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023contribfest-na-li><input type=checkbox id=m-blog2023contribfest-na-check>
<label for=m-blog2023contribfest-na-check><a href=/blog/2023/contribfest-na/ title="OpenTelemetry Contribfest at KubeCon North America 2023" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023contribfest-na><span>Contribfest at KubeCon NA</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023cloud-foundry-li><input type=checkbox id=m-blog2023cloud-foundry-check>
<label for=m-blog2023cloud-foundry-check><a href=/blog/2023/cloud-foundry/ title="Experience Report: Adopting OpenTelemetry for Metrics in Cloud Foundry" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023cloud-foundry><span>OpenTelemetry in Cloud Foundry</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023otel-demo-16-li><input type=checkbox id=m-blog2023otel-demo-16-check>
<label for=m-blog2023otel-demo-16-check><a href=/blog/2023/otel-demo-16/ title="OpenTelemetry Demo 1.6 released" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023otel-demo-16><span>Demo 1.6 Released</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023tyk-api-gateway-li><input type=checkbox id=m-blog2023tyk-api-gateway-check>
<label for=m-blog2023tyk-api-gateway-check><a href=/blog/2023/tyk-api-gateway/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023tyk-api-gateway><span>Tyk API Gateway's Native OpenTelemetry Integration</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023http-conventions-declared-stable-li><input type=checkbox id=m-blog2023http-conventions-declared-stable-check>
<label for=m-blog2023http-conventions-declared-stable-check><a href=/blog/2023/http-conventions-declared-stable/ title="HTTP semantic conventions declared stable" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023http-conventions-declared-stable><span>HTTP semconv are stable</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023integrations-li><input type=checkbox id=m-blog2023integrations-check>
<label for=m-blog2023integrations-check><a href=/blog/2023/integrations/ title="OpenTelemetry Integrations Welcome!" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023integrations><span>Integrations Welcome!</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023otel-in-focus-10-li><input type=checkbox id=m-blog2023otel-in-focus-10-check>
<label for=m-blog2023otel-in-focus-10-check><a href=/blog/2023/otel-in-focus-10/ title="OpenTelemetry in Focus, October 2023" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023otel-in-focus-10><span>OTel in Focus 2023/10</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023gc-election-results-li><input type=checkbox id=m-blog2023gc-election-results-check>
<label for=m-blog2023gc-election-results-check><a href=/blog/2023/gc-election-results/ title="Announcing the 2023 Governance Committee Election Results" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023gc-election-results><span>2023 GC Election Results</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023opamp-status-li><input type=checkbox id=m-blog2023opamp-status-check>
<label for=m-blog2023opamp-status-check><a href=/blog/2023/opamp-status/ title="Open Agent Management Protocol (OpAMP) State of the Nation 2023" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023opamp-status><span>OpAMP Status</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023euwg-future-of-observability-panel-li><input type=checkbox id=m-blog2023euwg-future-of-observability-panel-check>
<label for=m-blog2023euwg-future-of-observability-panel-check><a href=/blog/2023/euwg-future-of-observability-panel/ title="OTel End User Working Group Presents: The Future of Observability Panel Discussion" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023euwg-future-of-observability-panel><span>The Future of Observability Panel</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023gc-candidates-li><input type=checkbox id=m-blog2023gc-candidates-check>
<label for=m-blog2023gc-candidates-check><a href=/blog/2023/gc-candidates/ title="Final list of candidates for the 2023 OpenTelemetry Governance Committee" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023gc-candidates><span>2023 GC Candidates</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023synthetic-testing-li><input type=checkbox id=m-blog2023synthetic-testing-check>
<label for=m-blog2023synthetic-testing-check><a href=/blog/2023/synthetic-testing/ title="Portable Synthetic HTTP Testing with OpenTelemetry" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023synthetic-testing><span>Synthetic HTTP testing</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023otel-go-metrics-sdk-stable-li><input type=checkbox id=m-blog2023otel-go-metrics-sdk-stable-check>
<label for=m-blog2023otel-go-metrics-sdk-stable-check><a href=/blog/2023/otel-go-metrics-sdk-stable/ title="First stable release of OTel Go metric SDK" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023otel-go-metrics-sdk-stable><span>Go Metric SDK is Stable</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023kubecon-na-li><input type=checkbox id=m-blog2023kubecon-na-check>
<label for=m-blog2023kubecon-na-check><a href=/blog/2023/kubecon-na/ title="Join us for OpenTelemetry Talks and Activities at KubeCon NA 2023" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023kubecon-na><span>KubeCon NA '23</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023otel-in-focus-09-li><input type=checkbox id=m-blog2023otel-in-focus-09-check>
<label for=m-blog2023otel-in-focus-09-check><a href=/blog/2023/otel-in-focus-09/ title="OpenTelemetry in Focus, September 2023" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023otel-in-focus-09><span>OTel in Focus 2023/09</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023gc-elections-li><input type=checkbox id=m-blog2023gc-elections-check>
<label for=m-blog2023gc-elections-check><a href=/blog/2023/gc-elections/ title="Announcing the 2023 OpenTelemetry Governance Committee Election" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023gc-elections><span>2023 GC Election</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023contributing-to-otel-li><input type=checkbox id=m-blog2023contributing-to-otel-check>
<label for=m-blog2023contributing-to-otel-check><a href=/blog/2023/contributing-to-otel/ title="Thinking about contributing to OpenTelemetry? Here's how I did it." class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023contributing-to-otel><span>Contributing to OTel</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023otel-dotnet-auto-instrumentation-li><input type=checkbox id=m-blog2023otel-dotnet-auto-instrumentation-check>
<label for=m-blog2023otel-dotnet-auto-instrumentation-check><a href=/blog/2023/otel-dotnet-auto-instrumentation/ title="OpenTelemetry .NET Automatic Instrumentation reaches version 1.0.0" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023otel-dotnet-auto-instrumentation><span>.NET Automatic Instrumentation v1.0.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023jaeger-exporter-collector-migration-li><input type=checkbox id=m-blog2023jaeger-exporter-collector-migration-check>
<label for=m-blog2023jaeger-exporter-collector-migration-check><a href=/blog/2023/jaeger-exporter-collector-migration/ title="Migrating away from the Jaeger exporter in the Collector" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023jaeger-exporter-collector-migration><span>Jaeger Collector Exporter Migration</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023php-rc-release-li><input type=checkbox id=m-blog2023php-rc-release-check>
<label for=m-blog2023php-rc-release-check><a href=/blog/2023/php-rc-release/ title="Opentelemetry PHP Release Candidate" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023php-rc-release><span>PHP Release Candidate</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023otel-in-focus-08-li><input type=checkbox id=m-blog2023otel-in-focus-08-check>
<label for=m-blog2023otel-in-focus-08-check><a href=/blog/2023/otel-in-focus-08/ title="OpenTelemetry in Focus, August 2023" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023otel-in-focus-08><span>OTel in Focus 2023/08</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023otel-in-focus-07-li><input type=checkbox id=m-blog2023otel-in-focus-07-check>
<label for=m-blog2023otel-in-focus-07-check><a href=/blog/2023/otel-in-focus-07/ title="OpenTelemetry in Focus, July 2023" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023otel-in-focus-07><span>OTel in Focus 2023/07</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023testing-otel-demo-li><input type=checkbox id=m-blog2023testing-otel-demo-check>
<label for=m-blog2023testing-otel-demo-check><a href=/blog/2023/testing-otel-demo/ title="Trace-based Testing the OpenTelemetry Demo" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023testing-otel-demo><span>Testing the OTel Demo</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023end-user-q-and-a-04-li><input type=checkbox id=m-blog2023end-user-q-and-a-04-check>
<label for=m-blog2023end-user-q-and-a-04-check><a href=/blog/2023/end-user-q-and-a-04/ title="End-User Q&amp;A Series: Migrating to OTel at Lightstep" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023end-user-q-and-a-04><span>End-User Q&amp;A: Migrating to OTel at Lightstep</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023otel-in-focus-06-li><input type=checkbox id=m-blog2023otel-in-focus-06-check>
<label for=m-blog2023otel-in-focus-06-check><a href=/blog/2023/otel-in-focus-06/ title="OpenTelemetry in Focus, June 2023" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023otel-in-focus-06><span>OTel in Focus 2023/06</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023end-user-q-and-a-03-li><input type=checkbox id=m-blog2023end-user-q-and-a-03-check>
<label for=m-blog2023end-user-q-and-a-03-check><a href=/blog/2023/end-user-q-and-a-03/ title="End-User Q&amp;A Series: Using OTel at Farfetch" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023end-user-q-and-a-03><span>End-User Q&amp;A: OTel at Farfetch</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023k8s-runtime-observability-li><input type=checkbox id=m-blog2023k8s-runtime-observability-check>
<label for=m-blog2023k8s-runtime-observability-check><a href=/blog/2023/k8s-runtime-observability/ title="Creating a Kubernetes Cluster with Runtime Observability" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023k8s-runtime-observability><span>K8s Runtime Observability</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023otel-in-focus-05-li><input type=checkbox id=m-blog2023otel-in-focus-05-check>
<label for=m-blog2023otel-in-focus-05-check><a href=/blog/2023/otel-in-focus-05/ title="OpenTelemetry in Focus, May 2023" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023otel-in-focus-05><span>OTel in Focus 2023/05</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023lambda-release-li><input type=checkbox id=m-blog2023lambda-release-check>
<label for=m-blog2023lambda-release-check><a href=/blog/2023/lambda-release/ title="OpenTelemetry Updates Lambda Support" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023lambda-release><span>OTel Lambda Updates</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023exponential-histograms-li><input type=checkbox id=m-blog2023exponential-histograms-check>
<label for=m-blog2023exponential-histograms-check><a href=/blog/2023/exponential-histograms/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023exponential-histograms><span>Exponential Histograms</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023histograms-vs-summaries-li><input type=checkbox id=m-blog2023histograms-vs-summaries-check>
<label for=m-blog2023histograms-vs-summaries-check><a href=/blog/2023/histograms-vs-summaries/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023histograms-vs-summaries><span>Histograms vs Summaries</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023end-user-discussions-04-li><input type=checkbox id=m-blog2023end-user-discussions-04-check>
<label for=m-blog2023end-user-discussions-04-check><a href=/blog/2023/end-user-discussions-04/ title="OpenTelemetry End-User Discussions Summary for April 2023" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023end-user-discussions-04><span>End-User Discussions April 2023</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023why-histograms-li><input type=checkbox id=m-blog2023why-histograms-check>
<label for=m-blog2023why-histograms-check><a href=/blog/2023/why-histograms/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023why-histograms><span>Why Histograms?</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023otel-in-focus-04-li><input type=checkbox id=m-blog2023otel-in-focus-04-check>
<label for=m-blog2023otel-in-focus-04-check><a href=/blog/2023/otel-in-focus-04/ title="OpenTelemetry in Focus, April 2023" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023otel-in-focus-04><span>OTel in Focus 2023/04</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023sunsetting-opencensus-li><input type=checkbox id=m-blog2023sunsetting-opencensus-check>
<label for=m-blog2023sunsetting-opencensus-check><a href=/blog/2023/sunsetting-opencensus/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023sunsetting-opencensus><span>Sunsetting OpenCensus</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023demo-birthday-li><input type=checkbox id=m-blog2023demo-birthday-check>
<label for=m-blog2023demo-birthday-check><a href=/blog/2023/demo-birthday/ title="The OpenTelemetry Demo Turns 1(.4)" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023demo-birthday><span>OTel Demo Updates</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023ecs-otel-semconv-convergence-li><input type=checkbox id=m-blog2023ecs-otel-semconv-convergence-check>
<label for=m-blog2023ecs-otel-semconv-convergence-check><a href=/blog/2023/ecs-otel-semconv-convergence/ title="Announcing the Elastic Common Schema (ECS) and OpenTelemetry Semantic Convention Convergence" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023ecs-otel-semconv-convergence><span>ECS and OTel SemConv Convergence</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023kubecon-eu-li><input type=checkbox id=m-blog2023kubecon-eu-check>
<label for=m-blog2023kubecon-eu-check><a href=/blog/2023/kubecon-eu/ title="Join us for OpenTelemetry Talks and Activities at KubeCon EU 2023" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023kubecon-eu><span>KubeCon EU '23</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023otel-in-focus-03-li><input type=checkbox id=m-blog2023otel-in-focus-03-check>
<label for=m-blog2023otel-in-focus-03-check><a href=/blog/2023/otel-in-focus-03/ title="OpenTelemetry in Focus, March 2023" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023otel-in-focus-03><span>OTel in Focus 2023/03</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023end-user-discussions-03-li><input type=checkbox id=m-blog2023end-user-discussions-03-check>
<label for=m-blog2023end-user-discussions-03-check><a href=/blog/2023/end-user-discussions-03/ title="OpenTelemetry End-User Discussions Summary for March 2023" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023end-user-discussions-03><span>End-User Discussions Mar 2023</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023php-auto-instrumentation-li><input type=checkbox id=m-blog2023php-auto-instrumentation-check>
<label for=m-blog2023php-auto-instrumentation-check><a href=/blog/2023/php-auto-instrumentation/ title="OpenTelemetry PHP Auto-Instrumentation" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023php-auto-instrumentation><span>PHP Auto-Instrumentation</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2023end-user-q-and-a-02-li><input type=checkbox id=m-blog2023end-user-q-and-a-02-check>
<label for=m-blog2023end-user-q-and-a-02-check><a href=/blog/2023/end-user-q-and-a-02/ title="End-User Q&amp;A Series: Using OTel at Uplight" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2023end-user-q-and-a-02><span>End-User Q&amp;A: OTel at Uplight</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-blog2022-li><input type=checkbox id=m-blog2022-check>
<label for=m-blog2022-check><a href=/blog/2022/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-blog2022><span>2022</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022why-and-how-ebay-pivoted-to-opentelemetry-li><input type=checkbox id=m-blog2022why-and-how-ebay-pivoted-to-opentelemetry-check>
<label for=m-blog2022why-and-how-ebay-pivoted-to-opentelemetry-check><a href=/blog/2022/why-and-how-ebay-pivoted-to-opentelemetry/ title="Why and How eBay Pivoted to OpenTelemetry" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022why-and-how-ebay-pivoted-to-opentelemetry><span>eBay OpenTelemetry</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022otel-demo-app-nomad-li><input type=checkbox id=m-blog2022otel-demo-app-nomad-check>
<label for=m-blog2022otel-demo-app-nomad-check><a href=/blog/2022/otel-demo-app-nomad/ title="Running the OpenTelemetry Demo App on HashiCorp Nomad" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022otel-demo-app-nomad><span>OTel Demo App on Nomad</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022end-user-discussion-group-apac-li><input type=checkbox id=m-blog2022end-user-discussion-group-apac-check>
<label for=m-blog2022end-user-discussion-group-apac-check><a href=/blog/2022/end-user-discussion-group-apac/ title="End User Discussion Group: New APAC Sessions Announcement!" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022end-user-discussion-group-apac><span>APAC End User Discussion Group</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022frontend-overhaul-li><input type=checkbox id=m-blog2022frontend-overhaul-check>
<label for=m-blog2022frontend-overhaul-check><a href=/blog/2022/frontend-overhaul/ title="Front-end Overhaul of the OpenTelemetry Demo (Go to Next.js)" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022frontend-overhaul><span>Front-end Overhaul Demo</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022jaeger-native-otlp-li><input type=checkbox id=m-blog2022jaeger-native-otlp-check>
<label for=m-blog2022jaeger-native-otlp-check><a href=/blog/2022/jaeger-native-otlp/ title="Supporting Jaeger with native OTLP" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022jaeger-native-otlp><span>Jaeger OTLP support</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022kubecon-na-project-update-li><input type=checkbox id=m-blog2022kubecon-na-project-update-check>
<label for=m-blog2022kubecon-na-project-update-check><a href=/blog/2022/kubecon-na-project-update/ title="OpenTelemetry Project and Roadmap Update from Kubecon" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022kubecon-na-project-update><span>Project Update</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022announcing-opentelemetry-demo-release-li><input type=checkbox id=m-blog2022announcing-opentelemetry-demo-release-check>
<label for=m-blog2022announcing-opentelemetry-demo-release-check><a href=/blog/2022/announcing-opentelemetry-demo-release/ title="OpenTelemetry Demo now Generally Available!" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022announcing-opentelemetry-demo-release><span>Demo GA Release</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022gc-election-results-li><input type=checkbox id=m-blog2022gc-election-results-check>
<label for=m-blog2022gc-election-results-check><a href=/blog/2022/gc-election-results/ title="Announcing the 2022 Governance Committee Election Results" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022gc-election-results><span>22 GC Election Results</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022opamp-li><input type=checkbox id=m-blog2022opamp-check>
<label for=m-blog2022opamp-check><a href=/blog/2022/opamp/ title="Using OpenTelemetry OpAMP to modify service telemetry on the go" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022opamp><span>OpAMP service usage</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022collector-builder-sample-li><input type=checkbox id=m-blog2022collector-builder-sample-check>
<label for=m-blog2022collector-builder-sample-check><a href=/blog/2022/collector-builder-sample/ title="Using the Collector Builder with Sample Configs on GCP" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022collector-builder-sample><span>Collector builder with GCP</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022gc-candidates-li><input type=checkbox id=m-blog2022gc-candidates-check>
<label for=m-blog2022gc-candidates-check><a href=/blog/2022/gc-candidates/ title="Final list of candidates for the 2022 OpenTelemetry Governance Committee" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022gc-candidates><span>2022 GC Candidates</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022kubecon-na-li><input type=checkbox id=m-blog2022kubecon-na-check>
<label for=m-blog2022kubecon-na-check><a href=/blog/2022/kubecon-na/ title="Join us for OpenTelemetry Talks and Activities at Kubecon NA 2022" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022kubecon-na><span>Kubecon NA '22</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022otel-unplugged-kubecon-na-li><input type=checkbox id=m-blog2022otel-unplugged-kubecon-na-check>
<label for=m-blog2022otel-unplugged-kubecon-na-check><a href=/blog/2022/otel-unplugged-kubecon-na/ title="OTel Unplugged at KubeCon NA 2022!" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022otel-unplugged-kubecon-na><span>OTel Unplugged '22</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022announcing-community-manager-li><input type=checkbox id=m-blog2022announcing-community-manager-check>
<label for=m-blog2022announcing-community-manager-check><a href=/blog/2022/announcing-community-manager/ title="Announcing the OpenTelemetry Community Manager" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022announcing-community-manager><span>Community Manager</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022tail-sampling-li><input type=checkbox id=m-blog2022tail-sampling-check>
<label for=m-blog2022tail-sampling-check><a href=/blog/2022/tail-sampling/ title="Tail Sampling with OpenTelemetry: Why it’s useful, how to do it, and what to consider" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022tail-sampling><span>Tail Sampling</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022debug-otel-with-otel-li><input type=checkbox id=m-blog2022debug-otel-with-otel-check>
<label for=m-blog2022debug-otel-with-otel-check><a href=/blog/2022/debug-otel-with-otel/ title="How we used OpenTelemetry to fix a bug in OpenTelemetry" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022debug-otel-with-otel><span>Debug OTel with OTel</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022gc-elections-li><input type=checkbox id=m-blog2022gc-elections-check>
<label for=m-blog2022gc-elections-check><a href=/blog/2022/gc-elections/ title="Announcing the 2022 OpenTelemetry Governance Committee Election" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022gc-elections><span>2022 GC Election</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022k8s-otel-expose-li><input type=checkbox id=m-blog2022k8s-otel-expose-check>
<label for=m-blog2022k8s-otel-expose-check><a href=/blog/2022/k8s-otel-expose/ title="Exposing a Collector for cross cluster communication" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022k8s-otel-expose><span>Exposing a Collector</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022instrument-kafka-clients-li><input type=checkbox id=m-blog2022instrument-kafka-clients-check>
<label for=m-blog2022instrument-kafka-clients-check><a href=/blog/2022/instrument-kafka-clients/ title="Instrumenting Apache Kafka clients with OpenTelemetry" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022instrument-kafka-clients><span>Instrumenting Apache Kafka clients</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022exponential-histograms-li><input type=checkbox id=m-blog2022exponential-histograms-check>
<label for=m-blog2022exponential-histograms-check><a href=/blog/2022/exponential-histograms/ title="Exponential Histograms: Better Data, Zero Configuration" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022exponential-histograms><span>Exponential Histograms</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022go-web-app-instrumentation-li><input type=checkbox id=m-blog2022go-web-app-instrumentation-check>
<label for=m-blog2022go-web-app-instrumentation-check><a href=/blog/2022/go-web-app-instrumentation/ title="Go Web-app Instrumentation" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022go-web-app-instrumentation><span>Go App Instrumentation</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022instrument-nginx-li><input type=checkbox id=m-blog2022instrument-nginx-check>
<label for=m-blog2022instrument-nginx-check><a href=/blog/2022/instrument-nginx/ title="Learn how to instrument NGINX with OpenTelemetry" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022instrument-nginx><span>Instrument Nginx</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022otel-in-practice-li><input type=checkbox id=m-blog2022otel-in-practice-check>
<label for=m-blog2022otel-in-practice-check><a href=/blog/2022/otel-in-practice/ title="OpenTelemetry in Practice: Kubernetes & the Collector" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022otel-in-practice><span>OTel in Practice</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022dotnet-instrumentation-metrics-li><input type=checkbox id=m-blog2022dotnet-instrumentation-metrics-check>
<label for=m-blog2022dotnet-instrumentation-metrics-check><a href=/blog/2022/dotnet-instrumentation-metrics/ title="OpenTelemetry .NET Automatic Instrumentation metric signal support" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022dotnet-instrumentation-metrics><span>.NET Auto-instrumentation Metrics</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022new-end-user-resources-li><input type=checkbox id=m-blog2022new-end-user-resources-check>
<label for=m-blog2022new-end-user-resources-check><a href=/blog/2022/new-end-user-resources/ title="Introducing new resources for OpenTelemetry end users to connect and discover best practices" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022new-end-user-resources><span>End User Resources</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022k8s-metadata-li><input type=checkbox id=m-blog2022k8s-metadata-check>
<label for=m-blog2022k8s-metadata-check><a href=/blog/2022/k8s-metadata/ title="Improved troubleshooting using k8s metadata" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022k8s-metadata><span>Kubernetes metadata</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022demo-announcement-li><input type=checkbox id=m-blog2022demo-announcement-check>
<label for=m-blog2022demo-announcement-check><a href=/blog/2022/demo-announcement/ title="Announcing a Community Demo for OpenTelemetry" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022demo-announcement><span>OpenTelemetry Community Demo</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022instrument-apache-httpd-server-li><input type=checkbox id=m-blog2022instrument-apache-httpd-server-check>
<label for=m-blog2022instrument-apache-httpd-server-check><a href=/blog/2022/instrument-apache-httpd-server/ title="Learn how to instrument Apache Http Server with OpenTelemetry" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022instrument-apache-httpd-server><span>Instrument Apache Http Server</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022metrics-announcement-li><input type=checkbox id=m-blog2022metrics-announcement-check>
<label for=m-blog2022metrics-announcement-check><a href=/blog/2022/metrics-announcement/ title="OpenTelemetry Metrics Release Candidates" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022metrics-announcement><span>Metrics RCs</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022dotnet-instrumentation-first-beta-li><input type=checkbox id=m-blog2022dotnet-instrumentation-first-beta-check>
<label for=m-blog2022dotnet-instrumentation-first-beta-check><a href=/blog/2022/dotnet-instrumentation-first-beta/ title="OpenTelemetry .NET Automatic Instrumentation Releases its first Beta" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022dotnet-instrumentation-first-beta><span>.NET Auto-instrumentation Beta</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022knative-li><input type=checkbox id=m-blog2022knative-check>
<label for=m-blog2022knative-check><a href=/blog/2022/knative/ title="Distributed tracing in Knative" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022knative><span>Tracing in Knative</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022apisix-li><input type=checkbox id=m-blog2022apisix-check>
<label for=m-blog2022apisix-check><a href=/blog/2022/apisix/ title="Apache APISIX Integrates with OpenTelemetry to Collect Tracing Data" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022apisix><span>Apache APISIX-Opentelemetry Integration</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022otel-tuesday-v1-sunset-li><input type=checkbox id=m-blog2022otel-tuesday-v1-sunset-check>
<label for=m-blog2022otel-tuesday-v1-sunset-check><a href=/blog/2022/otel-tuesday-v1-sunset/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022otel-tuesday-v1-sunset><span>OpenTelemetry Tuesdays, Signing Off!</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022troubleshooting-nodejs-li><input type=checkbox id=m-blog2022troubleshooting-nodejs-check>
<label for=m-blog2022troubleshooting-nodejs-check><a href=/blog/2022/troubleshooting-nodejs/ title="Checklist for TroublesShooting OpenTelemetry Node.js Tracing Issues" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022troubleshooting-nodejs><span>TroublesShooting Node.js Tracing Issues</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022welcome-li><input type=checkbox id=m-blog2022welcome-check>
<label for=m-blog2022welcome-check><a href=/blog/2022/welcome/ title="Welcome to the OpenTelemetry blog" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022welcome><span>Welcome</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2022v10-trio-li><input type=checkbox id=m-blog2022v10-trio-check>
<label for=m-blog2022v10-trio-check><a href=/blog/2022/v1.0-trio/ title="OpenTelemetry Erlang/Elixir, Javascript, and Ruby v1.0 (Medium)" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2022v10-trio><span>Erlang/Elixir, JS, and Ruby 1.0</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-blog2021-li><input type=checkbox id=m-blog2021-check>
<label for=m-blog2021-check><a href=/blog/2021/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-blog2021><span>2021</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2021auto-instrumentation-k8s-li><input type=checkbox id=m-blog2021auto-instrumentation-k8s-check>
<label for=m-blog2021auto-instrumentation-k8s-check><a href=/blog/2021/auto-instrumentation-k8s/ title="Using OpenTelemetry auto-instrumentation/agents in Kubernetes (Medium)" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2021auto-instrumentation-k8s><span>Auto-instrumentation in Kubernetes</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2021otel-gc-li><input type=checkbox id=m-blog2021otel-gc-check>
<label for=m-blog2021otel-gc-check><a href=/blog/2021/otel-gc/ title="Welcome to the incoming 2021 OpenTelemetry Governance Committee (Medium)" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2021otel-gc><span>2021 Governance Committee</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2021cpp-li><input type=checkbox id=m-blog2021cpp-check>
<label for=m-blog2021cpp-check><a href=/blog/2021/cpp/ title="OpenTelemetry C++ v1.0 — what’s there, and what next (Medium)" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2021cpp><span>C++ 1.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2021malabi-li><input type=checkbox id=m-blog2021malabi-check>
<label for=m-blog2021malabi-check><a href=/blog/2021/malabi/ title="Trace-Based Testing with OpenTelemetry: Meet Open Source Malabi (Medium)
" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2021malabi><span>Trace-Based Testing with Malabi</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2021gc-election-li><input type=checkbox id=m-blog2021gc-election-check>
<label for=m-blog2021gc-election-check><a href=/blog/2021/gc-election/ title="Announcing the 2021 OpenTelemetry Governance Committee Election (Medium)" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2021gc-election><span>2021 GC election</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2021collector-li><input type=checkbox id=m-blog2021collector-check>
<label for=m-blog2021collector-check><a href=/blog/2021/collector/ title="OpenTelemetry Collector achieves Tracing stability milestone (Medium)" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2021collector><span>Collector GA release</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2021swift-li><input type=checkbox id=m-blog2021swift-check>
<label for=m-blog2021swift-check><a href=/blog/2021/swift/ title="OpenTelemetry Swift 1.0 Beta (Medium)" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2021swift><span>Swift 1.0 Beta</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2021python-li><input type=checkbox id=m-blog2021python-check>
<label for=m-blog2021python-check><a href=/blog/2021/python/ title="Announcing OpenTelemetry Python 1.0 (Medium)" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2021python><span>Python 1.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2021womens-day-li><input type=checkbox id=m-blog2021womens-day-check>
<label for=m-blog2021womens-day-check><a href=/blog/2021/womens-day/ title="OpenTelemetry Observes International Women's Day 2021 (Medium)" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2021womens-day><span>Women's day 2021</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-blog2019-li><input type=checkbox id=m-blog2019-check>
<label for=m-blog2019-check><a href=/blog/2019/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-blog2019><span>2019</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2019opentelemetry-governance-committee-explained-li><input type=checkbox id=m-blog2019opentelemetry-governance-committee-explained-check>
<label for=m-blog2019opentelemetry-governance-committee-explained-check><a href=/blog/2019/opentelemetry-governance-committee-explained/ title="OpenTelemetry Governance Committee Explained" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-blog2019opentelemetry-governance-committee-explained><span>Governance Committee Explained</span></a></label></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"><a href=https://github.com/open-telemetry/opentelemetry.io/tree/main/content/en/blog/2024/getting-started-with-otelsql/index.md class="td-page-meta--view td-page-meta__view" target=_blank rel=noopener><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
<a href=https://github.com/open-telemetry/opentelemetry.io/edit/main/content/en/blog/2024/getting-started-with-otelsql/index.md class="td-page-meta--edit td-page-meta__edit" target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
<a href="https://github.com/open-telemetry/opentelemetry.io/new/main/content/en/blog/2024/getting-started-with-otelsql?filename=change-me.md&amp;value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class="td-page-meta--child td-page-meta__child" target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
<a href="https://github.com/open-telemetry/opentelemetry.io/issues/new?title=Getting%20started%20with%20otelsql,%20the%20OpenTelemetry%20instrumentation%20for%20Go%20SQL" class="td-page-meta--issue td-page-meta__issue" target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#getting-started>Getting Started</a></li><li><a href=#understand-the-example>Understand the example</a></li><li><a href=#use-the-example-as-a-playground>Use the example as a playground</a></li><li><a href=#compatibility>Compatibility</a></li><li><a href=#other-cool-features>Other cool features</a><ul><li><a href=#sqlcommenter-support>Sqlcommenter support</a></li><li><a href=#custom-span-name>Custom span name</a></li><li><a href=#filter-spans>Filter spans</a></li></ul></li><li><a href=#whats-next>What&rsquo;s next?</a></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5 pe-md-4" role=main><a class=td-rss-button title=RSS href=/blog/2024/index.xml target=_blank rel=noopener><i class="fa-solid fa-rss" aria-hidden=true></i></a><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/blog/>Blog</a></li><li class=breadcrumb-item><a href=/blog/2024/>2024</a></li><li class="breadcrumb-item active" aria-current=page>Getting started with otelsql</li></ol></nav><div class=td-content><h1>Getting started with otelsql, the OpenTelemetry instrumentation for Go SQL</h1><div class="td-byline mb-4">By <b><a href=https://github.com/XSAM target=_blank rel=noopener class=external-link>Sam Xie</a> (Cisco)</b> |
<time datetime=2024-03-04 class=text-muted>Monday, March 04, 2024</time></div><header class=article-meta></header><p><a href=https://github.com/XSAM/otelsql target=_blank rel=noopener class=external-link>otelsql</a> is an instrumentation library for the
<a href=https://pkg.go.dev/database/sql target=_blank rel=noopener class=external-link><code>database/sql</code></a> library of the Go programming
language. It generates traces and metrics from the application when interacting
with databases. By doing that, the library allows you to identify errors or
slowdowns in your SQL queries that potentially impact the performance of your
application.</p><p>Let&rsquo;s go dive into how to use this library!</p><h2 id=getting-started>Getting Started<a class=td-heading-self-link href=#getting-started aria-label="Heading self-link"></a></h2><p>otelsql is a wrapper layer for interfaces from <code>database/sql</code>. When users use
the wrapped database interfaces, the otelsql generates the telemetry data and
passes operations to the underlying database.</p><p>In the following example, you are going to use
<a href=https://docs.docker.com/compose/ target=_blank rel=noopener class=external-link>Docker Compose</a> to run the otel-collector
example from the otelsql repository. This example uses a MySQL client with the
otelsql instrumentation. The telemetry it generates will be pushed to the
OpenTelemetry Collector. Then, it shows the trace data on Jaeger and the metrics
data on a Prometheus server.</p><p>Here is the data flow:</p><pre class=mermaid>flowchart LR;
    A[MySQL client]--&gt;B[OpenTelemetry Collector];
    B--&gt;C[&#34;Jaeger (trace)&#34;];
    B--&gt;D[&#34;Prometheus (metrics)&#34;];</pre><p>Let&rsquo;s clone the otelsql repository here and run the example and take a look at
the most important lines of code.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>git clone https://github.com/XSAM/otelsql.git
</span></span></code></pre></div><p>In the otelsql folder, you can also check out the git tag to <code>v0.29.0</code> (the
latest tag while writing this post) to ensure the example is runnable, as the
steps to run the example might be changed in the future.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>git checkout tags/v0.29.0
</span></span></code></pre></div><p>Let&rsquo;s go to the folder of the otel-collector example and bring up all services.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#204a87>cd</span> example/otel-collector
</span></span><span style=display:flex><span>docker compose up -d
</span></span></code></pre></div><p>After building images and running services, let&rsquo;s check the service logs to
ensure the SQL client is finished.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>docker compose logs client
</span></span></code></pre></div><p>Then, we can access the Jaeger UI at <a href=http://localhost:16686 target=_blank rel=noopener class=external-link>localhost:16686</a>
and the Prometheus UI at <a href=http://localhost:9090 target=_blank rel=noopener class=external-link>localhost:9090</a> to see the
results.</p><p>Here we are viewing a trace graph on Jaeger. We can see the duration and
parameters of each operation with the database.</p><img src=jaeger-example.png alt="example of Jaeger UI"><p>Here we are viewing the metric <code>db_sql_latency_milliseconds_sum</code> on Prometheus.</p><img src=prometheus-example.png alt="example of Prometheus UI"><p>More otelsql generated metrics options can be found on the
<a href=https://github.com/XSAM/otelsql/blob/main/README.md#metric-instruments target=_blank rel=noopener class=external-link>otelsql document</a>.</p><h2 id=understand-the-example>Understand the example<a class=td-heading-self-link href=#understand-the-example aria-label="Heading self-link"></a></h2><p>Let&rsquo;s look at the <code>docker-compose.yaml</code> file first.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>version</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;3.9&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>services</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>mysql</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>image</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>mysql:8.3</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>environment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>MYSQL_ROOT_PASSWORD=otel_password</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>MYSQL_DATABASE=db</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>healthcheck</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>test</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#000>mysqladmin ping -h 127.0.0.1 -u root --password=$$MYSQL_ROOT_PASSWORD</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>start_period</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>5s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>interval</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>5s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>timeout</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>5s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>retries</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>otel-collector</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>image</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>otel/opentelemetry-collector-contrib:0.91.0</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>command</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;--config=/etc/otel-collector.yaml&#39;</span><span style=color:#000;font-weight:700>]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>volumes</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>./otel-collector.yaml:/etc/otel-collector.yaml</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>depends_on</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>jaeger</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>prometheus</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>image</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>prom/prometheus:v2.45.2</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>volumes</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>./prometheus.yaml:/etc/prometheus/prometheus.yml</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>ports</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#0000cf;font-weight:700>9090</span><span style=color:#000;font-weight:700>:</span><span style=color:#0000cf;font-weight:700>9090</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>depends_on</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>otel-collector</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>jaeger</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>image</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>jaegertracing/all-in-one:1.52</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>ports</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#0000cf;font-weight:700>16686</span><span style=color:#000;font-weight:700>:</span><span style=color:#0000cf;font-weight:700>16686</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>client</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>build</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>dockerfile</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>$PWD/Dockerfile</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>context</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>../..</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>depends_on</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>mysql</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>condition</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>service_healthy</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>This Docker compose file contains five services. The <code>client</code> service is the
MySQL client built from Dockerfile and the source code is main.go in the example
folder. The <code>client</code> service runs after the <code>mysql</code> service is up. Then, it
initializes the OpenTelemetry client and otelsql instrumentation, make SQL
queries to the <code>mysql</code> service, and send metrics and trace data to
<code>otel-collector</code> service through the
<a href=/docs/specs/otel/protocol/>OpenTelemetry Protocol (OTLP)</a>.</p><p>After receiving the data, the <code>otel-collector</code> service transfers the data format
and send metrics data to the <code>prometheus</code> service, and send trace data to the
<code>jaeger</code> service.</p><p>Let&rsquo;s check <code>main.go</code> to see what happens in the <code>client</code> service. Here is the
main function.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>cancel</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>signal</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NotifyContext</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Background</span><span style=color:#000;font-weight:700>(),</span> <span style=color:#000>os</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Interrupt</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>defer</span> <span style=color:#000>cancel</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#000>conn</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>initConn</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#000>log</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Fatal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#000>shutdownTracerProvider</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>initTracerProvider</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>conn</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#000>log</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Fatal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>defer</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>shutdownTracerProvider</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>);</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>			<span style=color:#000>log</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Fatalf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;failed to shutdown TracerProvider: %s&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>		<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#000>shutdownMeterProvider</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>initMeterProvider</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>conn</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#000>log</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Fatal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>defer</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>shutdownMeterProvider</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>);</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>			<span style=color:#000>log</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Fatalf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;failed to shutdown MeterProvider: %s&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>		<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#000>db</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>connectDB</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>defer</span> <span style=color:#000>db</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Close</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#000>err</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>runSQLQuery</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>db</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#000>log</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Fatal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#000>fmt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Println</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Example finished&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>This <code>main</code> function is pretty straightforward. It initializes a connection with
the <code>otel-collector</code> service, which is used by the tracer provider and the meter
provider. Then, it configures the tracer provider and meter provider with the
<code>connection</code> and a shutdown method, which ensures the telemetry data can be
pushed to the <code>otel-collector</code> service correctly before exiting the application.
After finishing setting up the OpenTelemetry client, it invokes the <code>connectDB</code>
method to use the otelsql library to interact with the MySQL database. Let&rsquo;s
look at the details here.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>connectDB</span><span style=color:#000;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>sql</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>DB</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// Connect to database
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#000>db</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>otelsql</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Open</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;mysql&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>mysqlDSN</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>otelsql</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithAttributes</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>		<span style=color:#000>semconv</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>DBSystemMySQL</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#000>log</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Fatal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// Register DB stats to meter
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#000>err</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>otelsql</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>RegisterDBStatsMetrics</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>db</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>otelsql</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithAttributes</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>		<span style=color:#000>semconv</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>DBSystemMySQL</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#000>log</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Fatal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>db</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>Instead of using the <a href=https://pkg.go.dev/database/sql#Open target=_blank rel=noopener class=external-link><code>sql.Open</code></a> method
that Go provides, we use
<a href=https://pkg.go.dev/github.com/XSAM/otelsql#Open target=_blank rel=noopener class=external-link><code>otelsql.Open</code></a> to create an
<a href=https://pkg.go.dev/database/sql#DB target=_blank rel=noopener class=external-link><code>sql.DB</code></a> instance. The <code>sql.DB</code> instance
returned by <code>otelsql.Open</code> is a wrapper that transfers and instruments all DB
operations to the underlying <code>sql.DB</code> instance (created by <code>sql.Open</code>). When
users send SQL queries with this wrapper, <code>otelsql</code> can see the queries and use
the OpenTelemetry client to generate telemetry.</p><p>Besides using <code>otelsql.Open</code>, <code>otelsql</code> provides three additional ways to
initialize instrumentation: <code>otelsql.OpenDB</code>, <code>otelsql.Register</code>, and
<code>otelsql.WrapDriver</code>. These additional methods cover different use cases, as
some database drivers or frameworks don&rsquo;t provide a direct way to create
<code>sql.DB</code>. Sometimes, you might need these additional methods to manually create
a <code>sql.DB</code> and push it to those database drivers. You can check
<a href=https://pkg.go.dev/github.com/XSAM/otelsql#pkg-examples target=_blank rel=noopener class=external-link>examples on the otelsql document</a>
to learn how to use these methods.</p><p>Moving on, we use <code>otelsql.RegisterDBStatsMetrics</code> to register metrics data from
<code>sql.DBStats</code>. The metrics recording process runs in the background and updates
the value of the metric when needed after the registration, so we don&rsquo;t need to
worry about creating an individual thread for this.</p><p>After having an <code>sql.DB</code> wrapped by <code>otelsql</code>, we can use it to make queries.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>runSQLQuery</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>db</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>sql</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>DB</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>error</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// Create a parent span (Optional)
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#000>tracer</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>otel</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetTracerProvider</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>	<span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>span</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>tracer</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Tracer</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>instrumentationName</span><span style=color:#000;font-weight:700>).</span><span style=color:#000>Start</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;example&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>defer</span> <span style=color:#000>span</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>End</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>query</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>db</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#000>span</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>RecordError</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>		<span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>err</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>query</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>db</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>sql</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>DB</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>error</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// Make a query
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#000>rows</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>db</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>QueryContext</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>`SELECT CURRENT_TIMESTAMP`</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>err</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>defer</span> <span style=color:#000>rows</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Close</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>currentTime</span> <span style=color:#000>time</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Time</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>rows</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Next</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#000>err</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>rows</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Scan</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>currentTime</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>		<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>			<span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>err</span>
</span></span><span style=display:flex><span>		<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>	<span style=color:#000>fmt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Println</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>currentTime</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>This <code>runSQLQuery</code> method creates a parent span first (it is an optional step,
it makes the query spans have a parent, and it looks good on the trace graph),
then queries the current timestamp from the MySQL database.</p><p>After this method, the <code>client</code> application finishes and exits. They are the
most important lines of code for understanding the example.</p><h2 id=use-the-example-as-a-playground>Use the example as a playground<a class=td-heading-self-link href=#use-the-example-as-a-playground aria-label="Heading self-link"></a></h2><p>After understanding the example, we can use it as a playground, making it a bit
complicated to see how it will be used in a real-world scenario.</p><p>Use the following codes to replace the <code>runSQLQuery</code> method in the example.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>runSQLQuery</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>db</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>sql</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>DB</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>error</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Create a parent span (Optional)
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000>tracer</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>otel</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetTracerProvider</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>    <span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>span</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>tracer</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Tracer</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>instrumentationName</span><span style=color:#000;font-weight:700>).</span><span style=color:#000>Start</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;example&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>defer</span> <span style=color:#000>span</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>End</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>runSlowSQLQuery</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>db</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>query</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>db</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>span</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>RecordError</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>err</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>runSlowSQLQuery</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>db</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>sql</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>DB</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>db</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>QueryContext</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>`SELECT SLEEP(1)`</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>This time, we added a new query to the example, which is a slow query that would
take 1 second to return. Let&rsquo;s see what could happen and how to identify this
slow query.</p><p>To make this change work, we need to rebuild the <code>client</code> service.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>docker compose build client
</span></span><span style=display:flex><span>docker compose up client
</span></span></code></pre></div><p>After the client is finished, we can check the trace graph for the trace we just
generated on Jaeger.</p><img src=real-world-like-jaeger-example.png alt="example of real-world-like Jaeger UI"><p>From this graph, we know the entire example takes 1 second to complete. The root
cause of this slowness is not related to the network latency with the database
and the timestamp query. It is the <code>SELECT SLEEP(1)</code> query that leads to the
slowness.</p><p>You can also learn about the slowness from the aggregated statistics of the
database by metrics. Such is the observability otelsql can provide so you can
learn what your application is doing with the database.</p><h2 id=compatibility>Compatibility<a class=td-heading-self-link href=#compatibility aria-label="Heading self-link"></a></h2><p>You might worry about the compatibility issue with other databases and other
third-party database frameworks (like ORMs) and wonder how widely this
instrumentation can be used.</p><p>From an implementation perspective, as long as the database drivers or the
database frameworks interact with the database (any database, not just an SQL
database) through <code>database/sql</code> with context, <code>otelsql</code> should work just fine.</p><p>This is an
<a href=https://github.com/ent/ent/issues/1232#issuecomment-1200405070 target=_blank rel=noopener class=external-link>example</a> that
shows how otelsql works with Facebook&rsquo;s entity framework for Go.</p><h2 id=other-cool-features>Other cool features<a class=td-heading-self-link href=#other-cool-features aria-label="Heading self-link"></a></h2><p>Now that you&rsquo;ve experienced the main feature, let&rsquo;s take some time to explore
the other cool features <code>otelsql</code> provides.</p><h3 id=sqlcommenter-support>Sqlcommenter support<a class=td-heading-self-link href=#sqlcommenter-support aria-label="Heading self-link"></a></h3><p>otelsql integrates <a href=https://google.github.io/sqlcommenter target=_blank rel=noopener class=external-link>Sqlcommenter</a>, an
open source ORM auto-instrumentation library that merges with OpenTelemetry by
injecting a comment into SQL statements to enable context propagation for the
database.</p><p>Using the option <code>WithSQLCommenter</code>, otelsql injects a comment for every SQL
statement it instruments.</p><p>For instance, an SQL query sent to the database</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>from</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>FOO</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>becomes</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>from</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>FOO</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic>/*traceparent=&#39;00-4bf92f3577b34da6a3ce929d0e0e4736-00f067aa0ba902b7-01&#39;,tracestate=&#39;congo%3Dt61rcWkgMzE%2Crojo%3D00f067aa0ba902b7&#39;*/</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>Then the database that supports <code>Sqlcommenter</code> can record its operation for this
query with a specified trace and publish its trace spans to a trace store, so
you can see your application trace spans correlated with query trace spans from
the database in one place.</p><img src=sqlcommenter-example.png alt="example of Sqlcommenter from google cloud document"><blockquote><p>Picture coming from
<a href=https://cloud.google.com/blog/products/databases/sqlcommenter-merges-with-opentelemetry target=_blank rel=noopener class=external-link>google cloud document</a>.</p></blockquote><h3 id=custom-span-name>Custom span name<a class=td-heading-self-link href=#custom-span-name aria-label="Heading self-link"></a></h3><p>If you don&rsquo;t like the default span name, you can use
<code>otelsql.WithSpanNameFormatter</code> to customize the span name.</p><p>Here is the example usage:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#000>otelsql</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithSpanNameFormatter</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>method</span> <span style=color:#000>otelsql</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Method</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>query</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87>string</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>method</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#4e9a06>&#34;: &#34;</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#000>query</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>})</span>
</span></span></code></pre></div><p>Then, the span name could become <code>{method}: {query}</code>. Here is an example of the
span name:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>sql.conn.query: select current_timestamp
</span></span></code></pre></div><h3 id=filter-spans>Filter spans<a class=td-heading-self-link href=#filter-spans aria-label="Heading self-link"></a></h3><p>You can use <code>otelsql.SpanFilter</code> from <code>otelsql.SpanOptions</code> to filter out spans
you don&rsquo;t want to generate. It is useful when you want to discard some spans.</p><h2 id=whats-next>What&rsquo;s next?<a class=td-heading-self-link href=#whats-next aria-label="Heading self-link"></a></h2><p>You should now be able to apply what you have learned from this blog post to
your own installation of otelsql.</p><p>I would love to hear about your experience! Star <code>otelsql</code> if you find it
helpful! If you run into any problems, don&rsquo;t hesitate to
<a href="https://github.com/XSAM/otelsql?tab=readme-ov-file#communication" target=_blank rel=noopener class=external-link>reach out</a> or
<a href=https://github.com/XSAM/otelsql/issues target=_blank rel=noopener class=external-link>create an issue</a>.</p><ul class="list-unstyled d-flex justify-content-between align-items-center mb-0 pt-5"><li><a href=/blog/2024/otel-collector-anti-patterns/ aria-label="Previous - OpenTelemetry Collector Antipatterns" class="btn btn-primary"><span class=me-1>←</span>Previous</a></li><li><a class="btn btn-primary disabled">Next<span class=ms-1>→</span></a></li></ul><div class=td-page-meta__lastmod>Last modified March 4, 2024: <a href=https://github.com/open-telemetry/opentelemetry.io/commit/886209ecb4d6e11ed8268f53369006f7d274fed3>Add new blog post for otelsql (#4048) (886209ec)</a></div></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title="Mailing Lists" aria-label="Mailing Lists"><a target=_blank rel=noopener href=https://github.com/open-telemetry/community#mailing-lists aria-label="Mailing Lists"><i class="fa fa-envelope"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Mastodon aria-label=Mastodon><a target=_blank rel=noopener href=https://fosstodon.org/@opentelemetry aria-label=Mastodon><i class="fab fa-mastodon"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=X aria-label=X><a target=_blank rel=noopener href=https://x.com/opentelemetry aria-label=X><i class="fab fa-x-twitter"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="Stack Overflow" aria-label="Stack Overflow"><a target=_blank rel=noopener href=https://stackoverflow.com/questions/tagged/open-telemetry aria-label="Stack Overflow"><i class="fab fa-stack-overflow"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="OTel logos" aria-label="OTel logos"><a target=_blank rel=noopener href=https://github.com/cncf/artwork/tree/master/projects/opentelemetry aria-label="OTel logos"><i class="fas fa-image"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="Meeting Recordings" aria-label="Meeting Recordings"><a target=_blank rel=noopener href=https://docs.google.com/spreadsheets/d/1SYKfjYhZdm2Wh2Cl6KVQalKg_m4NhTPZqq-8SzEVO6s aria-label="Meeting Recordings"><i class="fas fa-video"></i></a></li></ul></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/open-telemetry aria-label=GitHub><i class="fab fa-github"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="Slack #opentelemetry" aria-label="Slack #opentelemetry"><a target=_blank rel=noopener href=https://cloud-native.slack.com/archives/CJFCJHG4Q aria-label="Slack #opentelemetry"><i class="fab fa-slack"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="CNCF DevStats" aria-label="CNCF DevStats"><a target=_blank rel=noopener href="https://opentelemetry.devstats.cncf.io/d/8/dashboards?orgId=1&amp;refresh=15m" aria-label="CNCF DevStats"><i class="fas fa-chart-area"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="Privacy Policy" aria-label="Privacy Policy"><a target=_blank rel=noopener href=https://www.linuxfoundation.org/legal/privacy-policy aria-label="Privacy Policy"><i class="fa fa-book"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="Trademark Usage" aria-label="Trademark Usage"><a target=_blank rel=noopener href=https://www.linuxfoundation.org/legal/trademark-usage aria-label="Trademark Usage"><i class="fa-solid fa-trademark"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="Marketing Guidelines" aria-label="Marketing Guidelines"><a target=_blank rel=noopener href=/community/marketing-guidelines/ aria-label="Marketing Guidelines"><i class="fas fa-bullhorn"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="Site-build info" aria-label="Site-build info"><a target=_blank rel=noopener href=/site/ aria-label="Site-build info"><i class="fa-solid fa-hammer"></i></a></li></ul></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"><span class=td-footer__copyright>&copy;
2019&ndash;2024
<span class=td-footer__authors>OpenTelemetry Authors | Docs <a href=https://creativecommons.org/licenses/by/4.0 target=_blank rel=noopener class=external-link>CC BY 4.0</a></span></span><span class=td-footer__all_rights_reserved>All Rights Reserved</span></div></div></div></footer></div><script type=module async>
import mermaid from "https:\/\/cdn.jsdelivr.net\/npm\/mermaid@latest\/dist\/mermaid.esm.min.mjs";

(function($) {
    if ($('.mermaid').length == 0)  {
        mermaid.initialize({startOnLoad: false});
        return;
    }

    var params = null;

    
    
    var norm = function(defaultConfig, params) {
        var result = {};
        for (const key in defaultConfig) {
            const keyLower = key.toLowerCase();
            if (defaultConfig.hasOwnProperty(key) && params.hasOwnProperty(keyLower)) {
                if (typeof defaultConfig[key] === "object") {
                    result[key] = norm(defaultConfig[key], params[keyLower]);
                } else {
                    result[key] = params[keyLower];
                }
            }
        }
        return result;
    };

    var settings = norm(mermaid.mermaidAPI.defaultConfig, params);
    settings.startOnLoad = true;
    mermaid.initialize(settings);
})(jQuery);
</script><script src=/js/main.min.3c14e7e5e0e78442a68012d8588f161f08eb533f76f0e79151f7206ef5dbf376.js integrity="sha256-PBTn5eDnhEKmgBLYWI8WHwjrUz928OeRUfcgbvXb83Y=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.f724d3de49218995223b7316aa2e53e2b34bf42026bf399ebb21bb02212402d1.js integrity="sha256-9yTT3kkhiZUiO3MWqi5T4rNL9CAmvzmeuyG7AiEkAtE=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script><script src=/js/tracing.min.ee5437e257d05155e7ff9e0ed8aeb792cb5884964ffa1034069d6367a56f406a.js integrity="sha256-7lQ34lfQUVXn/54O2K63kstYhJZP+hA0Bp1jZ6VvQGo=" crossorigin=anonymous></script><script src=/js/navScroll.min.159e3e3cdaa12b4662a3af9efbaee1a884d2ad7d12bc3f329ada9c54166131f5.js integrity="sha256-FZ4+PNqhK0Zio6+e+67hqITSrX0SvD8ymtqcVBZhMfU=" crossorigin=anonymous></script></body></html>