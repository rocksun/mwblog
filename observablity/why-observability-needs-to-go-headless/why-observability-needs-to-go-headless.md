
<!--
title: 为什么可观测性需要无头化
cover: https://cdn.thenewstack.io/media/2025/02/a6b445ba-headless-observability.jpg
-->

> 译自：[Why Observability Needs To Go Headless](https://thenewstack.io/why-observability-needs-to-go-headless/)
> 作者：Franz Knupfer

通过降低长期日志数据存储的成本，无头可观测性最大限度地提高了遥测数据在解答关键业务问题方面的价值。

---


# 可观测性为何需要走向无头化

![关于可观测性为何需要走向无头化的特色图片](https://cdn.thenewstack.io/media/2025/02/a6b445ba-headless-observability-1024x576.jpg)

许多企业每天都会生成数TB的日志数据，导致数据摄取、存储和分析的成本居高不下。更糟糕的是，许多可观测性平台都是封闭的系统，难以将日志数据用于可观测性以外的用例，例如商业智能、数据科学和机器学习。

为了解决这两个问题，是时候采用无头可观测性了，这是一种将前端（可视化、查询和分析）与后端（数据摄取和存储）解耦的新方法——同时保持操作简单。


## 一种新方法：无头可观测性

无头可观测性结合了两个核心概念：无头架构和解耦的可观测性堆栈。采用无头方法，您可以为日志和遥测数据拥有多个“头部”，即可视化和分析工具。除了可观测性工具外，您的团队还可以使用网络安全、商业智能和其他分析工具来最大限度地提高数据的价值。所有可观测性组件（例如分析和遥测数据收集）都是解耦的，而不是整合到单个可观测性平台中。

虽然“无头可观测性”这个术语比较新，但其背后的概念已经确立。[Confluent](https://www.confluent.io/?utm_content=inline+mention) 已经撰写了关于[无头数据架构](https://www.confluent.io/blog/shift-left-headless-data-architecture-part-1/) 的概念，其中可以使用多个“头部”来分析数据。正如该文章所讨论的，无头数据架构与传统数据湖之间存在一些关键差异。数据不限于一个中心位置（这通常是数据湖的情况），任何服务都应该能够访问该数据。

与此同时，StarTree的[Neha Pawar](https://thenewstack.io/reimagining-observability-the-case-for-a-disaggregated-stack/) 在The New Stack上指出，可观测性需要转向一个解耦的堆栈，其中存储、摄取和可视化等组件是解耦的，从而提高灵活性和降低成本。虽然Pawar 侧重于通过可观测性的视角来关注数据解耦，但您可以轻松地将所有这些概念应用于一般的数据解耦，并添加某些可观测性组件，例如分析（“无头可观测性”）。

最终，无头可观测性和解耦可以解决类似的问题，包括降低成本、提高可扩展性以及使遥测数据可用于其他用例。但是，对于不想从头开始构建解决方案的组织来说，无头方法具有优势。使用无头方法，团队可以简化操作，使用更少的工程资源，并承担更少的风险。


## 走向无头化：简化解耦的可观测性

解耦的可观测性是关于将可观测性整体分解成更小、可组合的服务，这对于团队来说可能是一项艰巨的任务。另一方面，无头可观测性是关于使这种解耦变得简单——就像无头内容管理系统 (CMS) 简化了创建数字体验的过程一样。

Pawar 的文章表明，构建可组合的系统是可能的，但这涉及使用诸如[OpenTelemetry](https://thenewstack.io/opentelemetry-whats-new-with-the-second-biggest-cncf-project/)之类的收集工具，[流式管道](https://thenewstack.io/introduction-to-data-streaming) 如 Apache Kafka 或 Apache Flink，以及[云对象存储](https://thenewstack.io/object-storage-is-key-to-taming-cloud-costs/)，并结合 Apache Iceberg 等数据湖包装器。如果团队拥有从头开始构建解决方案所需的资源和能力，他们可以自己动手进行实时分析和无头可观测性，但这其中存在风险。

为了创建一个适用于可观测性和其他用例的解决方案，您需要构建一个足够快以进行实时分析且成本效益足够高以进行长期存储的数据湖。这包括一个具有[ETL](https://hydrolix.io/blog/etl-vs-elt/#h-what-is-etl)（提取-转换-加载）的实时流式管道，用于标准化和上下文化日志数据；一个用于在对象存储中构建、压缩和合并数据的系统；以及能够执行查询并在亚秒级查询延迟下运行仪表板的分析平台。
Netflix和其他大量使用日志数据的巨型企业或许拥有构建此类系统的资源——以及排查这些系统的风险承受能力，尤其是在系统使用超出预期的计算资源导致成本上升，以及最终性能令人失望的情况下。将Flink或Kafka之类的工具与高性能数据湖和实时分析相结合是一个复杂的项目，而且可能会出现很多问题。即使对于大型企业而言，从头开始构建系统通常也是不可行的，也不是工程资源的最佳用途。

无头可观测性对于那些同时使用成熟、完善的[前端](https://thenewstack.io/frontend-development/)和[后端](https://thenewstack.io/backend-development/)解决方案的团队来说，可能会简单得多，也需要更少的维护。这类似于使用内容分发网络 (CDN) 来交付无头内容管理系统 (CMS) 的资源，而不是工程师必须管理交付、性能和可靠性各个方面的全栈Web应用程序。

无头可观测性的关键在于后端：一个针对日志优化的存储解决方案，它处理所有繁重的日志摄取、存储和准备数据分析的工作。

## 无头可观测性对存储解决方案的要求
无头可观测性的基石是存储系统。总的来说，它需要执行以下操作：

**管理后端：**存储解决方案应处理后端的所有方面，从流式传输到处理，再到有效地存储数据以进行分析。**最大限度地提高前端互操作性：**该解决方案必须提供连接器，允许进行[数据联合](https://thenewstack.io/observability-isnt-enough-its-time-to-federate-log-data/)和查询，而无需移动数据。这包括与仪表板和可视化工具（解耦的仪表板）以及分析平台的互操作性。
让我们更详细地分解这两个属性。

**对象存储：**为了经济高效地存储PB级数据，存储系统需要偏向于横向扩展且廉价的对象存储，而不是昂贵的硬件选项，例如SSD。**实时流式传输：**实时流式传输对于可观测性等用例是必需的，但它不需要是“真正的”实时（以毫秒或纳秒为单位）。系统应该能够摄取每天TB级的数据，并在几秒钟内将数据提供给分析前端。通常，应对数据进行分区以最大限度地提高对象存储吞吐量，同时保持在典型的云提供商速率限制内。**流式ETL：**除了实时流式传输的挑战之外，日志数据通常还需要ETL过程。日志应标准化，并且通常需要其他上下文（例如有关其来源的信息）。并且此转换过程需要以最小的额外延迟进行。**合并、索引和压缩服务：**使用对象存储进行亚秒级分析查询需要大量的存储优化。这包括数据压缩，以最大限度地减少必须遍历然后从对象存储传输用于查询的数据量；合并服务，以优化分区以进行查询优化（例如分区剪枝）；以及全面的[索引策略](https://hydrolix.io/blog/indexing-all-columns/)。**针对日志数据进行优化：**对于用于可观测性的解决方案，它应该针对日志和事件数据进行优化——这意味着按时间戳对数据进行分区。但是，专门针对时间序列优化的解决方案并不是可观测性的好解决方案，因为它们通常会聚合数据。这使得运维团队无法获得诊断问题根本原因所需的粒度。**与仪表板和可视化工具兼容：**这包括Grafana、Superset甚至Kibana（传统上仅与ELK堆栈兼容）之类的工具，因此团队可以使用最适合他们的工具访问日志数据。**与可观测性和分析平台兼容：**这包括[Splunk](https://www.splunk.com/en_us/products/observability.html?utm_content=inline+mention)之类的可观测性工具以及Databricks之类的分析平台。您应该能够查询存储解决方案中的数据，而无需将所有数据迁移到新平台。

## 无头方法的优势
无头方法使分析用例（从可观测性到商业智能）变得容易得多。以下是无头方法的更普遍的优势：
**简化的日志存储:** 无需管理多个存储解决方案（以及每个系统的访问和安全），您可以将所有日志和事件数据保存在一个解决方案中。**经济高效的PB级数据存储:** 使用对象存储的解决方案更经济高效，您可以与云提供商协商更大数据量的折扣。**更易于安全访问:** 由于数据保存在一个地方，因此更易于设置安全、权限和访问。**无需复杂的迁移或数据重复:** 无需在多个地方复制数据（例如使用反规范化）或执行复杂、资源密集型的数据迁移，您拥有单一的事实来源。**与完全DIY相比，风险和开销更低:** 与工程团队构建和优化所有组件的完全分散式系统不同，无头方法更快、更容易部署。**释放遥测数据的价值:** 无需依赖锁定遥测数据用于可观测性并在短时间后丢弃数据的供应商。

让我们也来看一个无头可观测性的具体用例。

## 解锁可观测性的价值：无头方法的用例
一些运维团队和领导者可能想知道，是否值得首先解锁日志数据在可观测性之外用例的价值。毕竟，一些服务会生成海量数据，这些数据似乎除了直接的可观测性之外没有太多用途。例如，为什么数据科学团队要分析数千个短暂的Kubernetes容器的日志？

并非所有日志都具有长期价值，但这是无头可观测性和解耦存储的优势之一。团队可以自由灵活地确定哪些日志应保留更长时间。Web应用防火墙 (WAF) 和其他安全日志可以长期保留，并提供给网络安全团队和威胁猎手。其他应用程序日志可以提供有关资源如何用于容量规划和异常检测的长期见解。

让我们更仔细地研究一个真实的、切实的用例，其中可观测性数据对其他团队很有价值：真实用户监控 (RUM)。在可观测性领域，RUM 允许团队主动监控最终用户体验 Web 应用程序的情况。诸如页面加载缓慢等问题可以在激怒用户之前得到缓解。

除了可观测性之外，RUM 数据还可以提供有关最终用户如何与您的品牌和产品互动的见解。此数据对于需要制定战略的营销、广告和领导团队来说非常宝贵。对于生成TB级遥测数据以准确显示用户如何与其 Web 属性互动的企业而言，确保快速的页面加载时间至关重要，但这不应该是该数据的唯一用例。

作为一个真实的例子，许多企业使用 CDN 日志数据进行真实用户监控。短期内，监控 CDN 对于确保良好的用户体验和数字资产的快速加载时间非常重要。但是，能够长期且经济高效地保留海量日志数据（包括 CDN 数据）为企业提供了某些优势。例如，以前由于成本原因无法长期保留日志数据的重大流媒体和媒体广播公司现在正在分析这些数据以进行容量规划、检测和减轻流媒体盗版，并且更好地了解其最终用户如何与直播和点播流媒体内容互动。

对于这些每天通常会生成 TB 级 CDN 日志数据的企业而言，即使是基本的[监控和可观测性](https://thenewstack.io/monitoring-vs-observability-whats-the-difference/)用例，由于成本和规模问题，传统 SaaS 可观测性供应商也无法实现。通过对 CDN 日志使用无头可观测性方法（例如带有 Grafana 仪表板的 Hydrolix），他们不仅能够解锁更高的事件可观测性和更低的成本，还可以将这些数据用于各种其他用例。他们也不需要从头开始构建整个分散式可观测性解决方案。

## 无头可观测性的障碍
无头方法的好处对于用户来说是显而易见的，但对于可观测性和其他分析平台来说，实施和获利可能很困难。传统的可观测性软件即服务 (SaaS) 模型要求在可观测性平台中短期存储日志数据，并最大限度地提高该数据对运维团队的可用性和价值。为此，传统平台构建了丰富的代理和连接器生态系统——但仅限于传入数据。数据一旦处于静止状态，基本上就处于一个封闭的环境中：难以迁移，无法联合。
即使数据联邦成为可能，典型的可观测性平台通常也不会存储足够长的时间以最大限度地提高其与其他分析平台的可用性，而且它们通常使用专有的查询语言而不是[SQL](https://roadmap.sh/sql)。为了解决这个问题，可观测性平台需要过渡到解耦存储——但是许多平台已经在其当前的基础设施中积累了过多的技术债务，使得这种转变变得困难甚至不可能。

因此，传统的SaaS可观测性平台并不适合无头可观测性，导致市场上出现Iceberg和Hydrolix等解决方案可以填补的空白。

最后，虽然较低的总拥有成本是采用无头架构的直接优势，但民主化和最大化遥测数据价值的长期利益对于许多企业来说仍然是无形的。这并不令人意外——许多团队都陷于回答短期问题，例如：“我应该保留这些数据多久？”和“如何降低成本？”对于这些企业来说，出于可观测性以外的用例而长期保留大量遥测数据是不可能的。

领导者及其团队应该花时间考虑其业务的未来，而不仅仅是现在，可以通过询问以下问题来做到这一点：“如果我们可以长期保留所有这些数据，而不用担心高成本，并使其能够被我们所有团队访问，那么我们可以回答哪些关键业务问题？”

[了解Hydrolix](https://hydrolix.io/hydrolix-enterprise/)如何通过最大限度地提高解耦对象存储的性能来帮助您更经济高效地保留更多数据更长时间。

[YOUTUBE.COM/THENEWSTACK](https://youtube.com/thenewstack?sub_confirmation=1) 技术发展迅速，不要错过任何一集。订阅我们的YouTube频道，收看我们所有的播客、访谈、演示等等。